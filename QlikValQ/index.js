! function() {
    var window = this,
        root, factory;
    root = window, factory = function() {
        return function(modules) {
            var installedModules = {};

            function __webpack_require__(moduleId) {
                if (installedModules[moduleId]) return installedModules[moduleId].exports;
                var module = installedModules[moduleId] = {
                    i: moduleId,
                    l: !1,
                    exports: {}
                };
                return modules[moduleId].call(module.exports, module, module.exports, __webpack_require__), module.l = !0, module.exports
            }
            return __webpack_require__.m = modules, __webpack_require__.c = installedModules, __webpack_require__.d = function(exports, name, getter) {
                __webpack_require__.o(exports, name) || Object.defineProperty(exports, name, {
                    enumerable: !0,
                    get: getter
                })
            }, __webpack_require__.r = function(exports) {
                "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(exports, Symbol.toStringTag, {
                    value: "Module"
                }), Object.defineProperty(exports, "__esModule", {
                    value: !0
                })
            }, __webpack_require__.t = function(value, mode) {
                if (1 & mode && (value = __webpack_require__(value)), 8 & mode) return value;
                if (4 & mode && "object" == typeof value && value && value.__esModule) return value;
                var ns = Object.create(null);
                if (__webpack_require__.r(ns), Object.defineProperty(ns, "default", {
                        enumerable: !0,
                        value: value
                    }), 2 & mode && "string" != typeof value)
                    for (var key in value) __webpack_require__.d(ns, key, function(key) {
                        return value[key]
                    }.bind(null, key));
                return ns
            }, __webpack_require__.n = function(module) {
                var getter = module && module.__esModule ? function() {
                    return module.default
                } : function() {
                    return module
                };
                return __webpack_require__.d(getter, "a", getter), getter
            }, __webpack_require__.o = function(object, property) {
                return Object.prototype.hasOwnProperty.call(object, property)
            }, __webpack_require__.p = "", __webpack_require__(__webpack_require__.s = 121)
        }([function(module, exports, __webpack_require__) {
            var __WEBPACK_AMD_DEFINE_RESULT__;
            ! function(global, factory) {
                "use strict";
                "object" == typeof module.exports ? module.exports = global.document ? factory(global, !0) : function(w) {
                    if (!w.document) throw new Error("jQuery requires a window with a document");
                    return factory(w)
                } : factory(global)
            }(void 0 !== window ? window : this, function(window, noGlobal) {
                "use strict";
                var arr = [],
                    document = window.document,
                    getProto = Object.getPrototypeOf,
                    slice = arr.slice,
                    concat = arr.concat,
                    push = arr.push,
                    indexOf = arr.indexOf,
                    class2type = {},
                    toString = class2type.toString,
                    hasOwn = class2type.hasOwnProperty,
                    fnToString = hasOwn.toString,
                    ObjectFunctionString = fnToString.call(Object),
                    support = {},
                    isFunction = function(obj) {
                        return "function" == typeof obj && "number" != typeof obj.nodeType
                    },
                    isWindow = function(obj) {
                        return null != obj && obj === obj.window
                    },
                    preservedScriptAttributes = {
                        type: !0,
                        src: !0,
                        nonce: !0,
                        noModule: !0
                    };

                function DOMEval(code, node, doc) {
                    var i, val, script = (doc = doc || document).createElement("script");
                    if (script.text = code, node)
                        for (i in preservedScriptAttributes)(val = node[i] || node.getAttribute && node.getAttribute(i)) && script.setAttribute(i, val);
                    doc.head.appendChild(script).parentNode.removeChild(script)
                }

                function toType(obj) {
                    return null == obj ? obj + "" : "object" == typeof obj || "function" == typeof obj ? class2type[toString.call(obj)] || "object" : typeof obj
                }
                var jQuery = function(selector, context) {
                        return new jQuery.fn.init(selector, context)
                    },
                    rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;

                function isArrayLike(obj) {
                    var length = !!obj && "length" in obj && obj.length,
                        type = toType(obj);
                    return !isFunction(obj) && !isWindow(obj) && ("array" === type || 0 === length || "number" == typeof length && length > 0 && length - 1 in obj)
                }
                jQuery.fn = jQuery.prototype = {
                    jquery: "3.4.0",
                    constructor: jQuery,
                    length: 0,
                    toArray: function() {
                        return slice.call(this)
                    },
                    get: function(num) {
                        return null == num ? slice.call(this) : num < 0 ? this[num + this.length] : this[num]
                    },
                    pushStack: function(elems) {
                        var ret = jQuery.merge(this.constructor(), elems);
                        return ret.prevObject = this, ret
                    },
                    each: function(callback) {
                        return jQuery.each(this, callback)
                    },
                    map: function(callback) {
                        return this.pushStack(jQuery.map(this, function(elem, i) {
                            return callback.call(elem, i, elem)
                        }))
                    },
                    slice: function() {
                        return this.pushStack(slice.apply(this, arguments))
                    },
                    first: function() {
                        return this.eq(0)
                    },
                    last: function() {
                        return this.eq(-1)
                    },
                    eq: function(i) {
                        var len = this.length,
                            j = +i + (i < 0 ? len : 0);
                        return this.pushStack(j >= 0 && j < len ? [this[j]] : [])
                    },
                    end: function() {
                        return this.prevObject || this.constructor()
                    },
                    push: push,
                    sort: arr.sort,
                    splice: arr.splice
                }, jQuery.extend = jQuery.fn.extend = function() {
                    var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {},
                        i = 1,
                        length = arguments.length,
                        deep = !1;
                    for ("boolean" == typeof target && (deep = target, target = arguments[i] || {}, i++), "object" == typeof target || isFunction(target) || (target = {}), i === length && (target = this, i--); i < length; i++)
                        if (null != (options = arguments[i]))
                            for (name in options) copy = options[name], "__proto__" !== name && target !== copy && (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = Array.isArray(copy))) ? (src = target[name], clone = copyIsArray && !Array.isArray(src) ? [] : copyIsArray || jQuery.isPlainObject(src) ? src : {}, copyIsArray = !1, target[name] = jQuery.extend(deep, clone, copy)) : void 0 !== copy && (target[name] = copy));
                    return target
                }, jQuery.extend({
                    expando: "jQuery" + ("3.4.0" + Math.random()).replace(/\D/g, ""),
                    isReady: !0,
                    error: function(msg) {
                        throw new Error(msg)
                    },
                    noop: function() {},
                    isPlainObject: function(obj) {
                        var proto, Ctor;
                        return !(!obj || "[object Object]" !== toString.call(obj)) && (!(proto = getProto(obj)) || "function" == typeof(Ctor = hasOwn.call(proto, "constructor") && proto.constructor) && fnToString.call(Ctor) === ObjectFunctionString)
                    },
                    isEmptyObject: function(obj) {
                        var name;
                        for (name in obj) return !1;
                        return !0
                    },
                    globalEval: function(code, options) {
                        DOMEval(code, {
                            nonce: options && options.nonce
                        })
                    },
                    each: function(obj, callback) {
                        var length, i = 0;
                        if (isArrayLike(obj))
                            for (length = obj.length; i < length && !1 !== callback.call(obj[i], i, obj[i]); i++);
                        else
                            for (i in obj)
                                if (!1 === callback.call(obj[i], i, obj[i])) break;
                        return obj
                    },
                    trim: function(text) {
                        return null == text ? "" : (text + "").replace(rtrim, "")
                    },
                    makeArray: function(arr, results) {
                        var ret = results || [];
                        return null != arr && (isArrayLike(Object(arr)) ? jQuery.merge(ret, "string" == typeof arr ? [arr] : arr) : push.call(ret, arr)), ret
                    },
                    inArray: function(elem, arr, i) {
                        return null == arr ? -1 : indexOf.call(arr, elem, i)
                    },
                    merge: function(first, second) {
                        for (var len = +second.length, j = 0, i = first.length; j < len; j++) first[i++] = second[j];
                        return first.length = i, first
                    },
                    grep: function(elems, callback, invert) {
                        for (var matches = [], i = 0, length = elems.length, callbackExpect = !invert; i < length; i++) !callback(elems[i], i) !== callbackExpect && matches.push(elems[i]);
                        return matches
                    },
                    map: function(elems, callback, arg) {
                        var length, value, i = 0,
                            ret = [];
                        if (isArrayLike(elems))
                            for (length = elems.length; i < length; i++) null != (value = callback(elems[i], i, arg)) && ret.push(value);
                        else
                            for (i in elems) null != (value = callback(elems[i], i, arg)) && ret.push(value);
                        return concat.apply([], ret)
                    },
                    guid: 1,
                    support: support
                }), "function" == typeof Symbol && (jQuery.fn[Symbol.iterator] = arr[Symbol.iterator]), jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function(i, name) {
                    class2type["[object " + name + "]"] = name.toLowerCase()
                });
                var Sizzle = function(window) {
                    var i, support, Expr, getText, isXML, tokenize, compile, select, outermostContext, sortInput, hasDuplicate, setDocument, document, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = "sizzle" + 1 * new Date,
                        preferredDoc = window.document,
                        dirruns = 0,
                        done = 0,
                        classCache = createCache(),
                        tokenCache = createCache(),
                        compilerCache = createCache(),
                        nonnativeSelectorCache = createCache(),
                        sortOrder = function(a, b) {
                            return a === b && (hasDuplicate = !0), 0
                        },
                        hasOwn = {}.hasOwnProperty,
                        arr = [],
                        pop = arr.pop,
                        push_native = arr.push,
                        push = arr.push,
                        slice = arr.slice,
                        indexOf = function(list, elem) {
                            for (var i = 0, len = list.length; i < len; i++)
                                if (list[i] === elem) return i;
                            return -1
                        },
                        booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
                        whitespace = "[\\x20\\t\\r\\n\\f]",
                        identifier = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+",
                        attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace + "*([*^$|!~]?=)" + whitespace + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace + "*\\]",
                        pseudos = ":(" + identifier + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|.*)\\)|)",
                        rwhitespace = new RegExp(whitespace + "+", "g"),
                        rtrim = new RegExp("^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g"),
                        rcomma = new RegExp("^" + whitespace + "*," + whitespace + "*"),
                        rcombinators = new RegExp("^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*"),
                        rdescend = new RegExp(whitespace + "|>"),
                        rpseudo = new RegExp(pseudos),
                        ridentifier = new RegExp("^" + identifier + "$"),
                        matchExpr = {
                            ID: new RegExp("^#(" + identifier + ")"),
                            CLASS: new RegExp("^\\.(" + identifier + ")"),
                            TAG: new RegExp("^(" + identifier + "|[*])"),
                            ATTR: new RegExp("^" + attributes),
                            PSEUDO: new RegExp("^" + pseudos),
                            CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace + "*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace + "*(\\d+)|))" + whitespace + "*\\)|)", "i"),
                            bool: new RegExp("^(?:" + booleans + ")$", "i"),
                            needsContext: new RegExp("^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i")
                        },
                        rhtml = /HTML$/i,
                        rinputs = /^(?:input|select|textarea|button)$/i,
                        rheader = /^h\d$/i,
                        rnative = /^[^{]+\{\s*\[native \w/,
                        rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                        rsibling = /[+~]/,
                        runescape = new RegExp("\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig"),
                        funescape = function(_, escaped, escapedWhitespace) {
                            var high = "0x" + escaped - 65536;
                            return high != high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, 1023 & high | 56320)
                        },
                        rcssescape = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
                        fcssescape = function(ch, asCodePoint) {
                            return asCodePoint ? "\0" === ch ? "ï¿½" : ch.slice(0, -1) + "\\" + ch.charCodeAt(ch.length - 1).toString(16) + " " : "\\" + ch
                        },
                        unloadHandler = function() {
                            setDocument()
                        },
                        inDisabledFieldset = addCombinator(function(elem) {
                            return !0 === elem.disabled && "fieldset" === elem.nodeName.toLowerCase()
                        }, {
                            dir: "parentNode",
                            next: "legend"
                        });
                    try {
                        push.apply(arr = slice.call(preferredDoc.childNodes), preferredDoc.childNodes), arr[preferredDoc.childNodes.length].nodeType
                    } catch (e) {
                        push = {
                            apply: arr.length ? function(target, els) {
                                push_native.apply(target, slice.call(els))
                            } : function(target, els) {
                                for (var j = target.length, i = 0; target[j++] = els[i++];);
                                target.length = j - 1
                            }
                        }
                    }

                    function Sizzle(selector, context, results, seed) {
                        var m, i, elem, nid, match, groups, newSelector, newContext = context && context.ownerDocument,
                            nodeType = context ? context.nodeType : 9;
                        if (results = results || [], "string" != typeof selector || !selector || 1 !== nodeType && 9 !== nodeType && 11 !== nodeType) return results;
                        if (!seed && ((context ? context.ownerDocument || context : preferredDoc) !== document && setDocument(context), context = context || document, documentIsHTML)) {
                            if (11 !== nodeType && (match = rquickExpr.exec(selector)))
                                if (m = match[1]) {
                                    if (9 === nodeType) {
                                        if (!(elem = context.getElementById(m))) return results;
                                        if (elem.id === m) return results.push(elem), results
                                    } else if (newContext && (elem = newContext.getElementById(m)) && contains(context, elem) && elem.id === m) return results.push(elem), results
                                } else {
                                    if (match[2]) return push.apply(results, context.getElementsByTagName(selector)), results;
                                    if ((m = match[3]) && support.getElementsByClassName && context.getElementsByClassName) return push.apply(results, context.getElementsByClassName(m)), results
                                } if (support.qsa && !nonnativeSelectorCache[selector + " "] && (!rbuggyQSA || !rbuggyQSA.test(selector)) && (1 !== nodeType || "object" !== context.nodeName.toLowerCase())) {
                                if (newSelector = selector, newContext = context, 1 === nodeType && rdescend.test(selector)) {
                                    for ((nid = context.getAttribute("id")) ? nid = nid.replace(rcssescape, fcssescape) : context.setAttribute("id", nid = expando), i = (groups = tokenize(selector)).length; i--;) groups[i] = "#" + nid + " " + toSelector(groups[i]);
                                    newSelector = groups.join(","), newContext = rsibling.test(selector) && testContext(context.parentNode) || context
                                }
                                try {
                                    return push.apply(results, newContext.querySelectorAll(newSelector)), results
                                } catch (qsaError) {
                                    nonnativeSelectorCache(selector, !0)
                                } finally {
                                    nid === expando && context.removeAttribute("id")
                                }
                            }
                        }
                        return select(selector.replace(rtrim, "$1"), context, results, seed)
                    }

                    function createCache() {
                        var keys = [];
                        return function cache(key, value) {
                            return keys.push(key + " ") > Expr.cacheLength && delete cache[keys.shift()], cache[key + " "] = value
                        }
                    }

                    function markFunction(fn) {
                        return fn[expando] = !0, fn
                    }

                    function assert(fn) {
                        var el = document.createElement("fieldset");
                        try {
                            return !!fn(el)
                        } catch (e) {
                            return !1
                        } finally {
                            el.parentNode && el.parentNode.removeChild(el), el = null
                        }
                    }

                    function addHandle(attrs, handler) {
                        for (var arr = attrs.split("|"), i = arr.length; i--;) Expr.attrHandle[arr[i]] = handler
                    }

                    function siblingCheck(a, b) {
                        var cur = b && a,
                            diff = cur && 1 === a.nodeType && 1 === b.nodeType && a.sourceIndex - b.sourceIndex;
                        if (diff) return diff;
                        if (cur)
                            for (; cur = cur.nextSibling;)
                                if (cur === b) return -1;
                        return a ? 1 : -1
                    }

                    function createInputPseudo(type) {
                        return function(elem) {
                            return "input" === elem.nodeName.toLowerCase() && elem.type === type
                        }
                    }

                    function createButtonPseudo(type) {
                        return function(elem) {
                            var name = elem.nodeName.toLowerCase();
                            return ("input" === name || "button" === name) && elem.type === type
                        }
                    }

                    function createDisabledPseudo(disabled) {
                        return function(elem) {
                            return "form" in elem ? elem.parentNode && !1 === elem.disabled ? "label" in elem ? "label" in elem.parentNode ? elem.parentNode.disabled === disabled : elem.disabled === disabled : elem.isDisabled === disabled || elem.isDisabled !== !disabled && inDisabledFieldset(elem) === disabled : elem.disabled === disabled : "label" in elem && elem.disabled === disabled
                        }
                    }

                    function createPositionalPseudo(fn) {
                        return markFunction(function(argument) {
                            return argument = +argument, markFunction(function(seed, matches) {
                                for (var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length; i--;) seed[j = matchIndexes[i]] && (seed[j] = !(matches[j] = seed[j]))
                            })
                        })
                    }

                    function testContext(context) {
                        return context && void 0 !== context.getElementsByTagName && context
                    }
                    for (i in support = Sizzle.support = {}, isXML = Sizzle.isXML = function(elem) {
                            var namespace = elem.namespaceURI,
                                docElem = (elem.ownerDocument || elem).documentElement;
                            return !rhtml.test(namespace || docElem && docElem.nodeName || "HTML")
                        }, setDocument = Sizzle.setDocument = function(node) {
                            var hasCompare, subWindow, doc = node ? node.ownerDocument || node : preferredDoc;
                            return doc !== document && 9 === doc.nodeType && doc.documentElement ? (docElem = (document = doc).documentElement, documentIsHTML = !isXML(document), preferredDoc !== document && (subWindow = document.defaultView) && subWindow.top !== subWindow && (subWindow.addEventListener ? subWindow.addEventListener("unload", unloadHandler, !1) : subWindow.attachEvent && subWindow.attachEvent("onunload", unloadHandler)), support.attributes = assert(function(el) {
                                return el.className = "i", !el.getAttribute("className")
                            }), support.getElementsByTagName = assert(function(el) {
                                return el.appendChild(document.createComment("")), !el.getElementsByTagName("*").length
                            }), support.getElementsByClassName = rnative.test(document.getElementsByClassName), support.getById = assert(function(el) {
                                return docElem.appendChild(el).id = expando, !document.getElementsByName || !document.getElementsByName(expando).length
                            }), support.getById ? (Expr.filter.ID = function(id) {
                                var attrId = id.replace(runescape, funescape);
                                return function(elem) {
                                    return elem.getAttribute("id") === attrId
                                }
                            }, Expr.find.ID = function(id, context) {
                                if (void 0 !== context.getElementById && documentIsHTML) {
                                    var elem = context.getElementById(id);
                                    return elem ? [elem] : []
                                }
                            }) : (Expr.filter.ID = function(id) {
                                var attrId = id.replace(runescape, funescape);
                                return function(elem) {
                                    var node = void 0 !== elem.getAttributeNode && elem.getAttributeNode("id");
                                    return node && node.value === attrId
                                }
                            }, Expr.find.ID = function(id, context) {
                                if (void 0 !== context.getElementById && documentIsHTML) {
                                    var node, i, elems, elem = context.getElementById(id);
                                    if (elem) {
                                        if ((node = elem.getAttributeNode("id")) && node.value === id) return [elem];
                                        for (elems = context.getElementsByName(id), i = 0; elem = elems[i++];)
                                            if ((node = elem.getAttributeNode("id")) && node.value === id) return [elem]
                                    }
                                    return []
                                }
                            }), Expr.find.TAG = support.getElementsByTagName ? function(tag, context) {
                                return void 0 !== context.getElementsByTagName ? context.getElementsByTagName(tag) : support.qsa ? context.querySelectorAll(tag) : void 0
                            } : function(tag, context) {
                                var elem, tmp = [],
                                    i = 0,
                                    results = context.getElementsByTagName(tag);
                                if ("*" === tag) {
                                    for (; elem = results[i++];) 1 === elem.nodeType && tmp.push(elem);
                                    return tmp
                                }
                                return results
                            }, Expr.find.CLASS = support.getElementsByClassName && function(className, context) {
                                if (void 0 !== context.getElementsByClassName && documentIsHTML) return context.getElementsByClassName(className)
                            }, rbuggyMatches = [], rbuggyQSA = [], (support.qsa = rnative.test(document.querySelectorAll)) && (assert(function(el) {
                                docElem.appendChild(el).innerHTML = "<a id='" + expando + "'></a><select id='" + expando + "-\r\\' msallowcapture=''><option selected=''></option></select>", el.querySelectorAll("[msallowcapture^='']").length && rbuggyQSA.push("[*^$]=" + whitespace + "*(?:''|\"\")"), el.querySelectorAll("[selected]").length || rbuggyQSA.push("\\[" + whitespace + "*(?:value|" + booleans + ")"), el.querySelectorAll("[id~=" + expando + "-]").length || rbuggyQSA.push("~="), el.querySelectorAll(":checked").length || rbuggyQSA.push(":checked"), el.querySelectorAll("a#" + expando + "+*").length || rbuggyQSA.push(".#.+[+~]")
                            }), assert(function(el) {
                                el.innerHTML = "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
                                var input = document.createElement("input");
                                input.setAttribute("type", "hidden"), el.appendChild(input).setAttribute("name", "D"), el.querySelectorAll("[name=d]").length && rbuggyQSA.push("name" + whitespace + "*[*^$|!~]?="), 2 !== el.querySelectorAll(":enabled").length && rbuggyQSA.push(":enabled", ":disabled"), docElem.appendChild(el).disabled = !0, 2 !== el.querySelectorAll(":disabled").length && rbuggyQSA.push(":enabled", ":disabled"), el.querySelectorAll("*,:x"), rbuggyQSA.push(",.*:")
                            })), (support.matchesSelector = rnative.test(matches = docElem.matches || docElem.webkitMatchesSelector || docElem.mozMatchesSelector || docElem.oMatchesSelector || docElem.msMatchesSelector)) && assert(function(el) {
                                support.disconnectedMatch = matches.call(el, "*"), matches.call(el, "[s!='']:x"), rbuggyMatches.push("!=", pseudos)
                            }), rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join("|")), rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join("|")), hasCompare = rnative.test(docElem.compareDocumentPosition), contains = hasCompare || rnative.test(docElem.contains) ? function(a, b) {
                                var adown = 9 === a.nodeType ? a.documentElement : a,
                                    bup = b && b.parentNode;
                                return a === bup || !(!bup || 1 !== bup.nodeType || !(adown.contains ? adown.contains(bup) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(bup)))
                            } : function(a, b) {
                                if (b)
                                    for (; b = b.parentNode;)
                                        if (b === a) return !0;
                                return !1
                            }, sortOrder = hasCompare ? function(a, b) {
                                if (a === b) return hasDuplicate = !0, 0;
                                var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
                                return compare || (1 & (compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1) || !support.sortDetached && b.compareDocumentPosition(a) === compare ? a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ? -1 : b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ? 1 : sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0 : 4 & compare ? -1 : 1)
                            } : function(a, b) {
                                if (a === b) return hasDuplicate = !0, 0;
                                var cur, i = 0,
                                    aup = a.parentNode,
                                    bup = b.parentNode,
                                    ap = [a],
                                    bp = [b];
                                if (!aup || !bup) return a === document ? -1 : b === document ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0;
                                if (aup === bup) return siblingCheck(a, b);
                                for (cur = a; cur = cur.parentNode;) ap.unshift(cur);
                                for (cur = b; cur = cur.parentNode;) bp.unshift(cur);
                                for (; ap[i] === bp[i];) i++;
                                return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0
                            }, document) : document
                        }, Sizzle.matches = function(expr, elements) {
                            return Sizzle(expr, null, null, elements)
                        }, Sizzle.matchesSelector = function(elem, expr) {
                            if ((elem.ownerDocument || elem) !== document && setDocument(elem), support.matchesSelector && documentIsHTML && !nonnativeSelectorCache[expr + " "] && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) try {
                                var ret = matches.call(elem, expr);
                                if (ret || support.disconnectedMatch || elem.document && 11 !== elem.document.nodeType) return ret
                            } catch (e) {
                                nonnativeSelectorCache(expr, !0)
                            }
                            return Sizzle(expr, document, null, [elem]).length > 0
                        }, Sizzle.contains = function(context, elem) {
                            return (context.ownerDocument || context) !== document && setDocument(context), contains(context, elem)
                        }, Sizzle.attr = function(elem, name) {
                            (elem.ownerDocument || elem) !== document && setDocument(elem);
                            var fn = Expr.attrHandle[name.toLowerCase()],
                                val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : void 0;
                            return void 0 !== val ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null
                        }, Sizzle.escape = function(sel) {
                            return (sel + "").replace(rcssescape, fcssescape)
                        }, Sizzle.error = function(msg) {
                            throw new Error("Syntax error, unrecognized expression: " + msg)
                        }, Sizzle.uniqueSort = function(results) {
                            var elem, duplicates = [],
                                j = 0,
                                i = 0;
                            if (hasDuplicate = !support.detectDuplicates, sortInput = !support.sortStable && results.slice(0), results.sort(sortOrder), hasDuplicate) {
                                for (; elem = results[i++];) elem === results[i] && (j = duplicates.push(i));
                                for (; j--;) results.splice(duplicates[j], 1)
                            }
                            return sortInput = null, results
                        }, getText = Sizzle.getText = function(elem) {
                            var node, ret = "",
                                i = 0,
                                nodeType = elem.nodeType;
                            if (nodeType) {
                                if (1 === nodeType || 9 === nodeType || 11 === nodeType) {
                                    if ("string" == typeof elem.textContent) return elem.textContent;
                                    for (elem = elem.firstChild; elem; elem = elem.nextSibling) ret += getText(elem)
                                } else if (3 === nodeType || 4 === nodeType) return elem.nodeValue
                            } else
                                for (; node = elem[i++];) ret += getText(node);
                            return ret
                        }, (Expr = Sizzle.selectors = {
                            cacheLength: 50,
                            createPseudo: markFunction,
                            match: matchExpr,
                            attrHandle: {},
                            find: {},
                            relative: {
                                ">": {
                                    dir: "parentNode",
                                    first: !0
                                },
                                " ": {
                                    dir: "parentNode"
                                },
                                "+": {
                                    dir: "previousSibling",
                                    first: !0
                                },
                                "~": {
                                    dir: "previousSibling"
                                }
                            },
                            preFilter: {
                                ATTR: function(match) {
                                    return match[1] = match[1].replace(runescape, funescape), match[3] = (match[3] || match[4] || match[5] || "").replace(runescape, funescape), "~=" === match[2] && (match[3] = " " + match[3] + " "), match.slice(0, 4)
                                },
                                CHILD: function(match) {
                                    return match[1] = match[1].toLowerCase(), "nth" === match[1].slice(0, 3) ? (match[3] || Sizzle.error(match[0]), match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * ("even" === match[3] || "odd" === match[3])), match[5] = +(match[7] + match[8] || "odd" === match[3])) : match[3] && Sizzle.error(match[0]), match
                                },
                                PSEUDO: function(match) {
                                    var excess, unquoted = !match[6] && match[2];
                                    return matchExpr.CHILD.test(match[0]) ? null : (match[3] ? match[2] = match[4] || match[5] || "" : unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, !0)) && (excess = unquoted.indexOf(")", unquoted.length - excess) - unquoted.length) && (match[0] = match[0].slice(0, excess), match[2] = unquoted.slice(0, excess)), match.slice(0, 3))
                                }
                            },
                            filter: {
                                TAG: function(nodeNameSelector) {
                                    var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();
                                    return "*" === nodeNameSelector ? function() {
                                        return !0
                                    } : function(elem) {
                                        return elem.nodeName && elem.nodeName.toLowerCase() === nodeName
                                    }
                                },
                                CLASS: function(className) {
                                    var pattern = classCache[className + " "];
                                    return pattern || (pattern = new RegExp("(^|" + whitespace + ")" + className + "(" + whitespace + "|$)")) && classCache(className, function(elem) {
                                        return pattern.test("string" == typeof elem.className && elem.className || void 0 !== elem.getAttribute && elem.getAttribute("class") || "")
                                    })
                                },
                                ATTR: function(name, operator, check) {
                                    return function(elem) {
                                        var result = Sizzle.attr(elem, name);
                                        return null == result ? "!=" === operator : !operator || (result += "", "=" === operator ? result === check : "!=" === operator ? result !== check : "^=" === operator ? check && 0 === result.indexOf(check) : "*=" === operator ? check && result.indexOf(check) > -1 : "$=" === operator ? check && result.slice(-check.length) === check : "~=" === operator ? (" " + result.replace(rwhitespace, " ") + " ").indexOf(check) > -1 : "|=" === operator && (result === check || result.slice(0, check.length + 1) === check + "-"))
                                    }
                                },
                                CHILD: function(type, what, argument, first, last) {
                                    var simple = "nth" !== type.slice(0, 3),
                                        forward = "last" !== type.slice(-4),
                                        ofType = "of-type" === what;
                                    return 1 === first && 0 === last ? function(elem) {
                                        return !!elem.parentNode
                                    } : function(elem, context, xml) {
                                        var cache, uniqueCache, outerCache, node, nodeIndex, start, dir = simple !== forward ? "nextSibling" : "previousSibling",
                                            parent = elem.parentNode,
                                            name = ofType && elem.nodeName.toLowerCase(),
                                            useCache = !xml && !ofType,
                                            diff = !1;
                                        if (parent) {
                                            if (simple) {
                                                for (; dir;) {
                                                    for (node = elem; node = node[dir];)
                                                        if (ofType ? node.nodeName.toLowerCase() === name : 1 === node.nodeType) return !1;
                                                    start = dir = "only" === type && !start && "nextSibling"
                                                }
                                                return !0
                                            }
                                            if (start = [forward ? parent.firstChild : parent.lastChild], forward && useCache) {
                                                for (diff = (nodeIndex = (cache = (uniqueCache = (outerCache = (node = parent)[expando] || (node[expando] = {}))[node.uniqueID] || (outerCache[node.uniqueID] = {}))[type] || [])[0] === dirruns && cache[1]) && cache[2], node = nodeIndex && parent.childNodes[nodeIndex]; node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop();)
                                                    if (1 === node.nodeType && ++diff && node === elem) {
                                                        uniqueCache[type] = [dirruns, nodeIndex, diff];
                                                        break
                                                    }
                                            } else if (useCache && (diff = nodeIndex = (cache = (uniqueCache = (outerCache = (node = elem)[expando] || (node[expando] = {}))[node.uniqueID] || (outerCache[node.uniqueID] = {}))[type] || [])[0] === dirruns && cache[1]), !1 === diff)
                                                for (;
                                                    (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) && ((ofType ? node.nodeName.toLowerCase() !== name : 1 !== node.nodeType) || !++diff || (useCache && ((uniqueCache = (outerCache = node[expando] || (node[expando] = {}))[node.uniqueID] || (outerCache[node.uniqueID] = {}))[type] = [dirruns, diff]), node !== elem)););
                                            return (diff -= last) === first || diff % first == 0 && diff / first >= 0
                                        }
                                    }
                                },
                                PSEUDO: function(pseudo, argument) {
                                    var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error("unsupported pseudo: " + pseudo);
                                    return fn[expando] ? fn(argument) : fn.length > 1 ? (args = [pseudo, pseudo, "", argument], Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function(seed, matches) {
                                        for (var idx, matched = fn(seed, argument), i = matched.length; i--;) seed[idx = indexOf(seed, matched[i])] = !(matches[idx] = matched[i])
                                    }) : function(elem) {
                                        return fn(elem, 0, args)
                                    }) : fn
                                }
                            },
                            pseudos: {
                                not: markFunction(function(selector) {
                                    var input = [],
                                        results = [],
                                        matcher = compile(selector.replace(rtrim, "$1"));
                                    return matcher[expando] ? markFunction(function(seed, matches, context, xml) {
                                        for (var elem, unmatched = matcher(seed, null, xml, []), i = seed.length; i--;)(elem = unmatched[i]) && (seed[i] = !(matches[i] = elem))
                                    }) : function(elem, context, xml) {
                                        return input[0] = elem, matcher(input, null, xml, results), input[0] = null, !results.pop()
                                    }
                                }),
                                has: markFunction(function(selector) {
                                    return function(elem) {
                                        return Sizzle(selector, elem).length > 0
                                    }
                                }),
                                contains: markFunction(function(text) {
                                    return text = text.replace(runescape, funescape),
                                        function(elem) {
                                            return (elem.textContent || getText(elem)).indexOf(text) > -1
                                        }
                                }),
                                lang: markFunction(function(lang) {
                                    return ridentifier.test(lang || "") || Sizzle.error("unsupported lang: " + lang), lang = lang.replace(runescape, funescape).toLowerCase(),
                                        function(elem) {
                                            var elemLang;
                                            do {
                                                if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute("xml:lang") || elem.getAttribute("lang")) return (elemLang = elemLang.toLowerCase()) === lang || 0 === elemLang.indexOf(lang + "-")
                                            } while ((elem = elem.parentNode) && 1 === elem.nodeType);
                                            return !1
                                        }
                                }),
                                target: function(elem) {
                                    var hash = window.location && window.location.hash;
                                    return hash && hash.slice(1) === elem.id
                                },
                                root: function(elem) {
                                    return elem === docElem
                                },
                                focus: function(elem) {
                                    return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex)
                                },
                                enabled: createDisabledPseudo(!1),
                                disabled: createDisabledPseudo(!0),
                                checked: function(elem) {
                                    var nodeName = elem.nodeName.toLowerCase();
                                    return "input" === nodeName && !!elem.checked || "option" === nodeName && !!elem.selected
                                },
                                selected: function(elem) {
                                    return elem.parentNode && elem.parentNode.selectedIndex, !0 === elem.selected
                                },
                                empty: function(elem) {
                                    for (elem = elem.firstChild; elem; elem = elem.nextSibling)
                                        if (elem.nodeType < 6) return !1;
                                    return !0
                                },
                                parent: function(elem) {
                                    return !Expr.pseudos.empty(elem)
                                },
                                header: function(elem) {
                                    return rheader.test(elem.nodeName)
                                },
                                input: function(elem) {
                                    return rinputs.test(elem.nodeName)
                                },
                                button: function(elem) {
                                    var name = elem.nodeName.toLowerCase();
                                    return "input" === name && "button" === elem.type || "button" === name
                                },
                                text: function(elem) {
                                    var attr;
                                    return "input" === elem.nodeName.toLowerCase() && "text" === elem.type && (null == (attr = elem.getAttribute("type")) || "text" === attr.toLowerCase())
                                },
                                first: createPositionalPseudo(function() {
                                    return [0]
                                }),
                                last: createPositionalPseudo(function(matchIndexes, length) {
                                    return [length - 1]
                                }),
                                eq: createPositionalPseudo(function(matchIndexes, length, argument) {
                                    return [argument < 0 ? argument + length : argument]
                                }),
                                even: createPositionalPseudo(function(matchIndexes, length) {
                                    for (var i = 0; i < length; i += 2) matchIndexes.push(i);
                                    return matchIndexes
                                }),
                                odd: createPositionalPseudo(function(matchIndexes, length) {
                                    for (var i = 1; i < length; i += 2) matchIndexes.push(i);
                                    return matchIndexes
                                }),
                                lt: createPositionalPseudo(function(matchIndexes, length, argument) {
                                    for (var i = argument < 0 ? argument + length : argument > length ? length : argument; --i >= 0;) matchIndexes.push(i);
                                    return matchIndexes
                                }),
                                gt: createPositionalPseudo(function(matchIndexes, length, argument) {
                                    for (var i = argument < 0 ? argument + length : argument; ++i < length;) matchIndexes.push(i);
                                    return matchIndexes
                                })
                            }
                        }).pseudos.nth = Expr.pseudos.eq, {
                            radio: !0,
                            checkbox: !0,
                            file: !0,
                            password: !0,
                            image: !0
                        }) Expr.pseudos[i] = createInputPseudo(i);
                    for (i in {
                            submit: !0,
                            reset: !0
                        }) Expr.pseudos[i] = createButtonPseudo(i);

                    function setFilters() {}

                    function toSelector(tokens) {
                        for (var i = 0, len = tokens.length, selector = ""; i < len; i++) selector += tokens[i].value;
                        return selector
                    }

                    function addCombinator(matcher, combinator, base) {
                        var dir = combinator.dir,
                            skip = combinator.next,
                            key = skip || dir,
                            checkNonElements = base && "parentNode" === key,
                            doneName = done++;
                        return combinator.first ? function(elem, context, xml) {
                            for (; elem = elem[dir];)
                                if (1 === elem.nodeType || checkNonElements) return matcher(elem, context, xml);
                            return !1
                        } : function(elem, context, xml) {
                            var oldCache, uniqueCache, outerCache, newCache = [dirruns, doneName];
                            if (xml) {
                                for (; elem = elem[dir];)
                                    if ((1 === elem.nodeType || checkNonElements) && matcher(elem, context, xml)) return !0
                            } else
                                for (; elem = elem[dir];)
                                    if (1 === elem.nodeType || checkNonElements)
                                        if (uniqueCache = (outerCache = elem[expando] || (elem[expando] = {}))[elem.uniqueID] || (outerCache[elem.uniqueID] = {}), skip && skip === elem.nodeName.toLowerCase()) elem = elem[dir] || elem;
                                        else {
                                            if ((oldCache = uniqueCache[key]) && oldCache[0] === dirruns && oldCache[1] === doneName) return newCache[2] = oldCache[2];
                                            if (uniqueCache[key] = newCache, newCache[2] = matcher(elem, context, xml)) return !0
                                        } return !1
                        }
                    }

                    function elementMatcher(matchers) {
                        return matchers.length > 1 ? function(elem, context, xml) {
                            for (var i = matchers.length; i--;)
                                if (!matchers[i](elem, context, xml)) return !1;
                            return !0
                        } : matchers[0]
                    }

                    function condense(unmatched, map, filter, context, xml) {
                        for (var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = null != map; i < len; i++)(elem = unmatched[i]) && (filter && !filter(elem, context, xml) || (newUnmatched.push(elem), mapped && map.push(i)));
                        return newUnmatched
                    }

                    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {
                        return postFilter && !postFilter[expando] && (postFilter = setMatcher(postFilter)), postFinder && !postFinder[expando] && (postFinder = setMatcher(postFinder, postSelector)), markFunction(function(seed, results, context, xml) {
                            var temp, i, elem, preMap = [],
                                postMap = [],
                                preexisting = results.length,
                                elems = seed || function(selector, contexts, results) {
                                    for (var i = 0, len = contexts.length; i < len; i++) Sizzle(selector, contexts[i], results);
                                    return results
                                }(selector || "*", context.nodeType ? [context] : context, []),
                                matcherIn = !preFilter || !seed && selector ? elems : condense(elems, preMap, preFilter, context, xml),
                                matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;
                            if (matcher && matcher(matcherIn, matcherOut, context, xml), postFilter)
                                for (temp = condense(matcherOut, postMap), postFilter(temp, [], context, xml), i = temp.length; i--;)(elem = temp[i]) && (matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem));
                            if (seed) {
                                if (postFinder || preFilter) {
                                    if (postFinder) {
                                        for (temp = [], i = matcherOut.length; i--;)(elem = matcherOut[i]) && temp.push(matcherIn[i] = elem);
                                        postFinder(null, matcherOut = [], temp, xml)
                                    }
                                    for (i = matcherOut.length; i--;)(elem = matcherOut[i]) && (temp = postFinder ? indexOf(seed, elem) : preMap[i]) > -1 && (seed[temp] = !(results[temp] = elem))
                                }
                            } else matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut), postFinder ? postFinder(null, results, matcherOut, xml) : push.apply(results, matcherOut)
                        })
                    }

                    function matcherFromTokens(tokens) {
                        for (var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[" "], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function(elem) {
                                return elem === checkContext
                            }, implicitRelative, !0), matchAnyContext = addCombinator(function(elem) {
                                return indexOf(checkContext, elem) > -1
                            }, implicitRelative, !0), matchers = [function(elem, context, xml) {
                                var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));
                                return checkContext = null, ret
                            }]; i < len; i++)
                            if (matcher = Expr.relative[tokens[i].type]) matchers = [addCombinator(elementMatcher(matchers), matcher)];
                            else {
                                if ((matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches))[expando]) {
                                    for (j = ++i; j < len && !Expr.relative[tokens[j].type]; j++);
                                    return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({
                                        value: " " === tokens[i - 2].type ? "*" : ""
                                    })).replace(rtrim, "$1"), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens))
                                }
                                matchers.push(matcher)
                            } return elementMatcher(matchers)
                    }
                    return setFilters.prototype = Expr.filters = Expr.pseudos, Expr.setFilters = new setFilters, tokenize = Sizzle.tokenize = function(selector, parseOnly) {
                        var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + " "];
                        if (cached) return parseOnly ? 0 : cached.slice(0);
                        for (soFar = selector, groups = [], preFilters = Expr.preFilter; soFar;) {
                            for (type in matched && !(match = rcomma.exec(soFar)) || (match && (soFar = soFar.slice(match[0].length) || soFar), groups.push(tokens = [])), matched = !1, (match = rcombinators.exec(soFar)) && (matched = match.shift(), tokens.push({
                                    value: matched,
                                    type: match[0].replace(rtrim, " ")
                                }), soFar = soFar.slice(matched.length)), Expr.filter) !(match = matchExpr[type].exec(soFar)) || preFilters[type] && !(match = preFilters[type](match)) || (matched = match.shift(), tokens.push({
                                value: matched,
                                type: type,
                                matches: match
                            }), soFar = soFar.slice(matched.length));
                            if (!matched) break
                        }
                        return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0)
                    }, compile = Sizzle.compile = function(selector, match) {
                        var i, setMatchers = [],
                            elementMatchers = [],
                            cached = compilerCache[selector + " "];
                        if (!cached) {
                            for (match || (match = tokenize(selector)), i = match.length; i--;)(cached = matcherFromTokens(match[i]))[expando] ? setMatchers.push(cached) : elementMatchers.push(cached);
                            (cached = compilerCache(selector, function(elementMatchers, setMatchers) {
                                var bySet = setMatchers.length > 0,
                                    byElement = elementMatchers.length > 0,
                                    superMatcher = function(seed, context, xml, results, outermost) {
                                        var elem, j, matcher, matchedCount = 0,
                                            i = "0",
                                            unmatched = seed && [],
                                            setMatched = [],
                                            contextBackup = outermostContext,
                                            elems = seed || byElement && Expr.find.TAG("*", outermost),
                                            dirrunsUnique = dirruns += null == contextBackup ? 1 : Math.random() || .1,
                                            len = elems.length;
                                        for (outermost && (outermostContext = context === document || context || outermost); i !== len && null != (elem = elems[i]); i++) {
                                            if (byElement && elem) {
                                                for (j = 0, context || elem.ownerDocument === document || (setDocument(elem), xml = !documentIsHTML); matcher = elementMatchers[j++];)
                                                    if (matcher(elem, context || document, xml)) {
                                                        results.push(elem);
                                                        break
                                                    } outermost && (dirruns = dirrunsUnique)
                                            }
                                            bySet && ((elem = !matcher && elem) && matchedCount--, seed && unmatched.push(elem))
                                        }
                                        if (matchedCount += i, bySet && i !== matchedCount) {
                                            for (j = 0; matcher = setMatchers[j++];) matcher(unmatched, setMatched, context, xml);
                                            if (seed) {
                                                if (matchedCount > 0)
                                                    for (; i--;) unmatched[i] || setMatched[i] || (setMatched[i] = pop.call(results));
                                                setMatched = condense(setMatched)
                                            }
                                            push.apply(results, setMatched), outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1 && Sizzle.uniqueSort(results)
                                        }
                                        return outermost && (dirruns = dirrunsUnique, outermostContext = contextBackup), unmatched
                                    };
                                return bySet ? markFunction(superMatcher) : superMatcher
                            }(elementMatchers, setMatchers))).selector = selector
                        }
                        return cached
                    }, select = Sizzle.select = function(selector, context, results, seed) {
                        var i, tokens, token, type, find, compiled = "function" == typeof selector && selector,
                            match = !seed && tokenize(selector = compiled.selector || selector);
                        if (results = results || [], 1 === match.length) {
                            if ((tokens = match[0] = match[0].slice(0)).length > 2 && "ID" === (token = tokens[0]).type && 9 === context.nodeType && documentIsHTML && Expr.relative[tokens[1].type]) {
                                if (!(context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0])) return results;
                                compiled && (context = context.parentNode), selector = selector.slice(tokens.shift().value.length)
                            }
                            for (i = matchExpr.needsContext.test(selector) ? 0 : tokens.length; i-- && (token = tokens[i], !Expr.relative[type = token.type]);)
                                if ((find = Expr.find[type]) && (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context))) {
                                    if (tokens.splice(i, 1), !(selector = seed.length && toSelector(tokens))) return push.apply(results, seed), results;
                                    break
                                }
                        }
                        return (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, !context || rsibling.test(selector) && testContext(context.parentNode) || context), results
                    }, support.sortStable = expando.split("").sort(sortOrder).join("") === expando, support.detectDuplicates = !!hasDuplicate, setDocument(), support.sortDetached = assert(function(el) {
                        return 1 & el.compareDocumentPosition(document.createElement("fieldset"))
                    }), assert(function(el) {
                        return el.innerHTML = "<a href='#'></a>", "#" === el.firstChild.getAttribute("href")
                    }) || addHandle("type|href|height|width", function(elem, name, isXML) {
                        if (!isXML) return elem.getAttribute(name, "type" === name.toLowerCase() ? 1 : 2)
                    }), support.attributes && assert(function(el) {
                        return el.innerHTML = "<input/>", el.firstChild.setAttribute("value", ""), "" === el.firstChild.getAttribute("value")
                    }) || addHandle("value", function(elem, name, isXML) {
                        if (!isXML && "input" === elem.nodeName.toLowerCase()) return elem.defaultValue
                    }), assert(function(el) {
                        return null == el.getAttribute("disabled")
                    }) || addHandle(booleans, function(elem, name, isXML) {
                        var val;
                        if (!isXML) return !0 === elem[name] ? name.toLowerCase() : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null
                    }), Sizzle
                }(window);
                jQuery.find = Sizzle, jQuery.expr = Sizzle.selectors, jQuery.expr[":"] = jQuery.expr.pseudos, jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort, jQuery.text = Sizzle.getText, jQuery.isXMLDoc = Sizzle.isXML, jQuery.contains = Sizzle.contains, jQuery.escapeSelector = Sizzle.escape;
                var dir = function(elem, dir, until) {
                        for (var matched = [], truncate = void 0 !== until;
                            (elem = elem[dir]) && 9 !== elem.nodeType;)
                            if (1 === elem.nodeType) {
                                if (truncate && jQuery(elem).is(until)) break;
                                matched.push(elem)
                            } return matched
                    },
                    siblings = function(n, elem) {
                        for (var matched = []; n; n = n.nextSibling) 1 === n.nodeType && n !== elem && matched.push(n);
                        return matched
                    },
                    rneedsContext = jQuery.expr.match.needsContext;

                function nodeName(elem, name) {
                    return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase()
                }
                var rsingleTag = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;

                function winnow(elements, qualifier, not) {
                    return isFunction(qualifier) ? jQuery.grep(elements, function(elem, i) {
                        return !!qualifier.call(elem, i, elem) !== not
                    }) : qualifier.nodeType ? jQuery.grep(elements, function(elem) {
                        return elem === qualifier !== not
                    }) : "string" != typeof qualifier ? jQuery.grep(elements, function(elem) {
                        return indexOf.call(qualifier, elem) > -1 !== not
                    }) : jQuery.filter(qualifier, elements, not)
                }
                jQuery.filter = function(expr, elems, not) {
                    var elem = elems[0];
                    return not && (expr = ":not(" + expr + ")"), 1 === elems.length && 1 === elem.nodeType ? jQuery.find.matchesSelector(elem, expr) ? [elem] : [] : jQuery.find.matches(expr, jQuery.grep(elems, function(elem) {
                        return 1 === elem.nodeType
                    }))
                }, jQuery.fn.extend({
                    find: function(selector) {
                        var i, ret, len = this.length,
                            self = this;
                        if ("string" != typeof selector) return this.pushStack(jQuery(selector).filter(function() {
                            for (i = 0; i < len; i++)
                                if (jQuery.contains(self[i], this)) return !0
                        }));
                        for (ret = this.pushStack([]), i = 0; i < len; i++) jQuery.find(selector, self[i], ret);
                        return len > 1 ? jQuery.uniqueSort(ret) : ret
                    },
                    filter: function(selector) {
                        return this.pushStack(winnow(this, selector || [], !1))
                    },
                    not: function(selector) {
                        return this.pushStack(winnow(this, selector || [], !0))
                    },
                    is: function(selector) {
                        return !!winnow(this, "string" == typeof selector && rneedsContext.test(selector) ? jQuery(selector) : selector || [], !1).length
                    }
                });
                var rootjQuery, rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;
                (jQuery.fn.init = function(selector, context, root) {
                    var match, elem;
                    if (!selector) return this;
                    if (root = root || rootjQuery, "string" == typeof selector) {
                        if (!(match = "<" === selector[0] && ">" === selector[selector.length - 1] && selector.length >= 3 ? [null, selector, null] : rquickExpr.exec(selector)) || !match[1] && context) return !context || context.jquery ? (context || root).find(selector) : this.constructor(context).find(selector);
                        if (match[1]) {
                            if (context = context instanceof jQuery ? context[0] : context, jQuery.merge(this, jQuery.parseHTML(match[1], context && context.nodeType ? context.ownerDocument || context : document, !0)), rsingleTag.test(match[1]) && jQuery.isPlainObject(context))
                                for (match in context) isFunction(this[match]) ? this[match](context[match]) : this.attr(match, context[match]);
                            return this
                        }
                        return (elem = document.getElementById(match[2])) && (this[0] = elem, this.length = 1), this
                    }
                    return selector.nodeType ? (this[0] = selector, this.length = 1, this) : isFunction(selector) ? void 0 !== root.ready ? root.ready(selector) : selector(jQuery) : jQuery.makeArray(selector, this)
                }).prototype = jQuery.fn, rootjQuery = jQuery(document);
                var rparentsprev = /^(?:parents|prev(?:Until|All))/,
                    guaranteedUnique = {
                        children: !0,
                        contents: !0,
                        next: !0,
                        prev: !0
                    };

                function sibling(cur, dir) {
                    for (;
                        (cur = cur[dir]) && 1 !== cur.nodeType;);
                    return cur
                }
                jQuery.fn.extend({
                    has: function(target) {
                        var targets = jQuery(target, this),
                            l = targets.length;
                        return this.filter(function() {
                            for (var i = 0; i < l; i++)
                                if (jQuery.contains(this, targets[i])) return !0
                        })
                    },
                    closest: function(selectors, context) {
                        var cur, i = 0,
                            l = this.length,
                            matched = [],
                            targets = "string" != typeof selectors && jQuery(selectors);
                        if (!rneedsContext.test(selectors))
                            for (; i < l; i++)
                                for (cur = this[i]; cur && cur !== context; cur = cur.parentNode)
                                    if (cur.nodeType < 11 && (targets ? targets.index(cur) > -1 : 1 === cur.nodeType && jQuery.find.matchesSelector(cur, selectors))) {
                                        matched.push(cur);
                                        break
                                    } return this.pushStack(matched.length > 1 ? jQuery.uniqueSort(matched) : matched)
                    },
                    index: function(elem) {
                        return elem ? "string" == typeof elem ? indexOf.call(jQuery(elem), this[0]) : indexOf.call(this, elem.jquery ? elem[0] : elem) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
                    },
                    add: function(selector, context) {
                        return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(), jQuery(selector, context))))
                    },
                    addBack: function(selector) {
                        return this.add(null == selector ? this.prevObject : this.prevObject.filter(selector))
                    }
                }), jQuery.each({
                    parent: function(elem) {
                        var parent = elem.parentNode;
                        return parent && 11 !== parent.nodeType ? parent : null
                    },
                    parents: function(elem) {
                        return dir(elem, "parentNode")
                    },
                    parentsUntil: function(elem, i, until) {
                        return dir(elem, "parentNode", until)
                    },
                    next: function(elem) {
                        return sibling(elem, "nextSibling")
                    },
                    prev: function(elem) {
                        return sibling(elem, "previousSibling")
                    },
                    nextAll: function(elem) {
                        return dir(elem, "nextSibling")
                    },
                    prevAll: function(elem) {
                        return dir(elem, "previousSibling")
                    },
                    nextUntil: function(elem, i, until) {
                        return dir(elem, "nextSibling", until)
                    },
                    prevUntil: function(elem, i, until) {
                        return dir(elem, "previousSibling", until)
                    },
                    siblings: function(elem) {
                        return siblings((elem.parentNode || {}).firstChild, elem)
                    },
                    children: function(elem) {
                        return siblings(elem.firstChild)
                    },
                    contents: function(elem) {
                        return void 0 !== elem.contentDocument ? elem.contentDocument : (nodeName(elem, "template") && (elem = elem.content || elem), jQuery.merge([], elem.childNodes))
                    }
                }, function(name, fn) {
                    jQuery.fn[name] = function(until, selector) {
                        var matched = jQuery.map(this, fn, until);
                        return "Until" !== name.slice(-5) && (selector = until), selector && "string" == typeof selector && (matched = jQuery.filter(selector, matched)), this.length > 1 && (guaranteedUnique[name] || jQuery.uniqueSort(matched), rparentsprev.test(name) && matched.reverse()), this.pushStack(matched)
                    }
                });
                var rnothtmlwhite = /[^\x20\t\r\n\f]+/g;

                function Identity(v) {
                    return v
                }

                function Thrower(ex) {
                    throw ex
                }

                function adoptValue(value, resolve, reject, noValue) {
                    var method;
                    try {
                        value && isFunction(method = value.promise) ? method.call(value).done(resolve).fail(reject) : value && isFunction(method = value.then) ? method.call(value, resolve, reject) : resolve.apply(void 0, [value].slice(noValue))
                    } catch (value) {
                        reject.apply(void 0, [value])
                    }
                }
                jQuery.Callbacks = function(options) {
                    options = "string" == typeof options ? function(options) {
                        var object = {};
                        return jQuery.each(options.match(rnothtmlwhite) || [], function(_, flag) {
                            object[flag] = !0
                        }), object
                    }(options) : jQuery.extend({}, options);
                    var firing, memory, fired, locked, list = [],
                        queue = [],
                        firingIndex = -1,
                        fire = function() {
                            for (locked = locked || options.once, fired = firing = !0; queue.length; firingIndex = -1)
                                for (memory = queue.shift(); ++firingIndex < list.length;) !1 === list[firingIndex].apply(memory[0], memory[1]) && options.stopOnFalse && (firingIndex = list.length, memory = !1);
                            options.memory || (memory = !1), firing = !1, locked && (list = memory ? [] : "")
                        },
                        self = {
                            add: function() {
                                return list && (memory && !firing && (firingIndex = list.length - 1, queue.push(memory)), function add(args) {
                                    jQuery.each(args, function(_, arg) {
                                        isFunction(arg) ? options.unique && self.has(arg) || list.push(arg) : arg && arg.length && "string" !== toType(arg) && add(arg)
                                    })
                                }(arguments), memory && !firing && fire()), this
                            },
                            remove: function() {
                                return jQuery.each(arguments, function(_, arg) {
                                    for (var index;
                                        (index = jQuery.inArray(arg, list, index)) > -1;) list.splice(index, 1), index <= firingIndex && firingIndex--
                                }), this
                            },
                            has: function(fn) {
                                return fn ? jQuery.inArray(fn, list) > -1 : list.length > 0
                            },
                            empty: function() {
                                return list && (list = []), this
                            },
                            disable: function() {
                                return locked = queue = [], list = memory = "", this
                            },
                            disabled: function() {
                                return !list
                            },
                            lock: function() {
                                return locked = queue = [], memory || firing || (list = memory = ""), this
                            },
                            locked: function() {
                                return !!locked
                            },
                            fireWith: function(context, args) {
                                return locked || (args = [context, (args = args || []).slice ? args.slice() : args], queue.push(args), firing || fire()), this
                            },
                            fire: function() {
                                return self.fireWith(this, arguments), this
                            },
                            fired: function() {
                                return !!fired
                            }
                        };
                    return self
                }, jQuery.extend({
                    Deferred: function(func) {
                        var tuples = [
                                ["notify", "progress", jQuery.Callbacks("memory"), jQuery.Callbacks("memory"), 2],
                                ["resolve", "done", jQuery.Callbacks("once memory"), jQuery.Callbacks("once memory"), 0, "resolved"],
                                ["reject", "fail", jQuery.Callbacks("once memory"), jQuery.Callbacks("once memory"), 1, "rejected"]
                            ],
                            state = "pending",
                            promise = {
                                state: function() {
                                    return state
                                },
                                always: function() {
                                    return deferred.done(arguments).fail(arguments), this
                                },
                                catch: function(fn) {
                                    return promise.then(null, fn)
                                },
                                pipe: function() {
                                    var fns = arguments;
                                    return jQuery.Deferred(function(newDefer) {
                                        jQuery.each(tuples, function(i, tuple) {
                                            var fn = isFunction(fns[tuple[4]]) && fns[tuple[4]];
                                            deferred[tuple[1]](function() {
                                                var returned = fn && fn.apply(this, arguments);
                                                returned && isFunction(returned.promise) ? returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject) : newDefer[tuple[0] + "With"](this, fn ? [returned] : arguments)
                                            })
                                        }), fns = null
                                    }).promise()
                                },
                                then: function(onFulfilled, onRejected, onProgress) {
                                    var maxDepth = 0;

                                    function resolve(depth, deferred, handler, special) {
                                        return function() {
                                            var that = this,
                                                args = arguments,
                                                mightThrow = function() {
                                                    var returned, then;
                                                    if (!(depth < maxDepth)) {
                                                        if ((returned = handler.apply(that, args)) === deferred.promise()) throw new TypeError("Thenable self-resolution");
                                                        then = returned && ("object" == typeof returned || "function" == typeof returned) && returned.then, isFunction(then) ? special ? then.call(returned, resolve(maxDepth, deferred, Identity, special), resolve(maxDepth, deferred, Thrower, special)) : (maxDepth++, then.call(returned, resolve(maxDepth, deferred, Identity, special), resolve(maxDepth, deferred, Thrower, special), resolve(maxDepth, deferred, Identity, deferred.notifyWith))) : (handler !== Identity && (that = void 0, args = [returned]), (special || deferred.resolveWith)(that, args))
                                                    }
                                                },
                                                process = special ? mightThrow : function() {
                                                    try {
                                                        mightThrow()
                                                    } catch (e) {
                                                        jQuery.Deferred.exceptionHook && jQuery.Deferred.exceptionHook(e, process.stackTrace), depth + 1 >= maxDepth && (handler !== Thrower && (that = void 0, args = [e]), deferred.rejectWith(that, args))
                                                    }
                                                };
                                            depth ? process() : (jQuery.Deferred.getStackHook && (process.stackTrace = jQuery.Deferred.getStackHook()), window.setTimeout(process))
                                        }
                                    }
                                    return jQuery.Deferred(function(newDefer) {
                                        tuples[0][3].add(resolve(0, newDefer, isFunction(onProgress) ? onProgress : Identity, newDefer.notifyWith)), tuples[1][3].add(resolve(0, newDefer, isFunction(onFulfilled) ? onFulfilled : Identity)), tuples[2][3].add(resolve(0, newDefer, isFunction(onRejected) ? onRejected : Thrower))
                                    }).promise()
                                },
                                promise: function(obj) {
                                    return null != obj ? jQuery.extend(obj, promise) : promise
                                }
                            },
                            deferred = {};
                        return jQuery.each(tuples, function(i, tuple) {
                            var list = tuple[2],
                                stateString = tuple[5];
                            promise[tuple[1]] = list.add, stateString && list.add(function() {
                                state = stateString
                            }, tuples[3 - i][2].disable, tuples[3 - i][3].disable, tuples[0][2].lock, tuples[0][3].lock), list.add(tuple[3].fire), deferred[tuple[0]] = function() {
                                return deferred[tuple[0] + "With"](this === deferred ? void 0 : this, arguments), this
                            }, deferred[tuple[0] + "With"] = list.fireWith
                        }), promise.promise(deferred), func && func.call(deferred, deferred), deferred
                    },
                    when: function(singleValue) {
                        var remaining = arguments.length,
                            i = remaining,
                            resolveContexts = Array(i),
                            resolveValues = slice.call(arguments),
                            master = jQuery.Deferred(),
                            updateFunc = function(i) {
                                return function(value) {
                                    resolveContexts[i] = this, resolveValues[i] = arguments.length > 1 ? slice.call(arguments) : value, --remaining || master.resolveWith(resolveContexts, resolveValues)
                                }
                            };
                        if (remaining <= 1 && (adoptValue(singleValue, master.done(updateFunc(i)).resolve, master.reject, !remaining), "pending" === master.state() || isFunction(resolveValues[i] && resolveValues[i].then))) return master.then();
                        for (; i--;) adoptValue(resolveValues[i], updateFunc(i), master.reject);
                        return master.promise()
                    }
                });
                var rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
                jQuery.Deferred.exceptionHook = function(error, stack) {
                    window.console && window.console.warn && error && rerrorNames.test(error.name) && window.console.warn("jQuery.Deferred exception: " + error.message, error.stack, stack)
                }, jQuery.readyException = function(error) {
                    window.setTimeout(function() {
                        throw error
                    })
                };
                var readyList = jQuery.Deferred();

                function completed() {
                    document.removeEventListener("DOMContentLoaded", completed), window.removeEventListener("load", completed), jQuery.ready()
                }
                jQuery.fn.ready = function(fn) {
                    return readyList.then(fn).catch(function(error) {
                        jQuery.readyException(error)
                    }), this
                }, jQuery.extend({
                    isReady: !1,
                    readyWait: 1,
                    ready: function(wait) {
                        (!0 === wait ? --jQuery.readyWait : jQuery.isReady) || (jQuery.isReady = !0, !0 !== wait && --jQuery.readyWait > 0 || readyList.resolveWith(document, [jQuery]))
                    }
                }), jQuery.ready.then = readyList.then, "complete" === document.readyState || "loading" !== document.readyState && !document.documentElement.doScroll ? window.setTimeout(jQuery.ready) : (document.addEventListener("DOMContentLoaded", completed), window.addEventListener("load", completed));
                var access = function(elems, fn, key, value, chainable, emptyGet, raw) {
                        var i = 0,
                            len = elems.length,
                            bulk = null == key;
                        if ("object" === toType(key))
                            for (i in chainable = !0, key) access(elems, fn, i, key[i], !0, emptyGet, raw);
                        else if (void 0 !== value && (chainable = !0, isFunction(value) || (raw = !0), bulk && (raw ? (fn.call(elems, value), fn = null) : (bulk = fn, fn = function(elem, key, value) {
                                return bulk.call(jQuery(elem), value)
                            })), fn))
                            for (; i < len; i++) fn(elems[i], key, raw ? value : value.call(elems[i], i, fn(elems[i], key)));
                        return chainable ? elems : bulk ? fn.call(elems) : len ? fn(elems[0], key) : emptyGet
                    },
                    rmsPrefix = /^-ms-/,
                    rdashAlpha = /-([a-z])/g;

                function fcamelCase(all, letter) {
                    return letter.toUpperCase()
                }

                function camelCase(string) {
                    return string.replace(rmsPrefix, "ms-").replace(rdashAlpha, fcamelCase)
                }
                var acceptData = function(owner) {
                    return 1 === owner.nodeType || 9 === owner.nodeType || !+owner.nodeType
                };

                function Data() {
                    this.expando = jQuery.expando + Data.uid++
                }
                Data.uid = 1, Data.prototype = {
                    cache: function(owner) {
                        var value = owner[this.expando];
                        return value || (value = {}, acceptData(owner) && (owner.nodeType ? owner[this.expando] = value : Object.defineProperty(owner, this.expando, {
                            value: value,
                            configurable: !0
                        }))), value
                    },
                    set: function(owner, data, value) {
                        var prop, cache = this.cache(owner);
                        if ("string" == typeof data) cache[camelCase(data)] = value;
                        else
                            for (prop in data) cache[camelCase(prop)] = data[prop];
                        return cache
                    },
                    get: function(owner, key) {
                        return void 0 === key ? this.cache(owner) : owner[this.expando] && owner[this.expando][camelCase(key)]
                    },
                    access: function(owner, key, value) {
                        return void 0 === key || key && "string" == typeof key && void 0 === value ? this.get(owner, key) : (this.set(owner, key, value), void 0 !== value ? value : key)
                    },
                    remove: function(owner, key) {
                        var i, cache = owner[this.expando];
                        if (void 0 !== cache) {
                            if (void 0 !== key) {
                                i = (key = Array.isArray(key) ? key.map(camelCase) : (key = camelCase(key)) in cache ? [key] : key.match(rnothtmlwhite) || []).length;
                                for (; i--;) delete cache[key[i]]
                            }(void 0 === key || jQuery.isEmptyObject(cache)) && (owner.nodeType ? owner[this.expando] = void 0 : delete owner[this.expando])
                        }
                    },
                    hasData: function(owner) {
                        var cache = owner[this.expando];
                        return void 0 !== cache && !jQuery.isEmptyObject(cache)
                    }
                };
                var dataPriv = new Data,
                    dataUser = new Data,
                    rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
                    rmultiDash = /[A-Z]/g;

                function dataAttr(elem, key, data) {
                    var name;
                    if (void 0 === data && 1 === elem.nodeType)
                        if (name = "data-" + key.replace(rmultiDash, "-$&").toLowerCase(), "string" == typeof(data = elem.getAttribute(name))) {
                            try {
                                data = function(data) {
                                    return "true" === data || "false" !== data && ("null" === data ? null : data === +data + "" ? +data : rbrace.test(data) ? JSON.parse(data) : data)
                                }(data)
                            } catch (e) {}
                            dataUser.set(elem, key, data)
                        } else data = void 0;
                    return data
                }
                jQuery.extend({
                    hasData: function(elem) {
                        return dataUser.hasData(elem) || dataPriv.hasData(elem)
                    },
                    data: function(elem, name, data) {
                        return dataUser.access(elem, name, data)
                    },
                    removeData: function(elem, name) {
                        dataUser.remove(elem, name)
                    },
                    _data: function(elem, name, data) {
                        return dataPriv.access(elem, name, data)
                    },
                    _removeData: function(elem, name) {
                        dataPriv.remove(elem, name)
                    }
                }), jQuery.fn.extend({
                    data: function(key, value) {
                        var i, name, data, elem = this[0],
                            attrs = elem && elem.attributes;
                        if (void 0 === key) {
                            if (this.length && (data = dataUser.get(elem), 1 === elem.nodeType && !dataPriv.get(elem, "hasDataAttrs"))) {
                                for (i = attrs.length; i--;) attrs[i] && 0 === (name = attrs[i].name).indexOf("data-") && (name = camelCase(name.slice(5)), dataAttr(elem, name, data[name]));
                                dataPriv.set(elem, "hasDataAttrs", !0)
                            }
                            return data
                        }
                        return "object" == typeof key ? this.each(function() {
                            dataUser.set(this, key)
                        }) : access(this, function(value) {
                            var data;
                            if (elem && void 0 === value) return void 0 !== (data = dataUser.get(elem, key)) ? data : void 0 !== (data = dataAttr(elem, key)) ? data : void 0;
                            this.each(function() {
                                dataUser.set(this, key, value)
                            })
                        }, null, value, arguments.length > 1, null, !0)
                    },
                    removeData: function(key) {
                        return this.each(function() {
                            dataUser.remove(this, key)
                        })
                    }
                }), jQuery.extend({
                    queue: function(elem, type, data) {
                        var queue;
                        if (elem) return type = (type || "fx") + "queue", queue = dataPriv.get(elem, type), data && (!queue || Array.isArray(data) ? queue = dataPriv.access(elem, type, jQuery.makeArray(data)) : queue.push(data)), queue || []
                    },
                    dequeue: function(elem, type) {
                        type = type || "fx";
                        var queue = jQuery.queue(elem, type),
                            startLength = queue.length,
                            fn = queue.shift(),
                            hooks = jQuery._queueHooks(elem, type);
                        "inprogress" === fn && (fn = queue.shift(), startLength--), fn && ("fx" === type && queue.unshift("inprogress"), delete hooks.stop, fn.call(elem, function() {
                            jQuery.dequeue(elem, type)
                        }, hooks)), !startLength && hooks && hooks.empty.fire()
                    },
                    _queueHooks: function(elem, type) {
                        var key = type + "queueHooks";
                        return dataPriv.get(elem, key) || dataPriv.access(elem, key, {
                            empty: jQuery.Callbacks("once memory").add(function() {
                                dataPriv.remove(elem, [type + "queue", key])
                            })
                        })
                    }
                }), jQuery.fn.extend({
                    queue: function(type, data) {
                        var setter = 2;
                        return "string" != typeof type && (data = type, type = "fx", setter--), arguments.length < setter ? jQuery.queue(this[0], type) : void 0 === data ? this : this.each(function() {
                            var queue = jQuery.queue(this, type, data);
                            jQuery._queueHooks(this, type), "fx" === type && "inprogress" !== queue[0] && jQuery.dequeue(this, type)
                        })
                    },
                    dequeue: function(type) {
                        return this.each(function() {
                            jQuery.dequeue(this, type)
                        })
                    },
                    clearQueue: function(type) {
                        return this.queue(type || "fx", [])
                    },
                    promise: function(type, obj) {
                        var tmp, count = 1,
                            defer = jQuery.Deferred(),
                            elements = this,
                            i = this.length,
                            resolve = function() {
                                --count || defer.resolveWith(elements, [elements])
                            };
                        for ("string" != typeof type && (obj = type, type = void 0), type = type || "fx"; i--;)(tmp = dataPriv.get(elements[i], type + "queueHooks")) && tmp.empty && (count++, tmp.empty.add(resolve));
                        return resolve(), defer.promise(obj)
                    }
                });
                var pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
                    rcssNum = new RegExp("^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i"),
                    cssExpand = ["Top", "Right", "Bottom", "Left"],
                    documentElement = document.documentElement,
                    isAttached = function(elem) {
                        return jQuery.contains(elem.ownerDocument, elem)
                    },
                    composed = {
                        composed: !0
                    };
                documentElement.attachShadow && (isAttached = function(elem) {
                    return jQuery.contains(elem.ownerDocument, elem) || elem.getRootNode(composed) === elem.ownerDocument
                });
                var isHiddenWithinTree = function(elem, el) {
                        return "none" === (elem = el || elem).style.display || "" === elem.style.display && isAttached(elem) && "none" === jQuery.css(elem, "display")
                    },
                    swap = function(elem, options, callback, args) {
                        var ret, name, old = {};
                        for (name in options) old[name] = elem.style[name], elem.style[name] = options[name];
                        for (name in ret = callback.apply(elem, args || []), options) elem.style[name] = old[name];
                        return ret
                    };

                function adjustCSS(elem, prop, valueParts, tween) {
                    var adjusted, scale, maxIterations = 20,
                        currentValue = tween ? function() {
                            return tween.cur()
                        } : function() {
                            return jQuery.css(elem, prop, "")
                        },
                        initial = currentValue(),
                        unit = valueParts && valueParts[3] || (jQuery.cssNumber[prop] ? "" : "px"),
                        initialInUnit = elem.nodeType && (jQuery.cssNumber[prop] || "px" !== unit && +initial) && rcssNum.exec(jQuery.css(elem, prop));
                    if (initialInUnit && initialInUnit[3] !== unit) {
                        for (initial /= 2, unit = unit || initialInUnit[3], initialInUnit = +initial || 1; maxIterations--;) jQuery.style(elem, prop, initialInUnit + unit), (1 - scale) * (1 - (scale = currentValue() / initial || .5)) <= 0 && (maxIterations = 0), initialInUnit /= scale;
                        initialInUnit *= 2, jQuery.style(elem, prop, initialInUnit + unit), valueParts = valueParts || []
                    }
                    return valueParts && (initialInUnit = +initialInUnit || +initial || 0, adjusted = valueParts[1] ? initialInUnit + (valueParts[1] + 1) * valueParts[2] : +valueParts[2], tween && (tween.unit = unit, tween.start = initialInUnit, tween.end = adjusted)), adjusted
                }
                var defaultDisplayMap = {};

                function getDefaultDisplay(elem) {
                    var temp, doc = elem.ownerDocument,
                        nodeName = elem.nodeName,
                        display = defaultDisplayMap[nodeName];
                    return display || (temp = doc.body.appendChild(doc.createElement(nodeName)), display = jQuery.css(temp, "display"), temp.parentNode.removeChild(temp), "none" === display && (display = "block"), defaultDisplayMap[nodeName] = display, display)
                }

                function showHide(elements, show) {
                    for (var display, elem, values = [], index = 0, length = elements.length; index < length; index++)(elem = elements[index]).style && (display = elem.style.display, show ? ("none" === display && (values[index] = dataPriv.get(elem, "display") || null, values[index] || (elem.style.display = "")), "" === elem.style.display && isHiddenWithinTree(elem) && (values[index] = getDefaultDisplay(elem))) : "none" !== display && (values[index] = "none", dataPriv.set(elem, "display", display)));
                    for (index = 0; index < length; index++) null != values[index] && (elements[index].style.display = values[index]);
                    return elements
                }
                jQuery.fn.extend({
                    show: function() {
                        return showHide(this, !0)
                    },
                    hide: function() {
                        return showHide(this)
                    },
                    toggle: function(state) {
                        return "boolean" == typeof state ? state ? this.show() : this.hide() : this.each(function() {
                            isHiddenWithinTree(this) ? jQuery(this).show() : jQuery(this).hide()
                        })
                    }
                });
                var rcheckableType = /^(?:checkbox|radio)$/i,
                    rtagName = /<([a-z][^\/\0>\x20\t\r\n\f]*)/i,
                    rscriptType = /^$|^module$|\/(?:java|ecma)script/i,
                    wrapMap = {
                        option: [1, "<select multiple='multiple'>", "</select>"],
                        thead: [1, "<table>", "</table>"],
                        col: [2, "<table><colgroup>", "</colgroup></table>"],
                        tr: [2, "<table><tbody>", "</tbody></table>"],
                        td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                        _default: [0, "", ""]
                    };

                function getAll(context, tag) {
                    var ret;
                    return ret = void 0 !== context.getElementsByTagName ? context.getElementsByTagName(tag || "*") : void 0 !== context.querySelectorAll ? context.querySelectorAll(tag || "*") : [], void 0 === tag || tag && nodeName(context, tag) ? jQuery.merge([context], ret) : ret
                }

                function setGlobalEval(elems, refElements) {
                    for (var i = 0, l = elems.length; i < l; i++) dataPriv.set(elems[i], "globalEval", !refElements || dataPriv.get(refElements[i], "globalEval"))
                }
                wrapMap.optgroup = wrapMap.option, wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead, wrapMap.th = wrapMap.td;
                var div, input, rhtml = /<|&#?\w+;/;

                function buildFragment(elems, context, scripts, selection, ignored) {
                    for (var elem, tmp, tag, wrap, attached, j, fragment = context.createDocumentFragment(), nodes = [], i = 0, l = elems.length; i < l; i++)
                        if ((elem = elems[i]) || 0 === elem)
                            if ("object" === toType(elem)) jQuery.merge(nodes, elem.nodeType ? [elem] : elem);
                            else if (rhtml.test(elem)) {
                        for (tmp = tmp || fragment.appendChild(context.createElement("div")), tag = (rtagName.exec(elem) || ["", ""])[1].toLowerCase(), wrap = wrapMap[tag] || wrapMap._default, tmp.innerHTML = wrap[1] + jQuery.htmlPrefilter(elem) + wrap[2], j = wrap[0]; j--;) tmp = tmp.lastChild;
                        jQuery.merge(nodes, tmp.childNodes), (tmp = fragment.firstChild).textContent = ""
                    } else nodes.push(context.createTextNode(elem));
                    for (fragment.textContent = "", i = 0; elem = nodes[i++];)
                        if (selection && jQuery.inArray(elem, selection) > -1) ignored && ignored.push(elem);
                        else if (attached = isAttached(elem), tmp = getAll(fragment.appendChild(elem), "script"), attached && setGlobalEval(tmp), scripts)
                        for (j = 0; elem = tmp[j++];) rscriptType.test(elem.type || "") && scripts.push(elem);
                    return fragment
                }
                div = document.createDocumentFragment().appendChild(document.createElement("div")), (input = document.createElement("input")).setAttribute("type", "radio"), input.setAttribute("checked", "checked"), input.setAttribute("name", "t"), div.appendChild(input), support.checkClone = div.cloneNode(!0).cloneNode(!0).lastChild.checked, div.innerHTML = "<textarea>x</textarea>", support.noCloneChecked = !!div.cloneNode(!0).lastChild.defaultValue;
                var rkeyEvent = /^key/,
                    rmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
                    rtypenamespace = /^([^.]*)(?:\.(.+)|)/;

                function returnTrue() {
                    return !0
                }

                function returnFalse() {
                    return !1
                }

                function expectSync(elem, type) {
                    return elem === function() {
                        try {
                            return document.activeElement
                        } catch (err) {}
                    }() == ("focus" === type)
                }

                function on(elem, types, selector, data, fn, one) {
                    var origFn, type;
                    if ("object" == typeof types) {
                        for (type in "string" != typeof selector && (data = data || selector, selector = void 0), types) on(elem, type, selector, data, types[type], one);
                        return elem
                    }
                    if (null == data && null == fn ? (fn = selector, data = selector = void 0) : null == fn && ("string" == typeof selector ? (fn = data, data = void 0) : (fn = data, data = selector, selector = void 0)), !1 === fn) fn = returnFalse;
                    else if (!fn) return elem;
                    return 1 === one && (origFn = fn, (fn = function(event) {
                        return jQuery().off(event), origFn.apply(this, arguments)
                    }).guid = origFn.guid || (origFn.guid = jQuery.guid++)), elem.each(function() {
                        jQuery.event.add(this, types, fn, data, selector)
                    })
                }

                function leverageNative(el, type, expectSync) {
                    expectSync ? (dataPriv.set(el, type, !1), jQuery.event.add(el, type, {
                        namespace: !1,
                        handler: function(event) {
                            var notAsync, result, saved = dataPriv.get(this, type);
                            if (1 & event.isTrigger && this[type]) {
                                if (saved)(jQuery.event.special[type] || {}).delegateType && event.stopPropagation();
                                else if (saved = slice.call(arguments), dataPriv.set(this, type, saved), notAsync = expectSync(this, type), this[type](), saved !== (result = dataPriv.get(this, type)) || notAsync ? dataPriv.set(this, type, !1) : result = void 0, saved !== result) return event.stopImmediatePropagation(), event.preventDefault(), result
                            } else saved && (dataPriv.set(this, type, jQuery.event.trigger(jQuery.extend(saved.shift(), jQuery.Event.prototype), saved, this)), event.stopImmediatePropagation())
                        }
                    })) : jQuery.event.add(el, type, returnTrue)
                }
                jQuery.event = {
                    global: {},
                    add: function(elem, types, handler, data, selector) {
                        var handleObjIn, eventHandle, tmp, events, t, handleObj, special, handlers, type, namespaces, origType, elemData = dataPriv.get(elem);
                        if (elemData)
                            for (handler.handler && (handler = (handleObjIn = handler).handler, selector = handleObjIn.selector), selector && jQuery.find.matchesSelector(documentElement, selector), handler.guid || (handler.guid = jQuery.guid++), (events = elemData.events) || (events = elemData.events = {}), (eventHandle = elemData.handle) || (eventHandle = elemData.handle = function(e) {
                                    return void 0 !== jQuery && jQuery.event.triggered !== e.type ? jQuery.event.dispatch.apply(elem, arguments) : void 0
                                }), t = (types = (types || "").match(rnothtmlwhite) || [""]).length; t--;) type = origType = (tmp = rtypenamespace.exec(types[t]) || [])[1], namespaces = (tmp[2] || "").split(".").sort(), type && (special = jQuery.event.special[type] || {}, type = (selector ? special.delegateType : special.bindType) || type, special = jQuery.event.special[type] || {}, handleObj = jQuery.extend({
                                type: type,
                                origType: origType,
                                data: data,
                                handler: handler,
                                guid: handler.guid,
                                selector: selector,
                                needsContext: selector && jQuery.expr.match.needsContext.test(selector),
                                namespace: namespaces.join(".")
                            }, handleObjIn), (handlers = events[type]) || ((handlers = events[type] = []).delegateCount = 0, special.setup && !1 !== special.setup.call(elem, data, namespaces, eventHandle) || elem.addEventListener && elem.addEventListener(type, eventHandle)), special.add && (special.add.call(elem, handleObj), handleObj.handler.guid || (handleObj.handler.guid = handler.guid)), selector ? handlers.splice(handlers.delegateCount++, 0, handleObj) : handlers.push(handleObj), jQuery.event.global[type] = !0)
                    },
                    remove: function(elem, types, handler, selector, mappedTypes) {
                        var j, origCount, tmp, events, t, handleObj, special, handlers, type, namespaces, origType, elemData = dataPriv.hasData(elem) && dataPriv.get(elem);
                        if (elemData && (events = elemData.events)) {
                            for (t = (types = (types || "").match(rnothtmlwhite) || [""]).length; t--;)
                                if (type = origType = (tmp = rtypenamespace.exec(types[t]) || [])[1], namespaces = (tmp[2] || "").split(".").sort(), type) {
                                    for (special = jQuery.event.special[type] || {}, handlers = events[type = (selector ? special.delegateType : special.bindType) || type] || [], tmp = tmp[2] && new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)"), origCount = j = handlers.length; j--;) handleObj = handlers[j], !mappedTypes && origType !== handleObj.origType || handler && handler.guid !== handleObj.guid || tmp && !tmp.test(handleObj.namespace) || selector && selector !== handleObj.selector && ("**" !== selector || !handleObj.selector) || (handlers.splice(j, 1), handleObj.selector && handlers.delegateCount--, special.remove && special.remove.call(elem, handleObj));
                                    origCount && !handlers.length && (special.teardown && !1 !== special.teardown.call(elem, namespaces, elemData.handle) || jQuery.removeEvent(elem, type, elemData.handle), delete events[type])
                                } else
                                    for (type in events) jQuery.event.remove(elem, type + types[t], handler, selector, !0);
                            jQuery.isEmptyObject(events) && dataPriv.remove(elem, "handle events")
                        }
                    },
                    dispatch: function(nativeEvent) {
                        var i, j, ret, matched, handleObj, handlerQueue, event = jQuery.event.fix(nativeEvent),
                            args = new Array(arguments.length),
                            handlers = (dataPriv.get(this, "events") || {})[event.type] || [],
                            special = jQuery.event.special[event.type] || {};
                        for (args[0] = event, i = 1; i < arguments.length; i++) args[i] = arguments[i];
                        if (event.delegateTarget = this, !special.preDispatch || !1 !== special.preDispatch.call(this, event)) {
                            for (handlerQueue = jQuery.event.handlers.call(this, event, handlers), i = 0;
                                (matched = handlerQueue[i++]) && !event.isPropagationStopped();)
                                for (event.currentTarget = matched.elem, j = 0;
                                    (handleObj = matched.handlers[j++]) && !event.isImmediatePropagationStopped();) event.rnamespace && !1 !== handleObj.namespace && !event.rnamespace.test(handleObj.namespace) || (event.handleObj = handleObj, event.data = handleObj.data, void 0 !== (ret = ((jQuery.event.special[handleObj.origType] || {}).handle || handleObj.handler).apply(matched.elem, args)) && !1 === (event.result = ret) && (event.preventDefault(), event.stopPropagation()));
                            return special.postDispatch && special.postDispatch.call(this, event), event.result
                        }
                    },
                    handlers: function(event, handlers) {
                        var i, handleObj, sel, matchedHandlers, matchedSelectors, handlerQueue = [],
                            delegateCount = handlers.delegateCount,
                            cur = event.target;
                        if (delegateCount && cur.nodeType && !("click" === event.type && event.button >= 1))
                            for (; cur !== this; cur = cur.parentNode || this)
                                if (1 === cur.nodeType && ("click" !== event.type || !0 !== cur.disabled)) {
                                    for (matchedHandlers = [], matchedSelectors = {}, i = 0; i < delegateCount; i++) void 0 === matchedSelectors[sel = (handleObj = handlers[i]).selector + " "] && (matchedSelectors[sel] = handleObj.needsContext ? jQuery(sel, this).index(cur) > -1 : jQuery.find(sel, this, null, [cur]).length), matchedSelectors[sel] && matchedHandlers.push(handleObj);
                                    matchedHandlers.length && handlerQueue.push({
                                        elem: cur,
                                        handlers: matchedHandlers
                                    })
                                } return cur = this, delegateCount < handlers.length && handlerQueue.push({
                            elem: cur,
                            handlers: handlers.slice(delegateCount)
                        }), handlerQueue
                    },
                    addProp: function(name, hook) {
                        Object.defineProperty(jQuery.Event.prototype, name, {
                            enumerable: !0,
                            configurable: !0,
                            get: isFunction(hook) ? function() {
                                if (this.originalEvent) return hook(this.originalEvent)
                            } : function() {
                                if (this.originalEvent) return this.originalEvent[name]
                            },
                            set: function(value) {
                                Object.defineProperty(this, name, {
                                    enumerable: !0,
                                    configurable: !0,
                                    writable: !0,
                                    value: value
                                })
                            }
                        })
                    },
                    fix: function(originalEvent) {
                        return originalEvent[jQuery.expando] ? originalEvent : new jQuery.Event(originalEvent)
                    },
                    special: {
                        load: {
                            noBubble: !0
                        },
                        click: {
                            setup: function(data) {
                                var el = this || data;
                                return rcheckableType.test(el.type) && el.click && nodeName(el, "input") && void 0 === dataPriv.get(el, "click") && leverageNative(el, "click", returnTrue), !1
                            },
                            trigger: function(data) {
                                var el = this || data;
                                return rcheckableType.test(el.type) && el.click && nodeName(el, "input") && void 0 === dataPriv.get(el, "click") && leverageNative(el, "click"), !0
                            },
                            _default: function(event) {
                                var target = event.target;
                                return rcheckableType.test(target.type) && target.click && nodeName(target, "input") && dataPriv.get(target, "click") || nodeName(target, "a")
                            }
                        },
                        beforeunload: {
                            postDispatch: function(event) {
                                void 0 !== event.result && event.originalEvent && (event.originalEvent.returnValue = event.result)
                            }
                        }
                    }
                }, jQuery.removeEvent = function(elem, type, handle) {
                    elem.removeEventListener && elem.removeEventListener(type, handle)
                }, jQuery.Event = function(src, props) {
                    if (!(this instanceof jQuery.Event)) return new jQuery.Event(src, props);
                    src && src.type ? (this.originalEvent = src, this.type = src.type, this.isDefaultPrevented = src.defaultPrevented || void 0 === src.defaultPrevented && !1 === src.returnValue ? returnTrue : returnFalse, this.target = src.target && 3 === src.target.nodeType ? src.target.parentNode : src.target, this.currentTarget = src.currentTarget, this.relatedTarget = src.relatedTarget) : this.type = src, props && jQuery.extend(this, props), this.timeStamp = src && src.timeStamp || Date.now(), this[jQuery.expando] = !0
                }, jQuery.Event.prototype = {
                    constructor: jQuery.Event,
                    isDefaultPrevented: returnFalse,
                    isPropagationStopped: returnFalse,
                    isImmediatePropagationStopped: returnFalse,
                    isSimulated: !1,
                    preventDefault: function() {
                        var e = this.originalEvent;
                        this.isDefaultPrevented = returnTrue, e && !this.isSimulated && e.preventDefault()
                    },
                    stopPropagation: function() {
                        var e = this.originalEvent;
                        this.isPropagationStopped = returnTrue, e && !this.isSimulated && e.stopPropagation()
                    },
                    stopImmediatePropagation: function() {
                        var e = this.originalEvent;
                        this.isImmediatePropagationStopped = returnTrue, e && !this.isSimulated && e.stopImmediatePropagation(), this.stopPropagation()
                    }
                }, jQuery.each({
                    altKey: !0,
                    bubbles: !0,
                    cancelable: !0,
                    changedTouches: !0,
                    ctrlKey: !0,
                    detail: !0,
                    eventPhase: !0,
                    metaKey: !0,
                    pageX: !0,
                    pageY: !0,
                    shiftKey: !0,
                    view: !0,
                    char: !0,
                    code: !0,
                    charCode: !0,
                    key: !0,
                    keyCode: !0,
                    button: !0,
                    buttons: !0,
                    clientX: !0,
                    clientY: !0,
                    offsetX: !0,
                    offsetY: !0,
                    pointerId: !0,
                    pointerType: !0,
                    screenX: !0,
                    screenY: !0,
                    targetTouches: !0,
                    toElement: !0,
                    touches: !0,
                    which: function(event) {
                        var button = event.button;
                        return null == event.which && rkeyEvent.test(event.type) ? null != event.charCode ? event.charCode : event.keyCode : !event.which && void 0 !== button && rmouseEvent.test(event.type) ? 1 & button ? 1 : 2 & button ? 3 : 4 & button ? 2 : 0 : event.which
                    }
                }, jQuery.event.addProp), jQuery.each({
                    focus: "focusin",
                    blur: "focusout"
                }, function(type, delegateType) {
                    jQuery.event.special[type] = {
                        setup: function() {
                            return leverageNative(this, type, expectSync), !1
                        },
                        trigger: function() {
                            return leverageNative(this, type), !0
                        },
                        delegateType: delegateType
                    }
                }), jQuery.each({
                    mouseenter: "mouseover",
                    mouseleave: "mouseout",
                    pointerenter: "pointerover",
                    pointerleave: "pointerout"
                }, function(orig, fix) {
                    jQuery.event.special[orig] = {
                        delegateType: fix,
                        bindType: fix,
                        handle: function(event) {
                            var ret, related = event.relatedTarget,
                                handleObj = event.handleObj;
                            return related && (related === this || jQuery.contains(this, related)) || (event.type = handleObj.origType, ret = handleObj.handler.apply(this, arguments), event.type = fix), ret
                        }
                    }
                }), jQuery.fn.extend({
                    on: function(types, selector, data, fn) {
                        return on(this, types, selector, data, fn)
                    },
                    one: function(types, selector, data, fn) {
                        return on(this, types, selector, data, fn, 1)
                    },
                    off: function(types, selector, fn) {
                        var handleObj, type;
                        if (types && types.preventDefault && types.handleObj) return handleObj = types.handleObj, jQuery(types.delegateTarget).off(handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType, handleObj.selector, handleObj.handler), this;
                        if ("object" == typeof types) {
                            for (type in types) this.off(type, selector, types[type]);
                            return this
                        }
                        return !1 !== selector && "function" != typeof selector || (fn = selector, selector = void 0), !1 === fn && (fn = returnFalse), this.each(function() {
                            jQuery.event.remove(this, types, fn, selector)
                        })
                    }
                });
                var rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,
                    rnoInnerhtml = /<script|<style|<link/i,
                    rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
                    rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;

                function manipulationTarget(elem, content) {
                    return nodeName(elem, "table") && nodeName(11 !== content.nodeType ? content : content.firstChild, "tr") && jQuery(elem).children("tbody")[0] || elem
                }

                function disableScript(elem) {
                    return elem.type = (null !== elem.getAttribute("type")) + "/" + elem.type, elem
                }

                function restoreScript(elem) {
                    return "true/" === (elem.type || "").slice(0, 5) ? elem.type = elem.type.slice(5) : elem.removeAttribute("type"), elem
                }

                function cloneCopyEvent(src, dest) {
                    var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;
                    if (1 === dest.nodeType) {
                        if (dataPriv.hasData(src) && (pdataOld = dataPriv.access(src), pdataCur = dataPriv.set(dest, pdataOld), events = pdataOld.events))
                            for (type in delete pdataCur.handle, pdataCur.events = {}, events)
                                for (i = 0, l = events[type].length; i < l; i++) jQuery.event.add(dest, type, events[type][i]);
                        dataUser.hasData(src) && (udataOld = dataUser.access(src), udataCur = jQuery.extend({}, udataOld), dataUser.set(dest, udataCur))
                    }
                }

                function domManip(collection, args, callback, ignored) {
                    args = concat.apply([], args);
                    var fragment, first, scripts, hasScripts, node, doc, i = 0,
                        l = collection.length,
                        iNoClone = l - 1,
                        value = args[0],
                        valueIsFunction = isFunction(value);
                    if (valueIsFunction || l > 1 && "string" == typeof value && !support.checkClone && rchecked.test(value)) return collection.each(function(index) {
                        var self = collection.eq(index);
                        valueIsFunction && (args[0] = value.call(this, index, self.html())), domManip(self, args, callback, ignored)
                    });
                    if (l && (first = (fragment = buildFragment(args, collection[0].ownerDocument, !1, collection, ignored)).firstChild, 1 === fragment.childNodes.length && (fragment = first), first || ignored)) {
                        for (hasScripts = (scripts = jQuery.map(getAll(fragment, "script"), disableScript)).length; i < l; i++) node = fragment, i !== iNoClone && (node = jQuery.clone(node, !0, !0), hasScripts && jQuery.merge(scripts, getAll(node, "script"))), callback.call(collection[i], node, i);
                        if (hasScripts)
                            for (doc = scripts[scripts.length - 1].ownerDocument, jQuery.map(scripts, restoreScript), i = 0; i < hasScripts; i++) node = scripts[i], rscriptType.test(node.type || "") && !dataPriv.access(node, "globalEval") && jQuery.contains(doc, node) && (node.src && "module" !== (node.type || "").toLowerCase() ? jQuery._evalUrl && !node.noModule && jQuery._evalUrl(node.src, {
                                nonce: node.nonce || node.getAttribute("nonce")
                            }) : DOMEval(node.textContent.replace(rcleanScript, ""), node, doc))
                    }
                    return collection
                }

                function remove(elem, selector, keepData) {
                    for (var node, nodes = selector ? jQuery.filter(selector, elem) : elem, i = 0; null != (node = nodes[i]); i++) keepData || 1 !== node.nodeType || jQuery.cleanData(getAll(node)), node.parentNode && (keepData && isAttached(node) && setGlobalEval(getAll(node, "script")), node.parentNode.removeChild(node));
                    return elem
                }
                jQuery.extend({
                    htmlPrefilter: function(html) {
                        return html.replace(rxhtmlTag, "<$1></$2>")
                    },
                    clone: function(elem, dataAndEvents, deepDataAndEvents) {
                        var i, l, srcElements, destElements, src, dest, nodeName, clone = elem.cloneNode(!0),
                            inPage = isAttached(elem);
                        if (!(support.noCloneChecked || 1 !== elem.nodeType && 11 !== elem.nodeType || jQuery.isXMLDoc(elem)))
                            for (destElements = getAll(clone), i = 0, l = (srcElements = getAll(elem)).length; i < l; i++) src = srcElements[i], dest = destElements[i], nodeName = void 0, "input" === (nodeName = dest.nodeName.toLowerCase()) && rcheckableType.test(src.type) ? dest.checked = src.checked : "input" !== nodeName && "textarea" !== nodeName || (dest.defaultValue = src.defaultValue);
                        if (dataAndEvents)
                            if (deepDataAndEvents)
                                for (srcElements = srcElements || getAll(elem), destElements = destElements || getAll(clone), i = 0, l = srcElements.length; i < l; i++) cloneCopyEvent(srcElements[i], destElements[i]);
                            else cloneCopyEvent(elem, clone);
                        return (destElements = getAll(clone, "script")).length > 0 && setGlobalEval(destElements, !inPage && getAll(elem, "script")), clone
                    },
                    cleanData: function(elems) {
                        for (var data, elem, type, special = jQuery.event.special, i = 0; void 0 !== (elem = elems[i]); i++)
                            if (acceptData(elem)) {
                                if (data = elem[dataPriv.expando]) {
                                    if (data.events)
                                        for (type in data.events) special[type] ? jQuery.event.remove(elem, type) : jQuery.removeEvent(elem, type, data.handle);
                                    elem[dataPriv.expando] = void 0
                                }
                                elem[dataUser.expando] && (elem[dataUser.expando] = void 0)
                            }
                    }
                }), jQuery.fn.extend({
                    detach: function(selector) {
                        return remove(this, selector, !0)
                    },
                    remove: function(selector) {
                        return remove(this, selector)
                    },
                    text: function(value) {
                        return access(this, function(value) {
                            return void 0 === value ? jQuery.text(this) : this.empty().each(function() {
                                1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = value)
                            })
                        }, null, value, arguments.length)
                    },
                    append: function() {
                        return domManip(this, arguments, function(elem) {
                            1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || manipulationTarget(this, elem).appendChild(elem)
                        })
                    },
                    prepend: function() {
                        return domManip(this, arguments, function(elem) {
                            if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                                var target = manipulationTarget(this, elem);
                                target.insertBefore(elem, target.firstChild)
                            }
                        })
                    },
                    before: function() {
                        return domManip(this, arguments, function(elem) {
                            this.parentNode && this.parentNode.insertBefore(elem, this)
                        })
                    },
                    after: function() {
                        return domManip(this, arguments, function(elem) {
                            this.parentNode && this.parentNode.insertBefore(elem, this.nextSibling)
                        })
                    },
                    empty: function() {
                        for (var elem, i = 0; null != (elem = this[i]); i++) 1 === elem.nodeType && (jQuery.cleanData(getAll(elem, !1)), elem.textContent = "");
                        return this
                    },
                    clone: function(dataAndEvents, deepDataAndEvents) {
                        return dataAndEvents = null != dataAndEvents && dataAndEvents, deepDataAndEvents = null == deepDataAndEvents ? dataAndEvents : deepDataAndEvents, this.map(function() {
                            return jQuery.clone(this, dataAndEvents, deepDataAndEvents)
                        })
                    },
                    html: function(value) {
                        return access(this, function(value) {
                            var elem = this[0] || {},
                                i = 0,
                                l = this.length;
                            if (void 0 === value && 1 === elem.nodeType) return elem.innerHTML;
                            if ("string" == typeof value && !rnoInnerhtml.test(value) && !wrapMap[(rtagName.exec(value) || ["", ""])[1].toLowerCase()]) {
                                value = jQuery.htmlPrefilter(value);
                                try {
                                    for (; i < l; i++) 1 === (elem = this[i] || {}).nodeType && (jQuery.cleanData(getAll(elem, !1)), elem.innerHTML = value);
                                    elem = 0
                                } catch (e) {}
                            }
                            elem && this.empty().append(value)
                        }, null, value, arguments.length)
                    },
                    replaceWith: function() {
                        var ignored = [];
                        return domManip(this, arguments, function(elem) {
                            var parent = this.parentNode;
                            jQuery.inArray(this, ignored) < 0 && (jQuery.cleanData(getAll(this)), parent && parent.replaceChild(elem, this))
                        }, ignored)
                    }
                }), jQuery.each({
                    appendTo: "append",
                    prependTo: "prepend",
                    insertBefore: "before",
                    insertAfter: "after",
                    replaceAll: "replaceWith"
                }, function(name, original) {
                    jQuery.fn[name] = function(selector) {
                        for (var elems, ret = [], insert = jQuery(selector), last = insert.length - 1, i = 0; i <= last; i++) elems = i === last ? this : this.clone(!0), jQuery(insert[i])[original](elems), push.apply(ret, elems.get());
                        return this.pushStack(ret)
                    }
                });
                var rnumnonpx = new RegExp("^(" + pnum + ")(?!px)[a-z%]+$", "i"),
                    getStyles = function(elem) {
                        var view = elem.ownerDocument.defaultView;
                        return view && view.opener || (view = window), view.getComputedStyle(elem)
                    },
                    rboxStyle = new RegExp(cssExpand.join("|"), "i");

                function curCSS(elem, name, computed) {
                    var width, minWidth, maxWidth, ret, style = elem.style;
                    return (computed = computed || getStyles(elem)) && ("" !== (ret = computed.getPropertyValue(name) || computed[name]) || isAttached(elem) || (ret = jQuery.style(elem, name)), !support.pixelBoxStyles() && rnumnonpx.test(ret) && rboxStyle.test(name) && (width = style.width, minWidth = style.minWidth, maxWidth = style.maxWidth, style.minWidth = style.maxWidth = style.width = ret, ret = computed.width, style.width = width, style.minWidth = minWidth, style.maxWidth = maxWidth)), void 0 !== ret ? ret + "" : ret
                }

                function addGetHookIf(conditionFn, hookFn) {
                    return {
                        get: function() {
                            if (!conditionFn()) return (this.get = hookFn).apply(this, arguments);
                            delete this.get
                        }
                    }
                }! function() {
                    function computeStyleTests() {
                        if (div) {
                            container.style.cssText = "position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0", div.style.cssText = "position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%", documentElement.appendChild(container).appendChild(div);
                            var divStyle = window.getComputedStyle(div);
                            pixelPositionVal = "1%" !== divStyle.top, reliableMarginLeftVal = 12 === roundPixelMeasures(divStyle.marginLeft), div.style.right = "60%", pixelBoxStylesVal = 36 === roundPixelMeasures(divStyle.right), boxSizingReliableVal = 36 === roundPixelMeasures(divStyle.width), div.style.position = "absolute", scrollboxSizeVal = 12 === roundPixelMeasures(div.offsetWidth / 3), documentElement.removeChild(container), div = null
                        }
                    }

                    function roundPixelMeasures(measure) {
                        return Math.round(parseFloat(measure))
                    }
                    var pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal, reliableMarginLeftVal, container = document.createElement("div"),
                        div = document.createElement("div");
                    div.style && (div.style.backgroundClip = "content-box", div.cloneNode(!0).style.backgroundClip = "", support.clearCloneStyle = "content-box" === div.style.backgroundClip, jQuery.extend(support, {
                        boxSizingReliable: function() {
                            return computeStyleTests(), boxSizingReliableVal
                        },
                        pixelBoxStyles: function() {
                            return computeStyleTests(), pixelBoxStylesVal
                        },
                        pixelPosition: function() {
                            return computeStyleTests(), pixelPositionVal
                        },
                        reliableMarginLeft: function() {
                            return computeStyleTests(), reliableMarginLeftVal
                        },
                        scrollboxSize: function() {
                            return computeStyleTests(), scrollboxSizeVal
                        }
                    }))
                }();
                var cssPrefixes = ["Webkit", "Moz", "ms"],
                    emptyStyle = document.createElement("div").style,
                    vendorProps = {};

                function finalPropName(name) {
                    var final = jQuery.cssProps[name] || vendorProps[name];
                    return final || (name in emptyStyle ? name : vendorProps[name] = function(name) {
                        for (var capName = name[0].toUpperCase() + name.slice(1), i = cssPrefixes.length; i--;)
                            if ((name = cssPrefixes[i] + capName) in emptyStyle) return name
                    }(name) || name)
                }
                var rdisplayswap = /^(none|table(?!-c[ea]).+)/,
                    rcustomProp = /^--/,
                    cssShow = {
                        position: "absolute",
                        visibility: "hidden",
                        display: "block"
                    },
                    cssNormalTransform = {
                        letterSpacing: "0",
                        fontWeight: "400"
                    };

                function setPositiveNumber(elem, value, subtract) {
                    var matches = rcssNum.exec(value);
                    return matches ? Math.max(0, matches[2] - (subtract || 0)) + (matches[3] || "px") : value
                }

                function boxModelAdjustment(elem, dimension, box, isBorderBox, styles, computedVal) {
                    var i = "width" === dimension ? 1 : 0,
                        extra = 0,
                        delta = 0;
                    if (box === (isBorderBox ? "border" : "content")) return 0;
                    for (; i < 4; i += 2) "margin" === box && (delta += jQuery.css(elem, box + cssExpand[i], !0, styles)), isBorderBox ? ("content" === box && (delta -= jQuery.css(elem, "padding" + cssExpand[i], !0, styles)), "margin" !== box && (delta -= jQuery.css(elem, "border" + cssExpand[i] + "Width", !0, styles))) : (delta += jQuery.css(elem, "padding" + cssExpand[i], !0, styles), "padding" !== box ? delta += jQuery.css(elem, "border" + cssExpand[i] + "Width", !0, styles) : extra += jQuery.css(elem, "border" + cssExpand[i] + "Width", !0, styles));
                    return !isBorderBox && computedVal >= 0 && (delta += Math.max(0, Math.ceil(elem["offset" + dimension[0].toUpperCase() + dimension.slice(1)] - computedVal - delta - extra - .5)) || 0), delta
                }

                function getWidthOrHeight(elem, dimension, extra) {
                    var styles = getStyles(elem),
                        isBorderBox = (!support.boxSizingReliable() || extra) && "border-box" === jQuery.css(elem, "boxSizing", !1, styles),
                        valueIsBorderBox = isBorderBox,
                        val = curCSS(elem, dimension, styles),
                        offsetProp = "offset" + dimension[0].toUpperCase() + dimension.slice(1);
                    if (rnumnonpx.test(val)) {
                        if (!extra) return val;
                        val = "auto"
                    }
                    return (!support.boxSizingReliable() && isBorderBox || "auto" === val || !parseFloat(val) && "inline" === jQuery.css(elem, "display", !1, styles)) && elem.getClientRects().length && (isBorderBox = "border-box" === jQuery.css(elem, "boxSizing", !1, styles), (valueIsBorderBox = offsetProp in elem) && (val = elem[offsetProp])), (val = parseFloat(val) || 0) + boxModelAdjustment(elem, dimension, extra || (isBorderBox ? "border" : "content"), valueIsBorderBox, styles, val) + "px"
                }

                function Tween(elem, options, prop, end, easing) {
                    return new Tween.prototype.init(elem, options, prop, end, easing)
                }
                jQuery.extend({
                    cssHooks: {
                        opacity: {
                            get: function(elem, computed) {
                                if (computed) {
                                    var ret = curCSS(elem, "opacity");
                                    return "" === ret ? "1" : ret
                                }
                            }
                        }
                    },
                    cssNumber: {
                        animationIterationCount: !0,
                        columnCount: !0,
                        fillOpacity: !0,
                        flexGrow: !0,
                        flexShrink: !0,
                        fontWeight: !0,
                        gridArea: !0,
                        gridColumn: !0,
                        gridColumnEnd: !0,
                        gridColumnStart: !0,
                        gridRow: !0,
                        gridRowEnd: !0,
                        gridRowStart: !0,
                        lineHeight: !0,
                        opacity: !0,
                        order: !0,
                        orphans: !0,
                        widows: !0,
                        zIndex: !0,
                        zoom: !0
                    },
                    cssProps: {},
                    style: function(elem, name, value, extra) {
                        if (elem && 3 !== elem.nodeType && 8 !== elem.nodeType && elem.style) {
                            var ret, type, hooks, origName = camelCase(name),
                                isCustomProp = rcustomProp.test(name),
                                style = elem.style;
                            if (isCustomProp || (name = finalPropName(origName)), hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName], void 0 === value) return hooks && "get" in hooks && void 0 !== (ret = hooks.get(elem, !1, extra)) ? ret : style[name];
                            "string" === (type = typeof value) && (ret = rcssNum.exec(value)) && ret[1] && (value = adjustCSS(elem, name, ret), type = "number"), null != value && value == value && ("number" !== type || isCustomProp || (value += ret && ret[3] || (jQuery.cssNumber[origName] ? "" : "px")), support.clearCloneStyle || "" !== value || 0 !== name.indexOf("background") || (style[name] = "inherit"), hooks && "set" in hooks && void 0 === (value = hooks.set(elem, value, extra)) || (isCustomProp ? style.setProperty(name, value) : style[name] = value))
                        }
                    },
                    css: function(elem, name, extra, styles) {
                        var val, num, hooks, origName = camelCase(name);
                        return rcustomProp.test(name) || (name = finalPropName(origName)), (hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName]) && "get" in hooks && (val = hooks.get(elem, !0, extra)), void 0 === val && (val = curCSS(elem, name, styles)), "normal" === val && name in cssNormalTransform && (val = cssNormalTransform[name]), "" === extra || extra ? (num = parseFloat(val), !0 === extra || isFinite(num) ? num || 0 : val) : val
                    }
                }), jQuery.each(["height", "width"], function(i, dimension) {
                    jQuery.cssHooks[dimension] = {
                        get: function(elem, computed, extra) {
                            if (computed) return !rdisplayswap.test(jQuery.css(elem, "display")) || elem.getClientRects().length && elem.getBoundingClientRect().width ? getWidthOrHeight(elem, dimension, extra) : swap(elem, cssShow, function() {
                                return getWidthOrHeight(elem, dimension, extra)
                            })
                        },
                        set: function(elem, value, extra) {
                            var matches, styles = getStyles(elem),
                                scrollboxSizeBuggy = !support.scrollboxSize() && "absolute" === styles.position,
                                isBorderBox = (scrollboxSizeBuggy || extra) && "border-box" === jQuery.css(elem, "boxSizing", !1, styles),
                                subtract = extra ? boxModelAdjustment(elem, dimension, extra, isBorderBox, styles) : 0;
                            return isBorderBox && scrollboxSizeBuggy && (subtract -= Math.ceil(elem["offset" + dimension[0].toUpperCase() + dimension.slice(1)] - parseFloat(styles[dimension]) - boxModelAdjustment(elem, dimension, "border", !1, styles) - .5)), subtract && (matches = rcssNum.exec(value)) && "px" !== (matches[3] || "px") && (elem.style[dimension] = value, value = jQuery.css(elem, dimension)), setPositiveNumber(0, value, subtract)
                        }
                    }
                }), jQuery.cssHooks.marginLeft = addGetHookIf(support.reliableMarginLeft, function(elem, computed) {
                    if (computed) return (parseFloat(curCSS(elem, "marginLeft")) || elem.getBoundingClientRect().left - swap(elem, {
                        marginLeft: 0
                    }, function() {
                        return elem.getBoundingClientRect().left
                    })) + "px"
                }), jQuery.each({
                    margin: "",
                    padding: "",
                    border: "Width"
                }, function(prefix, suffix) {
                    jQuery.cssHooks[prefix + suffix] = {
                        expand: function(value) {
                            for (var i = 0, expanded = {}, parts = "string" == typeof value ? value.split(" ") : [value]; i < 4; i++) expanded[prefix + cssExpand[i] + suffix] = parts[i] || parts[i - 2] || parts[0];
                            return expanded
                        }
                    }, "margin" !== prefix && (jQuery.cssHooks[prefix + suffix].set = setPositiveNumber)
                }), jQuery.fn.extend({
                    css: function(name, value) {
                        return access(this, function(elem, name, value) {
                            var styles, len, map = {},
                                i = 0;
                            if (Array.isArray(name)) {
                                for (styles = getStyles(elem), len = name.length; i < len; i++) map[name[i]] = jQuery.css(elem, name[i], !1, styles);
                                return map
                            }
                            return void 0 !== value ? jQuery.style(elem, name, value) : jQuery.css(elem, name)
                        }, name, value, arguments.length > 1)
                    }
                }), jQuery.Tween = Tween, Tween.prototype = {
                    constructor: Tween,
                    init: function(elem, options, prop, end, easing, unit) {
                        this.elem = elem, this.prop = prop, this.easing = easing || jQuery.easing._default, this.options = options, this.start = this.now = this.cur(), this.end = end, this.unit = unit || (jQuery.cssNumber[prop] ? "" : "px")
                    },
                    cur: function() {
                        var hooks = Tween.propHooks[this.prop];
                        return hooks && hooks.get ? hooks.get(this) : Tween.propHooks._default.get(this)
                    },
                    run: function(percent) {
                        var eased, hooks = Tween.propHooks[this.prop];
                        return this.options.duration ? this.pos = eased = jQuery.easing[this.easing](percent, this.options.duration * percent, 0, 1, this.options.duration) : this.pos = eased = percent, this.now = (this.end - this.start) * eased + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), hooks && hooks.set ? hooks.set(this) : Tween.propHooks._default.set(this), this
                    }
                }, Tween.prototype.init.prototype = Tween.prototype, Tween.propHooks = {
                    _default: {
                        get: function(tween) {
                            var result;
                            return 1 !== tween.elem.nodeType || null != tween.elem[tween.prop] && null == tween.elem.style[tween.prop] ? tween.elem[tween.prop] : (result = jQuery.css(tween.elem, tween.prop, "")) && "auto" !== result ? result : 0
                        },
                        set: function(tween) {
                            jQuery.fx.step[tween.prop] ? jQuery.fx.step[tween.prop](tween) : 1 !== tween.elem.nodeType || !jQuery.cssHooks[tween.prop] && null == tween.elem.style[finalPropName(tween.prop)] ? tween.elem[tween.prop] = tween.now : jQuery.style(tween.elem, tween.prop, tween.now + tween.unit)
                        }
                    }
                }, Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
                    set: function(tween) {
                        tween.elem.nodeType && tween.elem.parentNode && (tween.elem[tween.prop] = tween.now)
                    }
                }, jQuery.easing = {
                    linear: function(p) {
                        return p
                    },
                    swing: function(p) {
                        return .5 - Math.cos(p * Math.PI) / 2
                    },
                    _default: "swing"
                }, jQuery.fx = Tween.prototype.init, jQuery.fx.step = {};
                var fxNow, inProgress, rfxtypes = /^(?:toggle|show|hide)$/,
                    rrun = /queueHooks$/;

                function schedule() {
                    inProgress && (!1 === document.hidden && window.requestAnimationFrame ? window.requestAnimationFrame(schedule) : window.setTimeout(schedule, jQuery.fx.interval), jQuery.fx.tick())
                }

                function createFxNow() {
                    return window.setTimeout(function() {
                        fxNow = void 0
                    }), fxNow = Date.now()
                }

                function genFx(type, includeWidth) {
                    var which, i = 0,
                        attrs = {
                            height: type
                        };
                    for (includeWidth = includeWidth ? 1 : 0; i < 4; i += 2 - includeWidth) attrs["margin" + (which = cssExpand[i])] = attrs["padding" + which] = type;
                    return includeWidth && (attrs.opacity = attrs.width = type), attrs
                }

                function createTween(value, prop, animation) {
                    for (var tween, collection = (Animation.tweeners[prop] || []).concat(Animation.tweeners["*"]), index = 0, length = collection.length; index < length; index++)
                        if (tween = collection[index].call(animation, prop, value)) return tween
                }

                function Animation(elem, properties, options) {
                    var result, stopped, index = 0,
                        length = Animation.prefilters.length,
                        deferred = jQuery.Deferred().always(function() {
                            delete tick.elem
                        }),
                        tick = function() {
                            if (stopped) return !1;
                            for (var currentTime = fxNow || createFxNow(), remaining = Math.max(0, animation.startTime + animation.duration - currentTime), percent = 1 - (remaining / animation.duration || 0), index = 0, length = animation.tweens.length; index < length; index++) animation.tweens[index].run(percent);
                            return deferred.notifyWith(elem, [animation, percent, remaining]), percent < 1 && length ? remaining : (length || deferred.notifyWith(elem, [animation, 1, 0]), deferred.resolveWith(elem, [animation]), !1)
                        },
                        animation = deferred.promise({
                            elem: elem,
                            props: jQuery.extend({}, properties),
                            opts: jQuery.extend(!0, {
                                specialEasing: {},
                                easing: jQuery.easing._default
                            }, options),
                            originalProperties: properties,
                            originalOptions: options,
                            startTime: fxNow || createFxNow(),
                            duration: options.duration,
                            tweens: [],
                            createTween: function(prop, end) {
                                var tween = jQuery.Tween(elem, animation.opts, prop, end, animation.opts.specialEasing[prop] || animation.opts.easing);
                                return animation.tweens.push(tween), tween
                            },
                            stop: function(gotoEnd) {
                                var index = 0,
                                    length = gotoEnd ? animation.tweens.length : 0;
                                if (stopped) return this;
                                for (stopped = !0; index < length; index++) animation.tweens[index].run(1);
                                return gotoEnd ? (deferred.notifyWith(elem, [animation, 1, 0]), deferred.resolveWith(elem, [animation, gotoEnd])) : deferred.rejectWith(elem, [animation, gotoEnd]), this
                            }
                        }),
                        props = animation.props;
                    for (! function(props, specialEasing) {
                            var index, name, easing, value, hooks;
                            for (index in props)
                                if (easing = specialEasing[name = camelCase(index)], value = props[index], Array.isArray(value) && (easing = value[1], value = props[index] = value[0]), index !== name && (props[name] = value, delete props[index]), (hooks = jQuery.cssHooks[name]) && "expand" in hooks)
                                    for (index in value = hooks.expand(value), delete props[name], value) index in props || (props[index] = value[index], specialEasing[index] = easing);
                                else specialEasing[name] = easing
                        }(props, animation.opts.specialEasing); index < length; index++)
                        if (result = Animation.prefilters[index].call(animation, elem, props, animation.opts)) return isFunction(result.stop) && (jQuery._queueHooks(animation.elem, animation.opts.queue).stop = result.stop.bind(result)), result;
                    return jQuery.map(props, createTween, animation), isFunction(animation.opts.start) && animation.opts.start.call(elem, animation), animation.progress(animation.opts.progress).done(animation.opts.done, animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always), jQuery.fx.timer(jQuery.extend(tick, {
                        elem: elem,
                        anim: animation,
                        queue: animation.opts.queue
                    })), animation
                }
                jQuery.Animation = jQuery.extend(Animation, {
                        tweeners: {
                            "*": [function(prop, value) {
                                var tween = this.createTween(prop, value);
                                return adjustCSS(tween.elem, prop, rcssNum.exec(value), tween), tween
                            }]
                        },
                        tweener: function(props, callback) {
                            isFunction(props) ? (callback = props, props = ["*"]) : props = props.match(rnothtmlwhite);
                            for (var prop, index = 0, length = props.length; index < length; index++) prop = props[index], Animation.tweeners[prop] = Animation.tweeners[prop] || [], Animation.tweeners[prop].unshift(callback)
                        },
                        prefilters: [function(elem, props, opts) {
                            var prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display, isBox = "width" in props || "height" in props,
                                anim = this,
                                orig = {},
                                style = elem.style,
                                hidden = elem.nodeType && isHiddenWithinTree(elem),
                                dataShow = dataPriv.get(elem, "fxshow");
                            for (prop in opts.queue || (null == (hooks = jQuery._queueHooks(elem, "fx")).unqueued && (hooks.unqueued = 0, oldfire = hooks.empty.fire, hooks.empty.fire = function() {
                                    hooks.unqueued || oldfire()
                                }), hooks.unqueued++, anim.always(function() {
                                    anim.always(function() {
                                        hooks.unqueued--, jQuery.queue(elem, "fx").length || hooks.empty.fire()
                                    })
                                })), props)
                                if (value = props[prop], rfxtypes.test(value)) {
                                    if (delete props[prop], toggle = toggle || "toggle" === value, value === (hidden ? "hide" : "show")) {
                                        if ("show" !== value || !dataShow || void 0 === dataShow[prop]) continue;
                                        hidden = !0
                                    }
                                    orig[prop] = dataShow && dataShow[prop] || jQuery.style(elem, prop)
                                } if ((propTween = !jQuery.isEmptyObject(props)) || !jQuery.isEmptyObject(orig))
                                for (prop in isBox && 1 === elem.nodeType && (opts.overflow = [style.overflow, style.overflowX, style.overflowY], null == (restoreDisplay = dataShow && dataShow.display) && (restoreDisplay = dataPriv.get(elem, "display")), "none" === (display = jQuery.css(elem, "display")) && (restoreDisplay ? display = restoreDisplay : (showHide([elem], !0), restoreDisplay = elem.style.display || restoreDisplay, display = jQuery.css(elem, "display"), showHide([elem]))), ("inline" === display || "inline-block" === display && null != restoreDisplay) && "none" === jQuery.css(elem, "float") && (propTween || (anim.done(function() {
                                        style.display = restoreDisplay
                                    }), null == restoreDisplay && (display = style.display, restoreDisplay = "none" === display ? "" : display)), style.display = "inline-block")), opts.overflow && (style.overflow = "hidden", anim.always(function() {
                                        style.overflow = opts.overflow[0], style.overflowX = opts.overflow[1], style.overflowY = opts.overflow[2]
                                    })), propTween = !1, orig) propTween || (dataShow ? "hidden" in dataShow && (hidden = dataShow.hidden) : dataShow = dataPriv.access(elem, "fxshow", {
                                    display: restoreDisplay
                                }), toggle && (dataShow.hidden = !hidden), hidden && showHide([elem], !0), anim.done(function() {
                                    for (prop in hidden || showHide([elem]), dataPriv.remove(elem, "fxshow"), orig) jQuery.style(elem, prop, orig[prop])
                                })), propTween = createTween(hidden ? dataShow[prop] : 0, prop, anim), prop in dataShow || (dataShow[prop] = propTween.start, hidden && (propTween.end = propTween.start, propTween.start = 0))
                        }],
                        prefilter: function(callback, prepend) {
                            prepend ? Animation.prefilters.unshift(callback) : Animation.prefilters.push(callback)
                        }
                    }), jQuery.speed = function(speed, easing, fn) {
                        var opt = speed && "object" == typeof speed ? jQuery.extend({}, speed) : {
                            complete: fn || !fn && easing || isFunction(speed) && speed,
                            duration: speed,
                            easing: fn && easing || easing && !isFunction(easing) && easing
                        };
                        return jQuery.fx.off ? opt.duration = 0 : "number" != typeof opt.duration && (opt.duration in jQuery.fx.speeds ? opt.duration = jQuery.fx.speeds[opt.duration] : opt.duration = jQuery.fx.speeds._default), null != opt.queue && !0 !== opt.queue || (opt.queue = "fx"), opt.old = opt.complete, opt.complete = function() {
                            isFunction(opt.old) && opt.old.call(this), opt.queue && jQuery.dequeue(this, opt.queue)
                        }, opt
                    }, jQuery.fn.extend({
                        fadeTo: function(speed, to, easing, callback) {
                            return this.filter(isHiddenWithinTree).css("opacity", 0).show().end().animate({
                                opacity: to
                            }, speed, easing, callback)
                        },
                        animate: function(prop, speed, easing, callback) {
                            var empty = jQuery.isEmptyObject(prop),
                                optall = jQuery.speed(speed, easing, callback),
                                doAnimation = function() {
                                    var anim = Animation(this, jQuery.extend({}, prop), optall);
                                    (empty || dataPriv.get(this, "finish")) && anim.stop(!0)
                                };
                            return doAnimation.finish = doAnimation, empty || !1 === optall.queue ? this.each(doAnimation) : this.queue(optall.queue, doAnimation)
                        },
                        stop: function(type, clearQueue, gotoEnd) {
                            var stopQueue = function(hooks) {
                                var stop = hooks.stop;
                                delete hooks.stop, stop(gotoEnd)
                            };
                            return "string" != typeof type && (gotoEnd = clearQueue, clearQueue = type, type = void 0), clearQueue && !1 !== type && this.queue(type || "fx", []), this.each(function() {
                                var dequeue = !0,
                                    index = null != type && type + "queueHooks",
                                    timers = jQuery.timers,
                                    data = dataPriv.get(this);
                                if (index) data[index] && data[index].stop && stopQueue(data[index]);
                                else
                                    for (index in data) data[index] && data[index].stop && rrun.test(index) && stopQueue(data[index]);
                                for (index = timers.length; index--;) timers[index].elem !== this || null != type && timers[index].queue !== type || (timers[index].anim.stop(gotoEnd), dequeue = !1, timers.splice(index, 1));
                                !dequeue && gotoEnd || jQuery.dequeue(this, type)
                            })
                        },
                        finish: function(type) {
                            return !1 !== type && (type = type || "fx"), this.each(function() {
                                var index, data = dataPriv.get(this),
                                    queue = data[type + "queue"],
                                    hooks = data[type + "queueHooks"],
                                    timers = jQuery.timers,
                                    length = queue ? queue.length : 0;
                                for (data.finish = !0, jQuery.queue(this, type, []), hooks && hooks.stop && hooks.stop.call(this, !0), index = timers.length; index--;) timers[index].elem === this && timers[index].queue === type && (timers[index].anim.stop(!0), timers.splice(index, 1));
                                for (index = 0; index < length; index++) queue[index] && queue[index].finish && queue[index].finish.call(this);
                                delete data.finish
                            })
                        }
                    }), jQuery.each(["toggle", "show", "hide"], function(i, name) {
                        var cssFn = jQuery.fn[name];
                        jQuery.fn[name] = function(speed, easing, callback) {
                            return null == speed || "boolean" == typeof speed ? cssFn.apply(this, arguments) : this.animate(genFx(name, !0), speed, easing, callback)
                        }
                    }), jQuery.each({
                        slideDown: genFx("show"),
                        slideUp: genFx("hide"),
                        slideToggle: genFx("toggle"),
                        fadeIn: {
                            opacity: "show"
                        },
                        fadeOut: {
                            opacity: "hide"
                        },
                        fadeToggle: {
                            opacity: "toggle"
                        }
                    }, function(name, props) {
                        jQuery.fn[name] = function(speed, easing, callback) {
                            return this.animate(props, speed, easing, callback)
                        }
                    }), jQuery.timers = [], jQuery.fx.tick = function() {
                        var timer, i = 0,
                            timers = jQuery.timers;
                        for (fxNow = Date.now(); i < timers.length; i++)(timer = timers[i])() || timers[i] !== timer || timers.splice(i--, 1);
                        timers.length || jQuery.fx.stop(), fxNow = void 0
                    }, jQuery.fx.timer = function(timer) {
                        jQuery.timers.push(timer), jQuery.fx.start()
                    }, jQuery.fx.interval = 13, jQuery.fx.start = function() {
                        inProgress || (inProgress = !0, schedule())
                    }, jQuery.fx.stop = function() {
                        inProgress = null
                    }, jQuery.fx.speeds = {
                        slow: 600,
                        fast: 200,
                        _default: 400
                    }, jQuery.fn.delay = function(time, type) {
                        return time = jQuery.fx && jQuery.fx.speeds[time] || time, type = type || "fx", this.queue(type, function(next, hooks) {
                            var timeout = window.setTimeout(next, time);
                            hooks.stop = function() {
                                window.clearTimeout(timeout)
                            }
                        })
                    },
                    function() {
                        var input = document.createElement("input"),
                            opt = document.createElement("select").appendChild(document.createElement("option"));
                        input.type = "checkbox", support.checkOn = "" !== input.value, support.optSelected = opt.selected, (input = document.createElement("input")).value = "t", input.type = "radio", support.radioValue = "t" === input.value
                    }();
                var boolHook, attrHandle = jQuery.expr.attrHandle;
                jQuery.fn.extend({
                    attr: function(name, value) {
                        return access(this, jQuery.attr, name, value, arguments.length > 1)
                    },
                    removeAttr: function(name) {
                        return this.each(function() {
                            jQuery.removeAttr(this, name)
                        })
                    }
                }), jQuery.extend({
                    attr: function(elem, name, value) {
                        var ret, hooks, nType = elem.nodeType;
                        if (3 !== nType && 8 !== nType && 2 !== nType) return void 0 === elem.getAttribute ? jQuery.prop(elem, name, value) : (1 === nType && jQuery.isXMLDoc(elem) || (hooks = jQuery.attrHooks[name.toLowerCase()] || (jQuery.expr.match.bool.test(name) ? boolHook : void 0)), void 0 !== value ? null === value ? void jQuery.removeAttr(elem, name) : hooks && "set" in hooks && void 0 !== (ret = hooks.set(elem, value, name)) ? ret : (elem.setAttribute(name, value + ""), value) : hooks && "get" in hooks && null !== (ret = hooks.get(elem, name)) ? ret : null == (ret = jQuery.find.attr(elem, name)) ? void 0 : ret)
                    },
                    attrHooks: {
                        type: {
                            set: function(elem, value) {
                                if (!support.radioValue && "radio" === value && nodeName(elem, "input")) {
                                    var val = elem.value;
                                    return elem.setAttribute("type", value), val && (elem.value = val), value
                                }
                            }
                        }
                    },
                    removeAttr: function(elem, value) {
                        var name, i = 0,
                            attrNames = value && value.match(rnothtmlwhite);
                        if (attrNames && 1 === elem.nodeType)
                            for (; name = attrNames[i++];) elem.removeAttribute(name)
                    }
                }), boolHook = {
                    set: function(elem, value, name) {
                        return !1 === value ? jQuery.removeAttr(elem, name) : elem.setAttribute(name, name), name
                    }
                }, jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g), function(i, name) {
                    var getter = attrHandle[name] || jQuery.find.attr;
                    attrHandle[name] = function(elem, name, isXML) {
                        var ret, handle, lowercaseName = name.toLowerCase();
                        return isXML || (handle = attrHandle[lowercaseName], attrHandle[lowercaseName] = ret, ret = null != getter(elem, name, isXML) ? lowercaseName : null, attrHandle[lowercaseName] = handle), ret
                    }
                });
                var rfocusable = /^(?:input|select|textarea|button)$/i,
                    rclickable = /^(?:a|area)$/i;

                function stripAndCollapse(value) {
                    return (value.match(rnothtmlwhite) || []).join(" ")
                }

                function getClass(elem) {
                    return elem.getAttribute && elem.getAttribute("class") || ""
                }

                function classesToArray(value) {
                    return Array.isArray(value) ? value : "string" == typeof value && value.match(rnothtmlwhite) || []
                }
                jQuery.fn.extend({
                    prop: function(name, value) {
                        return access(this, jQuery.prop, name, value, arguments.length > 1)
                    },
                    removeProp: function(name) {
                        return this.each(function() {
                            delete this[jQuery.propFix[name] || name]
                        })
                    }
                }), jQuery.extend({
                    prop: function(elem, name, value) {
                        var ret, hooks, nType = elem.nodeType;
                        if (3 !== nType && 8 !== nType && 2 !== nType) return 1 === nType && jQuery.isXMLDoc(elem) || (name = jQuery.propFix[name] || name, hooks = jQuery.propHooks[name]), void 0 !== value ? hooks && "set" in hooks && void 0 !== (ret = hooks.set(elem, value, name)) ? ret : elem[name] = value : hooks && "get" in hooks && null !== (ret = hooks.get(elem, name)) ? ret : elem[name]
                    },
                    propHooks: {
                        tabIndex: {
                            get: function(elem) {
                                var tabindex = jQuery.find.attr(elem, "tabindex");
                                return tabindex ? parseInt(tabindex, 10) : rfocusable.test(elem.nodeName) || rclickable.test(elem.nodeName) && elem.href ? 0 : -1
                            }
                        }
                    },
                    propFix: {
                        for: "htmlFor",
                        class: "className"
                    }
                }), support.optSelected || (jQuery.propHooks.selected = {
                    get: function(elem) {
                        var parent = elem.parentNode;
                        return parent && parent.parentNode && parent.parentNode.selectedIndex, null
                    },
                    set: function(elem) {
                        var parent = elem.parentNode;
                        parent && (parent.selectedIndex, parent.parentNode && parent.parentNode.selectedIndex)
                    }
                }), jQuery.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
                    jQuery.propFix[this.toLowerCase()] = this
                }), jQuery.fn.extend({
                    addClass: function(value) {
                        var classes, elem, cur, curValue, clazz, j, finalValue, i = 0;
                        if (isFunction(value)) return this.each(function(j) {
                            jQuery(this).addClass(value.call(this, j, getClass(this)))
                        });
                        if ((classes = classesToArray(value)).length)
                            for (; elem = this[i++];)
                                if (curValue = getClass(elem), cur = 1 === elem.nodeType && " " + stripAndCollapse(curValue) + " ") {
                                    for (j = 0; clazz = classes[j++];) cur.indexOf(" " + clazz + " ") < 0 && (cur += clazz + " ");
                                    curValue !== (finalValue = stripAndCollapse(cur)) && elem.setAttribute("class", finalValue)
                                } return this
                    },
                    removeClass: function(value) {
                        var classes, elem, cur, curValue, clazz, j, finalValue, i = 0;
                        if (isFunction(value)) return this.each(function(j) {
                            jQuery(this).removeClass(value.call(this, j, getClass(this)))
                        });
                        if (!arguments.length) return this.attr("class", "");
                        if ((classes = classesToArray(value)).length)
                            for (; elem = this[i++];)
                                if (curValue = getClass(elem), cur = 1 === elem.nodeType && " " + stripAndCollapse(curValue) + " ") {
                                    for (j = 0; clazz = classes[j++];)
                                        for (; cur.indexOf(" " + clazz + " ") > -1;) cur = cur.replace(" " + clazz + " ", " ");
                                    curValue !== (finalValue = stripAndCollapse(cur)) && elem.setAttribute("class", finalValue)
                                } return this
                    },
                    toggleClass: function(value, stateVal) {
                        var type = typeof value,
                            isValidValue = "string" === type || Array.isArray(value);
                        return "boolean" == typeof stateVal && isValidValue ? stateVal ? this.addClass(value) : this.removeClass(value) : isFunction(value) ? this.each(function(i) {
                            jQuery(this).toggleClass(value.call(this, i, getClass(this), stateVal), stateVal)
                        }) : this.each(function() {
                            var className, i, self, classNames;
                            if (isValidValue)
                                for (i = 0, self = jQuery(this), classNames = classesToArray(value); className = classNames[i++];) self.hasClass(className) ? self.removeClass(className) : self.addClass(className);
                            else void 0 !== value && "boolean" !== type || ((className = getClass(this)) && dataPriv.set(this, "__className__", className), this.setAttribute && this.setAttribute("class", className || !1 === value ? "" : dataPriv.get(this, "__className__") || ""))
                        })
                    },
                    hasClass: function(selector) {
                        var className, elem, i = 0;
                        for (className = " " + selector + " "; elem = this[i++];)
                            if (1 === elem.nodeType && (" " + stripAndCollapse(getClass(elem)) + " ").indexOf(className) > -1) return !0;
                        return !1
                    }
                });
                var rreturn = /\r/g;
                jQuery.fn.extend({
                    val: function(value) {
                        var hooks, ret, valueIsFunction, elem = this[0];
                        return arguments.length ? (valueIsFunction = isFunction(value), this.each(function(i) {
                            var val;
                            1 === this.nodeType && (null == (val = valueIsFunction ? value.call(this, i, jQuery(this).val()) : value) ? val = "" : "number" == typeof val ? val += "" : Array.isArray(val) && (val = jQuery.map(val, function(value) {
                                return null == value ? "" : value + ""
                            })), (hooks = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()]) && "set" in hooks && void 0 !== hooks.set(this, val, "value") || (this.value = val))
                        })) : elem ? (hooks = jQuery.valHooks[elem.type] || jQuery.valHooks[elem.nodeName.toLowerCase()]) && "get" in hooks && void 0 !== (ret = hooks.get(elem, "value")) ? ret : "string" == typeof(ret = elem.value) ? ret.replace(rreturn, "") : null == ret ? "" : ret : void 0
                    }
                }), jQuery.extend({
                    valHooks: {
                        option: {
                            get: function(elem) {
                                var val = jQuery.find.attr(elem, "value");
                                return null != val ? val : stripAndCollapse(jQuery.text(elem))
                            }
                        },
                        select: {
                            get: function(elem) {
                                var value, option, i, options = elem.options,
                                    index = elem.selectedIndex,
                                    one = "select-one" === elem.type,
                                    values = one ? null : [],
                                    max = one ? index + 1 : options.length;
                                for (i = index < 0 ? max : one ? index : 0; i < max; i++)
                                    if (((option = options[i]).selected || i === index) && !option.disabled && (!option.parentNode.disabled || !nodeName(option.parentNode, "optgroup"))) {
                                        if (value = jQuery(option).val(), one) return value;
                                        values.push(value)
                                    } return values
                            },
                            set: function(elem, value) {
                                for (var optionSet, option, options = elem.options, values = jQuery.makeArray(value), i = options.length; i--;)((option = options[i]).selected = jQuery.inArray(jQuery.valHooks.option.get(option), values) > -1) && (optionSet = !0);
                                return optionSet || (elem.selectedIndex = -1), values
                            }
                        }
                    }
                }), jQuery.each(["radio", "checkbox"], function() {
                    jQuery.valHooks[this] = {
                        set: function(elem, value) {
                            if (Array.isArray(value)) return elem.checked = jQuery.inArray(jQuery(elem).val(), value) > -1
                        }
                    }, support.checkOn || (jQuery.valHooks[this].get = function(elem) {
                        return null === elem.getAttribute("value") ? "on" : elem.value
                    })
                }), support.focusin = "onfocusin" in window;
                var rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
                    stopPropagationCallback = function(e) {
                        e.stopPropagation()
                    };
                jQuery.extend(jQuery.event, {
                    trigger: function(event, data, elem, onlyHandlers) {
                        var i, cur, tmp, bubbleType, ontype, handle, special, lastElement, eventPath = [elem || document],
                            type = hasOwn.call(event, "type") ? event.type : event,
                            namespaces = hasOwn.call(event, "namespace") ? event.namespace.split(".") : [];
                        if (cur = lastElement = tmp = elem = elem || document, 3 !== elem.nodeType && 8 !== elem.nodeType && !rfocusMorph.test(type + jQuery.event.triggered) && (type.indexOf(".") > -1 && (namespaces = type.split("."), type = namespaces.shift(), namespaces.sort()), ontype = type.indexOf(":") < 0 && "on" + type, (event = event[jQuery.expando] ? event : new jQuery.Event(type, "object" == typeof event && event)).isTrigger = onlyHandlers ? 2 : 3, event.namespace = namespaces.join("."), event.rnamespace = event.namespace ? new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, event.result = void 0, event.target || (event.target = elem), data = null == data ? [event] : jQuery.makeArray(data, [event]), special = jQuery.event.special[type] || {}, onlyHandlers || !special.trigger || !1 !== special.trigger.apply(elem, data))) {
                            if (!onlyHandlers && !special.noBubble && !isWindow(elem)) {
                                for (bubbleType = special.delegateType || type, rfocusMorph.test(bubbleType + type) || (cur = cur.parentNode); cur; cur = cur.parentNode) eventPath.push(cur), tmp = cur;
                                tmp === (elem.ownerDocument || document) && eventPath.push(tmp.defaultView || tmp.parentWindow || window)
                            }
                            for (i = 0;
                                (cur = eventPath[i++]) && !event.isPropagationStopped();) lastElement = cur, event.type = i > 1 ? bubbleType : special.bindType || type, (handle = (dataPriv.get(cur, "events") || {})[event.type] && dataPriv.get(cur, "handle")) && handle.apply(cur, data), (handle = ontype && cur[ontype]) && handle.apply && acceptData(cur) && (event.result = handle.apply(cur, data), !1 === event.result && event.preventDefault());
                            return event.type = type, onlyHandlers || event.isDefaultPrevented() || special._default && !1 !== special._default.apply(eventPath.pop(), data) || !acceptData(elem) || ontype && isFunction(elem[type]) && !isWindow(elem) && ((tmp = elem[ontype]) && (elem[ontype] = null), jQuery.event.triggered = type, event.isPropagationStopped() && lastElement.addEventListener(type, stopPropagationCallback), elem[type](), event.isPropagationStopped() && lastElement.removeEventListener(type, stopPropagationCallback), jQuery.event.triggered = void 0, tmp && (elem[ontype] = tmp)), event.result
                        }
                    },
                    simulate: function(type, elem, event) {
                        var e = jQuery.extend(new jQuery.Event, event, {
                            type: type,
                            isSimulated: !0
                        });
                        jQuery.event.trigger(e, null, elem)
                    }
                }), jQuery.fn.extend({
                    trigger: function(type, data) {
                        return this.each(function() {
                            jQuery.event.trigger(type, data, this)
                        })
                    },
                    triggerHandler: function(type, data) {
                        var elem = this[0];
                        if (elem) return jQuery.event.trigger(type, data, elem, !0)
                    }
                }), support.focusin || jQuery.each({
                    focus: "focusin",
                    blur: "focusout"
                }, function(orig, fix) {
                    var handler = function(event) {
                        jQuery.event.simulate(fix, event.target, jQuery.event.fix(event))
                    };
                    jQuery.event.special[fix] = {
                        setup: function() {
                            var doc = this.ownerDocument || this,
                                attaches = dataPriv.access(doc, fix);
                            attaches || doc.addEventListener(orig, handler, !0), dataPriv.access(doc, fix, (attaches || 0) + 1)
                        },
                        teardown: function() {
                            var doc = this.ownerDocument || this,
                                attaches = dataPriv.access(doc, fix) - 1;
                            attaches ? dataPriv.access(doc, fix, attaches) : (doc.removeEventListener(orig, handler, !0), dataPriv.remove(doc, fix))
                        }
                    }
                });
                var location = window.location,
                    nonce = Date.now(),
                    rquery = /\?/;
                jQuery.parseXML = function(data) {
                    var xml;
                    if (!data || "string" != typeof data) return null;
                    try {
                        xml = (new window.DOMParser).parseFromString(data, "text/xml")
                    } catch (e) {
                        xml = void 0
                    }
                    return xml && !xml.getElementsByTagName("parsererror").length || jQuery.error("Invalid XML: " + data), xml
                };
                var rbracket = /\[\]$/,
                    rCRLF = /\r?\n/g,
                    rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
                    rsubmittable = /^(?:input|select|textarea|keygen)/i;

                function buildParams(prefix, obj, traditional, add) {
                    var name;
                    if (Array.isArray(obj)) jQuery.each(obj, function(i, v) {
                        traditional || rbracket.test(prefix) ? add(prefix, v) : buildParams(prefix + "[" + ("object" == typeof v && null != v ? i : "") + "]", v, traditional, add)
                    });
                    else if (traditional || "object" !== toType(obj)) add(prefix, obj);
                    else
                        for (name in obj) buildParams(prefix + "[" + name + "]", obj[name], traditional, add)
                }
                jQuery.param = function(a, traditional) {
                    var prefix, s = [],
                        add = function(key, valueOrFunction) {
                            var value = isFunction(valueOrFunction) ? valueOrFunction() : valueOrFunction;
                            s[s.length] = encodeURIComponent(key) + "=" + encodeURIComponent(null == value ? "" : value)
                        };
                    if (null == a) return "";
                    if (Array.isArray(a) || a.jquery && !jQuery.isPlainObject(a)) jQuery.each(a, function() {
                        add(this.name, this.value)
                    });
                    else
                        for (prefix in a) buildParams(prefix, a[prefix], traditional, add);
                    return s.join("&")
                }, jQuery.fn.extend({
                    serialize: function() {
                        return jQuery.param(this.serializeArray())
                    },
                    serializeArray: function() {
                        return this.map(function() {
                            var elements = jQuery.prop(this, "elements");
                            return elements ? jQuery.makeArray(elements) : this
                        }).filter(function() {
                            var type = this.type;
                            return this.name && !jQuery(this).is(":disabled") && rsubmittable.test(this.nodeName) && !rsubmitterTypes.test(type) && (this.checked || !rcheckableType.test(type))
                        }).map(function(i, elem) {
                            var val = jQuery(this).val();
                            return null == val ? null : Array.isArray(val) ? jQuery.map(val, function(val) {
                                return {
                                    name: elem.name,
                                    value: val.replace(rCRLF, "\r\n")
                                }
                            }) : {
                                name: elem.name,
                                value: val.replace(rCRLF, "\r\n")
                            }
                        }).get()
                    }
                });
                var r20 = /%20/g,
                    rhash = /#.*$/,
                    rantiCache = /([?&])_=[^&]*/,
                    rheaders = /^(.*?):[ \t]*([^\r\n]*)$/gm,
                    rnoContent = /^(?:GET|HEAD)$/,
                    rprotocol = /^\/\//,
                    prefilters = {},
                    transports = {},
                    allTypes = "*/".concat("*"),
                    originAnchor = document.createElement("a");

                function addToPrefiltersOrTransports(structure) {
                    return function(dataTypeExpression, func) {
                        "string" != typeof dataTypeExpression && (func = dataTypeExpression, dataTypeExpression = "*");
                        var dataType, i = 0,
                            dataTypes = dataTypeExpression.toLowerCase().match(rnothtmlwhite) || [];
                        if (isFunction(func))
                            for (; dataType = dataTypes[i++];) "+" === dataType[0] ? (dataType = dataType.slice(1) || "*", (structure[dataType] = structure[dataType] || []).unshift(func)) : (structure[dataType] = structure[dataType] || []).push(func)
                    }
                }

                function inspectPrefiltersOrTransports(structure, options, originalOptions, jqXHR) {
                    var inspected = {},
                        seekingTransport = structure === transports;

                    function inspect(dataType) {
                        var selected;
                        return inspected[dataType] = !0, jQuery.each(structure[dataType] || [], function(_, prefilterOrFactory) {
                            var dataTypeOrTransport = prefilterOrFactory(options, originalOptions, jqXHR);
                            return "string" != typeof dataTypeOrTransport || seekingTransport || inspected[dataTypeOrTransport] ? seekingTransport ? !(selected = dataTypeOrTransport) : void 0 : (options.dataTypes.unshift(dataTypeOrTransport), inspect(dataTypeOrTransport), !1)
                        }), selected
                    }
                    return inspect(options.dataTypes[0]) || !inspected["*"] && inspect("*")
                }

                function ajaxExtend(target, src) {
                    var key, deep, flatOptions = jQuery.ajaxSettings.flatOptions || {};
                    for (key in src) void 0 !== src[key] && ((flatOptions[key] ? target : deep || (deep = {}))[key] = src[key]);
                    return deep && jQuery.extend(!0, target, deep), target
                }
                originAnchor.href = location.href, jQuery.extend({
                    active: 0,
                    lastModified: {},
                    etag: {},
                    ajaxSettings: {
                        url: location.href,
                        type: "GET",
                        isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(location.protocol),
                        global: !0,
                        processData: !0,
                        async: !0,
                        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                        accepts: {
                            "*": allTypes,
                            text: "text/plain",
                            html: "text/html",
                            xml: "application/xml, text/xml",
                            json: "application/json, text/javascript"
                        },
                        contents: {
                            xml: /\bxml\b/,
                            html: /\bhtml/,
                            json: /\bjson\b/
                        },
                        responseFields: {
                            xml: "responseXML",
                            text: "responseText",
                            json: "responseJSON"
                        },
                        converters: {
                            "* text": String,
                            "text html": !0,
                            "text json": JSON.parse,
                            "text xml": jQuery.parseXML
                        },
                        flatOptions: {
                            url: !0,
                            context: !0
                        }
                    },
                    ajaxSetup: function(target, settings) {
                        return settings ? ajaxExtend(ajaxExtend(target, jQuery.ajaxSettings), settings) : ajaxExtend(jQuery.ajaxSettings, target)
                    },
                    ajaxPrefilter: addToPrefiltersOrTransports(prefilters),
                    ajaxTransport: addToPrefiltersOrTransports(transports),
                    ajax: function(url, options) {
                        "object" == typeof url && (options = url, url = void 0), options = options || {};
                        var transport, cacheURL, responseHeadersString, responseHeaders, timeoutTimer, urlAnchor, completed, fireGlobals, i, uncached, s = jQuery.ajaxSetup({}, options),
                            callbackContext = s.context || s,
                            globalEventContext = s.context && (callbackContext.nodeType || callbackContext.jquery) ? jQuery(callbackContext) : jQuery.event,
                            deferred = jQuery.Deferred(),
                            completeDeferred = jQuery.Callbacks("once memory"),
                            statusCode = s.statusCode || {},
                            requestHeaders = {},
                            requestHeadersNames = {},
                            strAbort = "canceled",
                            jqXHR = {
                                readyState: 0,
                                getResponseHeader: function(key) {
                                    var match;
                                    if (completed) {
                                        if (!responseHeaders)
                                            for (responseHeaders = {}; match = rheaders.exec(responseHeadersString);) responseHeaders[match[1].toLowerCase() + " "] = (responseHeaders[match[1].toLowerCase() + " "] || []).concat(match[2]);
                                        match = responseHeaders[key.toLowerCase() + " "]
                                    }
                                    return null == match ? null : match.join(", ")
                                },
                                getAllResponseHeaders: function() {
                                    return completed ? responseHeadersString : null
                                },
                                setRequestHeader: function(name, value) {
                                    return null == completed && (name = requestHeadersNames[name.toLowerCase()] = requestHeadersNames[name.toLowerCase()] || name, requestHeaders[name] = value), this
                                },
                                overrideMimeType: function(type) {
                                    return null == completed && (s.mimeType = type), this
                                },
                                statusCode: function(map) {
                                    var code;
                                    if (map)
                                        if (completed) jqXHR.always(map[jqXHR.status]);
                                        else
                                            for (code in map) statusCode[code] = [statusCode[code], map[code]];
                                    return this
                                },
                                abort: function(statusText) {
                                    var finalText = statusText || strAbort;
                                    return transport && transport.abort(finalText), done(0, finalText), this
                                }
                            };
                        if (deferred.promise(jqXHR), s.url = ((url || s.url || location.href) + "").replace(rprotocol, location.protocol + "//"), s.type = options.method || options.type || s.method || s.type, s.dataTypes = (s.dataType || "*").toLowerCase().match(rnothtmlwhite) || [""], null == s.crossDomain) {
                            urlAnchor = document.createElement("a");
                            try {
                                urlAnchor.href = s.url, urlAnchor.href = urlAnchor.href, s.crossDomain = originAnchor.protocol + "//" + originAnchor.host != urlAnchor.protocol + "//" + urlAnchor.host
                            } catch (e) {
                                s.crossDomain = !0
                            }
                        }
                        if (s.data && s.processData && "string" != typeof s.data && (s.data = jQuery.param(s.data, s.traditional)), inspectPrefiltersOrTransports(prefilters, s, options, jqXHR), completed) return jqXHR;
                        for (i in (fireGlobals = jQuery.event && s.global) && 0 == jQuery.active++ && jQuery.event.trigger("ajaxStart"), s.type = s.type.toUpperCase(), s.hasContent = !rnoContent.test(s.type), cacheURL = s.url.replace(rhash, ""), s.hasContent ? s.data && s.processData && 0 === (s.contentType || "").indexOf("application/x-www-form-urlencoded") && (s.data = s.data.replace(r20, "+")) : (uncached = s.url.slice(cacheURL.length), s.data && (s.processData || "string" == typeof s.data) && (cacheURL += (rquery.test(cacheURL) ? "&" : "?") + s.data, delete s.data), !1 === s.cache && (cacheURL = cacheURL.replace(rantiCache, "$1"), uncached = (rquery.test(cacheURL) ? "&" : "?") + "_=" + nonce++ + uncached), s.url = cacheURL + uncached), s.ifModified && (jQuery.lastModified[cacheURL] && jqXHR.setRequestHeader("If-Modified-Since", jQuery.lastModified[cacheURL]), jQuery.etag[cacheURL] && jqXHR.setRequestHeader("If-None-Match", jQuery.etag[cacheURL])), (s.data && s.hasContent && !1 !== s.contentType || options.contentType) && jqXHR.setRequestHeader("Content-Type", s.contentType), jqXHR.setRequestHeader("Accept", s.dataTypes[0] && s.accepts[s.dataTypes[0]] ? s.accepts[s.dataTypes[0]] + ("*" !== s.dataTypes[0] ? ", " + allTypes + "; q=0.01" : "") : s.accepts["*"]), s.headers) jqXHR.setRequestHeader(i, s.headers[i]);
                        if (s.beforeSend && (!1 === s.beforeSend.call(callbackContext, jqXHR, s) || completed)) return jqXHR.abort();
                        if (strAbort = "abort", completeDeferred.add(s.complete), jqXHR.done(s.success), jqXHR.fail(s.error), transport = inspectPrefiltersOrTransports(transports, s, options, jqXHR)) {
                            if (jqXHR.readyState = 1, fireGlobals && globalEventContext.trigger("ajaxSend", [jqXHR, s]), completed) return jqXHR;
                            s.async && s.timeout > 0 && (timeoutTimer = window.setTimeout(function() {
                                jqXHR.abort("timeout")
                            }, s.timeout));
                            try {
                                completed = !1, transport.send(requestHeaders, done)
                            } catch (e) {
                                if (completed) throw e;
                                done(-1, e)
                            }
                        } else done(-1, "No Transport");

                        function done(status, nativeStatusText, responses, headers) {
                            var isSuccess, success, error, response, modified, statusText = nativeStatusText;
                            completed || (completed = !0, timeoutTimer && window.clearTimeout(timeoutTimer), transport = void 0, responseHeadersString = headers || "", jqXHR.readyState = status > 0 ? 4 : 0, isSuccess = status >= 200 && status < 300 || 304 === status, responses && (response = function(s, jqXHR, responses) {
                                for (var ct, type, finalDataType, firstDataType, contents = s.contents, dataTypes = s.dataTypes;
                                    "*" === dataTypes[0];) dataTypes.shift(), void 0 === ct && (ct = s.mimeType || jqXHR.getResponseHeader("Content-Type"));
                                if (ct)
                                    for (type in contents)
                                        if (contents[type] && contents[type].test(ct)) {
                                            dataTypes.unshift(type);
                                            break
                                        } if (dataTypes[0] in responses) finalDataType = dataTypes[0];
                                else {
                                    for (type in responses) {
                                        if (!dataTypes[0] || s.converters[type + " " + dataTypes[0]]) {
                                            finalDataType = type;
                                            break
                                        }
                                        firstDataType || (firstDataType = type)
                                    }
                                    finalDataType = finalDataType || firstDataType
                                }
                                if (finalDataType) return finalDataType !== dataTypes[0] && dataTypes.unshift(finalDataType), responses[finalDataType]
                            }(s, jqXHR, responses)), response = function(s, response, jqXHR, isSuccess) {
                                var conv2, current, conv, tmp, prev, converters = {},
                                    dataTypes = s.dataTypes.slice();
                                if (dataTypes[1])
                                    for (conv in s.converters) converters[conv.toLowerCase()] = s.converters[conv];
                                for (current = dataTypes.shift(); current;)
                                    if (s.responseFields[current] && (jqXHR[s.responseFields[current]] = response), !prev && isSuccess && s.dataFilter && (response = s.dataFilter(response, s.dataType)), prev = current, current = dataTypes.shift())
                                        if ("*" === current) current = prev;
                                        else if ("*" !== prev && prev !== current) {
                                    if (!(conv = converters[prev + " " + current] || converters["* " + current]))
                                        for (conv2 in converters)
                                            if ((tmp = conv2.split(" "))[1] === current && (conv = converters[prev + " " + tmp[0]] || converters["* " + tmp[0]])) {
                                                !0 === conv ? conv = converters[conv2] : !0 !== converters[conv2] && (current = tmp[0], dataTypes.unshift(tmp[1]));
                                                break
                                            } if (!0 !== conv)
                                        if (conv && s.throws) response = conv(response);
                                        else try {
                                            response = conv(response)
                                        } catch (e) {
                                            return {
                                                state: "parsererror",
                                                error: conv ? e : "No conversion from " + prev + " to " + current
                                            }
                                        }
                                }
                                return {
                                    state: "success",
                                    data: response
                                }
                            }(s, response, jqXHR, isSuccess), isSuccess ? (s.ifModified && ((modified = jqXHR.getResponseHeader("Last-Modified")) && (jQuery.lastModified[cacheURL] = modified), (modified = jqXHR.getResponseHeader("etag")) && (jQuery.etag[cacheURL] = modified)), 204 === status || "HEAD" === s.type ? statusText = "nocontent" : 304 === status ? statusText = "notmodified" : (statusText = response.state, success = response.data, isSuccess = !(error = response.error))) : (error = statusText, !status && statusText || (statusText = "error", status < 0 && (status = 0))), jqXHR.status = status, jqXHR.statusText = (nativeStatusText || statusText) + "", isSuccess ? deferred.resolveWith(callbackContext, [success, statusText, jqXHR]) : deferred.rejectWith(callbackContext, [jqXHR, statusText, error]), jqXHR.statusCode(statusCode), statusCode = void 0, fireGlobals && globalEventContext.trigger(isSuccess ? "ajaxSuccess" : "ajaxError", [jqXHR, s, isSuccess ? success : error]), completeDeferred.fireWith(callbackContext, [jqXHR, statusText]), fireGlobals && (globalEventContext.trigger("ajaxComplete", [jqXHR, s]), --jQuery.active || jQuery.event.trigger("ajaxStop")))
                        }
                        return jqXHR
                    },
                    getJSON: function(url, data, callback) {
                        return jQuery.get(url, data, callback, "json")
                    },
                    getScript: function(url, callback) {
                        return jQuery.get(url, void 0, callback, "script")
                    }
                }), jQuery.each(["get", "post"], function(i, method) {
                    jQuery[method] = function(url, data, callback, type) {
                        return isFunction(data) && (type = type || callback, callback = data, data = void 0), jQuery.ajax(jQuery.extend({
                            url: url,
                            type: method,
                            dataType: type,
                            data: data,
                            success: callback
                        }, jQuery.isPlainObject(url) && url))
                    }
                }), jQuery._evalUrl = function(url, options) {
                    return jQuery.ajax({
                        url: url,
                        type: "GET",
                        dataType: "script",
                        cache: !0,
                        async: !1,
                        global: !1,
                        converters: {
                            "text script": function() {}
                        },
                        dataFilter: function(response) {
                            jQuery.globalEval(response, options)
                        }
                    })
                }, jQuery.fn.extend({
                    wrapAll: function(html) {
                        var wrap;
                        return this[0] && (isFunction(html) && (html = html.call(this[0])), wrap = jQuery(html, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && wrap.insertBefore(this[0]), wrap.map(function() {
                            for (var elem = this; elem.firstElementChild;) elem = elem.firstElementChild;
                            return elem
                        }).append(this)), this
                    },
                    wrapInner: function(html) {
                        return isFunction(html) ? this.each(function(i) {
                            jQuery(this).wrapInner(html.call(this, i))
                        }) : this.each(function() {
                            var self = jQuery(this),
                                contents = self.contents();
                            contents.length ? contents.wrapAll(html) : self.append(html)
                        })
                    },
                    wrap: function(html) {
                        var htmlIsFunction = isFunction(html);
                        return this.each(function(i) {
                            jQuery(this).wrapAll(htmlIsFunction ? html.call(this, i) : html)
                        })
                    },
                    unwrap: function(selector) {
                        return this.parent(selector).not("body").each(function() {
                            jQuery(this).replaceWith(this.childNodes)
                        }), this
                    }
                }), jQuery.expr.pseudos.hidden = function(elem) {
                    return !jQuery.expr.pseudos.visible(elem)
                }, jQuery.expr.pseudos.visible = function(elem) {
                    return !!(elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length)
                }, jQuery.ajaxSettings.xhr = function() {
                    try {
                        return new window.XMLHttpRequest
                    } catch (e) {}
                };
                var xhrSuccessStatus = {
                        0: 200,
                        1223: 204
                    },
                    xhrSupported = jQuery.ajaxSettings.xhr();
                support.cors = !!xhrSupported && "withCredentials" in xhrSupported, support.ajax = xhrSupported = !!xhrSupported, jQuery.ajaxTransport(function(options) {
                    var callback, errorCallback;
                    if (support.cors || xhrSupported && !options.crossDomain) return {
                        send: function(headers, complete) {
                            var i, xhr = options.xhr();
                            if (xhr.open(options.type, options.url, options.async, options.username, options.password), options.xhrFields)
                                for (i in options.xhrFields) xhr[i] = options.xhrFields[i];
                            for (i in options.mimeType && xhr.overrideMimeType && xhr.overrideMimeType(options.mimeType), options.crossDomain || headers["X-Requested-With"] || (headers["X-Requested-With"] = "XMLHttpRequest"), headers) xhr.setRequestHeader(i, headers[i]);
                            callback = function(type) {
                                return function() {
                                    callback && (callback = errorCallback = xhr.onload = xhr.onerror = xhr.onabort = xhr.ontimeout = xhr.onreadystatechange = null, "abort" === type ? xhr.abort() : "error" === type ? "number" != typeof xhr.status ? complete(0, "error") : complete(xhr.status, xhr.statusText) : complete(xhrSuccessStatus[xhr.status] || xhr.status, xhr.statusText, "text" !== (xhr.responseType || "text") || "string" != typeof xhr.responseText ? {
                                        binary: xhr.response
                                    } : {
                                        text: xhr.responseText
                                    }, xhr.getAllResponseHeaders()))
                                }
                            }, xhr.onload = callback(), errorCallback = xhr.onerror = xhr.ontimeout = callback("error"), void 0 !== xhr.onabort ? xhr.onabort = errorCallback : xhr.onreadystatechange = function() {
                                4 === xhr.readyState && window.setTimeout(function() {
                                    callback && errorCallback()
                                })
                            }, callback = callback("abort");
                            try {
                                xhr.send(options.hasContent && options.data || null)
                            } catch (e) {
                                if (callback) throw e
                            }
                        },
                        abort: function() {
                            callback && callback()
                        }
                    }
                }), jQuery.ajaxPrefilter(function(s) {
                    s.crossDomain && (s.contents.script = !1)
                }), jQuery.ajaxSetup({
                    accepts: {
                        script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
                    },
                    contents: {
                        script: /\b(?:java|ecma)script\b/
                    },
                    converters: {
                        "text script": function(text) {
                            return jQuery.globalEval(text), text
                        }
                    }
                }), jQuery.ajaxPrefilter("script", function(s) {
                    void 0 === s.cache && (s.cache = !1), s.crossDomain && (s.type = "GET")
                }), jQuery.ajaxTransport("script", function(s) {
                    var script, callback;
                    if (s.crossDomain || s.scriptAttrs) return {
                        send: function(_, complete) {
                            script = jQuery("<script>").attr(s.scriptAttrs || {}).prop({
                                charset: s.scriptCharset,
                                src: s.url
                            }).on("load error", callback = function(evt) {
                                script.remove(), callback = null, evt && complete("error" === evt.type ? 404 : 200, evt.type)
                            }), document.head.appendChild(script[0])
                        },
                        abort: function() {
                            callback && callback()
                        }
                    }
                });
                var body, oldCallbacks = [],
                    rjsonp = /(=)\?(?=&|$)|\?\?/;
                jQuery.ajaxSetup({
                    jsonp: "callback",
                    jsonpCallback: function() {
                        var callback = oldCallbacks.pop() || jQuery.expando + "_" + nonce++;
                        return this[callback] = !0, callback
                    }
                }), jQuery.ajaxPrefilter("json jsonp", function(s, originalSettings, jqXHR) {
                    var callbackName, overwritten, responseContainer, jsonProp = !1 !== s.jsonp && (rjsonp.test(s.url) ? "url" : "string" == typeof s.data && 0 === (s.contentType || "").indexOf("application/x-www-form-urlencoded") && rjsonp.test(s.data) && "data");
                    if (jsonProp || "jsonp" === s.dataTypes[0]) return callbackName = s.jsonpCallback = isFunction(s.jsonpCallback) ? s.jsonpCallback() : s.jsonpCallback, jsonProp ? s[jsonProp] = s[jsonProp].replace(rjsonp, "$1" + callbackName) : !1 !== s.jsonp && (s.url += (rquery.test(s.url) ? "&" : "?") + s.jsonp + "=" + callbackName), s.converters["script json"] = function() {
                        return responseContainer || jQuery.error(callbackName + " was not called"), responseContainer[0]
                    }, s.dataTypes[0] = "json", overwritten = window[callbackName], window[callbackName] = function() {
                        responseContainer = arguments
                    }, jqXHR.always(function() {
                        void 0 === overwritten ? jQuery(window).removeProp(callbackName) : window[callbackName] = overwritten, s[callbackName] && (s.jsonpCallback = originalSettings.jsonpCallback, oldCallbacks.push(callbackName)), responseContainer && isFunction(overwritten) && overwritten(responseContainer[0]), responseContainer = overwritten = void 0
                    }), "script"
                }), support.createHTMLDocument = ((body = document.implementation.createHTMLDocument("").body).innerHTML = "<form></form><form></form>", 2 === body.childNodes.length), jQuery.parseHTML = function(data, context, keepScripts) {
                    return "string" != typeof data ? [] : ("boolean" == typeof context && (keepScripts = context, context = !1), context || (support.createHTMLDocument ? ((base = (context = document.implementation.createHTMLDocument("")).createElement("base")).href = document.location.href, context.head.appendChild(base)) : context = document), scripts = !keepScripts && [], (parsed = rsingleTag.exec(data)) ? [context.createElement(parsed[1])] : (parsed = buildFragment([data], context, scripts), scripts && scripts.length && jQuery(scripts).remove(), jQuery.merge([], parsed.childNodes)));
                    var base, parsed, scripts
                }, jQuery.fn.load = function(url, params, callback) {
                    var selector, type, response, self = this,
                        off = url.indexOf(" ");
                    return off > -1 && (selector = stripAndCollapse(url.slice(off)), url = url.slice(0, off)), isFunction(params) ? (callback = params, params = void 0) : params && "object" == typeof params && (type = "POST"), self.length > 0 && jQuery.ajax({
                        url: url,
                        type: type || "GET",
                        dataType: "html",
                        data: params
                    }).done(function(responseText) {
                        response = arguments, self.html(selector ? jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector) : responseText)
                    }).always(callback && function(jqXHR, status) {
                        self.each(function() {
                            callback.apply(this, response || [jqXHR.responseText, status, jqXHR])
                        })
                    }), this
                }, jQuery.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(i, type) {
                    jQuery.fn[type] = function(fn) {
                        return this.on(type, fn)
                    }
                }), jQuery.expr.pseudos.animated = function(elem) {
                    return jQuery.grep(jQuery.timers, function(fn) {
                        return elem === fn.elem
                    }).length
                }, jQuery.offset = {
                    setOffset: function(elem, options, i) {
                        var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, position = jQuery.css(elem, "position"),
                            curElem = jQuery(elem),
                            props = {};
                        "static" === position && (elem.style.position = "relative"), curOffset = curElem.offset(), curCSSTop = jQuery.css(elem, "top"), curCSSLeft = jQuery.css(elem, "left"), ("absolute" === position || "fixed" === position) && (curCSSTop + curCSSLeft).indexOf("auto") > -1 ? (curTop = (curPosition = curElem.position()).top, curLeft = curPosition.left) : (curTop = parseFloat(curCSSTop) || 0, curLeft = parseFloat(curCSSLeft) || 0), isFunction(options) && (options = options.call(elem, i, jQuery.extend({}, curOffset))), null != options.top && (props.top = options.top - curOffset.top + curTop), null != options.left && (props.left = options.left - curOffset.left + curLeft), "using" in options ? options.using.call(elem, props) : curElem.css(props)
                    }
                }, jQuery.fn.extend({
                    offset: function(options) {
                        if (arguments.length) return void 0 === options ? this : this.each(function(i) {
                            jQuery.offset.setOffset(this, options, i)
                        });
                        var rect, win, elem = this[0];
                        return elem ? elem.getClientRects().length ? (rect = elem.getBoundingClientRect(), win = elem.ownerDocument.defaultView, {
                            top: rect.top + win.pageYOffset,
                            left: rect.left + win.pageXOffset
                        }) : {
                            top: 0,
                            left: 0
                        } : void 0
                    },
                    position: function() {
                        if (this[0]) {
                            var offsetParent, offset, doc, elem = this[0],
                                parentOffset = {
                                    top: 0,
                                    left: 0
                                };
                            if ("fixed" === jQuery.css(elem, "position")) offset = elem.getBoundingClientRect();
                            else {
                                for (offset = this.offset(), doc = elem.ownerDocument, offsetParent = elem.offsetParent || doc.documentElement; offsetParent && (offsetParent === doc.body || offsetParent === doc.documentElement) && "static" === jQuery.css(offsetParent, "position");) offsetParent = offsetParent.parentNode;
                                offsetParent && offsetParent !== elem && 1 === offsetParent.nodeType && ((parentOffset = jQuery(offsetParent).offset()).top += jQuery.css(offsetParent, "borderTopWidth", !0), parentOffset.left += jQuery.css(offsetParent, "borderLeftWidth", !0))
                            }
                            return {
                                top: offset.top - parentOffset.top - jQuery.css(elem, "marginTop", !0),
                                left: offset.left - parentOffset.left - jQuery.css(elem, "marginLeft", !0)
                            }
                        }
                    },
                    offsetParent: function() {
                        return this.map(function() {
                            for (var offsetParent = this.offsetParent; offsetParent && "static" === jQuery.css(offsetParent, "position");) offsetParent = offsetParent.offsetParent;
                            return offsetParent || documentElement
                        })
                    }
                }), jQuery.each({
                    scrollLeft: "pageXOffset",
                    scrollTop: "pageYOffset"
                }, function(method, prop) {
                    var top = "pageYOffset" === prop;
                    jQuery.fn[method] = function(val) {
                        return access(this, function(elem, method, val) {
                            var win;
                            if (isWindow(elem) ? win = elem : 9 === elem.nodeType && (win = elem.defaultView), void 0 === val) return win ? win[prop] : elem[method];
                            win ? win.scrollTo(top ? win.pageXOffset : val, top ? val : win.pageYOffset) : elem[method] = val
                        }, method, val, arguments.length)
                    }
                }), jQuery.each(["top", "left"], function(i, prop) {
                    jQuery.cssHooks[prop] = addGetHookIf(support.pixelPosition, function(elem, computed) {
                        if (computed) return computed = curCSS(elem, prop), rnumnonpx.test(computed) ? jQuery(elem).position()[prop] + "px" : computed
                    })
                }), jQuery.each({
                    Height: "height",
                    Width: "width"
                }, function(name, type) {
                    jQuery.each({
                        padding: "inner" + name,
                        content: type,
                        "": "outer" + name
                    }, function(defaultExtra, funcName) {
                        jQuery.fn[funcName] = function(margin, value) {
                            var chainable = arguments.length && (defaultExtra || "boolean" != typeof margin),
                                extra = defaultExtra || (!0 === margin || !0 === value ? "margin" : "border");
                            return access(this, function(elem, type, value) {
                                var doc;
                                return isWindow(elem) ? 0 === funcName.indexOf("outer") ? elem["inner" + name] : elem.document.documentElement["client" + name] : 9 === elem.nodeType ? (doc = elem.documentElement, Math.max(elem.body["scroll" + name], doc["scroll" + name], elem.body["offset" + name], doc["offset" + name], doc["client" + name])) : void 0 === value ? jQuery.css(elem, type, extra) : jQuery.style(elem, type, value, extra)
                            }, type, chainable ? margin : void 0, chainable)
                        }
                    })
                }), jQuery.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "), function(i, name) {
                    jQuery.fn[name] = function(data, fn) {
                        return arguments.length > 0 ? this.on(name, null, data, fn) : this.trigger(name)
                    }
                }), jQuery.fn.extend({
                    hover: function(fnOver, fnOut) {
                        return this.mouseenter(fnOver).mouseleave(fnOut || fnOver)
                    }
                }), jQuery.fn.extend({
                    bind: function(types, data, fn) {
                        return this.on(types, null, data, fn)
                    },
                    unbind: function(types, fn) {
                        return this.off(types, null, fn)
                    },
                    delegate: function(selector, types, data, fn) {
                        return this.on(types, selector, data, fn)
                    },
                    undelegate: function(selector, types, fn) {
                        return 1 === arguments.length ? this.off(selector, "**") : this.off(types, selector || "**", fn)
                    }
                }), jQuery.proxy = function(fn, context) {
                    var tmp, args, proxy;
                    if ("string" == typeof context && (tmp = fn[context], context = fn, fn = tmp), isFunction(fn)) return args = slice.call(arguments, 2), (proxy = function() {
                        return fn.apply(context || this, args.concat(slice.call(arguments)))
                    }).guid = fn.guid = fn.guid || jQuery.guid++, proxy
                }, jQuery.holdReady = function(hold) {
                    hold ? jQuery.readyWait++ : jQuery.ready(!0)
                }, jQuery.isArray = Array.isArray, jQuery.parseJSON = JSON.parse, jQuery.nodeName = nodeName, jQuery.isFunction = isFunction, jQuery.isWindow = isWindow, jQuery.camelCase = camelCase, jQuery.type = toType, jQuery.now = Date.now, jQuery.isNumeric = function(obj) {
                    var type = jQuery.type(obj);
                    return ("number" === type || "string" === type) && !isNaN(obj - parseFloat(obj))
                }, void 0 === (__WEBPACK_AMD_DEFINE_RESULT__ = function() {
                    return jQuery
                }.apply(exports, [])) || (module.exports = __WEBPACK_AMD_DEFINE_RESULT__);
                var _jQuery = window.jQuery,
                    _$ = window.$;
                return jQuery.noConflict = function(deep) {
                    return window.$ === jQuery && (window.$ = _$), deep && window.jQuery === jQuery && (window.jQuery = _jQuery), jQuery
                }, noGlobal || (window.jQuery = window.$ = jQuery), jQuery
            })
        }, function(module, exports, __webpack_require__) {
            var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;
            ! function() {
                var d3 = {
                        version: "3.5.17"
                    },
                    d3_arraySlice = [].slice,
                    d3_array = function(list) {
                        return d3_arraySlice.call(list)
                    },
                    d3_document = this.document;

                function d3_documentElement(node) {
                    return node && (node.ownerDocument || node.document || node).documentElement
                }

                function d3_window(node) {
                    return node && (node.ownerDocument && node.ownerDocument.defaultView || node.document && node || node.defaultView)
                }
                if (d3_document) try {
                    d3_array(d3_document.documentElement.childNodes)[0].nodeType
                } catch (e) {
                    d3_array = function(list) {
                        for (var i = list.length, array = new Array(i); i--;) array[i] = list[i];
                        return array
                    }
                }
                if (Date.now || (Date.now = function() {
                        return +new Date
                    }), d3_document) try {
                    d3_document.createElement("DIV").style.setProperty("opacity", 0, "")
                } catch (error) {
                    var d3_element_prototype = this.Element.prototype,
                        d3_element_setAttribute = d3_element_prototype.setAttribute,
                        d3_element_setAttributeNS = d3_element_prototype.setAttributeNS,
                        d3_style_prototype = this.CSSStyleDeclaration.prototype,
                        d3_style_setProperty = d3_style_prototype.setProperty;
                    d3_element_prototype.setAttribute = function(name, value) {
                        d3_element_setAttribute.call(this, name, value + "")
                    }, d3_element_prototype.setAttributeNS = function(space, local, value) {
                        d3_element_setAttributeNS.call(this, space, local, value + "")
                    }, d3_style_prototype.setProperty = function(name, value, priority) {
                        d3_style_setProperty.call(this, name, value + "", priority)
                    }
                }

                function d3_ascending(a, b) {
                    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN
                }

                function d3_number(x) {
                    return null === x ? NaN : +x
                }

                function d3_numeric(x) {
                    return !isNaN(x)
                }

                function d3_bisector(compare) {
                    return {
                        left: function(a, x, lo, hi) {
                            for (arguments.length < 3 && (lo = 0), arguments.length < 4 && (hi = a.length); lo < hi;) {
                                var mid = lo + hi >>> 1;
                                compare(a[mid], x) < 0 ? lo = mid + 1 : hi = mid
                            }
                            return lo
                        },
                        right: function(a, x, lo, hi) {
                            for (arguments.length < 3 && (lo = 0), arguments.length < 4 && (hi = a.length); lo < hi;) {
                                var mid = lo + hi >>> 1;
                                compare(a[mid], x) > 0 ? hi = mid : lo = mid + 1
                            }
                            return lo
                        }
                    }
                }
                d3.ascending = d3_ascending, d3.descending = function(a, b) {
                    return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN
                }, d3.min = function(array, f) {
                    var a, b, i = -1,
                        n = array.length;
                    if (1 === arguments.length) {
                        for (; ++i < n;)
                            if (null != (b = array[i]) && b >= b) {
                                a = b;
                                break
                            } for (; ++i < n;) null != (b = array[i]) && a > b && (a = b)
                    } else {
                        for (; ++i < n;)
                            if (null != (b = f.call(array, array[i], i)) && b >= b) {
                                a = b;
                                break
                            } for (; ++i < n;) null != (b = f.call(array, array[i], i)) && a > b && (a = b)
                    }
                    return a
                }, d3.max = function(array, f) {
                    var a, b, i = -1,
                        n = array.length;
                    if (1 === arguments.length) {
                        for (; ++i < n;)
                            if (null != (b = array[i]) && b >= b) {
                                a = b;
                                break
                            } for (; ++i < n;) null != (b = array[i]) && b > a && (a = b)
                    } else {
                        for (; ++i < n;)
                            if (null != (b = f.call(array, array[i], i)) && b >= b) {
                                a = b;
                                break
                            } for (; ++i < n;) null != (b = f.call(array, array[i], i)) && b > a && (a = b)
                    }
                    return a
                }, d3.extent = function(array, f) {
                    var a, b, c, i = -1,
                        n = array.length;
                    if (1 === arguments.length) {
                        for (; ++i < n;)
                            if (null != (b = array[i]) && b >= b) {
                                a = c = b;
                                break
                            } for (; ++i < n;) null != (b = array[i]) && (a > b && (a = b), c < b && (c = b))
                    } else {
                        for (; ++i < n;)
                            if (null != (b = f.call(array, array[i], i)) && b >= b) {
                                a = c = b;
                                break
                            } for (; ++i < n;) null != (b = f.call(array, array[i], i)) && (a > b && (a = b), c < b && (c = b))
                    }
                    return [a, c]
                }, d3.sum = function(array, f) {
                    var a, s = 0,
                        n = array.length,
                        i = -1;
                    if (1 === arguments.length)
                        for (; ++i < n;) d3_numeric(a = +array[i]) && (s += a);
                    else
                        for (; ++i < n;) d3_numeric(a = +f.call(array, array[i], i)) && (s += a);
                    return s
                }, d3.mean = function(array, f) {
                    var a, s = 0,
                        n = array.length,
                        i = -1,
                        j = n;
                    if (1 === arguments.length)
                        for (; ++i < n;) d3_numeric(a = d3_number(array[i])) ? s += a : --j;
                    else
                        for (; ++i < n;) d3_numeric(a = d3_number(f.call(array, array[i], i))) ? s += a : --j;
                    if (j) return s / j
                }, d3.quantile = function(values, p) {
                    var H = (values.length - 1) * p + 1,
                        h = Math.floor(H),
                        v = +values[h - 1],
                        e = H - h;
                    return e ? v + e * (values[h] - v) : v
                }, d3.median = function(array, f) {
                    var a, numbers = [],
                        n = array.length,
                        i = -1;
                    if (1 === arguments.length)
                        for (; ++i < n;) d3_numeric(a = d3_number(array[i])) && numbers.push(a);
                    else
                        for (; ++i < n;) d3_numeric(a = d3_number(f.call(array, array[i], i))) && numbers.push(a);
                    if (numbers.length) return d3.quantile(numbers.sort(d3_ascending), .5)
                }, d3.variance = function(array, f) {
                    var a, d, n = array.length,
                        m = 0,
                        s = 0,
                        i = -1,
                        j = 0;
                    if (1 === arguments.length)
                        for (; ++i < n;) d3_numeric(a = d3_number(array[i])) && (s += (d = a - m) * (a - (m += d / ++j)));
                    else
                        for (; ++i < n;) d3_numeric(a = d3_number(f.call(array, array[i], i))) && (s += (d = a - m) * (a - (m += d / ++j)));
                    if (j > 1) return s / (j - 1)
                }, d3.deviation = function() {
                    var v = d3.variance.apply(this, arguments);
                    return v ? Math.sqrt(v) : v
                };
                var d3_bisect = d3_bisector(d3_ascending);

                function d3_transposeLength(d) {
                    return d.length
                }
                d3.bisectLeft = d3_bisect.left, d3.bisect = d3.bisectRight = d3_bisect.right, d3.bisector = function(f) {
                    return d3_bisector(1 === f.length ? function(d, x) {
                        return d3_ascending(f(d), x)
                    } : f)
                }, d3.shuffle = function(array, i0, i1) {
                    (m = arguments.length) < 3 && (i1 = array.length, m < 2 && (i0 = 0));
                    for (var t, i, m = i1 - i0; m;) i = Math.random() * m-- | 0, t = array[m + i0], array[m + i0] = array[i + i0], array[i + i0] = t;
                    return array
                }, d3.permute = function(array, indexes) {
                    for (var i = indexes.length, permutes = new Array(i); i--;) permutes[i] = array[indexes[i]];
                    return permutes
                }, d3.pairs = function(array) {
                    for (var i = 0, n = array.length - 1, p1 = array[0], pairs = new Array(n < 0 ? 0 : n); i < n;) pairs[i] = [p1, p1 = array[++i]];
                    return pairs
                }, d3.transpose = function(matrix) {
                    if (!(n = matrix.length)) return [];
                    for (var i = -1, m = d3.min(matrix, d3_transposeLength), transpose = new Array(m); ++i < m;)
                        for (var n, j = -1, row = transpose[i] = new Array(n); ++j < n;) row[j] = matrix[j][i];
                    return transpose
                }, d3.zip = function() {
                    return d3.transpose(arguments)
                }, d3.keys = function(map) {
                    var keys = [];
                    for (var key in map) keys.push(key);
                    return keys
                }, d3.values = function(map) {
                    var values = [];
                    for (var key in map) values.push(map[key]);
                    return values
                }, d3.entries = function(map) {
                    var entries = [];
                    for (var key in map) entries.push({
                        key: key,
                        value: map[key]
                    });
                    return entries
                }, d3.merge = function(arrays) {
                    for (var m, merged, array, n = arrays.length, i = -1, j = 0; ++i < n;) j += arrays[i].length;
                    for (merged = new Array(j); --n >= 0;)
                        for (m = (array = arrays[n]).length; --m >= 0;) merged[--j] = array[m];
                    return merged
                };
                var abs = Math.abs;

                function d3_class(ctor, properties) {
                    for (var key in properties) Object.defineProperty(ctor.prototype, key, {
                        value: properties[key],
                        enumerable: !1
                    })
                }

                function d3_Map() {
                    this._ = Object.create(null)
                }
                d3.range = function(start, stop, step) {
                    if (arguments.length < 3 && (step = 1, arguments.length < 2 && (stop = start, start = 0)), (stop - start) / step == 1 / 0) throw new Error("infinite range");
                    var j, range = [],
                        k = function(x) {
                            var k = 1;
                            for (; x * k % 1;) k *= 10;
                            return k
                        }(abs(step)),
                        i = -1;
                    if (start *= k, stop *= k, (step *= k) < 0)
                        for (;
                            (j = start + step * ++i) > stop;) range.push(j / k);
                    else
                        for (;
                            (j = start + step * ++i) < stop;) range.push(j / k);
                    return range
                }, d3.map = function(object, f) {
                    var map = new d3_Map;
                    if (object instanceof d3_Map) object.forEach(function(key, value) {
                        map.set(key, value)
                    });
                    else if (Array.isArray(object)) {
                        var o, i = -1,
                            n = object.length;
                        if (1 === arguments.length)
                            for (; ++i < n;) map.set(i, object[i]);
                        else
                            for (; ++i < n;) map.set(f.call(object, o = object[i], i), o)
                    } else
                        for (var key in object) map.set(key, object[key]);
                    return map
                };
                var d3_map_proto = "__proto__",
                    d3_map_zero = "\0";

                function d3_map_escape(key) {
                    return (key += "") === d3_map_proto || key[0] === d3_map_zero ? d3_map_zero + key : key
                }

                function d3_map_unescape(key) {
                    return (key += "")[0] === d3_map_zero ? key.slice(1) : key
                }

                function d3_map_has(key) {
                    return d3_map_escape(key) in this._
                }

                function d3_map_remove(key) {
                    return (key = d3_map_escape(key)) in this._ && delete this._[key]
                }

                function d3_map_keys() {
                    var keys = [];
                    for (var key in this._) keys.push(d3_map_unescape(key));
                    return keys
                }

                function d3_map_size() {
                    var size = 0;
                    for (var key in this._) ++size;
                    return size
                }

                function d3_map_empty() {
                    for (var key in this._) return !1;
                    return !0
                }

                function d3_Set() {
                    this._ = Object.create(null)
                }

                function d3_identity(d) {
                    return d
                }

                function d3_rebind(target, source, method) {
                    return function() {
                        var value = method.apply(source, arguments);
                        return value === source ? target : value
                    }
                }

                function d3_vendorSymbol(object, name) {
                    if (name in object) return name;
                    name = name.charAt(0).toUpperCase() + name.slice(1);
                    for (var i = 0, n = d3_vendorPrefixes.length; i < n; ++i) {
                        var prefixName = d3_vendorPrefixes[i] + name;
                        if (prefixName in object) return prefixName
                    }
                }
                d3_class(d3_Map, {
                    has: d3_map_has,
                    get: function(key) {
                        return this._[d3_map_escape(key)]
                    },
                    set: function(key, value) {
                        return this._[d3_map_escape(key)] = value
                    },
                    remove: d3_map_remove,
                    keys: d3_map_keys,
                    values: function() {
                        var values = [];
                        for (var key in this._) values.push(this._[key]);
                        return values
                    },
                    entries: function() {
                        var entries = [];
                        for (var key in this._) entries.push({
                            key: d3_map_unescape(key),
                            value: this._[key]
                        });
                        return entries
                    },
                    size: d3_map_size,
                    empty: d3_map_empty,
                    forEach: function(f) {
                        for (var key in this._) f.call(this, d3_map_unescape(key), this._[key])
                    }
                }), d3.nest = function() {
                    var sortValues, rollup, nest = {},
                        keys = [],
                        sortKeys = [];

                    function map(mapType, array, depth) {
                        if (depth >= keys.length) return rollup ? rollup.call(nest, array) : sortValues ? array.sort(sortValues) : array;
                        for (var keyValue, object, setter, values, i = -1, n = array.length, key = keys[depth++], valuesByKey = new d3_Map; ++i < n;)(values = valuesByKey.get(keyValue = key(object = array[i]))) ? values.push(object) : valuesByKey.set(keyValue, [object]);
                        return mapType ? (object = mapType(), setter = function(keyValue, values) {
                            object.set(keyValue, map(mapType, values, depth))
                        }) : (object = {}, setter = function(keyValue, values) {
                            object[keyValue] = map(mapType, values, depth)
                        }), valuesByKey.forEach(setter), object
                    }
                    return nest.map = function(array, mapType) {
                        return map(mapType, array, 0)
                    }, nest.entries = function(array) {
                        return function entries(map, depth) {
                            if (depth >= keys.length) return map;
                            var array = [],
                                sortKey = sortKeys[depth++];
                            return map.forEach(function(key, keyMap) {
                                array.push({
                                    key: key,
                                    values: entries(keyMap, depth)
                                })
                            }), sortKey ? array.sort(function(a, b) {
                                return sortKey(a.key, b.key)
                            }) : array
                        }(map(d3.map, array, 0), 0)
                    }, nest.key = function(d) {
                        return keys.push(d), nest
                    }, nest.sortKeys = function(order) {
                        return sortKeys[keys.length - 1] = order, nest
                    }, nest.sortValues = function(order) {
                        return sortValues = order, nest
                    }, nest.rollup = function(f) {
                        return rollup = f, nest
                    }, nest
                }, d3.set = function(array) {
                    var set = new d3_Set;
                    if (array)
                        for (var i = 0, n = array.length; i < n; ++i) set.add(array[i]);
                    return set
                }, d3_class(d3_Set, {
                    has: d3_map_has,
                    add: function(key) {
                        return this._[d3_map_escape(key += "")] = !0, key
                    },
                    remove: d3_map_remove,
                    values: d3_map_keys,
                    size: d3_map_size,
                    empty: d3_map_empty,
                    forEach: function(f) {
                        for (var key in this._) f.call(this, d3_map_unescape(key))
                    }
                }), d3.behavior = {}, d3.rebind = function(target, source) {
                    for (var method, i = 1, n = arguments.length; ++i < n;) target[method = arguments[i]] = d3_rebind(target, source, source[method]);
                    return target
                };
                var d3_vendorPrefixes = ["webkit", "ms", "moz", "Moz", "o", "O"];

                function d3_noop() {}

                function d3_dispatch() {}

                function d3_dispatch_event(dispatch) {
                    var listeners = [],
                        listenerByName = new d3_Map;

                    function event() {
                        for (var l, z = listeners, i = -1, n = z.length; ++i < n;)(l = z[i].on) && l.apply(this, arguments);
                        return dispatch
                    }
                    return event.on = function(name, listener) {
                        var i, l = listenerByName.get(name);
                        return arguments.length < 2 ? l && l.on : (l && (l.on = null, listeners = listeners.slice(0, i = listeners.indexOf(l)).concat(listeners.slice(i + 1)), listenerByName.remove(name)), listener && listeners.push(listenerByName.set(name, {
                            on: listener
                        })), dispatch)
                    }, event
                }

                function d3_eventPreventDefault() {
                    d3.event.preventDefault()
                }

                function d3_eventSource() {
                    for (var s, e = d3.event; s = e.sourceEvent;) e = s;
                    return e
                }

                function d3_eventDispatch(target) {
                    for (var dispatch = new d3_dispatch, i = 0, n = arguments.length; ++i < n;) dispatch[arguments[i]] = d3_dispatch_event(dispatch);
                    return dispatch.of = function(thiz, argumentz) {
                        return function(e1) {
                            try {
                                var e0 = e1.sourceEvent = d3.event;
                                e1.target = target, d3.event = e1, dispatch[e1.type].apply(thiz, argumentz)
                            } finally {
                                d3.event = e0
                            }
                        }
                    }, dispatch
                }
                d3.dispatch = function() {
                    for (var dispatch = new d3_dispatch, i = -1, n = arguments.length; ++i < n;) dispatch[arguments[i]] = d3_dispatch_event(dispatch);
                    return dispatch
                }, d3_dispatch.prototype.on = function(type, listener) {
                    var i = type.indexOf("."),
                        name = "";
                    if (i >= 0 && (name = type.slice(i + 1), type = type.slice(0, i)), type) return arguments.length < 2 ? this[type].on(name) : this[type].on(name, listener);
                    if (2 === arguments.length) {
                        if (null == listener)
                            for (type in this) this.hasOwnProperty(type) && this[type].on(name, null);
                        return this
                    }
                }, d3.event = null, d3.requote = function(s) {
                    return s.replace(d3_requote_re, "\\$&")
                };
                var d3_requote_re = /[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,
                    d3_subclass = {}.__proto__ ? function(object, prototype) {
                        object.__proto__ = prototype
                    } : function(object, prototype) {
                        for (var property in prototype) object[property] = prototype[property]
                    };

                function d3_selection(groups) {
                    return d3_subclass(groups, d3_selectionPrototype), groups
                }
                var d3_select = function(s, n) {
                        return n.querySelector(s)
                    },
                    d3_selectAll = function(s, n) {
                        return n.querySelectorAll(s)
                    },
                    d3_selectMatches = function(n, s) {
                        var d3_selectMatcher = n.matches || n[d3_vendorSymbol(n, "matchesSelector")];
                        return (d3_selectMatches = function(n, s) {
                            return d3_selectMatcher.call(n, s)
                        })(n, s)
                    };
                "function" == typeof Sizzle && (d3_select = function(s, n) {
                    return Sizzle(s, n)[0] || null
                }, d3_selectAll = Sizzle, d3_selectMatches = Sizzle.matchesSelector), d3.selection = function() {
                    return d3.select(d3_document.documentElement)
                };
                var d3_selectionPrototype = d3.selection.prototype = [];

                function d3_selection_selector(selector) {
                    return "function" == typeof selector ? selector : function() {
                        return d3_select(selector, this)
                    }
                }

                function d3_selection_selectorAll(selector) {
                    return "function" == typeof selector ? selector : function() {
                        return d3_selectAll(selector, this)
                    }
                }
                d3_selectionPrototype.select = function(selector) {
                    var subgroup, subnode, group, node, subgroups = [];
                    selector = d3_selection_selector(selector);
                    for (var j = -1, m = this.length; ++j < m;) {
                        subgroups.push(subgroup = []), subgroup.parentNode = (group = this[j]).parentNode;
                        for (var i = -1, n = group.length; ++i < n;)(node = group[i]) ? (subgroup.push(subnode = selector.call(node, node.__data__, i, j)), subnode && "__data__" in node && (subnode.__data__ = node.__data__)) : subgroup.push(null)
                    }
                    return d3_selection(subgroups)
                }, d3_selectionPrototype.selectAll = function(selector) {
                    var subgroup, node, subgroups = [];
                    selector = d3_selection_selectorAll(selector);
                    for (var j = -1, m = this.length; ++j < m;)
                        for (var group = this[j], i = -1, n = group.length; ++i < n;)(node = group[i]) && (subgroups.push(subgroup = d3_array(selector.call(node, node.__data__, i, j))), subgroup.parentNode = node);
                    return d3_selection(subgroups)
                };
                var d3_nsXhtml = "http://www.w3.org/1999/xhtml",
                    d3_nsPrefix = {
                        svg: "http://www.w3.org/2000/svg",
                        xhtml: d3_nsXhtml,
                        xlink: "http://www.w3.org/1999/xlink",
                        xml: "http://www.w3.org/XML/1998/namespace",
                        xmlns: "http://www.w3.org/2000/xmlns/"
                    };

                function d3_selection_attr(name, value) {
                    return name = d3.ns.qualify(name), null == value ? name.local ? function() {
                        this.removeAttributeNS(name.space, name.local)
                    } : function() {
                        this.removeAttribute(name)
                    } : "function" == typeof value ? name.local ? function() {
                        var x = value.apply(this, arguments);
                        null == x ? this.removeAttributeNS(name.space, name.local) : this.setAttributeNS(name.space, name.local, x)
                    } : function() {
                        var x = value.apply(this, arguments);
                        null == x ? this.removeAttribute(name) : this.setAttribute(name, x)
                    } : name.local ? function() {
                        this.setAttributeNS(name.space, name.local, value)
                    } : function() {
                        this.setAttribute(name, value)
                    }
                }

                function d3_collapse(s) {
                    return s.trim().replace(/\s+/g, " ")
                }

                function d3_selection_classedRe(name) {
                    return new RegExp("(?:^|\\s+)" + d3.requote(name) + "(?:\\s+|$)", "g")
                }

                function d3_selection_classes(name) {
                    return (name + "").trim().split(/^|\s+/)
                }

                function d3_selection_classed(name, value) {
                    var n = (name = d3_selection_classes(name).map(d3_selection_classedName)).length;
                    return "function" == typeof value ? function() {
                        for (var i = -1, x = value.apply(this, arguments); ++i < n;) name[i](this, x)
                    } : function() {
                        for (var i = -1; ++i < n;) name[i](this, value)
                    }
                }

                function d3_selection_classedName(name) {
                    var re = d3_selection_classedRe(name);
                    return function(node, value) {
                        if (c = node.classList) return value ? c.add(name) : c.remove(name);
                        var c = node.getAttribute("class") || "";
                        value ? (re.lastIndex = 0, re.test(c) || node.setAttribute("class", d3_collapse(c + " " + name))) : node.setAttribute("class", d3_collapse(c.replace(re, " ")))
                    }
                }

                function d3_selection_style(name, value, priority) {
                    return null == value ? function() {
                        this.style.removeProperty(name)
                    } : "function" == typeof value ? function() {
                        var x = value.apply(this, arguments);
                        null == x ? this.style.removeProperty(name) : this.style.setProperty(name, x, priority)
                    } : function() {
                        this.style.setProperty(name, value, priority)
                    }
                }

                function d3_selection_property(name, value) {
                    return null == value ? function() {
                        delete this[name]
                    } : "function" == typeof value ? function() {
                        var x = value.apply(this, arguments);
                        null == x ? delete this[name] : this[name] = x
                    } : function() {
                        this[name] = value
                    }
                }

                function d3_selection_creator(name) {
                    return "function" == typeof name ? name : (name = d3.ns.qualify(name)).local ? function() {
                        return this.ownerDocument.createElementNS(name.space, name.local)
                    } : function() {
                        var document = this.ownerDocument,
                            namespace = this.namespaceURI;
                        return namespace === d3_nsXhtml && document.documentElement.namespaceURI === d3_nsXhtml ? document.createElement(name) : document.createElementNS(namespace, name)
                    }
                }

                function d3_selectionRemove() {
                    var parent = this.parentNode;
                    parent && parent.removeChild(this)
                }

                function d3_selection_dataNode(data) {
                    return {
                        __data__: data
                    }
                }

                function d3_selection_filter(selector) {
                    return function() {
                        return d3_selectMatches(this, selector)
                    }
                }

                function d3_selection_each(groups, callback) {
                    for (var j = 0, m = groups.length; j < m; j++)
                        for (var node, group = groups[j], i = 0, n = group.length; i < n; i++)(node = group[i]) && callback(node, i, j);
                    return groups
                }

                function d3_selection_enter(selection) {
                    return d3_subclass(selection, d3_selection_enterPrototype), selection
                }
                d3.ns = {
                    prefix: d3_nsPrefix,
                    qualify: function(name) {
                        var i = name.indexOf(":"),
                            prefix = name;
                        return i >= 0 && "xmlns" !== (prefix = name.slice(0, i)) && (name = name.slice(i + 1)), d3_nsPrefix.hasOwnProperty(prefix) ? {
                            space: d3_nsPrefix[prefix],
                            local: name
                        } : name
                    }
                }, d3_selectionPrototype.attr = function(name, value) {
                    if (arguments.length < 2) {
                        if ("string" == typeof name) {
                            var node = this.node();
                            return (name = d3.ns.qualify(name)).local ? node.getAttributeNS(name.space, name.local) : node.getAttribute(name)
                        }
                        for (value in name) this.each(d3_selection_attr(value, name[value]));
                        return this
                    }
                    return this.each(d3_selection_attr(name, value))
                }, d3_selectionPrototype.classed = function(name, value) {
                    if (arguments.length < 2) {
                        if ("string" == typeof name) {
                            var node = this.node(),
                                n = (name = d3_selection_classes(name)).length,
                                i = -1;
                            if (value = node.classList) {
                                for (; ++i < n;)
                                    if (!value.contains(name[i])) return !1
                            } else
                                for (value = node.getAttribute("class"); ++i < n;)
                                    if (!d3_selection_classedRe(name[i]).test(value)) return !1;
                            return !0
                        }
                        for (value in name) this.each(d3_selection_classed(value, name[value]));
                        return this
                    }
                    return this.each(d3_selection_classed(name, value))
                }, d3_selectionPrototype.style = function(name, value, priority) {
                    var n = arguments.length;
                    if (n < 3) {
                        if ("string" != typeof name) {
                            for (priority in n < 2 && (value = ""), name) this.each(d3_selection_style(priority, name[priority], value));
                            return this
                        }
                        if (n < 2) {
                            var node = this.node();
                            return d3_window(node).getComputedStyle(node, null).getPropertyValue(name)
                        }
                        priority = ""
                    }
                    return this.each(d3_selection_style(name, value, priority))
                }, d3_selectionPrototype.property = function(name, value) {
                    if (arguments.length < 2) {
                        if ("string" == typeof name) return this.node()[name];
                        for (value in name) this.each(d3_selection_property(value, name[value]));
                        return this
                    }
                    return this.each(d3_selection_property(name, value))
                }, d3_selectionPrototype.text = function(value) {
                    return arguments.length ? this.each("function" == typeof value ? function() {
                        var v = value.apply(this, arguments);
                        this.textContent = null == v ? "" : v
                    } : null == value ? function() {
                        this.textContent = ""
                    } : function() {
                        this.textContent = value
                    }) : this.node().textContent
                }, d3_selectionPrototype.html = function(value) {
                    return arguments.length ? this.each("function" == typeof value ? function() {
                        var v = value.apply(this, arguments);
                        this.innerHTML = null == v ? "" : v
                    } : null == value ? function() {
                        this.innerHTML = ""
                    } : function() {
                        this.innerHTML = value
                    }) : this.node().innerHTML
                }, d3_selectionPrototype.append = function(name) {
                    return name = d3_selection_creator(name), this.select(function() {
                        return this.appendChild(name.apply(this, arguments))
                    })
                }, d3_selectionPrototype.insert = function(name, before) {
                    return name = d3_selection_creator(name), before = d3_selection_selector(before), this.select(function() {
                        return this.insertBefore(name.apply(this, arguments), before.apply(this, arguments) || null)
                    })
                }, d3_selectionPrototype.remove = function() {
                    return this.each(d3_selectionRemove)
                }, d3_selectionPrototype.data = function(value, key) {
                    var group, node, i = -1,
                        n = this.length;
                    if (!arguments.length) {
                        for (value = new Array(n = (group = this[0]).length); ++i < n;)(node = group[i]) && (value[i] = node.__data__);
                        return value
                    }

                    function bind(group, groupData) {
                        var i, node, nodeData, n = group.length,
                            m = groupData.length,
                            n0 = Math.min(n, m),
                            updateNodes = new Array(m),
                            enterNodes = new Array(m),
                            exitNodes = new Array(n);
                        if (key) {
                            var keyValue, nodeByKeyValue = new d3_Map,
                                keyValues = new Array(n);
                            for (i = -1; ++i < n;)(node = group[i]) && (nodeByKeyValue.has(keyValue = key.call(node, node.__data__, i)) ? exitNodes[i] = node : nodeByKeyValue.set(keyValue, node), keyValues[i] = keyValue);
                            for (i = -1; ++i < m;)(node = nodeByKeyValue.get(keyValue = key.call(groupData, nodeData = groupData[i], i))) ? !0 !== node && (updateNodes[i] = node, node.__data__ = nodeData) : enterNodes[i] = d3_selection_dataNode(nodeData), nodeByKeyValue.set(keyValue, !0);
                            for (i = -1; ++i < n;) i in keyValues && !0 !== nodeByKeyValue.get(keyValues[i]) && (exitNodes[i] = group[i])
                        } else {
                            for (i = -1; ++i < n0;) node = group[i], nodeData = groupData[i], node ? (node.__data__ = nodeData, updateNodes[i] = node) : enterNodes[i] = d3_selection_dataNode(nodeData);
                            for (; i < m; ++i) enterNodes[i] = d3_selection_dataNode(groupData[i]);
                            for (; i < n; ++i) exitNodes[i] = group[i]
                        }
                        enterNodes.update = updateNodes, enterNodes.parentNode = updateNodes.parentNode = exitNodes.parentNode = group.parentNode, enter.push(enterNodes), update.push(updateNodes), exit.push(exitNodes)
                    }
                    var enter = d3_selection_enter([]),
                        update = d3_selection([]),
                        exit = d3_selection([]);
                    if ("function" == typeof value)
                        for (; ++i < n;) bind(group = this[i], value.call(group, group.parentNode.__data__, i));
                    else
                        for (; ++i < n;) bind(group = this[i], value);
                    return update.enter = function() {
                        return enter
                    }, update.exit = function() {
                        return exit
                    }, update
                }, d3_selectionPrototype.datum = function(value) {
                    return arguments.length ? this.property("__data__", value) : this.property("__data__")
                }, d3_selectionPrototype.filter = function(filter) {
                    var subgroup, group, node, subgroups = [];
                    "function" != typeof filter && (filter = d3_selection_filter(filter));
                    for (var j = 0, m = this.length; j < m; j++) {
                        subgroups.push(subgroup = []), subgroup.parentNode = (group = this[j]).parentNode;
                        for (var i = 0, n = group.length; i < n; i++)(node = group[i]) && filter.call(node, node.__data__, i, j) && subgroup.push(node)
                    }
                    return d3_selection(subgroups)
                }, d3_selectionPrototype.order = function() {
                    for (var j = -1, m = this.length; ++j < m;)
                        for (var node, group = this[j], i = group.length - 1, next = group[i]; --i >= 0;)(node = group[i]) && (next && next !== node.nextSibling && next.parentNode.insertBefore(node, next), next = node);
                    return this
                }, d3_selectionPrototype.sort = function(comparator) {
                    comparator = function(comparator) {
                        arguments.length || (comparator = d3_ascending);
                        return function(a, b) {
                            return a && b ? comparator(a.__data__, b.__data__) : !a - !b
                        }
                    }.apply(this, arguments);
                    for (var j = -1, m = this.length; ++j < m;) this[j].sort(comparator);
                    return this.order()
                }, d3_selectionPrototype.each = function(callback) {
                    return d3_selection_each(this, function(node, i, j) {
                        callback.call(node, node.__data__, i, j)
                    })
                }, d3_selectionPrototype.call = function(callback) {
                    var args = d3_array(arguments);
                    return callback.apply(args[0] = this, args), this
                }, d3_selectionPrototype.empty = function() {
                    return !this.node()
                }, d3_selectionPrototype.node = function() {
                    for (var j = 0, m = this.length; j < m; j++)
                        for (var group = this[j], i = 0, n = group.length; i < n; i++) {
                            var node = group[i];
                            if (node) return node
                        }
                    return null
                }, d3_selectionPrototype.size = function() {
                    var n = 0;
                    return d3_selection_each(this, function() {
                        ++n
                    }), n
                };
                var d3_selection_enterPrototype = [];

                function d3_selection_on(type, listener, capture) {
                    var name = "__on" + type,
                        i = type.indexOf("."),
                        wrap = d3_selection_onListener;
                    i > 0 && (type = type.slice(0, i));
                    var filter = d3_selection_onFilters.get(type);

                    function onRemove() {
                        var l = this[name];
                        l && (this.removeEventListener(type, l, l.$), delete this[name])
                    }
                    return filter && (type = filter, wrap = d3_selection_onFilter), i ? listener ? function() {
                        var l = wrap(listener, d3_array(arguments));
                        onRemove.call(this), this.addEventListener(type, this[name] = l, l.$ = capture), l._ = listener
                    } : onRemove : listener ? d3_noop : function() {
                        var match, re = new RegExp("^__on([^.]+)" + d3.requote(type) + "$");
                        for (var name in this)
                            if (match = name.match(re)) {
                                var l = this[name];
                                this.removeEventListener(match[1], l, l.$), delete this[name]
                            }
                    }
                }
                d3.selection.enter = d3_selection_enter, d3.selection.enter.prototype = d3_selection_enterPrototype, d3_selection_enterPrototype.append = d3_selectionPrototype.append, d3_selection_enterPrototype.empty = d3_selectionPrototype.empty, d3_selection_enterPrototype.node = d3_selectionPrototype.node, d3_selection_enterPrototype.call = d3_selectionPrototype.call, d3_selection_enterPrototype.size = d3_selectionPrototype.size, d3_selection_enterPrototype.select = function(selector) {
                    for (var subgroup, subnode, upgroup, group, node, subgroups = [], j = -1, m = this.length; ++j < m;) {
                        upgroup = (group = this[j]).update, subgroups.push(subgroup = []), subgroup.parentNode = group.parentNode;
                        for (var i = -1, n = group.length; ++i < n;)(node = group[i]) ? (subgroup.push(upgroup[i] = subnode = selector.call(group.parentNode, node.__data__, i, j)), subnode.__data__ = node.__data__) : subgroup.push(null)
                    }
                    return d3_selection(subgroups)
                }, d3_selection_enterPrototype.insert = function(name, before) {
                    var enter, i0, j0;
                    return arguments.length < 2 && (enter = this, before = function(d, i, j) {
                        var node, group = enter[j].update,
                            n = group.length;
                        for (j != j0 && (j0 = j, i0 = 0), i >= i0 && (i0 = i + 1); !(node = group[i0]) && ++i0 < n;);
                        return node
                    }), d3_selectionPrototype.insert.call(this, name, before)
                }, d3.select = function(node) {
                    var group;
                    return "string" == typeof node ? (group = [d3_select(node, d3_document)]).parentNode = d3_document.documentElement : (group = [node]).parentNode = d3_documentElement(node), d3_selection([group])
                }, d3.selectAll = function(nodes) {
                    var group;
                    return "string" == typeof nodes ? (group = d3_array(d3_selectAll(nodes, d3_document))).parentNode = d3_document.documentElement : (group = d3_array(nodes)).parentNode = null, d3_selection([group])
                }, d3_selectionPrototype.on = function(type, listener, capture) {
                    var n = arguments.length;
                    if (n < 3) {
                        if ("string" != typeof type) {
                            for (capture in n < 2 && (listener = !1), type) this.each(d3_selection_on(capture, type[capture], listener));
                            return this
                        }
                        if (n < 2) return (n = this.node()["__on" + type]) && n._;
                        capture = !1
                    }
                    return this.each(d3_selection_on(type, listener, capture))
                };
                var d3_selection_onFilters = d3.map({
                    mouseenter: "mouseover",
                    mouseleave: "mouseout"
                });

                function d3_selection_onListener(listener, argumentz) {
                    return function(e) {
                        var o = d3.event;
                        d3.event = e, argumentz[0] = this.__data__;
                        try {
                            listener.apply(this, argumentz)
                        } finally {
                            d3.event = o
                        }
                    }
                }

                function d3_selection_onFilter(listener, argumentz) {
                    var l = d3_selection_onListener(listener, argumentz);
                    return function(e) {
                        var related = e.relatedTarget;
                        related && (related === this || 8 & related.compareDocumentPosition(this)) || l.call(this, e)
                    }
                }
                d3_document && d3_selection_onFilters.forEach(function(k) {
                    "on" + k in d3_document && d3_selection_onFilters.remove(k)
                });
                var d3_event_dragSelect, d3_event_dragId = 0;

                function d3_event_dragSuppress(node) {
                    var name = ".dragsuppress-" + ++d3_event_dragId,
                        click = "click" + name,
                        w = d3.select(d3_window(node)).on("touchmove" + name, d3_eventPreventDefault).on("dragstart" + name, d3_eventPreventDefault).on("selectstart" + name, d3_eventPreventDefault);
                    if (null == d3_event_dragSelect && (d3_event_dragSelect = !("onselectstart" in node) && d3_vendorSymbol(node.style, "userSelect")), d3_event_dragSelect) {
                        var style = d3_documentElement(node).style,
                            select = style[d3_event_dragSelect];
                        style[d3_event_dragSelect] = "none"
                    }
                    return function(suppressClick) {
                        if (w.on(name, null), d3_event_dragSelect && (style[d3_event_dragSelect] = select), suppressClick) {
                            var off = function() {
                                w.on(click, null)
                            };
                            w.on(click, function() {
                                d3_eventPreventDefault(), off()
                            }, !0), setTimeout(off, 0)
                        }
                    }
                }
                d3.mouse = function(container) {
                    return d3_mousePoint(container, d3_eventSource())
                };
                var d3_mouse_bug44083 = this.navigator && /WebKit/.test(this.navigator.userAgent) ? -1 : 0;

                function d3_mousePoint(container, e) {
                    e.changedTouches && (e = e.changedTouches[0]);
                    var svg = container.ownerSVGElement || container;
                    if (svg.createSVGPoint) {
                        var point = svg.createSVGPoint();
                        if (d3_mouse_bug44083 < 0) {
                            var window = d3_window(container);
                            if (window.scrollX || window.scrollY) {
                                var ctm = (svg = d3.select("body").append("svg").style({
                                    position: "absolute",
                                    top: 0,
                                    left: 0,
                                    margin: 0,
                                    padding: 0,
                                    border: "none"
                                }, "important"))[0][0].getScreenCTM();
                                d3_mouse_bug44083 = !(ctm.f || ctm.e), svg.remove()
                            }
                        }
                        return d3_mouse_bug44083 ? (point.x = e.pageX, point.y = e.pageY) : (point.x = e.clientX, point.y = e.clientY), [(point = point.matrixTransform(container.getScreenCTM().inverse())).x, point.y]
                    }
                    var rect = container.getBoundingClientRect();
                    return [e.clientX - rect.left - container.clientLeft, e.clientY - rect.top - container.clientTop]
                }

                function d3_behavior_dragTouchId() {
                    return d3.event.changedTouches[0].identifier
                }
                d3.touch = function(container, touches, identifier) {
                    if (arguments.length < 3 && (identifier = touches, touches = d3_eventSource().changedTouches), touches)
                        for (var touch, i = 0, n = touches.length; i < n; ++i)
                            if ((touch = touches[i]).identifier === identifier) return d3_mousePoint(container, touch)
                }, d3.behavior.drag = function() {
                    var event = d3_eventDispatch(drag, "drag", "dragstart", "dragend"),
                        origin = null,
                        mousedown = dragstart(d3_noop, d3.mouse, d3_window, "mousemove", "mouseup"),
                        touchstart = dragstart(d3_behavior_dragTouchId, d3.touch, d3_identity, "touchmove", "touchend");

                    function drag() {
                        this.on("mousedown.drag", mousedown).on("touchstart.drag", touchstart)
                    }

                    function dragstart(id, position, subject, move, end) {
                        return function() {
                            var dragOffset, target = d3.event.target.correspondingElement || d3.event.target,
                                parent = this.parentNode,
                                dispatch = event.of(this, arguments),
                                dragged = 0,
                                dragId = id(),
                                dragName = ".drag" + (null == dragId ? "" : "-" + dragId),
                                dragSubject = d3.select(subject(target)).on(move + dragName, function() {
                                    var dx, dy, position1 = position(parent, dragId);
                                    if (!position1) return;
                                    dx = position1[0] - position0[0], dy = position1[1] - position0[1], dragged |= dx | dy, position0 = position1, dispatch({
                                        type: "drag",
                                        x: position1[0] + dragOffset[0],
                                        y: position1[1] + dragOffset[1],
                                        dx: dx,
                                        dy: dy
                                    })
                                }).on(end + dragName, function() {
                                    if (!position(parent, dragId)) return;
                                    dragSubject.on(move + dragName, null).on(end + dragName, null), dragRestore(dragged), dispatch({
                                        type: "dragend"
                                    })
                                }),
                                dragRestore = d3_event_dragSuppress(target),
                                position0 = position(parent, dragId);
                            dragOffset = origin ? [(dragOffset = origin.apply(this, arguments)).x - position0[0], dragOffset.y - position0[1]] : [0, 0], dispatch({
                                type: "dragstart"
                            })
                        }
                    }
                    return drag.origin = function(x) {
                        return arguments.length ? (origin = x, drag) : origin
                    }, d3.rebind(drag, event, "on")
                }, d3.touches = function(container, touches) {
                    return arguments.length < 2 && (touches = d3_eventSource().touches), touches ? d3_array(touches).map(function(touch) {
                        var point = d3_mousePoint(container, touch);
                        return point.identifier = touch.identifier, point
                    }) : []
                };
                var Îµ = 1e-6,
                    Îµ2 = Îµ * Îµ,
                    Ï = Math.PI,
                    Ï = 2 * Ï,
                    ÏÎµ = Ï - Îµ,
                    halfÏ = Ï / 2,
                    d3_radians = Ï / 180,
                    d3_degrees = 180 / Ï;

                function d3_sgn(x) {
                    return x > 0 ? 1 : x < 0 ? -1 : 0
                }

                function d3_cross2d(a, b, c) {
                    return (b[0] - a[0]) * (c[1] - a[1]) - (b[1] - a[1]) * (c[0] - a[0])
                }

                function d3_acos(x) {
                    return x > 1 ? 0 : x < -1 ? Ï : Math.acos(x)
                }

                function d3_asin(x) {
                    return x > 1 ? halfÏ : x < -1 ? -halfÏ : Math.asin(x)
                }

                function d3_cosh(x) {
                    return ((x = Math.exp(x)) + 1 / x) / 2
                }

                function d3_haversin(x) {
                    return (x = Math.sin(x / 2)) * x
                }
                var Ï = Math.SQRT2;
                d3.interpolateZoom = function(p0, p1) {
                    var i, S, ux0 = p0[0],
                        uy0 = p0[1],
                        w0 = p0[2],
                        ux1 = p1[0],
                        uy1 = p1[1],
                        w1 = p1[2],
                        dx = ux1 - ux0,
                        dy = uy1 - uy0,
                        d2 = dx * dx + dy * dy;
                    if (d2 < Îµ2) S = Math.log(w1 / w0) / Ï, i = function(t) {
                        return [ux0 + t * dx, uy0 + t * dy, w0 * Math.exp(Ï * t * S)]
                    };
                    else {
                        var d1 = Math.sqrt(d2),
                            b0 = (w1 * w1 - w0 * w0 + 4 * d2) / (2 * w0 * 2 * d1),
                            b1 = (w1 * w1 - w0 * w0 - 4 * d2) / (2 * w1 * 2 * d1),
                            r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),
                            r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);
                        S = (r1 - r0) / Ï, i = function(t) {
                            var x, s = t * S,
                                coshr0 = d3_cosh(r0),
                                u = w0 / (2 * d1) * (coshr0 * (x = Ï * s + r0, ((x = Math.exp(2 * x)) - 1) / (x + 1)) - function(x) {
                                    return ((x = Math.exp(x)) - 1 / x) / 2
                                }(r0));
                            return [ux0 + u * dx, uy0 + u * dy, w0 * coshr0 / d3_cosh(Ï * s + r0)]
                        }
                    }
                    return i.duration = 1e3 * S, i
                }, d3.behavior.zoom = function() {
                    var translate0, center0, center, mousewheelTimer, touchtime, x0, x1, y0, y1, view = {
                            x: 0,
                            y: 0,
                            k: 1
                        },
                        size = [960, 500],
                        scaleExtent = d3_behavior_zoomInfinity,
                        duration = 250,
                        zooming = 0,
                        mousedown = "mousedown.zoom",
                        mousemove = "mousemove.zoom",
                        mouseup = "mouseup.zoom",
                        touchstart = "touchstart.zoom",
                        event = d3_eventDispatch(zoom, "zoomstart", "zoom", "zoomend");

                    function zoom(g) {
                        g.on(mousedown, mousedowned).on(d3_behavior_zoomWheel + ".zoom", mousewheeled).on("dblclick.zoom", dblclicked).on(touchstart, touchstarted)
                    }

                    function location(p) {
                        return [(p[0] - view.x) / view.k, (p[1] - view.y) / view.k]
                    }

                    function scaleTo(s) {
                        view.k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], s))
                    }

                    function translateTo(p, l) {
                        l = function(l) {
                            return [l[0] * view.k + view.x, l[1] * view.k + view.y]
                        }(l), view.x += p[0] - l[0], view.y += p[1] - l[1]
                    }

                    function zoomTo(that, p, l, k) {
                        that.__chart__ = {
                            x: view.x,
                            y: view.y,
                            k: view.k
                        }, scaleTo(Math.pow(2, k)), translateTo(center0 = p, l), that = d3.select(that), duration > 0 && (that = that.transition().duration(duration)), that.call(zoom.event)
                    }

                    function rescale() {
                        x1 && x1.domain(x0.range().map(function(x) {
                            return (x - view.x) / view.k
                        }).map(x0.invert)), y1 && y1.domain(y0.range().map(function(y) {
                            return (y - view.y) / view.k
                        }).map(y0.invert))
                    }

                    function zoomstarted(dispatch) {
                        zooming++ || dispatch({
                            type: "zoomstart"
                        })
                    }

                    function zoomed(dispatch) {
                        rescale(), dispatch({
                            type: "zoom",
                            scale: view.k,
                            translate: [view.x, view.y]
                        })
                    }

                    function zoomended(dispatch) {
                        --zooming || (dispatch({
                            type: "zoomend"
                        }), center0 = null)
                    }

                    function mousedowned() {
                        var that = this,
                            dispatch = event.of(that, arguments),
                            dragged = 0,
                            subject = d3.select(d3_window(that)).on(mousemove, function() {
                                dragged = 1, translateTo(d3.mouse(that), location0), zoomed(dispatch)
                            }).on(mouseup, function() {
                                subject.on(mousemove, null).on(mouseup, null), dragRestore(dragged), zoomended(dispatch)
                            }),
                            location0 = location(d3.mouse(that)),
                            dragRestore = d3_event_dragSuppress(that);
                        d3_selection_interrupt.call(that), zoomstarted(dispatch)
                    }

                    function touchstarted() {
                        var scale0, that = this,
                            dispatch = event.of(that, arguments),
                            locations0 = {},
                            distance0 = 0,
                            zoomName = ".zoom-" + d3.event.changedTouches[0].identifier,
                            touchmove = "touchmove" + zoomName,
                            touchend = "touchend" + zoomName,
                            targets = [],
                            subject = d3.select(that),
                            dragRestore = d3_event_dragSuppress(that);

                        function relocate() {
                            var touches = d3.touches(that);
                            return scale0 = view.k, touches.forEach(function(t) {
                                t.identifier in locations0 && (locations0[t.identifier] = location(t))
                            }), touches
                        }

                        function started() {
                            var target = d3.event.target;
                            d3.select(target).on(touchmove, moved).on(touchend, ended), targets.push(target);
                            for (var changed = d3.event.changedTouches, i = 0, n = changed.length; i < n; ++i) locations0[changed[i].identifier] = null;
                            var touches = relocate(),
                                now = Date.now();
                            if (1 === touches.length) {
                                if (now - touchtime < 500) {
                                    var p = touches[0];
                                    zoomTo(that, p, locations0[p.identifier], Math.floor(Math.log(view.k) / Math.LN2) + 1), d3_eventPreventDefault()
                                }
                                touchtime = now
                            } else if (touches.length > 1) {
                                p = touches[0];
                                var q = touches[1],
                                    dx = p[0] - q[0],
                                    dy = p[1] - q[1];
                                distance0 = dx * dx + dy * dy
                            }
                        }

                        function moved() {
                            var p0, l0, p1, l1, touches = d3.touches(that);
                            d3_selection_interrupt.call(that);
                            for (var i = 0, n = touches.length; i < n; ++i, l1 = null)
                                if (p1 = touches[i], l1 = locations0[p1.identifier]) {
                                    if (l0) break;
                                    p0 = p1, l0 = l1
                                } if (l1) {
                                var distance1 = (distance1 = p1[0] - p0[0]) * distance1 + (distance1 = p1[1] - p0[1]) * distance1,
                                    scale1 = distance0 && Math.sqrt(distance1 / distance0);
                                p0 = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2], l0 = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2], scaleTo(scale1 * scale0)
                            }
                            touchtime = null, translateTo(p0, l0), zoomed(dispatch)
                        }

                        function ended() {
                            if (d3.event.touches.length) {
                                for (var changed = d3.event.changedTouches, i = 0, n = changed.length; i < n; ++i) delete locations0[changed[i].identifier];
                                for (var identifier in locations0) return void relocate()
                            }
                            d3.selectAll(targets).on(zoomName, null), subject.on(mousedown, mousedowned).on(touchstart, touchstarted), dragRestore(), zoomended(dispatch)
                        }
                        started(), zoomstarted(dispatch), subject.on(mousedown, null).on(touchstart, started)
                    }

                    function mousewheeled() {
                        var dispatch = event.of(this, arguments);
                        mousewheelTimer ? clearTimeout(mousewheelTimer) : (d3_selection_interrupt.call(this), translate0 = location(center0 = center || d3.mouse(this)), zoomstarted(dispatch)), mousewheelTimer = setTimeout(function() {
                            mousewheelTimer = null, zoomended(dispatch)
                        }, 50), d3_eventPreventDefault(), scaleTo(Math.pow(2, .002 * d3_behavior_zoomDelta()) * view.k), translateTo(center0, translate0), zoomed(dispatch)
                    }

                    function dblclicked() {
                        var p = d3.mouse(this),
                            k = Math.log(view.k) / Math.LN2;
                        zoomTo(this, p, location(p), d3.event.shiftKey ? Math.ceil(k) - 1 : Math.floor(k) + 1)
                    }
                    return d3_behavior_zoomWheel || (d3_behavior_zoomWheel = "onwheel" in d3_document ? (d3_behavior_zoomDelta = function() {
                        return -d3.event.deltaY * (d3.event.deltaMode ? 120 : 1)
                    }, "wheel") : "onmousewheel" in d3_document ? (d3_behavior_zoomDelta = function() {
                        return d3.event.wheelDelta
                    }, "mousewheel") : (d3_behavior_zoomDelta = function() {
                        return -d3.event.detail
                    }, "MozMousePixelScroll")), zoom.event = function(g) {
                        g.each(function() {
                            var dispatch = event.of(this, arguments),
                                view1 = view;
                            d3_transitionInheritId ? d3.select(this).transition().each("start.zoom", function() {
                                view = this.__chart__ || {
                                    x: 0,
                                    y: 0,
                                    k: 1
                                }, zoomstarted(dispatch)
                            }).tween("zoom:zoom", function() {
                                var dx = size[0],
                                    dy = size[1],
                                    cx = center0 ? center0[0] : dx / 2,
                                    cy = center0 ? center0[1] : dy / 2,
                                    i = d3.interpolateZoom([(cx - view.x) / view.k, (cy - view.y) / view.k, dx / view.k], [(cx - view1.x) / view1.k, (cy - view1.y) / view1.k, dx / view1.k]);
                                return function(t) {
                                    var l = i(t),
                                        k = dx / l[2];
                                    this.__chart__ = view = {
                                        x: cx - l[0] * k,
                                        y: cy - l[1] * k,
                                        k: k
                                    }, zoomed(dispatch)
                                }
                            }).each("interrupt.zoom", function() {
                                zoomended(dispatch)
                            }).each("end.zoom", function() {
                                zoomended(dispatch)
                            }) : (this.__chart__ = view, zoomstarted(dispatch), zoomed(dispatch), zoomended(dispatch))
                        })
                    }, zoom.translate = function(_) {
                        return arguments.length ? (view = {
                            x: +_[0],
                            y: +_[1],
                            k: view.k
                        }, rescale(), zoom) : [view.x, view.y]
                    }, zoom.scale = function(_) {
                        return arguments.length ? (view = {
                            x: view.x,
                            y: view.y,
                            k: null
                        }, scaleTo(+_), rescale(), zoom) : view.k
                    }, zoom.scaleExtent = function(_) {
                        return arguments.length ? (scaleExtent = null == _ ? d3_behavior_zoomInfinity : [+_[0], +_[1]], zoom) : scaleExtent
                    }, zoom.center = function(_) {
                        return arguments.length ? (center = _ && [+_[0], +_[1]], zoom) : center
                    }, zoom.size = function(_) {
                        return arguments.length ? (size = _ && [+_[0], +_[1]], zoom) : size
                    }, zoom.duration = function(_) {
                        return arguments.length ? (duration = +_, zoom) : duration
                    }, zoom.x = function(z) {
                        return arguments.length ? (x1 = z, x0 = z.copy(), view = {
                            x: 0,
                            y: 0,
                            k: 1
                        }, zoom) : x1
                    }, zoom.y = function(z) {
                        return arguments.length ? (y1 = z, y0 = z.copy(), view = {
                            x: 0,
                            y: 0,
                            k: 1
                        }, zoom) : y1
                    }, d3.rebind(zoom, event, "on")
                };
                var d3_behavior_zoomDelta, d3_behavior_zoomWheel, d3_behavior_zoomInfinity = [0, 1 / 0];

                function d3_color() {}

                function d3_hsl(h, s, l) {
                    return this instanceof d3_hsl ? (this.h = +h, this.s = +s, void(this.l = +l)) : arguments.length < 2 ? h instanceof d3_hsl ? new d3_hsl(h.h, h.s, h.l) : d3_rgb_parse("" + h, d3_rgb_hsl, d3_hsl) : new d3_hsl(h, s, l)
                }
                d3.color = d3_color, d3_color.prototype.toString = function() {
                    return this.rgb() + ""
                }, d3.hsl = d3_hsl;
                var d3_hslPrototype = d3_hsl.prototype = new d3_color;

                function d3_hsl_rgb(h, s, l) {
                    var m1, m2;

                    function vv(h) {
                        return Math.round(255 * function(h) {
                            return h > 360 ? h -= 360 : h < 0 && (h += 360), h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1
                        }(h))
                    }
                    return h = isNaN(h) ? 0 : (h %= 360) < 0 ? h + 360 : h, s = isNaN(s) ? 0 : s < 0 ? 0 : s > 1 ? 1 : s, m1 = 2 * (l = l < 0 ? 0 : l > 1 ? 1 : l) - (m2 = l <= .5 ? l * (1 + s) : l + s - l * s), new d3_rgb(vv(h + 120), vv(h), vv(h - 120))
                }

                function d3_hcl(h, c, l) {
                    return this instanceof d3_hcl ? (this.h = +h, this.c = +c, void(this.l = +l)) : arguments.length < 2 ? h instanceof d3_hcl ? new d3_hcl(h.h, h.c, h.l) : d3_lab_hcl(h instanceof d3_lab ? h.l : (h = d3_rgb_lab((h = d3.rgb(h)).r, h.g, h.b)).l, h.a, h.b) : new d3_hcl(h, c, l)
                }
                d3_hslPrototype.brighter = function(k) {
                    return k = Math.pow(.7, arguments.length ? k : 1), new d3_hsl(this.h, this.s, this.l / k)
                }, d3_hslPrototype.darker = function(k) {
                    return k = Math.pow(.7, arguments.length ? k : 1), new d3_hsl(this.h, this.s, k * this.l)
                }, d3_hslPrototype.rgb = function() {
                    return d3_hsl_rgb(this.h, this.s, this.l)
                }, d3.hcl = d3_hcl;
                var d3_hclPrototype = d3_hcl.prototype = new d3_color;

                function d3_hcl_lab(h, c, l) {
                    return isNaN(h) && (h = 0), isNaN(c) && (c = 0), new d3_lab(l, Math.cos(h *= d3_radians) * c, Math.sin(h) * c)
                }

                function d3_lab(l, a, b) {
                    return this instanceof d3_lab ? (this.l = +l, this.a = +a, void(this.b = +b)) : arguments.length < 2 ? l instanceof d3_lab ? new d3_lab(l.l, l.a, l.b) : l instanceof d3_hcl ? d3_hcl_lab(l.h, l.c, l.l) : d3_rgb_lab((l = d3_rgb(l)).r, l.g, l.b) : new d3_lab(l, a, b)
                }
                d3_hclPrototype.brighter = function(k) {
                    return new d3_hcl(this.h, this.c, Math.min(100, this.l + d3_lab_K * (arguments.length ? k : 1)))
                }, d3_hclPrototype.darker = function(k) {
                    return new d3_hcl(this.h, this.c, Math.max(0, this.l - d3_lab_K * (arguments.length ? k : 1)))
                }, d3_hclPrototype.rgb = function() {
                    return d3_hcl_lab(this.h, this.c, this.l).rgb()
                }, d3.lab = d3_lab;
                var d3_lab_K = 18,
                    d3_lab_X = .95047,
                    d3_lab_Y = 1,
                    d3_lab_Z = 1.08883,
                    d3_labPrototype = d3_lab.prototype = new d3_color;

                function d3_lab_rgb(l, a, b) {
                    var y = (l + 16) / 116,
                        x = y + a / 500,
                        z = y - b / 200;
                    return new d3_rgb(d3_xyz_rgb(3.2404542 * (x = d3_lab_xyz(x) * d3_lab_X) - 1.5371385 * (y = d3_lab_xyz(y) * d3_lab_Y) - .4985314 * (z = d3_lab_xyz(z) * d3_lab_Z)), d3_xyz_rgb(-.969266 * x + 1.8760108 * y + .041556 * z), d3_xyz_rgb(.0556434 * x - .2040259 * y + 1.0572252 * z))
                }

                function d3_lab_hcl(l, a, b) {
                    return l > 0 ? new d3_hcl(Math.atan2(b, a) * d3_degrees, Math.sqrt(a * a + b * b), l) : new d3_hcl(NaN, NaN, l)
                }

                function d3_lab_xyz(x) {
                    return x > .206893034 ? x * x * x : (x - 4 / 29) / 7.787037
                }

                function d3_xyz_lab(x) {
                    return x > .008856 ? Math.pow(x, 1 / 3) : 7.787037 * x + 4 / 29
                }

                function d3_xyz_rgb(r) {
                    return Math.round(255 * (r <= .00304 ? 12.92 * r : 1.055 * Math.pow(r, 1 / 2.4) - .055))
                }

                function d3_rgb(r, g, b) {
                    return this instanceof d3_rgb ? (this.r = ~~r, this.g = ~~g, void(this.b = ~~b)) : arguments.length < 2 ? r instanceof d3_rgb ? new d3_rgb(r.r, r.g, r.b) : d3_rgb_parse("" + r, d3_rgb, d3_hsl_rgb) : new d3_rgb(r, g, b)
                }

                function d3_rgbNumber(value) {
                    return new d3_rgb(value >> 16, value >> 8 & 255, 255 & value)
                }

                function d3_rgbString(value) {
                    return d3_rgbNumber(value) + ""
                }
                d3_labPrototype.brighter = function(k) {
                    return new d3_lab(Math.min(100, this.l + d3_lab_K * (arguments.length ? k : 1)), this.a, this.b)
                }, d3_labPrototype.darker = function(k) {
                    return new d3_lab(Math.max(0, this.l - d3_lab_K * (arguments.length ? k : 1)), this.a, this.b)
                }, d3_labPrototype.rgb = function() {
                    return d3_lab_rgb(this.l, this.a, this.b)
                }, d3.rgb = d3_rgb;
                var d3_rgbPrototype = d3_rgb.prototype = new d3_color;

                function d3_rgb_hex(v) {
                    return v < 16 ? "0" + Math.max(0, v).toString(16) : Math.min(255, v).toString(16)
                }

                function d3_rgb_parse(format, rgb, hsl) {
                    var m1, m2, color, r = 0,
                        g = 0,
                        b = 0;
                    if (m1 = /([a-z]+)\((.*)\)/.exec(format = format.toLowerCase())) switch (m2 = m1[2].split(","), m1[1]) {
                        case "hsl":
                            return hsl(parseFloat(m2[0]), parseFloat(m2[1]) / 100, parseFloat(m2[2]) / 100);
                        case "rgb":
                            return rgb(d3_rgb_parseNumber(m2[0]), d3_rgb_parseNumber(m2[1]), d3_rgb_parseNumber(m2[2]))
                    }
                    return (color = d3_rgb_names.get(format)) ? rgb(color.r, color.g, color.b) : (null == format || "#" !== format.charAt(0) || isNaN(color = parseInt(format.slice(1), 16)) || (4 === format.length ? (r = (3840 & color) >> 4, r |= r >> 4, g = 240 & color, g |= g >> 4, b = 15 & color, b |= b << 4) : 7 === format.length && (r = (16711680 & color) >> 16, g = (65280 & color) >> 8, b = 255 & color)), rgb(r, g, b))
                }

                function d3_rgb_hsl(r, g, b) {
                    var h, s, min = Math.min(r /= 255, g /= 255, b /= 255),
                        max = Math.max(r, g, b),
                        d = max - min,
                        l = (max + min) / 2;
                    return d ? (s = l < .5 ? d / (max + min) : d / (2 - max - min), h = r == max ? (g - b) / d + (g < b ? 6 : 0) : g == max ? (b - r) / d + 2 : (r - g) / d + 4, h *= 60) : (h = NaN, s = l > 0 && l < 1 ? 0 : h), new d3_hsl(h, s, l)
                }

                function d3_rgb_lab(r, g, b) {
                    var x = d3_xyz_lab((.4124564 * (r = d3_rgb_xyz(r)) + .3575761 * (g = d3_rgb_xyz(g)) + .1804375 * (b = d3_rgb_xyz(b))) / d3_lab_X),
                        y = d3_xyz_lab((.2126729 * r + .7151522 * g + .072175 * b) / d3_lab_Y);
                    return d3_lab(116 * y - 16, 500 * (x - y), 200 * (y - d3_xyz_lab((.0193339 * r + .119192 * g + .9503041 * b) / d3_lab_Z)))
                }

                function d3_rgb_xyz(r) {
                    return (r /= 255) <= .04045 ? r / 12.92 : Math.pow((r + .055) / 1.055, 2.4)
                }

                function d3_rgb_parseNumber(c) {
                    var f = parseFloat(c);
                    return "%" === c.charAt(c.length - 1) ? Math.round(2.55 * f) : f
                }
                d3_rgbPrototype.brighter = function(k) {
                    k = Math.pow(.7, arguments.length ? k : 1);
                    var r = this.r,
                        g = this.g,
                        b = this.b,
                        i = 30;
                    return r || g || b ? (r && r < i && (r = i), g && g < i && (g = i), b && b < i && (b = i), new d3_rgb(Math.min(255, r / k), Math.min(255, g / k), Math.min(255, b / k))) : new d3_rgb(i, i, i)
                }, d3_rgbPrototype.darker = function(k) {
                    return new d3_rgb((k = Math.pow(.7, arguments.length ? k : 1)) * this.r, k * this.g, k * this.b)
                }, d3_rgbPrototype.hsl = function() {
                    return d3_rgb_hsl(this.r, this.g, this.b)
                }, d3_rgbPrototype.toString = function() {
                    return "#" + d3_rgb_hex(this.r) + d3_rgb_hex(this.g) + d3_rgb_hex(this.b)
                };
                var d3_rgb_names = d3.map({
                    aliceblue: 15792383,
                    antiquewhite: 16444375,
                    aqua: 65535,
                    aquamarine: 8388564,
                    azure: 15794175,
                    beige: 16119260,
                    bisque: 16770244,
                    black: 0,
                    blanchedalmond: 16772045,
                    blue: 255,
                    blueviolet: 9055202,
                    brown: 10824234,
                    burlywood: 14596231,
                    cadetblue: 6266528,
                    chartreuse: 8388352,
                    chocolate: 13789470,
                    coral: 16744272,
                    cornflowerblue: 6591981,
                    cornsilk: 16775388,
                    crimson: 14423100,
                    cyan: 65535,
                    darkblue: 139,
                    darkcyan: 35723,
                    darkgoldenrod: 12092939,
                    darkgray: 11119017,
                    darkgreen: 25600,
                    darkgrey: 11119017,
                    darkkhaki: 12433259,
                    darkmagenta: 9109643,
                    darkolivegreen: 5597999,
                    darkorange: 16747520,
                    darkorchid: 10040012,
                    darkred: 9109504,
                    darksalmon: 15308410,
                    darkseagreen: 9419919,
                    darkslateblue: 4734347,
                    darkslategray: 3100495,
                    darkslategrey: 3100495,
                    darkturquoise: 52945,
                    darkviolet: 9699539,
                    deeppink: 16716947,
                    deepskyblue: 49151,
                    dimgray: 6908265,
                    dimgrey: 6908265,
                    dodgerblue: 2003199,
                    firebrick: 11674146,
                    floralwhite: 16775920,
                    forestgreen: 2263842,
                    fuchsia: 16711935,
                    gainsboro: 14474460,
                    ghostwhite: 16316671,
                    gold: 16766720,
                    goldenrod: 14329120,
                    gray: 8421504,
                    green: 32768,
                    greenyellow: 11403055,
                    grey: 8421504,
                    honeydew: 15794160,
                    hotpink: 16738740,
                    indianred: 13458524,
                    indigo: 4915330,
                    ivory: 16777200,
                    khaki: 15787660,
                    lavender: 15132410,
                    lavenderblush: 16773365,
                    lawngreen: 8190976,
                    lemonchiffon: 16775885,
                    lightblue: 11393254,
                    lightcoral: 15761536,
                    lightcyan: 14745599,
                    lightgoldenrodyellow: 16448210,
                    lightgray: 13882323,
                    lightgreen: 9498256,
                    lightgrey: 13882323,
                    lightpink: 16758465,
                    lightsalmon: 16752762,
                    lightseagreen: 2142890,
                    lightskyblue: 8900346,
                    lightslategray: 7833753,
                    lightslategrey: 7833753,
                    lightsteelblue: 11584734,
                    lightyellow: 16777184,
                    lime: 65280,
                    limegreen: 3329330,
                    linen: 16445670,
                    magenta: 16711935,
                    maroon: 8388608,
                    mediumaquamarine: 6737322,
                    mediumblue: 205,
                    mediumorchid: 12211667,
                    mediumpurple: 9662683,
                    mediumseagreen: 3978097,
                    mediumslateblue: 8087790,
                    mediumspringgreen: 64154,
                    mediumturquoise: 4772300,
                    mediumvioletred: 13047173,
                    midnightblue: 1644912,
                    mintcream: 16121850,
                    mistyrose: 16770273,
                    moccasin: 16770229,
                    navajowhite: 16768685,
                    navy: 128,
                    oldlace: 16643558,
                    olive: 8421376,
                    olivedrab: 7048739,
                    orange: 16753920,
                    orangered: 16729344,
                    orchid: 14315734,
                    palegoldenrod: 15657130,
                    palegreen: 10025880,
                    paleturquoise: 11529966,
                    palevioletred: 14381203,
                    papayawhip: 16773077,
                    peachpuff: 16767673,
                    peru: 13468991,
                    pink: 16761035,
                    plum: 14524637,
                    powderblue: 11591910,
                    purple: 8388736,
                    rebeccapurple: 6697881,
                    red: 16711680,
                    rosybrown: 12357519,
                    royalblue: 4286945,
                    saddlebrown: 9127187,
                    salmon: 16416882,
                    sandybrown: 16032864,
                    seagreen: 3050327,
                    seashell: 16774638,
                    sienna: 10506797,
                    silver: 12632256,
                    skyblue: 8900331,
                    slateblue: 6970061,
                    slategray: 7372944,
                    slategrey: 7372944,
                    snow: 16775930,
                    springgreen: 65407,
                    steelblue: 4620980,
                    tan: 13808780,
                    teal: 32896,
                    thistle: 14204888,
                    tomato: 16737095,
                    turquoise: 4251856,
                    violet: 15631086,
                    wheat: 16113331,
                    white: 16777215,
                    whitesmoke: 16119285,
                    yellow: 16776960,
                    yellowgreen: 10145074
                });

                function d3_functor(v) {
                    return "function" == typeof v ? v : function() {
                        return v
                    }
                }

                function d3_xhrType(response) {
                    return function(url, mimeType, callback) {
                        return 2 === arguments.length && "function" == typeof mimeType && (callback = mimeType, mimeType = null), d3_xhr(url, mimeType, response, callback)
                    }
                }

                function d3_xhr(url, mimeType, response, callback) {
                    var xhr = {},
                        dispatch = d3.dispatch("beforesend", "progress", "load", "error"),
                        headers = {},
                        request = new XMLHttpRequest,
                        responseType = null;

                    function respond() {
                        var result, status = request.status;
                        if (!status && function(request) {
                                var type = request.responseType;
                                return type && "text" !== type ? request.response : request.responseText
                            }(request) || status >= 200 && status < 300 || 304 === status) {
                            try {
                                result = response.call(xhr, request)
                            } catch (e) {
                                return void dispatch.error.call(xhr, e)
                            }
                            dispatch.load.call(xhr, result)
                        } else dispatch.error.call(xhr, request)
                    }
                    return !this.XDomainRequest || "withCredentials" in request || !/^(http(s)?:)?\/\//.test(url) || (request = new XDomainRequest), "onload" in request ? request.onload = request.onerror = respond : request.onreadystatechange = function() {
                        request.readyState > 3 && respond()
                    }, request.onprogress = function(event) {
                        var o = d3.event;
                        d3.event = event;
                        try {
                            dispatch.progress.call(xhr, request)
                        } finally {
                            d3.event = o
                        }
                    }, xhr.header = function(name, value) {
                        return name = (name + "").toLowerCase(), arguments.length < 2 ? headers[name] : (null == value ? delete headers[name] : headers[name] = value + "", xhr)
                    }, xhr.mimeType = function(value) {
                        return arguments.length ? (mimeType = null == value ? null : value + "", xhr) : mimeType
                    }, xhr.responseType = function(value) {
                        return arguments.length ? (responseType = value, xhr) : responseType
                    }, xhr.response = function(value) {
                        return response = value, xhr
                    }, ["get", "post"].forEach(function(method) {
                        xhr[method] = function() {
                            return xhr.send.apply(xhr, [method].concat(d3_array(arguments)))
                        }
                    }), xhr.send = function(method, data, callback) {
                        if (2 === arguments.length && "function" == typeof data && (callback = data, data = null), request.open(method, url, !0), null == mimeType || "accept" in headers || (headers.accept = mimeType + ",*/*"), request.setRequestHeader)
                            for (var name in headers) request.setRequestHeader(name, headers[name]);
                        return null != mimeType && request.overrideMimeType && request.overrideMimeType(mimeType), null != responseType && (request.responseType = responseType), null != callback && xhr.on("error", callback).on("load", function(request) {
                            callback(null, request)
                        }), dispatch.beforesend.call(xhr, request), request.send(null == data ? null : data), xhr
                    }, xhr.abort = function() {
                        return request.abort(), xhr
                    }, d3.rebind(xhr, dispatch, "on"), null == callback ? xhr : xhr.get(function(callback) {
                        return 1 === callback.length ? function(error, request) {
                            callback(null == error ? request : null)
                        } : callback
                    }(callback))
                }
                d3_rgb_names.forEach(function(key, value) {
                    d3_rgb_names.set(key, d3_rgbNumber(value))
                }), d3.functor = d3_functor, d3.xhr = d3_xhrType(d3_identity), d3.dsv = function(delimiter, mimeType) {
                    var reFormat = new RegExp('["' + delimiter + "\n]"),
                        delimiterCode = delimiter.charCodeAt(0);

                    function dsv(url, row, callback) {
                        arguments.length < 3 && (callback = row, row = null);
                        var xhr = d3_xhr(url, mimeType, null == row ? response : typedResponse(row), callback);
                        return xhr.row = function(_) {
                            return arguments.length ? xhr.response(null == (row = _) ? response : typedResponse(_)) : row
                        }, xhr
                    }

                    function response(request) {
                        return dsv.parse(request.responseText)
                    }

                    function typedResponse(f) {
                        return function(request) {
                            return dsv.parse(request.responseText, f)
                        }
                    }

                    function formatRow(row) {
                        return row.map(formatValue).join(delimiter)
                    }

                    function formatValue(text) {
                        return reFormat.test(text) ? '"' + text.replace(/\"/g, '""') + '"' : text
                    }
                    return dsv.parse = function(text, f) {
                        var o;
                        return dsv.parseRows(text, function(row, i) {
                            if (o) return o(row, i - 1);
                            var a = new Function("d", "return {" + row.map(function(name, i) {
                                return JSON.stringify(name) + ": d[" + i + "]"
                            }).join(",") + "}");
                            o = f ? function(row, i) {
                                return f(a(row), i)
                            } : a
                        })
                    }, dsv.parseRows = function(text, f) {
                        var t, eol, EOL = {},
                            EOF = {},
                            rows = [],
                            N = text.length,
                            I = 0,
                            n = 0;

                        function token() {
                            if (I >= N) return EOF;
                            if (eol) return eol = !1, EOL;
                            var j = I;
                            if (34 === text.charCodeAt(j)) {
                                for (var i = j; i++ < N;)
                                    if (34 === text.charCodeAt(i)) {
                                        if (34 !== text.charCodeAt(i + 1)) break;
                                        ++i
                                    } return I = i + 2, 13 === (c = text.charCodeAt(i + 1)) ? (eol = !0, 10 === text.charCodeAt(i + 2) && ++I) : 10 === c && (eol = !0), text.slice(j + 1, i).replace(/""/g, '"')
                            }
                            for (; I < N;) {
                                var c, k = 1;
                                if (10 === (c = text.charCodeAt(I++))) eol = !0;
                                else if (13 === c) eol = !0, 10 === text.charCodeAt(I) && (++I, ++k);
                                else if (c !== delimiterCode) continue;
                                return text.slice(j, I - k)
                            }
                            return text.slice(j)
                        }
                        for (;
                            (t = token()) !== EOF;) {
                            for (var a = []; t !== EOL && t !== EOF;) a.push(t), t = token();
                            f && null == (a = f(a, n++)) || rows.push(a)
                        }
                        return rows
                    }, dsv.format = function(rows) {
                        if (Array.isArray(rows[0])) return dsv.formatRows(rows);
                        var fieldSet = new d3_Set,
                            fields = [];
                        return rows.forEach(function(row) {
                            for (var field in row) fieldSet.has(field) || fields.push(fieldSet.add(field))
                        }), [fields.map(formatValue).join(delimiter)].concat(rows.map(function(row) {
                            return fields.map(function(field) {
                                return formatValue(row[field])
                            }).join(delimiter)
                        })).join("\n")
                    }, dsv.formatRows = function(rows) {
                        return rows.map(formatRow).join("\n")
                    }, dsv
                }, d3.csv = d3.dsv(",", "text/csv"), d3.tsv = d3.dsv("\t", "text/tab-separated-values");
                var d3_timer_queueHead, d3_timer_queueTail, d3_timer_interval, d3_timer_timeout, d3_timer_frame = this[d3_vendorSymbol(this, "requestAnimationFrame")] || function(callback) {
                    setTimeout(callback, 17)
                };

                function d3_timer(callback, delay, then) {
                    var n = arguments.length;
                    n < 2 && (delay = 0), n < 3 && (then = Date.now());
                    var timer = {
                        c: callback,
                        t: then + delay,
                        n: null
                    };
                    return d3_timer_queueTail ? d3_timer_queueTail.n = timer : d3_timer_queueHead = timer, d3_timer_queueTail = timer, d3_timer_interval || (d3_timer_timeout = clearTimeout(d3_timer_timeout), d3_timer_interval = 1, d3_timer_frame(d3_timer_step)), timer
                }

                function d3_timer_step() {
                    var now = d3_timer_mark(),
                        delay = d3_timer_sweep() - now;
                    delay > 24 ? (isFinite(delay) && (clearTimeout(d3_timer_timeout), d3_timer_timeout = setTimeout(d3_timer_step, delay)), d3_timer_interval = 0) : (d3_timer_interval = 1, d3_timer_frame(d3_timer_step))
                }

                function d3_timer_mark() {
                    for (var now = Date.now(), timer = d3_timer_queueHead; timer;) now >= timer.t && timer.c(now - timer.t) && (timer.c = null), timer = timer.n;
                    return now
                }

                function d3_timer_sweep() {
                    for (var t0, t1 = d3_timer_queueHead, time = 1 / 0; t1;) t1.c ? (t1.t < time && (time = t1.t), t1 = (t0 = t1).n) : t1 = t0 ? t0.n = t1.n : d3_timer_queueHead = t1.n;
                    return d3_timer_queueTail = t0, time
                }

                function d3_format_precision(x, p) {
                    return p - (x ? Math.ceil(Math.log(x) / Math.LN10) : 1)
                }
                d3.timer = function() {
                    d3_timer.apply(this, arguments)
                }, d3.timer.flush = function() {
                    d3_timer_mark(), d3_timer_sweep()
                }, d3.round = function(x, n) {
                    return n ? Math.round(x * (n = Math.pow(10, n))) / n : Math.round(x)
                };
                var d3_formatPrefixes = ["y", "z", "a", "f", "p", "n", "Âµ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"].map(function(d, i) {
                    var k = Math.pow(10, 3 * abs(8 - i));
                    return {
                        scale: i > 8 ? function(d) {
                            return d / k
                        } : function(d) {
                            return d * k
                        },
                        symbol: d
                    }
                });

                function d3_locale_numberFormat(locale) {
                    var locale_decimal = locale.decimal,
                        locale_thousands = locale.thousands,
                        locale_grouping = locale.grouping,
                        locale_currency = locale.currency,
                        formatGroup = locale_grouping && locale_thousands ? function(value, width) {
                            for (var i = value.length, t = [], j = 0, g = locale_grouping[0], length = 0; i > 0 && g > 0 && (length + g + 1 > width && (g = Math.max(1, width - length)), t.push(value.substring(i -= g, i + g)), !((length += g + 1) > width));) g = locale_grouping[j = (j + 1) % locale_grouping.length];
                            return t.reverse().join(locale_thousands)
                        } : d3_identity;
                    return function(specifier) {
                        var match = d3_format_re.exec(specifier),
                            fill = match[1] || " ",
                            align = match[2] || ">",
                            sign = match[3] || "-",
                            symbol = match[4] || "",
                            zfill = match[5],
                            width = +match[6],
                            comma = match[7],
                            precision = match[8],
                            type = match[9],
                            scale = 1,
                            prefix = "",
                            suffix = "",
                            integer = !1,
                            exponent = !0;
                        switch (precision && (precision = +precision.substring(1)), (zfill || "0" === fill && "=" === align) && (zfill = fill = "0", align = "="), type) {
                            case "n":
                                comma = !0, type = "g";
                                break;
                            case "%":
                                scale = 100, suffix = "%", type = "f";
                                break;
                            case "p":
                                scale = 100, suffix = "%", type = "r";
                                break;
                            case "b":
                            case "o":
                            case "x":
                            case "X":
                                "#" === symbol && (prefix = "0" + type.toLowerCase());
                            case "c":
                                exponent = !1;
                            case "d":
                                integer = !0, precision = 0;
                                break;
                            case "s":
                                scale = -1, type = "r"
                        }
                        "$" === symbol && (prefix = locale_currency[0], suffix = locale_currency[1]), "r" != type || precision || (type = "g"), null != precision && ("g" == type ? precision = Math.max(1, Math.min(21, precision)) : "e" != type && "f" != type || (precision = Math.max(0, Math.min(20, precision)))), type = d3_format_types.get(type) || d3_format_typeDefault;
                        var zcomma = zfill && comma;
                        return function(value) {
                            var fullSuffix = suffix;
                            if (integer && value % 1) return "";
                            var negative = value < 0 || 0 === value && 1 / value < 0 ? (value = -value, "-") : "-" === sign ? "" : sign;
                            if (scale < 0) {
                                var unit = d3.formatPrefix(value, precision);
                                value = unit.scale(value), fullSuffix = unit.symbol + suffix
                            } else value *= scale;
                            var before, after, i = (value = type(value, precision)).lastIndexOf(".");
                            if (i < 0) {
                                var j = exponent ? value.lastIndexOf("e") : -1;
                                j < 0 ? (before = value, after = "") : (before = value.substring(0, j), after = value.substring(j))
                            } else before = value.substring(0, i), after = locale_decimal + value.substring(i + 1);
                            !zfill && comma && (before = formatGroup(before, 1 / 0));
                            var length = prefix.length + before.length + after.length + (zcomma ? 0 : negative.length),
                                padding = length < width ? new Array(length = width - length + 1).join(fill) : "";
                            return zcomma && (before = formatGroup(padding + before, padding.length ? width - after.length : 1 / 0)), negative += prefix, value = before + after, ("<" === align ? negative + value + padding : ">" === align ? padding + negative + value : "^" === align ? padding.substring(0, length >>= 1) + negative + value + padding.substring(length) : negative + (zcomma ? value : padding + value)) + fullSuffix
                        }
                    }
                }
                d3.formatPrefix = function(value, precision) {
                    var i = 0;
                    return (value = +value) && (value < 0 && (value *= -1), precision && (value = d3.round(value, d3_format_precision(value, precision))), i = 1 + Math.floor(1e-12 + Math.log(value) / Math.LN10), i = Math.max(-24, Math.min(24, 3 * Math.floor((i - 1) / 3)))), d3_formatPrefixes[8 + i / 3]
                };
                var d3_format_re = /(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
                    d3_format_types = d3.map({
                        b: function(x) {
                            return x.toString(2)
                        },
                        c: function(x) {
                            return String.fromCharCode(x)
                        },
                        o: function(x) {
                            return x.toString(8)
                        },
                        x: function(x) {
                            return x.toString(16)
                        },
                        X: function(x) {
                            return x.toString(16).toUpperCase()
                        },
                        g: function(x, p) {
                            return x.toPrecision(p)
                        },
                        e: function(x, p) {
                            return x.toExponential(p)
                        },
                        f: function(x, p) {
                            return x.toFixed(p)
                        },
                        r: function(x, p) {
                            return (x = d3.round(x, d3_format_precision(x, p))).toFixed(Math.max(0, Math.min(20, d3_format_precision(x * (1 + 1e-15), p))))
                        }
                    });

                function d3_format_typeDefault(x) {
                    return x + ""
                }
                var d3_time = d3.time = {},
                    d3_date = Date;

                function d3_date_utc() {
                    this._ = new Date(arguments.length > 1 ? Date.UTC.apply(this, arguments) : arguments[0])
                }
                d3_date_utc.prototype = {
                    getDate: function() {
                        return this._.getUTCDate()
                    },
                    getDay: function() {
                        return this._.getUTCDay()
                    },
                    getFullYear: function() {
                        return this._.getUTCFullYear()
                    },
                    getHours: function() {
                        return this._.getUTCHours()
                    },
                    getMilliseconds: function() {
                        return this._.getUTCMilliseconds()
                    },
                    getMinutes: function() {
                        return this._.getUTCMinutes()
                    },
                    getMonth: function() {
                        return this._.getUTCMonth()
                    },
                    getSeconds: function() {
                        return this._.getUTCSeconds()
                    },
                    getTime: function() {
                        return this._.getTime()
                    },
                    getTimezoneOffset: function() {
                        return 0
                    },
                    valueOf: function() {
                        return this._.valueOf()
                    },
                    setDate: function() {
                        d3_time_prototype.setUTCDate.apply(this._, arguments)
                    },
                    setDay: function() {
                        d3_time_prototype.setUTCDay.apply(this._, arguments)
                    },
                    setFullYear: function() {
                        d3_time_prototype.setUTCFullYear.apply(this._, arguments)
                    },
                    setHours: function() {
                        d3_time_prototype.setUTCHours.apply(this._, arguments)
                    },
                    setMilliseconds: function() {
                        d3_time_prototype.setUTCMilliseconds.apply(this._, arguments)
                    },
                    setMinutes: function() {
                        d3_time_prototype.setUTCMinutes.apply(this._, arguments)
                    },
                    setMonth: function() {
                        d3_time_prototype.setUTCMonth.apply(this._, arguments)
                    },
                    setSeconds: function() {
                        d3_time_prototype.setUTCSeconds.apply(this._, arguments)
                    },
                    setTime: function() {
                        d3_time_prototype.setTime.apply(this._, arguments)
                    }
                };
                var d3_time_prototype = Date.prototype;

                function d3_time_interval(local, step, number) {
                    function round(date) {
                        var d0 = local(date),
                            d1 = offset(d0, 1);
                        return date - d0 < d1 - date ? d0 : d1
                    }

                    function ceil(date) {
                        return step(date = local(new d3_date(date - 1)), 1), date
                    }

                    function offset(date, k) {
                        return step(date = new d3_date(+date), k), date
                    }

                    function range(t0, t1, dt) {
                        var time = ceil(t0),
                            times = [];
                        if (dt > 1)
                            for (; time < t1;) number(time) % dt || times.push(new Date(+time)), step(time, 1);
                        else
                            for (; time < t1;) times.push(new Date(+time)), step(time, 1);
                        return times
                    }
                    local.floor = local, local.round = round, local.ceil = ceil, local.offset = offset, local.range = range;
                    var utc = local.utc = d3_time_interval_utc(local);
                    return utc.floor = utc, utc.round = d3_time_interval_utc(round), utc.ceil = d3_time_interval_utc(ceil), utc.offset = d3_time_interval_utc(offset), utc.range = function(t0, t1, dt) {
                        try {
                            d3_date = d3_date_utc;
                            var utc = new d3_date_utc;
                            return utc._ = t0, range(utc, t1, dt)
                        } finally {
                            d3_date = Date
                        }
                    }, local
                }

                function d3_time_interval_utc(method) {
                    return function(date, k) {
                        try {
                            d3_date = d3_date_utc;
                            var utc = new d3_date_utc;
                            return utc._ = date, method(utc, k)._
                        } finally {
                            d3_date = Date
                        }
                    }
                }

                function d3_locale_timeFormat(locale) {
                    var locale_dateTime = locale.dateTime,
                        locale_date = locale.date,
                        locale_time = locale.time,
                        locale_periods = locale.periods,
                        locale_days = locale.days,
                        locale_shortDays = locale.shortDays,
                        locale_months = locale.months,
                        locale_shortMonths = locale.shortMonths;

                    function d3_time_format(template) {
                        var n = template.length;

                        function format(date) {
                            for (var c, p, f, string = [], i = -1, j = 0; ++i < n;) 37 === template.charCodeAt(i) && (string.push(template.slice(j, i)), null != (p = d3_time_formatPads[c = template.charAt(++i)]) && (c = template.charAt(++i)), (f = d3_time_formats[c]) && (c = f(date, null == p ? "e" === c ? " " : "0" : p)), string.push(c), j = i + 1);
                            return string.push(template.slice(j, i)), string.join("")
                        }
                        return format.parse = function(string) {
                            var d = {
                                y: 1900,
                                m: 0,
                                d: 1,
                                H: 0,
                                M: 0,
                                S: 0,
                                L: 0,
                                Z: null
                            };
                            if (d3_time_parse(d, template, string, 0) != string.length) return null;
                            "p" in d && (d.H = d.H % 12 + 12 * d.p);
                            var localZ = null != d.Z && d3_date !== d3_date_utc,
                                date = new(localZ ? d3_date_utc : d3_date);
                            return "j" in d ? date.setFullYear(d.y, 0, d.j) : "W" in d || "U" in d ? ("w" in d || (d.w = "W" in d ? 1 : 0), date.setFullYear(d.y, 0, 1), date.setFullYear(d.y, 0, "W" in d ? (d.w + 6) % 7 + 7 * d.W - (date.getDay() + 5) % 7 : d.w + 7 * d.U - (date.getDay() + 6) % 7)) : date.setFullYear(d.y, d.m, d.d), date.setHours(d.H + (d.Z / 100 | 0), d.M + d.Z % 100, d.S, d.L), localZ ? date._ : date
                        }, format.toString = function() {
                            return template
                        }, format
                    }

                    function d3_time_parse(date, template, string, j) {
                        for (var c, p, t, i = 0, n = template.length, m = string.length; i < n;) {
                            if (j >= m) return -1;
                            if (37 === (c = template.charCodeAt(i++))) {
                                if (t = template.charAt(i++), !(p = d3_time_parsers[t in d3_time_formatPads ? template.charAt(i++) : t]) || (j = p(date, string, j)) < 0) return -1
                            } else if (c != string.charCodeAt(j++)) return -1
                        }
                        return j
                    }
                    d3_time_format.utc = function(template) {
                        var local = d3_time_format(template);

                        function format(date) {
                            try {
                                var utc = new(d3_date = d3_date_utc);
                                return utc._ = date, local(utc)
                            } finally {
                                d3_date = Date
                            }
                        }
                        return format.parse = function(string) {
                            try {
                                d3_date = d3_date_utc;
                                var date = local.parse(string);
                                return date && date._
                            } finally {
                                d3_date = Date
                            }
                        }, format.toString = local.toString, format
                    }, d3_time_format.multi = d3_time_format.utc.multi = d3_time_formatMulti;
                    var d3_time_periodLookup = d3.map(),
                        d3_time_dayRe = d3_time_formatRe(locale_days),
                        d3_time_dayLookup = d3_time_formatLookup(locale_days),
                        d3_time_dayAbbrevRe = d3_time_formatRe(locale_shortDays),
                        d3_time_dayAbbrevLookup = d3_time_formatLookup(locale_shortDays),
                        d3_time_monthRe = d3_time_formatRe(locale_months),
                        d3_time_monthLookup = d3_time_formatLookup(locale_months),
                        d3_time_monthAbbrevRe = d3_time_formatRe(locale_shortMonths),
                        d3_time_monthAbbrevLookup = d3_time_formatLookup(locale_shortMonths);
                    locale_periods.forEach(function(p, i) {
                        d3_time_periodLookup.set(p.toLowerCase(), i)
                    });
                    var d3_time_formats = {
                            a: function(d) {
                                return locale_shortDays[d.getDay()]
                            },
                            A: function(d) {
                                return locale_days[d.getDay()]
                            },
                            b: function(d) {
                                return locale_shortMonths[d.getMonth()]
                            },
                            B: function(d) {
                                return locale_months[d.getMonth()]
                            },
                            c: d3_time_format(locale_dateTime),
                            d: function(d, p) {
                                return d3_time_formatPad(d.getDate(), p, 2)
                            },
                            e: function(d, p) {
                                return d3_time_formatPad(d.getDate(), p, 2)
                            },
                            H: function(d, p) {
                                return d3_time_formatPad(d.getHours(), p, 2)
                            },
                            I: function(d, p) {
                                return d3_time_formatPad(d.getHours() % 12 || 12, p, 2)
                            },
                            j: function(d, p) {
                                return d3_time_formatPad(1 + d3_time.dayOfYear(d), p, 3)
                            },
                            L: function(d, p) {
                                return d3_time_formatPad(d.getMilliseconds(), p, 3)
                            },
                            m: function(d, p) {
                                return d3_time_formatPad(d.getMonth() + 1, p, 2)
                            },
                            M: function(d, p) {
                                return d3_time_formatPad(d.getMinutes(), p, 2)
                            },
                            p: function(d) {
                                return locale_periods[+(d.getHours() >= 12)]
                            },
                            S: function(d, p) {
                                return d3_time_formatPad(d.getSeconds(), p, 2)
                            },
                            U: function(d, p) {
                                return d3_time_formatPad(d3_time.sundayOfYear(d), p, 2)
                            },
                            w: function(d) {
                                return d.getDay()
                            },
                            W: function(d, p) {
                                return d3_time_formatPad(d3_time.mondayOfYear(d), p, 2)
                            },
                            x: d3_time_format(locale_date),
                            X: d3_time_format(locale_time),
                            y: function(d, p) {
                                return d3_time_formatPad(d.getFullYear() % 100, p, 2)
                            },
                            Y: function(d, p) {
                                return d3_time_formatPad(d.getFullYear() % 1e4, p, 4)
                            },
                            Z: d3_time_zone,
                            "%": function() {
                                return "%"
                            }
                        },
                        d3_time_parsers = {
                            a: function(date, string, i) {
                                d3_time_dayAbbrevRe.lastIndex = 0;
                                var n = d3_time_dayAbbrevRe.exec(string.slice(i));
                                return n ? (date.w = d3_time_dayAbbrevLookup.get(n[0].toLowerCase()), i + n[0].length) : -1
                            },
                            A: function(date, string, i) {
                                d3_time_dayRe.lastIndex = 0;
                                var n = d3_time_dayRe.exec(string.slice(i));
                                return n ? (date.w = d3_time_dayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1
                            },
                            b: function(date, string, i) {
                                d3_time_monthAbbrevRe.lastIndex = 0;
                                var n = d3_time_monthAbbrevRe.exec(string.slice(i));
                                return n ? (date.m = d3_time_monthAbbrevLookup.get(n[0].toLowerCase()), i + n[0].length) : -1
                            },
                            B: function(date, string, i) {
                                d3_time_monthRe.lastIndex = 0;
                                var n = d3_time_monthRe.exec(string.slice(i));
                                return n ? (date.m = d3_time_monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1
                            },
                            c: function(date, string, i) {
                                return d3_time_parse(date, d3_time_formats.c.toString(), string, i)
                            },
                            d: d3_time_parseDay,
                            e: d3_time_parseDay,
                            H: d3_time_parseHour24,
                            I: d3_time_parseHour24,
                            j: d3_time_parseDayOfYear,
                            L: d3_time_parseMilliseconds,
                            m: d3_time_parseMonthNumber,
                            M: d3_time_parseMinutes,
                            p: function(date, string, i) {
                                var n = d3_time_periodLookup.get(string.slice(i, i += 2).toLowerCase());
                                return null == n ? -1 : (date.p = n, i)
                            },
                            S: d3_time_parseSeconds,
                            U: d3_time_parseWeekNumberSunday,
                            w: d3_time_parseWeekdayNumber,
                            W: d3_time_parseWeekNumberMonday,
                            x: function(date, string, i) {
                                return d3_time_parse(date, d3_time_formats.x.toString(), string, i)
                            },
                            X: function(date, string, i) {
                                return d3_time_parse(date, d3_time_formats.X.toString(), string, i)
                            },
                            y: d3_time_parseYear,
                            Y: d3_time_parseFullYear,
                            Z: d3_time_parseZone,
                            "%": d3_time_parseLiteralPercent
                        };
                    return d3_time_format
                }
                d3_time.year = d3_time_interval(function(date) {
                    return (date = d3_time.day(date)).setMonth(0, 1), date
                }, function(date, offset) {
                    date.setFullYear(date.getFullYear() + offset)
                }, function(date) {
                    return date.getFullYear()
                }), d3_time.years = d3_time.year.range, d3_time.years.utc = d3_time.year.utc.range, d3_time.day = d3_time_interval(function(date) {
                    var day = new d3_date(2e3, 0);
                    return day.setFullYear(date.getFullYear(), date.getMonth(), date.getDate()), day
                }, function(date, offset) {
                    date.setDate(date.getDate() + offset)
                }, function(date) {
                    return date.getDate() - 1
                }), d3_time.days = d3_time.day.range, d3_time.days.utc = d3_time.day.utc.range, d3_time.dayOfYear = function(date) {
                    var year = d3_time.year(date);
                    return Math.floor((date - year - 6e4 * (date.getTimezoneOffset() - year.getTimezoneOffset())) / 864e5)
                }, ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"].forEach(function(day, i) {
                    i = 7 - i;
                    var interval = d3_time[day] = d3_time_interval(function(date) {
                        return (date = d3_time.day(date)).setDate(date.getDate() - (date.getDay() + i) % 7), date
                    }, function(date, offset) {
                        date.setDate(date.getDate() + 7 * Math.floor(offset))
                    }, function(date) {
                        var day = d3_time.year(date).getDay();
                        return Math.floor((d3_time.dayOfYear(date) + (day + i) % 7) / 7) - (day !== i)
                    });
                    d3_time[day + "s"] = interval.range, d3_time[day + "s"].utc = interval.utc.range, d3_time[day + "OfYear"] = function(date) {
                        var day = d3_time.year(date).getDay();
                        return Math.floor((d3_time.dayOfYear(date) + (day + i) % 7) / 7)
                    }
                }), d3_time.week = d3_time.sunday, d3_time.weeks = d3_time.sunday.range, d3_time.weeks.utc = d3_time.sunday.utc.range, d3_time.weekOfYear = d3_time.sundayOfYear;
                var d3_time_formatPads = {
                        "-": "",
                        _: " ",
                        0: "0"
                    },
                    d3_time_numberRe = /^\s*\d+/,
                    d3_time_percentRe = /^%/;

                function d3_time_formatPad(value, fill, width) {
                    var sign = value < 0 ? "-" : "",
                        string = (sign ? -value : value) + "",
                        length = string.length;
                    return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string)
                }

                function d3_time_formatRe(names) {
                    return new RegExp("^(?:" + names.map(d3.requote).join("|") + ")", "i")
                }

                function d3_time_formatLookup(names) {
                    for (var map = new d3_Map, i = -1, n = names.length; ++i < n;) map.set(names[i].toLowerCase(), i);
                    return map
                }

                function d3_time_parseWeekdayNumber(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var n = d3_time_numberRe.exec(string.slice(i, i + 1));
                    return n ? (date.w = +n[0], i + n[0].length) : -1
                }

                function d3_time_parseWeekNumberSunday(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var n = d3_time_numberRe.exec(string.slice(i));
                    return n ? (date.U = +n[0], i + n[0].length) : -1
                }

                function d3_time_parseWeekNumberMonday(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var n = d3_time_numberRe.exec(string.slice(i));
                    return n ? (date.W = +n[0], i + n[0].length) : -1
                }

                function d3_time_parseFullYear(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var n = d3_time_numberRe.exec(string.slice(i, i + 4));
                    return n ? (date.y = +n[0], i + n[0].length) : -1
                }

                function d3_time_parseYear(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var d, n = d3_time_numberRe.exec(string.slice(i, i + 2));
                    return n ? (date.y = (d = +n[0]) + (d > 68 ? 1900 : 2e3), i + n[0].length) : -1
                }

                function d3_time_parseZone(date, string, i) {
                    return /^[+-]\d{4}$/.test(string = string.slice(i, i + 5)) ? (date.Z = -string, i + 5) : -1
                }

                function d3_time_parseMonthNumber(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var n = d3_time_numberRe.exec(string.slice(i, i + 2));
                    return n ? (date.m = n[0] - 1, i + n[0].length) : -1
                }

                function d3_time_parseDay(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var n = d3_time_numberRe.exec(string.slice(i, i + 2));
                    return n ? (date.d = +n[0], i + n[0].length) : -1
                }

                function d3_time_parseDayOfYear(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var n = d3_time_numberRe.exec(string.slice(i, i + 3));
                    return n ? (date.j = +n[0], i + n[0].length) : -1
                }

                function d3_time_parseHour24(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var n = d3_time_numberRe.exec(string.slice(i, i + 2));
                    return n ? (date.H = +n[0], i + n[0].length) : -1
                }

                function d3_time_parseMinutes(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var n = d3_time_numberRe.exec(string.slice(i, i + 2));
                    return n ? (date.M = +n[0], i + n[0].length) : -1
                }

                function d3_time_parseSeconds(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var n = d3_time_numberRe.exec(string.slice(i, i + 2));
                    return n ? (date.S = +n[0], i + n[0].length) : -1
                }

                function d3_time_parseMilliseconds(date, string, i) {
                    d3_time_numberRe.lastIndex = 0;
                    var n = d3_time_numberRe.exec(string.slice(i, i + 3));
                    return n ? (date.L = +n[0], i + n[0].length) : -1
                }

                function d3_time_zone(d) {
                    var z = d.getTimezoneOffset(),
                        zs = z > 0 ? "-" : "+",
                        zh = abs(z) / 60 | 0,
                        zm = abs(z) % 60;
                    return zs + d3_time_formatPad(zh, "0", 2) + d3_time_formatPad(zm, "0", 2)
                }

                function d3_time_parseLiteralPercent(date, string, i) {
                    d3_time_percentRe.lastIndex = 0;
                    var n = d3_time_percentRe.exec(string.slice(i, i + 1));
                    return n ? i + n[0].length : -1
                }

                function d3_time_formatMulti(formats) {
                    for (var n = formats.length, i = -1; ++i < n;) formats[i][0] = this(formats[i][0]);
                    return function(date) {
                        for (var i = 0, f = formats[i]; !f[1](date);) f = formats[++i];
                        return f[0](date)
                    }
                }
                d3.locale = function(locale) {
                    return {
                        numberFormat: d3_locale_numberFormat(locale),
                        timeFormat: d3_locale_timeFormat(locale)
                    }
                };
                var d3_locale_enUS = d3.locale({
                    decimal: ".",
                    thousands: ",",
                    grouping: [3],
                    currency: ["$", ""],
                    dateTime: "%a %b %e %X %Y",
                    date: "%m/%d/%Y",
                    time: "%H:%M:%S",
                    periods: ["AM", "PM"],
                    days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                    shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                    months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                    shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
                });

                function d3_adder() {}
                d3.format = d3_locale_enUS.numberFormat, d3.geo = {}, d3_adder.prototype = {
                    s: 0,
                    t: 0,
                    add: function(y) {
                        d3_adderSum(y, this.t, d3_adderTemp), d3_adderSum(d3_adderTemp.s, this.s, this), this.s ? this.t += d3_adderTemp.t : this.s = d3_adderTemp.t
                    },
                    reset: function() {
                        this.s = this.t = 0
                    },
                    valueOf: function() {
                        return this.s
                    }
                };
                var d3_adderTemp = new d3_adder;

                function d3_adderSum(a, b, o) {
                    var x = o.s = a + b,
                        bv = x - a,
                        av = x - bv;
                    o.t = a - av + (b - bv)
                }

                function d3_geo_streamGeometry(geometry, listener) {
                    geometry && d3_geo_streamGeometryType.hasOwnProperty(geometry.type) && d3_geo_streamGeometryType[geometry.type](geometry, listener)
                }
                d3.geo.stream = function(object, listener) {
                    object && d3_geo_streamObjectType.hasOwnProperty(object.type) ? d3_geo_streamObjectType[object.type](object, listener) : d3_geo_streamGeometry(object, listener)
                };
                var d3_geo_streamObjectType = {
                        Feature: function(feature, listener) {
                            d3_geo_streamGeometry(feature.geometry, listener)
                        },
                        FeatureCollection: function(object, listener) {
                            for (var features = object.features, i = -1, n = features.length; ++i < n;) d3_geo_streamGeometry(features[i].geometry, listener)
                        }
                    },
                    d3_geo_streamGeometryType = {
                        Sphere: function(object, listener) {
                            listener.sphere()
                        },
                        Point: function(object, listener) {
                            object = object.coordinates, listener.point(object[0], object[1], object[2])
                        },
                        MultiPoint: function(object, listener) {
                            for (var coordinates = object.coordinates, i = -1, n = coordinates.length; ++i < n;) object = coordinates[i], listener.point(object[0], object[1], object[2])
                        },
                        LineString: function(object, listener) {
                            d3_geo_streamLine(object.coordinates, listener, 0)
                        },
                        MultiLineString: function(object, listener) {
                            for (var coordinates = object.coordinates, i = -1, n = coordinates.length; ++i < n;) d3_geo_streamLine(coordinates[i], listener, 0)
                        },
                        Polygon: function(object, listener) {
                            d3_geo_streamPolygon(object.coordinates, listener)
                        },
                        MultiPolygon: function(object, listener) {
                            for (var coordinates = object.coordinates, i = -1, n = coordinates.length; ++i < n;) d3_geo_streamPolygon(coordinates[i], listener)
                        },
                        GeometryCollection: function(object, listener) {
                            for (var geometries = object.geometries, i = -1, n = geometries.length; ++i < n;) d3_geo_streamGeometry(geometries[i], listener)
                        }
                    };

                function d3_geo_streamLine(coordinates, listener, closed) {
                    var coordinate, i = -1,
                        n = coordinates.length - closed;
                    for (listener.lineStart(); ++i < n;) coordinate = coordinates[i], listener.point(coordinate[0], coordinate[1], coordinate[2]);
                    listener.lineEnd()
                }

                function d3_geo_streamPolygon(coordinates, listener) {
                    var i = -1,
                        n = coordinates.length;
                    for (listener.polygonStart(); ++i < n;) d3_geo_streamLine(coordinates[i], listener, 1);
                    listener.polygonEnd()
                }
                d3.geo.area = function(object) {
                    return d3_geo_areaSum = 0, d3.geo.stream(object, d3_geo_area), d3_geo_areaSum
                };
                var d3_geo_areaSum, d3_geo_centroidW0, d3_geo_centroidW1, d3_geo_centroidX0, d3_geo_centroidY0, d3_geo_centroidZ0, d3_geo_centroidX1, d3_geo_centroidY1, d3_geo_centroidZ1, d3_geo_centroidX2, d3_geo_centroidY2, d3_geo_centroidZ2, d3_geo_areaRingSum = new d3_adder,
                    d3_geo_area = {
                        sphere: function() {
                            d3_geo_areaSum += 4 * Ï
                        },
                        point: d3_noop,
                        lineStart: d3_noop,
                        lineEnd: d3_noop,
                        polygonStart: function() {
                            d3_geo_areaRingSum.reset(), d3_geo_area.lineStart = d3_geo_areaRingStart
                        },
                        polygonEnd: function() {
                            var area = 2 * d3_geo_areaRingSum;
                            d3_geo_areaSum += area < 0 ? 4 * Ï + area : area, d3_geo_area.lineStart = d3_geo_area.lineEnd = d3_geo_area.point = d3_noop
                        }
                    };

                function d3_geo_areaRingStart() {
                    var Î»00, Ï00, Î»0, cosÏ0, sinÏ0;

                    function nextPoint(Î», Ï) {
                        Ï = Ï * d3_radians / 2 + Ï / 4;
                        var dÎ» = (Î» *= d3_radians) - Î»0,
                            sdÎ» = dÎ» >= 0 ? 1 : -1,
                            adÎ» = sdÎ» * dÎ»,
                            cosÏ = Math.cos(Ï),
                            sinÏ = Math.sin(Ï),
                            k = sinÏ0 * sinÏ,
                            u = cosÏ0 * cosÏ + k * Math.cos(adÎ»),
                            v = k * sdÎ» * Math.sin(adÎ»);
                        d3_geo_areaRingSum.add(Math.atan2(v, u)), Î»0 = Î», cosÏ0 = cosÏ, sinÏ0 = sinÏ
                    }
                    d3_geo_area.point = function(Î», Ï) {
                        d3_geo_area.point = nextPoint, Î»0 = (Î»00 = Î») * d3_radians, cosÏ0 = Math.cos(Ï = (Ï00 = Ï) * d3_radians / 2 + Ï / 4), sinÏ0 = Math.sin(Ï)
                    }, d3_geo_area.lineEnd = function() {
                        nextPoint(Î»00, Ï00)
                    }
                }

                function d3_geo_cartesian(spherical) {
                    var Î» = spherical[0],
                        Ï = spherical[1],
                        cosÏ = Math.cos(Ï);
                    return [cosÏ * Math.cos(Î»), cosÏ * Math.sin(Î»), Math.sin(Ï)]
                }

                function d3_geo_cartesianDot(a, b) {
                    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2]
                }

                function d3_geo_cartesianCross(a, b) {
                    return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]]
                }

                function d3_geo_cartesianAdd(a, b) {
                    a[0] += b[0], a[1] += b[1], a[2] += b[2]
                }

                function d3_geo_cartesianScale(vector, k) {
                    return [vector[0] * k, vector[1] * k, vector[2] * k]
                }

                function d3_geo_cartesianNormalize(d) {
                    var l = Math.sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);
                    d[0] /= l, d[1] /= l, d[2] /= l
                }

                function d3_geo_spherical(cartesian) {
                    return [Math.atan2(cartesian[1], cartesian[0]), d3_asin(cartesian[2])]
                }

                function d3_geo_sphericalEqual(a, b) {
                    return abs(a[0] - b[0]) < Îµ && abs(a[1] - b[1]) < Îµ
                }
                d3.geo.bounds = function() {
                    var Î»0, Ï0, Î»1, Ï1, Î»_, Î»__, Ï__, p0, dÎ»Sum, ranges, range, bound = {
                        point: point,
                        lineStart: lineStart,
                        lineEnd: lineEnd,
                        polygonStart: function() {
                            bound.point = ringPoint, bound.lineStart = ringStart, bound.lineEnd = ringEnd, dÎ»Sum = 0, d3_geo_area.polygonStart()
                        },
                        polygonEnd: function() {
                            d3_geo_area.polygonEnd(), bound.point = point, bound.lineStart = lineStart, bound.lineEnd = lineEnd, d3_geo_areaRingSum < 0 ? (Î»0 = -(Î»1 = 180), Ï0 = -(Ï1 = 90)) : dÎ»Sum > Îµ ? Ï1 = 90 : dÎ»Sum < -Îµ && (Ï0 = -90), range[0] = Î»0, range[1] = Î»1
                        }
                    };

                    function point(Î», Ï) {
                        ranges.push(range = [Î»0 = Î», Î»1 = Î»]), Ï < Ï0 && (Ï0 = Ï), Ï > Ï1 && (Ï1 = Ï)
                    }

                    function linePoint(Î», Ï) {
                        var p = d3_geo_cartesian([Î» * d3_radians, Ï * d3_radians]);
                        if (p0) {
                            var normal = d3_geo_cartesianCross(p0, p),
                                inflection = d3_geo_cartesianCross([normal[1], -normal[0], 0], normal);
                            d3_geo_cartesianNormalize(inflection), inflection = d3_geo_spherical(inflection);
                            var dÎ» = Î» - Î»_,
                                s = dÎ» > 0 ? 1 : -1,
                                Î»i = inflection[0] * d3_degrees * s,
                                antimeridian = abs(dÎ») > 180;
                            if (antimeridian ^ (s * Î»_ < Î»i && Î»i < s * Î»))(Ïi = inflection[1] * d3_degrees) > Ï1 && (Ï1 = Ïi);
                            else if (antimeridian ^ (s * Î»_ < (Î»i = (Î»i + 360) % 360 - 180) && Î»i < s * Î»)) {
                                var Ïi;
                                (Ïi = -inflection[1] * d3_degrees) < Ï0 && (Ï0 = Ïi)
                            } else Ï < Ï0 && (Ï0 = Ï), Ï > Ï1 && (Ï1 = Ï);
                            antimeridian ? Î» < Î»_ ? angle(Î»0, Î») > angle(Î»0, Î»1) && (Î»1 = Î») : angle(Î», Î»1) > angle(Î»0, Î»1) && (Î»0 = Î») : Î»1 >= Î»0 ? (Î» < Î»0 && (Î»0 = Î»), Î» > Î»1 && (Î»1 = Î»)) : Î» > Î»_ ? angle(Î»0, Î») > angle(Î»0, Î»1) && (Î»1 = Î») : angle(Î», Î»1) > angle(Î»0, Î»1) && (Î»0 = Î»)
                        } else point(Î», Ï);
                        p0 = p, Î»_ = Î»
                    }

                    function lineStart() {
                        bound.point = linePoint
                    }

                    function lineEnd() {
                        range[0] = Î»0, range[1] = Î»1, bound.point = point, p0 = null
                    }

                    function ringPoint(Î», Ï) {
                        if (p0) {
                            var dÎ» = Î» - Î»_;
                            dÎ»Sum += abs(dÎ») > 180 ? dÎ» + (dÎ» > 0 ? 360 : -360) : dÎ»
                        } else Î»__ = Î», Ï__ = Ï;
                        d3_geo_area.point(Î», Ï), linePoint(Î», Ï)
                    }

                    function ringStart() {
                        d3_geo_area.lineStart()
                    }

                    function ringEnd() {
                        ringPoint(Î»__, Ï__), d3_geo_area.lineEnd(), abs(dÎ»Sum) > Îµ && (Î»0 = -(Î»1 = 180)), range[0] = Î»0, range[1] = Î»1, p0 = null
                    }

                    function angle(Î»0, Î»1) {
                        return (Î»1 -= Î»0) < 0 ? Î»1 + 360 : Î»1
                    }

                    function compareRanges(a, b) {
                        return a[0] - b[0]
                    }

                    function withinRange(x, range) {
                        return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x
                    }
                    return function(feature) {
                        if (Ï1 = Î»1 = -(Î»0 = Ï0 = 1 / 0), ranges = [], d3.geo.stream(feature, bound), n = ranges.length) {
                            ranges.sort(compareRanges);
                            for (var i = 1, merged = [a = ranges[0]]; i < n; ++i) withinRange((b = ranges[i])[0], a) || withinRange(b[1], a) ? (angle(a[0], b[1]) > angle(a[0], a[1]) && (a[1] = b[1]), angle(b[0], a[1]) > angle(a[0], a[1]) && (a[0] = b[0])) : merged.push(a = b);
                            for (var dÎ», n, b, best = -1 / 0, a = (i = 0, merged[n = merged.length - 1]); i <= n; a = b, ++i) b = merged[i], (dÎ» = angle(a[1], b[0])) > best && (best = dÎ», Î»0 = b[0], Î»1 = a[1])
                        }
                        return ranges = range = null, Î»0 === 1 / 0 || Ï0 === 1 / 0 ? [
                            [NaN, NaN],
                            [NaN, NaN]
                        ] : [
                            [Î»0, Ï0],
                            [Î»1, Ï1]
                        ]
                    }
                }(), d3.geo.centroid = function(object) {
                    d3_geo_centroidW0 = d3_geo_centroidW1 = d3_geo_centroidX0 = d3_geo_centroidY0 = d3_geo_centroidZ0 = d3_geo_centroidX1 = d3_geo_centroidY1 = d3_geo_centroidZ1 = d3_geo_centroidX2 = d3_geo_centroidY2 = d3_geo_centroidZ2 = 0, d3.geo.stream(object, d3_geo_centroid);
                    var x = d3_geo_centroidX2,
                        y = d3_geo_centroidY2,
                        z = d3_geo_centroidZ2,
                        m = x * x + y * y + z * z;
                    return m < Îµ2 && (x = d3_geo_centroidX1, y = d3_geo_centroidY1, z = d3_geo_centroidZ1, d3_geo_centroidW1 < Îµ && (x = d3_geo_centroidX0, y = d3_geo_centroidY0, z = d3_geo_centroidZ0), (m = x * x + y * y + z * z) < Îµ2) ? [NaN, NaN] : [Math.atan2(y, x) * d3_degrees, d3_asin(z / Math.sqrt(m)) * d3_degrees]
                };
                var d3_geo_centroid = {
                    sphere: d3_noop,
                    point: d3_geo_centroidPoint,
                    lineStart: d3_geo_centroidLineStart,
                    lineEnd: d3_geo_centroidLineEnd,
                    polygonStart: function() {
                        d3_geo_centroid.lineStart = d3_geo_centroidRingStart
                    },
                    polygonEnd: function() {
                        d3_geo_centroid.lineStart = d3_geo_centroidLineStart
                    }
                };

                function d3_geo_centroidPoint(Î», Ï) {
                    Î» *= d3_radians;
                    var cosÏ = Math.cos(Ï *= d3_radians);
                    d3_geo_centroidPointXYZ(cosÏ * Math.cos(Î»), cosÏ * Math.sin(Î»), Math.sin(Ï))
                }

                function d3_geo_centroidPointXYZ(x, y, z) {
                    d3_geo_centroidX0 += (x - d3_geo_centroidX0) / ++d3_geo_centroidW0, d3_geo_centroidY0 += (y - d3_geo_centroidY0) / d3_geo_centroidW0, d3_geo_centroidZ0 += (z - d3_geo_centroidZ0) / d3_geo_centroidW0
                }

                function d3_geo_centroidLineStart() {
                    var x0, y0, z0;

                    function nextPoint(Î», Ï) {
                        Î» *= d3_radians;
                        var cosÏ = Math.cos(Ï *= d3_radians),
                            x = cosÏ * Math.cos(Î»),
                            y = cosÏ * Math.sin(Î»),
                            z = Math.sin(Ï),
                            w = Math.atan2(Math.sqrt((w = y0 * z - z0 * y) * w + (w = z0 * x - x0 * z) * w + (w = x0 * y - y0 * x) * w), x0 * x + y0 * y + z0 * z);
                        d3_geo_centroidW1 += w, d3_geo_centroidX1 += w * (x0 + (x0 = x)), d3_geo_centroidY1 += w * (y0 + (y0 = y)), d3_geo_centroidZ1 += w * (z0 + (z0 = z)), d3_geo_centroidPointXYZ(x0, y0, z0)
                    }
                    d3_geo_centroid.point = function(Î», Ï) {
                        Î» *= d3_radians;
                        var cosÏ = Math.cos(Ï *= d3_radians);
                        x0 = cosÏ * Math.cos(Î»), y0 = cosÏ * Math.sin(Î»), z0 = Math.sin(Ï), d3_geo_centroid.point = nextPoint, d3_geo_centroidPointXYZ(x0, y0, z0)
                    }
                }

                function d3_geo_centroidLineEnd() {
                    d3_geo_centroid.point = d3_geo_centroidPoint
                }

                function d3_geo_centroidRingStart() {
                    var Î»00, Ï00, x0, y0, z0;

                    function nextPoint(Î», Ï) {
                        Î» *= d3_radians;
                        var cosÏ = Math.cos(Ï *= d3_radians),
                            x = cosÏ * Math.cos(Î»),
                            y = cosÏ * Math.sin(Î»),
                            z = Math.sin(Ï),
                            cx = y0 * z - z0 * y,
                            cy = z0 * x - x0 * z,
                            cz = x0 * y - y0 * x,
                            m = Math.sqrt(cx * cx + cy * cy + cz * cz),
                            u = x0 * x + y0 * y + z0 * z,
                            v = m && -d3_acos(u) / m,
                            w = Math.atan2(m, u);
                        d3_geo_centroidX2 += v * cx, d3_geo_centroidY2 += v * cy, d3_geo_centroidZ2 += v * cz, d3_geo_centroidW1 += w, d3_geo_centroidX1 += w * (x0 + (x0 = x)), d3_geo_centroidY1 += w * (y0 + (y0 = y)), d3_geo_centroidZ1 += w * (z0 + (z0 = z)), d3_geo_centroidPointXYZ(x0, y0, z0)
                    }
                    d3_geo_centroid.point = function(Î», Ï) {
                        Î»00 = Î», Ï00 = Ï, d3_geo_centroid.point = nextPoint, Î» *= d3_radians;
                        var cosÏ = Math.cos(Ï *= d3_radians);
                        x0 = cosÏ * Math.cos(Î»), y0 = cosÏ * Math.sin(Î»), z0 = Math.sin(Ï), d3_geo_centroidPointXYZ(x0, y0, z0)
                    }, d3_geo_centroid.lineEnd = function() {
                        nextPoint(Î»00, Ï00), d3_geo_centroid.lineEnd = d3_geo_centroidLineEnd, d3_geo_centroid.point = d3_geo_centroidPoint
                    }
                }

                function d3_geo_compose(a, b) {
                    function compose(x, y) {
                        return x = a(x, y), b(x[0], x[1])
                    }
                    return a.invert && b.invert && (compose.invert = function(x, y) {
                        return (x = b.invert(x, y)) && a.invert(x[0], x[1])
                    }), compose
                }

                function d3_true() {
                    return !0
                }

                function d3_geo_clipPolygon(segments, compare, clipStartInside, interpolate, listener) {
                    var subject = [],
                        clip = [];
                    if (segments.forEach(function(segment) {
                            if (!((n = segment.length - 1) <= 0)) {
                                var n, p0 = segment[0],
                                    p1 = segment[n];
                                if (d3_geo_sphericalEqual(p0, p1)) {
                                    listener.lineStart();
                                    for (var i = 0; i < n; ++i) listener.point((p0 = segment[i])[0], p0[1]);
                                    listener.lineEnd()
                                } else {
                                    var a = new d3_geo_clipPolygonIntersection(p0, segment, null, !0),
                                        b = new d3_geo_clipPolygonIntersection(p0, null, a, !1);
                                    a.o = b, subject.push(a), clip.push(b), a = new d3_geo_clipPolygonIntersection(p1, segment, null, !1), b = new d3_geo_clipPolygonIntersection(p1, null, a, !0), a.o = b, subject.push(a), clip.push(b)
                                }
                            }
                        }), clip.sort(compare), d3_geo_clipPolygonLinkCircular(subject), d3_geo_clipPolygonLinkCircular(clip), subject.length) {
                        for (var i = 0, entry = clipStartInside, n = clip.length; i < n; ++i) clip[i].e = entry = !entry;
                        for (var points, point, start = subject[0];;) {
                            for (var current = start, isSubject = !0; current.v;)
                                if ((current = current.n) === start) return;
                            points = current.z, listener.lineStart();
                            do {
                                if (current.v = current.o.v = !0, current.e) {
                                    if (isSubject)
                                        for (i = 0, n = points.length; i < n; ++i) listener.point((point = points[i])[0], point[1]);
                                    else interpolate(current.x, current.n.x, 1, listener);
                                    current = current.n
                                } else {
                                    if (isSubject)
                                        for (i = (points = current.p.z).length - 1; i >= 0; --i) listener.point((point = points[i])[0], point[1]);
                                    else interpolate(current.x, current.p.x, -1, listener);
                                    current = current.p
                                }
                                points = (current = current.o).z, isSubject = !isSubject
                            } while (!current.v);
                            listener.lineEnd()
                        }
                    }
                }

                function d3_geo_clipPolygonLinkCircular(array) {
                    if (n = array.length) {
                        for (var n, b, i = 0, a = array[0]; ++i < n;) a.n = b = array[i], b.p = a, a = b;
                        a.n = b = array[0], b.p = a
                    }
                }

                function d3_geo_clipPolygonIntersection(point, points, other, entry) {
                    this.x = point, this.z = points, this.o = other, this.e = entry, this.v = !1, this.n = this.p = null
                }

                function d3_geo_clip(pointVisible, clipLine, interpolate, clipStart) {
                    return function(rotate, listener) {
                        var segments, line = clipLine(listener),
                            rotatedClipStart = rotate.invert(clipStart[0], clipStart[1]),
                            clip = {
                                point: point,
                                lineStart: lineStart,
                                lineEnd: lineEnd,
                                polygonStart: function() {
                                    clip.point = pointRing, clip.lineStart = ringStart, clip.lineEnd = ringEnd, segments = [], polygon = []
                                },
                                polygonEnd: function() {
                                    clip.point = point, clip.lineStart = lineStart, clip.lineEnd = lineEnd, segments = d3.merge(segments);
                                    var clipStartInside = function(point, polygon) {
                                        var meridian = point[0],
                                            parallel = point[1],
                                            meridianNormal = [Math.sin(meridian), -Math.cos(meridian), 0],
                                            polarAngle = 0,
                                            winding = 0;
                                        d3_geo_areaRingSum.reset();
                                        for (var i = 0, n = polygon.length; i < n; ++i) {
                                            var ring = polygon[i],
                                                m = ring.length;
                                            if (m)
                                                for (var point0 = ring[0], Î»0 = point0[0], Ï0 = point0[1] / 2 + Ï / 4, sinÏ0 = Math.sin(Ï0), cosÏ0 = Math.cos(Ï0), j = 1;;) {
                                                    j === m && (j = 0);
                                                    var Î» = (point = ring[j])[0],
                                                        Ï = point[1] / 2 + Ï / 4,
                                                        sinÏ = Math.sin(Ï),
                                                        cosÏ = Math.cos(Ï),
                                                        dÎ» = Î» - Î»0,
                                                        sdÎ» = dÎ» >= 0 ? 1 : -1,
                                                        adÎ» = sdÎ» * dÎ»,
                                                        antimeridian = adÎ» > Ï,
                                                        k = sinÏ0 * sinÏ;
                                                    if (d3_geo_areaRingSum.add(Math.atan2(k * sdÎ» * Math.sin(adÎ»), cosÏ0 * cosÏ + k * Math.cos(adÎ»))), polarAngle += antimeridian ? dÎ» + sdÎ» * Ï : dÎ», antimeridian ^ Î»0 >= meridian ^ Î» >= meridian) {
                                                        var arc = d3_geo_cartesianCross(d3_geo_cartesian(point0), d3_geo_cartesian(point));
                                                        d3_geo_cartesianNormalize(arc);
                                                        var intersection = d3_geo_cartesianCross(meridianNormal, arc);
                                                        d3_geo_cartesianNormalize(intersection);
                                                        var Ïarc = (antimeridian ^ dÎ» >= 0 ? -1 : 1) * d3_asin(intersection[2]);
                                                        (parallel > Ïarc || parallel === Ïarc && (arc[0] || arc[1])) && (winding += antimeridian ^ dÎ» >= 0 ? 1 : -1)
                                                    }
                                                    if (!j++) break;
                                                    Î»0 = Î», sinÏ0 = sinÏ, cosÏ0 = cosÏ, point0 = point
                                                }
                                        }
                                        return (polarAngle < -Îµ || polarAngle < Îµ && d3_geo_areaRingSum < -Îµ) ^ 1 & winding
                                    }(rotatedClipStart, polygon);
                                    segments.length ? (polygonStarted || (listener.polygonStart(), polygonStarted = !0), d3_geo_clipPolygon(segments, d3_geo_clipSort, clipStartInside, interpolate, listener)) : clipStartInside && (polygonStarted || (listener.polygonStart(), polygonStarted = !0), listener.lineStart(), interpolate(null, null, 1, listener), listener.lineEnd()), polygonStarted && (listener.polygonEnd(), polygonStarted = !1), segments = polygon = null
                                },
                                sphere: function() {
                                    listener.polygonStart(), listener.lineStart(), interpolate(null, null, 1, listener), listener.lineEnd(), listener.polygonEnd()
                                }
                            };

                        function point(Î», Ï) {
                            var point = rotate(Î», Ï);
                            pointVisible(Î» = point[0], Ï = point[1]) && listener.point(Î», Ï)
                        }

                        function pointLine(Î», Ï) {
                            var point = rotate(Î», Ï);
                            line.point(point[0], point[1])
                        }

                        function lineStart() {
                            clip.point = pointLine, line.lineStart()
                        }

                        function lineEnd() {
                            clip.point = point, line.lineEnd()
                        }
                        var polygon, ring, buffer = d3_geo_clipBufferListener(),
                            ringListener = clipLine(buffer),
                            polygonStarted = !1;

                        function pointRing(Î», Ï) {
                            ring.push([Î», Ï]);
                            var point = rotate(Î», Ï);
                            ringListener.point(point[0], point[1])
                        }

                        function ringStart() {
                            ringListener.lineStart(), ring = []
                        }

                        function ringEnd() {
                            pointRing(ring[0][0], ring[0][1]), ringListener.lineEnd();
                            var segment, clean = ringListener.clean(),
                                ringSegments = buffer.buffer(),
                                n = ringSegments.length;
                            if (ring.pop(), polygon.push(ring), ring = null, n)
                                if (1 & clean) {
                                    var point, i = -1;
                                    if ((n = (segment = ringSegments[0]).length - 1) > 0) {
                                        for (polygonStarted || (listener.polygonStart(), polygonStarted = !0), listener.lineStart(); ++i < n;) listener.point((point = segment[i])[0], point[1]);
                                        listener.lineEnd()
                                    }
                                } else n > 1 && 2 & clean && ringSegments.push(ringSegments.pop().concat(ringSegments.shift())), segments.push(ringSegments.filter(d3_geo_clipSegmentLength1))
                        }
                        return clip
                    }
                }

                function d3_geo_clipSegmentLength1(segment) {
                    return segment.length > 1
                }

                function d3_geo_clipBufferListener() {
                    var line, lines = [];
                    return {
                        lineStart: function() {
                            lines.push(line = [])
                        },
                        point: function(Î», Ï) {
                            line.push([Î», Ï])
                        },
                        lineEnd: d3_noop,
                        buffer: function() {
                            var buffer = lines;
                            return lines = [], line = null, buffer
                        },
                        rejoin: function() {
                            lines.length > 1 && lines.push(lines.pop().concat(lines.shift()))
                        }
                    }
                }

                function d3_geo_clipSort(a, b) {
                    return ((a = a.x)[0] < 0 ? a[1] - halfÏ - Îµ : halfÏ - a[1]) - ((b = b.x)[0] < 0 ? b[1] - halfÏ - Îµ : halfÏ - b[1])
                }
                var d3_geo_clipAntimeridian = d3_geo_clip(d3_true, function(listener) {
                    var clean, Î»0 = NaN,
                        Ï0 = NaN,
                        sÎ»0 = NaN;
                    return {
                        lineStart: function() {
                            listener.lineStart(), clean = 1
                        },
                        point: function(Î»1, Ï1) {
                            var sÎ»1 = Î»1 > 0 ? Ï : -Ï,
                                dÎ» = abs(Î»1 - Î»0);
                            abs(dÎ» - Ï) < Îµ ? (listener.point(Î»0, Ï0 = (Ï0 + Ï1) / 2 > 0 ? halfÏ : -halfÏ), listener.point(sÎ»0, Ï0), listener.lineEnd(), listener.lineStart(), listener.point(sÎ»1, Ï0), listener.point(Î»1, Ï0), clean = 0) : sÎ»0 !== sÎ»1 && dÎ» >= Ï && (abs(Î»0 - sÎ»0) < Îµ && (Î»0 -= sÎ»0 * Îµ), abs(Î»1 - sÎ»1) < Îµ && (Î»1 -= sÎ»1 * Îµ), Ï0 = function(Î»0, Ï0, Î»1, Ï1) {
                                var cosÏ0, cosÏ1, sinÎ»0_Î»1 = Math.sin(Î»0 - Î»1);
                                return abs(sinÎ»0_Î»1) > Îµ ? Math.atan((Math.sin(Ï0) * (cosÏ1 = Math.cos(Ï1)) * Math.sin(Î»1) - Math.sin(Ï1) * (cosÏ0 = Math.cos(Ï0)) * Math.sin(Î»0)) / (cosÏ0 * cosÏ1 * sinÎ»0_Î»1)) : (Ï0 + Ï1) / 2
                            }(Î»0, Ï0, Î»1, Ï1), listener.point(sÎ»0, Ï0), listener.lineEnd(), listener.lineStart(), listener.point(sÎ»1, Ï0), clean = 0), listener.point(Î»0 = Î»1, Ï0 = Ï1), sÎ»0 = sÎ»1
                        },
                        lineEnd: function() {
                            listener.lineEnd(), Î»0 = Ï0 = NaN
                        },
                        clean: function() {
                            return 2 - clean
                        }
                    }
                }, function(from, to, direction, listener) {
                    var Ï;
                    if (null == from) Ï = direction * halfÏ, listener.point(-Ï, Ï), listener.point(0, Ï), listener.point(Ï, Ï), listener.point(Ï, 0), listener.point(Ï, -Ï), listener.point(0, -Ï), listener.point(-Ï, -Ï), listener.point(-Ï, 0), listener.point(-Ï, Ï);
                    else if (abs(from[0] - to[0]) > Îµ) {
                        var s = from[0] < to[0] ? Ï : -Ï;
                        Ï = direction * s / 2, listener.point(-s, Ï), listener.point(0, Ï), listener.point(s, Ï)
                    } else listener.point(to[0], to[1])
                }, [-Ï, -Ï / 2]);

                function d3_geom_clipLine(x0, y0, x1, y1) {
                    return function(line) {
                        var r, a = line.a,
                            b = line.b,
                            ax = a.x,
                            ay = a.y,
                            t0 = 0,
                            t1 = 1,
                            dx = b.x - ax,
                            dy = b.y - ay;
                        if (r = x0 - ax, dx || !(r > 0)) {
                            if (r /= dx, dx < 0) {
                                if (r < t0) return;
                                r < t1 && (t1 = r)
                            } else if (dx > 0) {
                                if (r > t1) return;
                                r > t0 && (t0 = r)
                            }
                            if (r = x1 - ax, dx || !(r < 0)) {
                                if (r /= dx, dx < 0) {
                                    if (r > t1) return;
                                    r > t0 && (t0 = r)
                                } else if (dx > 0) {
                                    if (r < t0) return;
                                    r < t1 && (t1 = r)
                                }
                                if (r = y0 - ay, dy || !(r > 0)) {
                                    if (r /= dy, dy < 0) {
                                        if (r < t0) return;
                                        r < t1 && (t1 = r)
                                    } else if (dy > 0) {
                                        if (r > t1) return;
                                        r > t0 && (t0 = r)
                                    }
                                    if (r = y1 - ay, dy || !(r < 0)) {
                                        if (r /= dy, dy < 0) {
                                            if (r > t1) return;
                                            r > t0 && (t0 = r)
                                        } else if (dy > 0) {
                                            if (r < t0) return;
                                            r < t1 && (t1 = r)
                                        }
                                        return t0 > 0 && (line.a = {
                                            x: ax + t0 * dx,
                                            y: ay + t0 * dy
                                        }), t1 < 1 && (line.b = {
                                            x: ax + t1 * dx,
                                            y: ay + t1 * dy
                                        }), line
                                    }
                                }
                            }
                        }
                    }
                }
                var d3_geo_clipExtentMAX = 1e9;

                function d3_geo_clipExtent(x0, y0, x1, y1) {
                    return function(listener) {
                        var segments, polygon, ring, x__, y__, v__, x_, y_, v_, first, clean, listener_ = listener,
                            bufferListener = d3_geo_clipBufferListener(),
                            clipLine = d3_geom_clipLine(x0, y0, x1, y1),
                            clip = {
                                point: point,
                                lineStart: function() {
                                    clip.point = linePoint, polygon && polygon.push(ring = []);
                                    first = !0, v_ = !1, x_ = y_ = NaN
                                },
                                lineEnd: function() {
                                    segments && (linePoint(x__, y__), v__ && v_ && bufferListener.rejoin(), segments.push(bufferListener.buffer()));
                                    clip.point = point, v_ && listener.lineEnd()
                                },
                                polygonStart: function() {
                                    listener = bufferListener, segments = [], polygon = [], clean = !0
                                },
                                polygonEnd: function() {
                                    listener = listener_, segments = d3.merge(segments);
                                    var clipStartInside = function(p) {
                                            for (var wn = 0, n = polygon.length, y = p[1], i = 0; i < n; ++i)
                                                for (var b, j = 1, v = polygon[i], m = v.length, a = v[0]; j < m; ++j) b = v[j], a[1] <= y ? b[1] > y && d3_cross2d(a, b, p) > 0 && ++wn : b[1] <= y && d3_cross2d(a, b, p) < 0 && --wn, a = b;
                                            return 0 !== wn
                                        }([x0, y1]),
                                        inside = clean && clipStartInside,
                                        visible = segments.length;
                                    (inside || visible) && (listener.polygonStart(), inside && (listener.lineStart(), interpolate(null, null, 1, listener), listener.lineEnd()), visible && d3_geo_clipPolygon(segments, compare, clipStartInside, interpolate, listener), listener.polygonEnd()), segments = polygon = ring = null
                                }
                            };

                        function interpolate(from, to, direction, listener) {
                            var a = 0,
                                a1 = 0;
                            if (null == from || (a = corner(from, direction)) !== (a1 = corner(to, direction)) || comparePoints(from, to) < 0 ^ direction > 0)
                                do {
                                    listener.point(0 === a || 3 === a ? x0 : x1, a > 1 ? y1 : y0)
                                } while ((a = (a + direction + 4) % 4) !== a1);
                            else listener.point(to[0], to[1])
                        }

                        function pointVisible(x, y) {
                            return x0 <= x && x <= x1 && y0 <= y && y <= y1
                        }

                        function point(x, y) {
                            pointVisible(x, y) && listener.point(x, y)
                        }

                        function linePoint(x, y) {
                            var v = pointVisible(x = Math.max(-d3_geo_clipExtentMAX, Math.min(d3_geo_clipExtentMAX, x)), y = Math.max(-d3_geo_clipExtentMAX, Math.min(d3_geo_clipExtentMAX, y)));
                            if (polygon && ring.push([x, y]), first) x__ = x, y__ = y, v__ = v, first = !1, v && (listener.lineStart(), listener.point(x, y));
                            else if (v && v_) listener.point(x, y);
                            else {
                                var l = {
                                    a: {
                                        x: x_,
                                        y: y_
                                    },
                                    b: {
                                        x: x,
                                        y: y
                                    }
                                };
                                clipLine(l) ? (v_ || (listener.lineStart(), listener.point(l.a.x, l.a.y)), listener.point(l.b.x, l.b.y), v || listener.lineEnd(), clean = !1) : v && (listener.lineStart(), listener.point(x, y), clean = !1)
                            }
                            x_ = x, y_ = y, v_ = v
                        }
                        return clip
                    };

                    function corner(p, direction) {
                        return abs(p[0] - x0) < Îµ ? direction > 0 ? 0 : 3 : abs(p[0] - x1) < Îµ ? direction > 0 ? 2 : 1 : abs(p[1] - y0) < Îµ ? direction > 0 ? 1 : 0 : direction > 0 ? 3 : 2
                    }

                    function compare(a, b) {
                        return comparePoints(a.x, b.x)
                    }

                    function comparePoints(a, b) {
                        var ca = corner(a, 1),
                            cb = corner(b, 1);
                        return ca !== cb ? ca - cb : 0 === ca ? b[1] - a[1] : 1 === ca ? a[0] - b[0] : 2 === ca ? a[1] - b[1] : b[0] - a[0]
                    }
                }

                function d3_geo_conic(projectAt) {
                    var Ï0 = 0,
                        Ï1 = Ï / 3,
                        m = d3_geo_projectionMutator(projectAt),
                        p = m(Ï0, Ï1);
                    return p.parallels = function(_) {
                        return arguments.length ? m(Ï0 = _[0] * Ï / 180, Ï1 = _[1] * Ï / 180) : [Ï0 / Ï * 180, Ï1 / Ï * 180]
                    }, p
                }

                function d3_geo_conicEqualArea(Ï0, Ï1) {
                    var sinÏ0 = Math.sin(Ï0),
                        n = (sinÏ0 + Math.sin(Ï1)) / 2,
                        C = 1 + sinÏ0 * (2 * n - sinÏ0),
                        Ï0 = Math.sqrt(C) / n;

                    function forward(Î», Ï) {
                        var Ï = Math.sqrt(C - 2 * n * Math.sin(Ï)) / n;
                        return [Ï * Math.sin(Î» *= n), Ï0 - Ï * Math.cos(Î»)]
                    }
                    return forward.invert = function(x, y) {
                        var Ï0_y = Ï0 - y;
                        return [Math.atan2(x, Ï0_y) / n, d3_asin((C - (x * x + Ï0_y * Ï0_y) * n * n) / (2 * n))]
                    }, forward
                }
                d3.geo.clipExtent = function() {
                    var x0, y0, x1, y1, stream, clip, clipExtent = {
                        stream: function(output) {
                            return stream && (stream.valid = !1), (stream = clip(output)).valid = !0, stream
                        },
                        extent: function(_) {
                            return arguments.length ? (clip = d3_geo_clipExtent(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), stream && (stream.valid = !1, stream = null), clipExtent) : [
                                [x0, y0],
                                [x1, y1]
                            ]
                        }
                    };
                    return clipExtent.extent([
                        [0, 0],
                        [960, 500]
                    ])
                }, (d3.geo.conicEqualArea = function() {
                    return d3_geo_conic(d3_geo_conicEqualArea)
                }).raw = d3_geo_conicEqualArea, d3.geo.albers = function() {
                    return d3.geo.conicEqualArea().rotate([96, 0]).center([-.6, 38.7]).parallels([29.5, 45.5]).scale(1070)
                }, d3.geo.albersUsa = function() {
                    var point, lower48Point, alaskaPoint, hawaiiPoint, lower48 = d3.geo.albers(),
                        alaska = d3.geo.conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]),
                        hawaii = d3.geo.conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]),
                        pointStream = {
                            point: function(x, y) {
                                point = [x, y]
                            }
                        };

                    function albersUsa(coordinates) {
                        var x = coordinates[0],
                            y = coordinates[1];
                        return point = null, lower48Point(x, y), point || (alaskaPoint(x, y), point) || hawaiiPoint(x, y), point
                    }
                    return albersUsa.invert = function(coordinates) {
                        var k = lower48.scale(),
                            t = lower48.translate(),
                            x = (coordinates[0] - t[0]) / k,
                            y = (coordinates[1] - t[1]) / k;
                        return (y >= .12 && y < .234 && x >= -.425 && x < -.214 ? alaska : y >= .166 && y < .234 && x >= -.214 && x < -.115 ? hawaii : lower48).invert(coordinates)
                    }, albersUsa.stream = function(stream) {
                        var lower48Stream = lower48.stream(stream),
                            alaskaStream = alaska.stream(stream),
                            hawaiiStream = hawaii.stream(stream);
                        return {
                            point: function(x, y) {
                                lower48Stream.point(x, y), alaskaStream.point(x, y), hawaiiStream.point(x, y)
                            },
                            sphere: function() {
                                lower48Stream.sphere(), alaskaStream.sphere(), hawaiiStream.sphere()
                            },
                            lineStart: function() {
                                lower48Stream.lineStart(), alaskaStream.lineStart(), hawaiiStream.lineStart()
                            },
                            lineEnd: function() {
                                lower48Stream.lineEnd(), alaskaStream.lineEnd(), hawaiiStream.lineEnd()
                            },
                            polygonStart: function() {
                                lower48Stream.polygonStart(), alaskaStream.polygonStart(), hawaiiStream.polygonStart()
                            },
                            polygonEnd: function() {
                                lower48Stream.polygonEnd(), alaskaStream.polygonEnd(), hawaiiStream.polygonEnd()
                            }
                        }
                    }, albersUsa.precision = function(_) {
                        return arguments.length ? (lower48.precision(_), alaska.precision(_), hawaii.precision(_), albersUsa) : lower48.precision()
                    }, albersUsa.scale = function(_) {
                        return arguments.length ? (lower48.scale(_), alaska.scale(.35 * _), hawaii.scale(_), albersUsa.translate(lower48.translate())) : lower48.scale()
                    }, albersUsa.translate = function(_) {
                        if (!arguments.length) return lower48.translate();
                        var k = lower48.scale(),
                            x = +_[0],
                            y = +_[1];
                        return lower48Point = lower48.translate(_).clipExtent([
                            [x - .455 * k, y - .238 * k],
                            [x + .455 * k, y + .238 * k]
                        ]).stream(pointStream).point, alaskaPoint = alaska.translate([x - .307 * k, y + .201 * k]).clipExtent([
                            [x - .425 * k + Îµ, y + .12 * k + Îµ],
                            [x - .214 * k - Îµ, y + .234 * k - Îµ]
                        ]).stream(pointStream).point, hawaiiPoint = hawaii.translate([x - .205 * k, y + .212 * k]).clipExtent([
                            [x - .214 * k + Îµ, y + .166 * k + Îµ],
                            [x - .115 * k - Îµ, y + .234 * k - Îµ]
                        ]).stream(pointStream).point, albersUsa
                    }, albersUsa.scale(1070)
                };
                var d3_geo_pathAreaSum, d3_geo_pathAreaPolygon, d3_geo_pathBoundsX0, d3_geo_pathBoundsY0, d3_geo_pathBoundsX1, d3_geo_pathBoundsY1, d3_geo_pathArea = {
                    point: d3_noop,
                    lineStart: d3_noop,
                    lineEnd: d3_noop,
                    polygonStart: function() {
                        d3_geo_pathAreaPolygon = 0, d3_geo_pathArea.lineStart = d3_geo_pathAreaRingStart
                    },
                    polygonEnd: function() {
                        d3_geo_pathArea.lineStart = d3_geo_pathArea.lineEnd = d3_geo_pathArea.point = d3_noop, d3_geo_pathAreaSum += abs(d3_geo_pathAreaPolygon / 2)
                    }
                };

                function d3_geo_pathAreaRingStart() {
                    var x00, y00, x0, y0;

                    function nextPoint(x, y) {
                        d3_geo_pathAreaPolygon += y0 * x - x0 * y, x0 = x, y0 = y
                    }
                    d3_geo_pathArea.point = function(x, y) {
                        d3_geo_pathArea.point = nextPoint, x00 = x0 = x, y00 = y0 = y
                    }, d3_geo_pathArea.lineEnd = function() {
                        nextPoint(x00, y00)
                    }
                }
                var d3_geo_pathBounds = {
                    point: function(x, y) {
                        x < d3_geo_pathBoundsX0 && (d3_geo_pathBoundsX0 = x);
                        x > d3_geo_pathBoundsX1 && (d3_geo_pathBoundsX1 = x);
                        y < d3_geo_pathBoundsY0 && (d3_geo_pathBoundsY0 = y);
                        y > d3_geo_pathBoundsY1 && (d3_geo_pathBoundsY1 = y)
                    },
                    lineStart: d3_noop,
                    lineEnd: d3_noop,
                    polygonStart: d3_noop,
                    polygonEnd: d3_noop
                };

                function d3_geo_pathBuffer() {
                    var pointCircle = d3_geo_pathBufferCircle(4.5),
                        buffer = [],
                        stream = {
                            point: point,
                            lineStart: function() {
                                stream.point = pointLineStart
                            },
                            lineEnd: lineEnd,
                            polygonStart: function() {
                                stream.lineEnd = lineEndPolygon
                            },
                            polygonEnd: function() {
                                stream.lineEnd = lineEnd, stream.point = point
                            },
                            pointRadius: function(_) {
                                return pointCircle = d3_geo_pathBufferCircle(_), stream
                            },
                            result: function() {
                                if (buffer.length) {
                                    var result = buffer.join("");
                                    return buffer = [], result
                                }
                            }
                        };

                    function point(x, y) {
                        buffer.push("M", x, ",", y, pointCircle)
                    }

                    function pointLineStart(x, y) {
                        buffer.push("M", x, ",", y), stream.point = pointLine
                    }

                    function pointLine(x, y) {
                        buffer.push("L", x, ",", y)
                    }

                    function lineEnd() {
                        stream.point = point
                    }

                    function lineEndPolygon() {
                        buffer.push("Z")
                    }
                    return stream
                }

                function d3_geo_pathBufferCircle(radius) {
                    return "m0," + radius + "a" + radius + "," + radius + " 0 1,1 0," + -2 * radius + "a" + radius + "," + radius + " 0 1,1 0," + 2 * radius + "z"
                }
                var d3_geo_lengthSum, d3_geo_pathCentroid = {
                    point: d3_geo_pathCentroidPoint,
                    lineStart: d3_geo_pathCentroidLineStart,
                    lineEnd: d3_geo_pathCentroidLineEnd,
                    polygonStart: function() {
                        d3_geo_pathCentroid.lineStart = d3_geo_pathCentroidRingStart
                    },
                    polygonEnd: function() {
                        d3_geo_pathCentroid.point = d3_geo_pathCentroidPoint, d3_geo_pathCentroid.lineStart = d3_geo_pathCentroidLineStart, d3_geo_pathCentroid.lineEnd = d3_geo_pathCentroidLineEnd
                    }
                };

                function d3_geo_pathCentroidPoint(x, y) {
                    d3_geo_centroidX0 += x, d3_geo_centroidY0 += y, ++d3_geo_centroidZ0
                }

                function d3_geo_pathCentroidLineStart() {
                    var x0, y0;

                    function nextPoint(x, y) {
                        var dx = x - x0,
                            dy = y - y0,
                            z = Math.sqrt(dx * dx + dy * dy);
                        d3_geo_centroidX1 += z * (x0 + x) / 2, d3_geo_centroidY1 += z * (y0 + y) / 2, d3_geo_centroidZ1 += z, d3_geo_pathCentroidPoint(x0 = x, y0 = y)
                    }
                    d3_geo_pathCentroid.point = function(x, y) {
                        d3_geo_pathCentroid.point = nextPoint, d3_geo_pathCentroidPoint(x0 = x, y0 = y)
                    }
                }

                function d3_geo_pathCentroidLineEnd() {
                    d3_geo_pathCentroid.point = d3_geo_pathCentroidPoint
                }

                function d3_geo_pathCentroidRingStart() {
                    var x00, y00, x0, y0;

                    function nextPoint(x, y) {
                        var dx = x - x0,
                            dy = y - y0,
                            z = Math.sqrt(dx * dx + dy * dy);
                        d3_geo_centroidX1 += z * (x0 + x) / 2, d3_geo_centroidY1 += z * (y0 + y) / 2, d3_geo_centroidZ1 += z, d3_geo_centroidX2 += (z = y0 * x - x0 * y) * (x0 + x), d3_geo_centroidY2 += z * (y0 + y), d3_geo_centroidZ2 += 3 * z, d3_geo_pathCentroidPoint(x0 = x, y0 = y)
                    }
                    d3_geo_pathCentroid.point = function(x, y) {
                        d3_geo_pathCentroid.point = nextPoint, d3_geo_pathCentroidPoint(x00 = x0 = x, y00 = y0 = y)
                    }, d3_geo_pathCentroid.lineEnd = function() {
                        nextPoint(x00, y00)
                    }
                }

                function d3_geo_pathContext(context) {
                    var pointRadius = 4.5,
                        stream = {
                            point: point,
                            lineStart: function() {
                                stream.point = pointLineStart
                            },
                            lineEnd: lineEnd,
                            polygonStart: function() {
                                stream.lineEnd = lineEndPolygon
                            },
                            polygonEnd: function() {
                                stream.lineEnd = lineEnd, stream.point = point
                            },
                            pointRadius: function(_) {
                                return pointRadius = _, stream
                            },
                            result: d3_noop
                        };

                    function point(x, y) {
                        context.moveTo(x + pointRadius, y), context.arc(x, y, pointRadius, 0, Ï)
                    }

                    function pointLineStart(x, y) {
                        context.moveTo(x, y), stream.point = pointLine
                    }

                    function pointLine(x, y) {
                        context.lineTo(x, y)
                    }

                    function lineEnd() {
                        stream.point = point
                    }

                    function lineEndPolygon() {
                        context.closePath()
                    }
                    return stream
                }

                function d3_geo_resample(project) {
                    var Î´2 = .5,
                        cosMinDistance = Math.cos(30 * d3_radians),
                        maxDepth = 16;

                    function resample(stream) {
                        return (maxDepth ? function(stream) {
                            var Î»00, x00, y00, a00, b00, c00, Î»0, x0, y0, a0, b0, c0, resample = {
                                point: point,
                                lineStart: lineStart,
                                lineEnd: lineEnd,
                                polygonStart: function() {
                                    stream.polygonStart(), resample.lineStart = ringStart
                                },
                                polygonEnd: function() {
                                    stream.polygonEnd(), resample.lineStart = lineStart
                                }
                            };

                            function point(x, y) {
                                x = project(x, y), stream.point(x[0], x[1])
                            }

                            function lineStart() {
                                x0 = NaN, resample.point = linePoint, stream.lineStart()
                            }

                            function linePoint(Î», Ï) {
                                var c = d3_geo_cartesian([Î», Ï]),
                                    p = project(Î», Ï);
                                resampleLineTo(x0, y0, Î»0, a0, b0, c0, x0 = p[0], y0 = p[1], Î»0 = Î», a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream), stream.point(x0, y0)
                            }

                            function lineEnd() {
                                resample.point = point, stream.lineEnd()
                            }

                            function ringStart() {
                                lineStart(), resample.point = ringPoint, resample.lineEnd = ringEnd
                            }

                            function ringPoint(Î», Ï) {
                                linePoint(Î»00 = Î», Ï), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0, resample.point = linePoint
                            }

                            function ringEnd() {
                                resampleLineTo(x0, y0, Î»0, a0, b0, c0, x00, y00, Î»00, a00, b00, c00, maxDepth, stream), resample.lineEnd = lineEnd, lineEnd()
                            }
                            return resample
                        } : function(stream) {
                            return d3_geo_transformPoint(stream, function(x, y) {
                                x = project(x, y), stream.point(x[0], x[1])
                            })
                        })(stream)
                    }

                    function resampleLineTo(x0, y0, Î»0, a0, b0, c0, x1, y1, Î»1, a1, b1, c1, depth, stream) {
                        var dx = x1 - x0,
                            dy = y1 - y0,
                            d2 = dx * dx + dy * dy;
                        if (d2 > 4 * Î´2 && depth--) {
                            var a = a0 + a1,
                                b = b0 + b1,
                                c = c0 + c1,
                                m = Math.sqrt(a * a + b * b + c * c),
                                Ï2 = Math.asin(c /= m),
                                Î»2 = abs(abs(c) - 1) < Îµ || abs(Î»0 - Î»1) < Îµ ? (Î»0 + Î»1) / 2 : Math.atan2(b, a),
                                p = project(Î»2, Ï2),
                                x2 = p[0],
                                y2 = p[1],
                                dx2 = x2 - x0,
                                dy2 = y2 - y0,
                                dz = dy * dx2 - dx * dy2;
                            (dz * dz / d2 > Î´2 || abs((dx * dx2 + dy * dy2) / d2 - .5) > .3 || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) && (resampleLineTo(x0, y0, Î»0, a0, b0, c0, x2, y2, Î»2, a /= m, b /= m, c, depth, stream), stream.point(x2, y2), resampleLineTo(x2, y2, Î»2, a, b, c, x1, y1, Î»1, a1, b1, c1, depth, stream))
                        }
                    }
                    return resample.precision = function(_) {
                        return arguments.length ? (maxDepth = (Î´2 = _ * _) > 0 && 16, resample) : Math.sqrt(Î´2)
                    }, resample
                }

                function d3_geo_transform(stream) {
                    this.stream = stream
                }

                function d3_geo_transformPoint(stream, point) {
                    return {
                        point: point,
                        sphere: function() {
                            stream.sphere()
                        },
                        lineStart: function() {
                            stream.lineStart()
                        },
                        lineEnd: function() {
                            stream.lineEnd()
                        },
                        polygonStart: function() {
                            stream.polygonStart()
                        },
                        polygonEnd: function() {
                            stream.polygonEnd()
                        }
                    }
                }

                function d3_geo_projection(project) {
                    return d3_geo_projectionMutator(function() {
                        return project
                    })()
                }

                function d3_geo_projectionMutator(projectAt) {
                    var project, rotate, projectRotate, Î´x, Î´y, stream, projectResample = d3_geo_resample(function(x, y) {
                            return [(x = project(x, y))[0] * k + Î´x, Î´y - x[1] * k]
                        }),
                        k = 150,
                        x = 480,
                        y = 250,
                        Î» = 0,
                        Ï = 0,
                        Î´Î» = 0,
                        Î´Ï = 0,
                        Î´Î³ = 0,
                        preclip = d3_geo_clipAntimeridian,
                        postclip = d3_identity,
                        clipAngle = null,
                        clipExtent = null;

                    function projection(point) {
                        return [(point = projectRotate(point[0] * d3_radians, point[1] * d3_radians))[0] * k + Î´x, Î´y - point[1] * k]
                    }

                    function invert(point) {
                        return (point = projectRotate.invert((point[0] - Î´x) / k, (Î´y - point[1]) / k)) && [point[0] * d3_degrees, point[1] * d3_degrees]
                    }

                    function reset() {
                        projectRotate = d3_geo_compose(rotate = d3_geo_rotation(Î´Î», Î´Ï, Î´Î³), project);
                        var center = project(Î», Ï);
                        return Î´x = x - center[0] * k, Î´y = y + center[1] * k, invalidate()
                    }

                    function invalidate() {
                        return stream && (stream.valid = !1, stream = null), projection
                    }
                    return projection.stream = function(output) {
                            return stream && (stream.valid = !1), (stream = d3_geo_projectionRadians(preclip(rotate, projectResample(postclip(output))))).valid = !0, stream
                        }, projection.clipAngle = function(_) {
                            return arguments.length ? (preclip = null == _ ? (clipAngle = _, d3_geo_clipAntimeridian) : function(radius) {
                                var cr = Math.cos(radius),
                                    smallRadius = cr > 0,
                                    notHemisphere = abs(cr) > Îµ;
                                return d3_geo_clip(visible, function(listener) {
                                    var point0, c0, v0, v00, clean;
                                    return {
                                        lineStart: function() {
                                            v00 = v0 = !1, clean = 1
                                        },
                                        point: function(Î», Ï) {
                                            var point2, point1 = [Î», Ï],
                                                v = visible(Î», Ï),
                                                c = smallRadius ? v ? 0 : code(Î», Ï) : v ? code(Î» + (Î» < 0 ? Ï : -Ï), Ï) : 0;
                                            if (!point0 && (v00 = v0 = v) && listener.lineStart(), v !== v0 && (point2 = intersect(point0, point1), (d3_geo_sphericalEqual(point0, point2) || d3_geo_sphericalEqual(point1, point2)) && (point1[0] += Îµ, point1[1] += Îµ, v = visible(point1[0], point1[1]))), v !== v0) clean = 0, v ? (listener.lineStart(), point2 = intersect(point1, point0), listener.point(point2[0], point2[1])) : (point2 = intersect(point0, point1), listener.point(point2[0], point2[1]), listener.lineEnd()), point0 = point2;
                                            else if (notHemisphere && point0 && smallRadius ^ v) {
                                                var t;
                                                c & c0 || !(t = intersect(point1, point0, !0)) || (clean = 0, smallRadius ? (listener.lineStart(), listener.point(t[0][0], t[0][1]), listener.point(t[1][0], t[1][1]), listener.lineEnd()) : (listener.point(t[1][0], t[1][1]), listener.lineEnd(), listener.lineStart(), listener.point(t[0][0], t[0][1])))
                                            }!v || point0 && d3_geo_sphericalEqual(point0, point1) || listener.point(point1[0], point1[1]), point0 = point1, v0 = v, c0 = c
                                        },
                                        lineEnd: function() {
                                            v0 && listener.lineEnd(), point0 = null
                                        },
                                        clean: function() {
                                            return clean | (v00 && v0) << 1
                                        }
                                    }
                                }, d3_geo_circleInterpolate(radius, 6 * d3_radians), smallRadius ? [0, -radius] : [-Ï, radius - Ï]);

                                function visible(Î», Ï) {
                                    return Math.cos(Î») * Math.cos(Ï) > cr
                                }

                                function intersect(a, b, two) {
                                    var n1 = [1, 0, 0],
                                        n2 = d3_geo_cartesianCross(d3_geo_cartesian(a), d3_geo_cartesian(b)),
                                        n2n2 = d3_geo_cartesianDot(n2, n2),
                                        n1n2 = n2[0],
                                        determinant = n2n2 - n1n2 * n1n2;
                                    if (!determinant) return !two && a;
                                    var c1 = cr * n2n2 / determinant,
                                        c2 = -cr * n1n2 / determinant,
                                        n1xn2 = d3_geo_cartesianCross(n1, n2),
                                        A = d3_geo_cartesianScale(n1, c1);
                                    d3_geo_cartesianAdd(A, d3_geo_cartesianScale(n2, c2));
                                    var u = n1xn2,
                                        w = d3_geo_cartesianDot(A, u),
                                        uu = d3_geo_cartesianDot(u, u),
                                        t2 = w * w - uu * (d3_geo_cartesianDot(A, A) - 1);
                                    if (!(t2 < 0)) {
                                        var t = Math.sqrt(t2),
                                            q = d3_geo_cartesianScale(u, (-w - t) / uu);
                                        if (d3_geo_cartesianAdd(q, A), q = d3_geo_spherical(q), !two) return q;
                                        var z, Î»0 = a[0],
                                            Î»1 = b[0],
                                            Ï0 = a[1],
                                            Ï1 = b[1];
                                        Î»1 < Î»0 && (z = Î»0, Î»0 = Î»1, Î»1 = z);
                                        var Î´Î» = Î»1 - Î»0,
                                            polar = abs(Î´Î» - Ï) < Îµ;
                                        if (!polar && Ï1 < Ï0 && (z = Ï0, Ï0 = Ï1, Ï1 = z), polar || Î´Î» < Îµ ? polar ? Ï0 + Ï1 > 0 ^ q[1] < (abs(q[0] - Î»0) < Îµ ? Ï0 : Ï1) : Ï0 <= q[1] && q[1] <= Ï1 : Î´Î» > Ï ^ (Î»0 <= q[0] && q[0] <= Î»1)) {
                                            var q1 = d3_geo_cartesianScale(u, (-w + t) / uu);
                                            return d3_geo_cartesianAdd(q1, A), [q, d3_geo_spherical(q1)]
                                        }
                                    }
                                }

                                function code(Î», Ï) {
                                    var r = smallRadius ? radius : Ï - radius,
                                        code = 0;
                                    return Î» < -r ? code |= 1 : Î» > r && (code |= 2), Ï < -r ? code |= 4 : Ï > r && (code |= 8), code
                                }
                            }((clipAngle = +_) * d3_radians), invalidate()) : clipAngle
                        }, projection.clipExtent = function(_) {
                            return arguments.length ? (clipExtent = _, postclip = _ ? d3_geo_clipExtent(_[0][0], _[0][1], _[1][0], _[1][1]) : d3_identity, invalidate()) : clipExtent
                        }, projection.scale = function(_) {
                            return arguments.length ? (k = +_, reset()) : k
                        }, projection.translate = function(_) {
                            return arguments.length ? (x = +_[0], y = +_[1], reset()) : [x, y]
                        }, projection.center = function(_) {
                            return arguments.length ? (Î» = _[0] % 360 * d3_radians, Ï = _[1] % 360 * d3_radians, reset()) : [Î» * d3_degrees, Ï * d3_degrees]
                        }, projection.rotate = function(_) {
                            return arguments.length ? (Î´Î» = _[0] % 360 * d3_radians, Î´Ï = _[1] % 360 * d3_radians, Î´Î³ = _.length > 2 ? _[2] % 360 * d3_radians : 0, reset()) : [Î´Î» * d3_degrees, Î´Ï * d3_degrees, Î´Î³ * d3_degrees]
                        }, d3.rebind(projection, projectResample, "precision"),
                        function() {
                            return project = projectAt.apply(this, arguments), projection.invert = project.invert && invert, reset()
                        }
                }

                function d3_geo_projectionRadians(stream) {
                    return d3_geo_transformPoint(stream, function(x, y) {
                        stream.point(x * d3_radians, y * d3_radians)
                    })
                }

                function d3_geo_equirectangular(Î», Ï) {
                    return [Î», Ï]
                }

                function d3_geo_identityRotation(Î», Ï) {
                    return [Î» > Ï ? Î» - Ï : Î» < -Ï ? Î» + Ï : Î», Ï]
                }

                function d3_geo_rotation(Î´Î», Î´Ï, Î´Î³) {
                    return Î´Î» ? Î´Ï || Î´Î³ ? d3_geo_compose(d3_geo_rotationÎ»(Î´Î»), d3_geo_rotationÏÎ³(Î´Ï, Î´Î³)) : d3_geo_rotationÎ»(Î´Î») : Î´Ï || Î´Î³ ? d3_geo_rotationÏÎ³(Î´Ï, Î´Î³) : d3_geo_identityRotation
                }

                function d3_geo_forwardRotationÎ»(Î´Î») {
                    return function(Î», Ï) {
                        return [(Î» += Î´Î») > Ï ? Î» - Ï : Î» < -Ï ? Î» + Ï : Î», Ï]
                    }
                }

                function d3_geo_rotationÎ»(Î´Î») {
                    var rotation = d3_geo_forwardRotationÎ»(Î´Î»);
                    return rotation.invert = d3_geo_forwardRotationÎ»(-Î´Î»), rotation
                }

                function d3_geo_rotationÏÎ³(Î´Ï, Î´Î³) {
                    var cosÎ´Ï = Math.cos(Î´Ï),
                        sinÎ´Ï = Math.sin(Î´Ï),
                        cosÎ´Î³ = Math.cos(Î´Î³),
                        sinÎ´Î³ = Math.sin(Î´Î³);

                    function rotation(Î», Ï) {
                        var cosÏ = Math.cos(Ï),
                            x = Math.cos(Î») * cosÏ,
                            y = Math.sin(Î») * cosÏ,
                            z = Math.sin(Ï),
                            k = z * cosÎ´Ï + x * sinÎ´Ï;
                        return [Math.atan2(y * cosÎ´Î³ - k * sinÎ´Î³, x * cosÎ´Ï - z * sinÎ´Ï), d3_asin(k * cosÎ´Î³ + y * sinÎ´Î³)]
                    }
                    return rotation.invert = function(Î», Ï) {
                        var cosÏ = Math.cos(Ï),
                            x = Math.cos(Î») * cosÏ,
                            y = Math.sin(Î») * cosÏ,
                            z = Math.sin(Ï),
                            k = z * cosÎ´Î³ - y * sinÎ´Î³;
                        return [Math.atan2(y * cosÎ´Î³ + z * sinÎ´Î³, x * cosÎ´Ï + k * sinÎ´Ï), d3_asin(k * cosÎ´Ï - x * sinÎ´Ï)]
                    }, rotation
                }

                function d3_geo_circleInterpolate(radius, precision) {
                    var cr = Math.cos(radius),
                        sr = Math.sin(radius);
                    return function(from, to, direction, listener) {
                        var step = direction * precision;
                        null != from ? (from = d3_geo_circleAngle(cr, from), to = d3_geo_circleAngle(cr, to), (direction > 0 ? from < to : from > to) && (from += direction * Ï)) : (from = radius + direction * Ï, to = radius - .5 * step);
                        for (var point, t = from; direction > 0 ? t > to : t < to; t -= step) listener.point((point = d3_geo_spherical([cr, -sr * Math.cos(t), -sr * Math.sin(t)]))[0], point[1])
                    }
                }

                function d3_geo_circleAngle(cr, point) {
                    var a = d3_geo_cartesian(point);
                    a[0] -= cr, d3_geo_cartesianNormalize(a);
                    var angle = d3_acos(-a[1]);
                    return ((-a[2] < 0 ? -angle : angle) + 2 * Math.PI - Îµ) % (2 * Math.PI)
                }

                function d3_geo_graticuleX(y0, y1, dy) {
                    var y = d3.range(y0, y1 - Îµ, dy).concat(y1);
                    return function(x) {
                        return y.map(function(y) {
                            return [x, y]
                        })
                    }
                }

                function d3_geo_graticuleY(x0, x1, dx) {
                    var x = d3.range(x0, x1 - Îµ, dx).concat(x1);
                    return function(y) {
                        return x.map(function(x) {
                            return [x, y]
                        })
                    }
                }

                function d3_source(d) {
                    return d.source
                }

                function d3_target(d) {
                    return d.target
                }
                d3.geo.path = function() {
                    var projection, context, projectStream, contextStream, cacheStream, pointRadius = 4.5;

                    function path(object) {
                        return object && ("function" == typeof pointRadius && contextStream.pointRadius(+pointRadius.apply(this, arguments)), cacheStream && cacheStream.valid || (cacheStream = projectStream(contextStream)), d3.geo.stream(object, cacheStream)), contextStream.result()
                    }

                    function reset() {
                        return cacheStream = null, path
                    }
                    return path.area = function(object) {
                        return d3_geo_pathAreaSum = 0, d3.geo.stream(object, projectStream(d3_geo_pathArea)), d3_geo_pathAreaSum
                    }, path.centroid = function(object) {
                        return d3_geo_centroidX0 = d3_geo_centroidY0 = d3_geo_centroidZ0 = d3_geo_centroidX1 = d3_geo_centroidY1 = d3_geo_centroidZ1 = d3_geo_centroidX2 = d3_geo_centroidY2 = d3_geo_centroidZ2 = 0, d3.geo.stream(object, projectStream(d3_geo_pathCentroid)), d3_geo_centroidZ2 ? [d3_geo_centroidX2 / d3_geo_centroidZ2, d3_geo_centroidY2 / d3_geo_centroidZ2] : d3_geo_centroidZ1 ? [d3_geo_centroidX1 / d3_geo_centroidZ1, d3_geo_centroidY1 / d3_geo_centroidZ1] : d3_geo_centroidZ0 ? [d3_geo_centroidX0 / d3_geo_centroidZ0, d3_geo_centroidY0 / d3_geo_centroidZ0] : [NaN, NaN]
                    }, path.bounds = function(object) {
                        return d3_geo_pathBoundsX1 = d3_geo_pathBoundsY1 = -(d3_geo_pathBoundsX0 = d3_geo_pathBoundsY0 = 1 / 0), d3.geo.stream(object, projectStream(d3_geo_pathBounds)), [
                            [d3_geo_pathBoundsX0, d3_geo_pathBoundsY0],
                            [d3_geo_pathBoundsX1, d3_geo_pathBoundsY1]
                        ]
                    }, path.projection = function(_) {
                        return arguments.length ? (projectStream = (projection = _) ? _.stream || (project = _, resample = d3_geo_resample(function(x, y) {
                            return project([x * d3_degrees, y * d3_degrees])
                        }), function(stream) {
                            return d3_geo_projectionRadians(resample(stream))
                        }) : d3_identity, reset()) : projection;
                        var project, resample
                    }, path.context = function(_) {
                        return arguments.length ? (contextStream = null == (context = _) ? new d3_geo_pathBuffer : new d3_geo_pathContext(_), "function" != typeof pointRadius && contextStream.pointRadius(pointRadius), reset()) : context
                    }, path.pointRadius = function(_) {
                        return arguments.length ? (pointRadius = "function" == typeof _ ? _ : (contextStream.pointRadius(+_), +_), path) : pointRadius
                    }, path.projection(d3.geo.albersUsa()).context(null)
                }, d3.geo.transform = function(methods) {
                    return {
                        stream: function(stream) {
                            var transform = new d3_geo_transform(stream);
                            for (var k in methods) transform[k] = methods[k];
                            return transform
                        }
                    }
                }, d3_geo_transform.prototype = {
                    point: function(x, y) {
                        this.stream.point(x, y)
                    },
                    sphere: function() {
                        this.stream.sphere()
                    },
                    lineStart: function() {
                        this.stream.lineStart()
                    },
                    lineEnd: function() {
                        this.stream.lineEnd()
                    },
                    polygonStart: function() {
                        this.stream.polygonStart()
                    },
                    polygonEnd: function() {
                        this.stream.polygonEnd()
                    }
                }, d3.geo.projection = d3_geo_projection, d3.geo.projectionMutator = d3_geo_projectionMutator, (d3.geo.equirectangular = function() {
                    return d3_geo_projection(d3_geo_equirectangular)
                }).raw = d3_geo_equirectangular.invert = d3_geo_equirectangular, d3.geo.rotation = function(rotate) {
                    function forward(coordinates) {
                        return (coordinates = rotate(coordinates[0] * d3_radians, coordinates[1] * d3_radians))[0] *= d3_degrees, coordinates[1] *= d3_degrees, coordinates
                    }
                    return rotate = d3_geo_rotation(rotate[0] % 360 * d3_radians, rotate[1] * d3_radians, rotate.length > 2 ? rotate[2] * d3_radians : 0), forward.invert = function(coordinates) {
                        return (coordinates = rotate.invert(coordinates[0] * d3_radians, coordinates[1] * d3_radians))[0] *= d3_degrees, coordinates[1] *= d3_degrees, coordinates
                    }, forward
                }, d3_geo_identityRotation.invert = d3_geo_equirectangular, d3.geo.circle = function() {
                    var angle, interpolate, origin = [0, 0],
                        precision = 6;

                    function circle() {
                        var center = "function" == typeof origin ? origin.apply(this, arguments) : origin,
                            rotate = d3_geo_rotation(-center[0] * d3_radians, -center[1] * d3_radians, 0).invert,
                            ring = [];
                        return interpolate(null, null, 1, {
                            point: function(x, y) {
                                ring.push(x = rotate(x, y)), x[0] *= d3_degrees, x[1] *= d3_degrees
                            }
                        }), {
                            type: "Polygon",
                            coordinates: [ring]
                        }
                    }
                    return circle.origin = function(x) {
                        return arguments.length ? (origin = x, circle) : origin
                    }, circle.angle = function(x) {
                        return arguments.length ? (interpolate = d3_geo_circleInterpolate((angle = +x) * d3_radians, precision * d3_radians), circle) : angle
                    }, circle.precision = function(_) {
                        return arguments.length ? (interpolate = d3_geo_circleInterpolate(angle * d3_radians, (precision = +_) * d3_radians), circle) : precision
                    }, circle.angle(90)
                }, d3.geo.distance = function(a, b) {
                    var t, ÎÎ» = (b[0] - a[0]) * d3_radians,
                        Ï0 = a[1] * d3_radians,
                        Ï1 = b[1] * d3_radians,
                        sinÎÎ» = Math.sin(ÎÎ»),
                        cosÎÎ» = Math.cos(ÎÎ»),
                        sinÏ0 = Math.sin(Ï0),
                        cosÏ0 = Math.cos(Ï0),
                        sinÏ1 = Math.sin(Ï1),
                        cosÏ1 = Math.cos(Ï1);
                    return Math.atan2(Math.sqrt((t = cosÏ1 * sinÎÎ») * t + (t = cosÏ0 * sinÏ1 - sinÏ0 * cosÏ1 * cosÎÎ») * t), sinÏ0 * sinÏ1 + cosÏ0 * cosÏ1 * cosÎÎ»)
                }, d3.geo.graticule = function() {
                    var x1, x0, X1, X0, y1, y0, Y1, Y0, x, y, X, Y, dx = 10,
                        dy = dx,
                        DX = 90,
                        DY = 360,
                        precision = 2.5;

                    function graticule() {
                        return {
                            type: "MultiLineString",
                            coordinates: lines()
                        }
                    }

                    function lines() {
                        return d3.range(Math.ceil(X0 / DX) * DX, X1, DX).map(X).concat(d3.range(Math.ceil(Y0 / DY) * DY, Y1, DY).map(Y)).concat(d3.range(Math.ceil(x0 / dx) * dx, x1, dx).filter(function(x) {
                            return abs(x % DX) > Îµ
                        }).map(x)).concat(d3.range(Math.ceil(y0 / dy) * dy, y1, dy).filter(function(y) {
                            return abs(y % DY) > Îµ
                        }).map(y))
                    }
                    return graticule.lines = function() {
                        return lines().map(function(coordinates) {
                            return {
                                type: "LineString",
                                coordinates: coordinates
                            }
                        })
                    }, graticule.outline = function() {
                        return {
                            type: "Polygon",
                            coordinates: [X(X0).concat(Y(Y1).slice(1), X(X1).reverse().slice(1), Y(Y0).reverse().slice(1))]
                        }
                    }, graticule.extent = function(_) {
                        return arguments.length ? graticule.majorExtent(_).minorExtent(_) : graticule.minorExtent()
                    }, graticule.majorExtent = function(_) {
                        return arguments.length ? (X0 = +_[0][0], X1 = +_[1][0], Y0 = +_[0][1], Y1 = +_[1][1], X0 > X1 && (_ = X0, X0 = X1, X1 = _), Y0 > Y1 && (_ = Y0, Y0 = Y1, Y1 = _), graticule.precision(precision)) : [
                            [X0, Y0],
                            [X1, Y1]
                        ]
                    }, graticule.minorExtent = function(_) {
                        return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], x0 > x1 && (_ = x0, x0 = x1, x1 = _), y0 > y1 && (_ = y0, y0 = y1, y1 = _), graticule.precision(precision)) : [
                            [x0, y0],
                            [x1, y1]
                        ]
                    }, graticule.step = function(_) {
                        return arguments.length ? graticule.majorStep(_).minorStep(_) : graticule.minorStep()
                    }, graticule.majorStep = function(_) {
                        return arguments.length ? (DX = +_[0], DY = +_[1], graticule) : [DX, DY]
                    }, graticule.minorStep = function(_) {
                        return arguments.length ? (dx = +_[0], dy = +_[1], graticule) : [dx, dy]
                    }, graticule.precision = function(_) {
                        return arguments.length ? (precision = +_, x = d3_geo_graticuleX(y0, y1, 90), y = d3_geo_graticuleY(x0, x1, precision), X = d3_geo_graticuleX(Y0, Y1, 90), Y = d3_geo_graticuleY(X0, X1, precision), graticule) : precision
                    }, graticule.majorExtent([
                        [-180, -90 + Îµ],
                        [180, 90 - Îµ]
                    ]).minorExtent([
                        [-180, -80 - Îµ],
                        [180, 80 + Îµ]
                    ])
                }, d3.geo.greatArc = function() {
                    var source_, target_, source = d3_source,
                        target = d3_target;

                    function greatArc() {
                        return {
                            type: "LineString",
                            coordinates: [source_ || source.apply(this, arguments), target_ || target.apply(this, arguments)]
                        }
                    }
                    return greatArc.distance = function() {
                        return d3.geo.distance(source_ || source.apply(this, arguments), target_ || target.apply(this, arguments))
                    }, greatArc.source = function(_) {
                        return arguments.length ? (source = _, source_ = "function" == typeof _ ? null : _, greatArc) : source
                    }, greatArc.target = function(_) {
                        return arguments.length ? (target = _, target_ = "function" == typeof _ ? null : _, greatArc) : target
                    }, greatArc.precision = function() {
                        return arguments.length ? greatArc : 0
                    }, greatArc
                }, d3.geo.interpolate = function(source, target) {
                    return x0 = source[0] * d3_radians, y0 = source[1] * d3_radians, x1 = target[0] * d3_radians, y1 = target[1] * d3_radians, cy0 = Math.cos(y0), sy0 = Math.sin(y0), cy1 = Math.cos(y1), sy1 = Math.sin(y1), kx0 = cy0 * Math.cos(x0), ky0 = cy0 * Math.sin(x0), kx1 = cy1 * Math.cos(x1), ky1 = cy1 * Math.sin(x1), d = 2 * Math.asin(Math.sqrt(d3_haversin(y1 - y0) + cy0 * cy1 * d3_haversin(x1 - x0))), k = 1 / Math.sin(d), (interpolate = d ? function(t) {
                        var B = Math.sin(t *= d) * k,
                            A = Math.sin(d - t) * k,
                            x = A * kx0 + B * kx1,
                            y = A * ky0 + B * ky1,
                            z = A * sy0 + B * sy1;
                        return [Math.atan2(y, x) * d3_degrees, Math.atan2(z, Math.sqrt(x * x + y * y)) * d3_degrees]
                    } : function() {
                        return [x0 * d3_degrees, y0 * d3_degrees]
                    }).distance = d, interpolate;
                    var x0, y0, x1, y1, cy0, sy0, cy1, sy1, kx0, ky0, kx1, ky1, d, k, interpolate
                }, d3.geo.length = function(object) {
                    return d3_geo_lengthSum = 0, d3.geo.stream(object, d3_geo_length), d3_geo_lengthSum
                };
                var d3_geo_length = {
                    sphere: d3_noop,
                    point: d3_noop,
                    lineStart: function() {
                        var Î»0, sinÏ0, cosÏ0;

                        function nextPoint(Î», Ï) {
                            var sinÏ = Math.sin(Ï *= d3_radians),
                                cosÏ = Math.cos(Ï),
                                t = abs((Î» *= d3_radians) - Î»0),
                                cosÎÎ» = Math.cos(t);
                            d3_geo_lengthSum += Math.atan2(Math.sqrt((t = cosÏ * Math.sin(t)) * t + (t = cosÏ0 * sinÏ - sinÏ0 * cosÏ * cosÎÎ») * t), sinÏ0 * sinÏ + cosÏ0 * cosÏ * cosÎÎ»), Î»0 = Î», sinÏ0 = sinÏ, cosÏ0 = cosÏ
                        }
                        d3_geo_length.point = function(Î», Ï) {
                            Î»0 = Î» * d3_radians, sinÏ0 = Math.sin(Ï *= d3_radians), cosÏ0 = Math.cos(Ï), d3_geo_length.point = nextPoint
                        }, d3_geo_length.lineEnd = function() {
                            d3_geo_length.point = d3_geo_length.lineEnd = d3_noop
                        }
                    },
                    lineEnd: d3_noop,
                    polygonStart: d3_noop,
                    polygonEnd: d3_noop
                };

                function d3_geo_azimuthal(scale, angle) {
                    function azimuthal(Î», Ï) {
                        var cosÎ» = Math.cos(Î»),
                            cosÏ = Math.cos(Ï),
                            k = scale(cosÎ» * cosÏ);
                        return [k * cosÏ * Math.sin(Î»), k * Math.sin(Ï)]
                    }
                    return azimuthal.invert = function(x, y) {
                        var Ï = Math.sqrt(x * x + y * y),
                            c = angle(Ï),
                            sinc = Math.sin(c),
                            cosc = Math.cos(c);
                        return [Math.atan2(x * sinc, Ï * cosc), Math.asin(Ï && y * sinc / Ï)]
                    }, azimuthal
                }
                var d3_geo_azimuthalEqualArea = d3_geo_azimuthal(function(cosÎ»cosÏ) {
                    return Math.sqrt(2 / (1 + cosÎ»cosÏ))
                }, function(Ï) {
                    return 2 * Math.asin(Ï / 2)
                });
                (d3.geo.azimuthalEqualArea = function() {
                    return d3_geo_projection(d3_geo_azimuthalEqualArea)
                }).raw = d3_geo_azimuthalEqualArea;
                var d3_geo_azimuthalEquidistant = d3_geo_azimuthal(function(cosÎ»cosÏ) {
                    var c = Math.acos(cosÎ»cosÏ);
                    return c && c / Math.sin(c)
                }, d3_identity);

                function d3_geo_conicConformal(Ï0, Ï1) {
                    var cosÏ0 = Math.cos(Ï0),
                        t = function(Ï) {
                            return Math.tan(Ï / 4 + Ï / 2)
                        },
                        n = Ï0 === Ï1 ? Math.sin(Ï0) : Math.log(cosÏ0 / Math.cos(Ï1)) / Math.log(t(Ï1) / t(Ï0)),
                        F = cosÏ0 * Math.pow(t(Ï0), n) / n;
                    if (!n) return d3_geo_mercator;

                    function forward(Î», Ï) {
                        F > 0 ? Ï < -halfÏ + Îµ && (Ï = -halfÏ + Îµ) : Ï > halfÏ - Îµ && (Ï = halfÏ - Îµ);
                        var Ï = F / Math.pow(t(Ï), n);
                        return [Ï * Math.sin(n * Î»), F - Ï * Math.cos(n * Î»)]
                    }
                    return forward.invert = function(x, y) {
                        var Ï0_y = F - y,
                            Ï = d3_sgn(n) * Math.sqrt(x * x + Ï0_y * Ï0_y);
                        return [Math.atan2(x, Ï0_y) / n, 2 * Math.atan(Math.pow(F / Ï, 1 / n)) - halfÏ]
                    }, forward
                }

                function d3_geo_conicEquidistant(Ï0, Ï1) {
                    var cosÏ0 = Math.cos(Ï0),
                        n = Ï0 === Ï1 ? Math.sin(Ï0) : (cosÏ0 - Math.cos(Ï1)) / (Ï1 - Ï0),
                        G = cosÏ0 / n + Ï0;
                    if (abs(n) < Îµ) return d3_geo_equirectangular;

                    function forward(Î», Ï) {
                        var Ï = G - Ï;
                        return [Ï * Math.sin(n * Î»), G - Ï * Math.cos(n * Î»)]
                    }
                    return forward.invert = function(x, y) {
                        var Ï0_y = G - y;
                        return [Math.atan2(x, Ï0_y) / n, G - d3_sgn(n) * Math.sqrt(x * x + Ï0_y * Ï0_y)]
                    }, forward
                }(d3.geo.azimuthalEquidistant = function() {
                    return d3_geo_projection(d3_geo_azimuthalEquidistant)
                }).raw = d3_geo_azimuthalEquidistant, (d3.geo.conicConformal = function() {
                    return d3_geo_conic(d3_geo_conicConformal)
                }).raw = d3_geo_conicConformal, (d3.geo.conicEquidistant = function() {
                    return d3_geo_conic(d3_geo_conicEquidistant)
                }).raw = d3_geo_conicEquidistant;
                var d3_geo_gnomonic = d3_geo_azimuthal(function(cosÎ»cosÏ) {
                    return 1 / cosÎ»cosÏ
                }, Math.atan);

                function d3_geo_mercator(Î», Ï) {
                    return [Î», Math.log(Math.tan(Ï / 4 + Ï / 2))]
                }

                function d3_geo_mercatorProjection(project) {
                    var clipAuto, m = d3_geo_projection(project),
                        scale = m.scale,
                        translate = m.translate,
                        clipExtent = m.clipExtent;
                    return m.scale = function() {
                        var v = scale.apply(m, arguments);
                        return v === m ? clipAuto ? m.clipExtent(null) : m : v
                    }, m.translate = function() {
                        var v = translate.apply(m, arguments);
                        return v === m ? clipAuto ? m.clipExtent(null) : m : v
                    }, m.clipExtent = function(_) {
                        var v = clipExtent.apply(m, arguments);
                        if (v === m) {
                            if (clipAuto = null == _) {
                                var k = Ï * scale(),
                                    t = translate();
                                clipExtent([
                                    [t[0] - k, t[1] - k],
                                    [t[0] + k, t[1] + k]
                                ])
                            }
                        } else clipAuto && (v = null);
                        return v
                    }, m.clipExtent(null)
                }(d3.geo.gnomonic = function() {
                    return d3_geo_projection(d3_geo_gnomonic)
                }).raw = d3_geo_gnomonic, d3_geo_mercator.invert = function(x, y) {
                    return [x, 2 * Math.atan(Math.exp(y)) - halfÏ]
                }, (d3.geo.mercator = function() {
                    return d3_geo_mercatorProjection(d3_geo_mercator)
                }).raw = d3_geo_mercator;
                var d3_geo_orthographic = d3_geo_azimuthal(function() {
                    return 1
                }, Math.asin);
                (d3.geo.orthographic = function() {
                    return d3_geo_projection(d3_geo_orthographic)
                }).raw = d3_geo_orthographic;
                var d3_geo_stereographic = d3_geo_azimuthal(function(cosÎ»cosÏ) {
                    return 1 / (1 + cosÎ»cosÏ)
                }, function(Ï) {
                    return 2 * Math.atan(Ï)
                });

                function d3_geo_transverseMercator(Î», Ï) {
                    return [Math.log(Math.tan(Ï / 4 + Ï / 2)), -Î»]
                }

                function d3_geom_pointX(d) {
                    return d[0]
                }

                function d3_geom_pointY(d) {
                    return d[1]
                }

                function d3_geom_hullUpper(points) {
                    for (var n = points.length, hull = [0, 1], hs = 2, i = 2; i < n; i++) {
                        for (; hs > 1 && d3_cross2d(points[hull[hs - 2]], points[hull[hs - 1]], points[i]) <= 0;) --hs;
                        hull[hs++] = i
                    }
                    return hull.slice(0, hs)
                }

                function d3_geom_hullOrder(a, b) {
                    return a[0] - b[0] || a[1] - b[1]
                }(d3.geo.stereographic = function() {
                    return d3_geo_projection(d3_geo_stereographic)
                }).raw = d3_geo_stereographic, d3_geo_transverseMercator.invert = function(x, y) {
                    return [-y, 2 * Math.atan(Math.exp(x)) - halfÏ]
                }, (d3.geo.transverseMercator = function() {
                    var projection = d3_geo_mercatorProjection(d3_geo_transverseMercator),
                        center = projection.center,
                        rotate = projection.rotate;
                    return projection.center = function(_) {
                        return _ ? center([-_[1], _[0]]) : [(_ = center())[1], -_[0]]
                    }, projection.rotate = function(_) {
                        return _ ? rotate([_[0], _[1], _.length > 2 ? _[2] + 90 : 90]) : [(_ = rotate())[0], _[1], _[2] - 90]
                    }, rotate([0, 0, 90])
                }).raw = d3_geo_transverseMercator, d3.geom = {}, d3.geom.hull = function(vertices) {
                    var x = d3_geom_pointX,
                        y = d3_geom_pointY;
                    if (arguments.length) return hull(vertices);

                    function hull(data) {
                        if (data.length < 3) return [];
                        var i, fx = d3_functor(x),
                            fy = d3_functor(y),
                            n = data.length,
                            points = [],
                            flippedPoints = [];
                        for (i = 0; i < n; i++) points.push([+fx.call(this, data[i], i), +fy.call(this, data[i], i), i]);
                        for (points.sort(d3_geom_hullOrder), i = 0; i < n; i++) flippedPoints.push([points[i][0], -points[i][1]]);
                        var upper = d3_geom_hullUpper(points),
                            lower = d3_geom_hullUpper(flippedPoints),
                            skipLeft = lower[0] === upper[0],
                            skipRight = lower[lower.length - 1] === upper[upper.length - 1],
                            polygon = [];
                        for (i = upper.length - 1; i >= 0; --i) polygon.push(data[points[upper[i]][2]]);
                        for (i = +skipLeft; i < lower.length - skipRight; ++i) polygon.push(data[points[lower[i]][2]]);
                        return polygon
                    }
                    return hull.x = function(_) {
                        return arguments.length ? (x = _, hull) : x
                    }, hull.y = function(_) {
                        return arguments.length ? (y = _, hull) : y
                    }, hull
                }, d3.geom.polygon = function(coordinates) {
                    return d3_subclass(coordinates, d3_geom_polygonPrototype), coordinates
                };
                var d3_geom_polygonPrototype = d3.geom.polygon.prototype = [];

                function d3_geom_polygonInside(p, a, b) {
                    return (b[0] - a[0]) * (p[1] - a[1]) < (b[1] - a[1]) * (p[0] - a[0])
                }

                function d3_geom_polygonIntersect(c, d, a, b) {
                    var x1 = c[0],
                        x3 = a[0],
                        x21 = d[0] - x1,
                        x43 = b[0] - x3,
                        y1 = c[1],
                        y3 = a[1],
                        y21 = d[1] - y1,
                        y43 = b[1] - y3,
                        ua = (x43 * (y1 - y3) - y43 * (x1 - x3)) / (y43 * x21 - x43 * y21);
                    return [x1 + ua * x21, y1 + ua * y21]
                }

                function d3_geom_polygonClosed(coordinates) {
                    var a = coordinates[0],
                        b = coordinates[coordinates.length - 1];
                    return !(a[0] - b[0] || a[1] - b[1])
                }
                d3_geom_polygonPrototype.area = function() {
                    for (var a, i = -1, n = this.length, b = this[n - 1], area = 0; ++i < n;) a = b, b = this[i], area += a[1] * b[0] - a[0] * b[1];
                    return .5 * area
                }, d3_geom_polygonPrototype.centroid = function(k) {
                    var a, c, i = -1,
                        n = this.length,
                        x = 0,
                        y = 0,
                        b = this[n - 1];
                    for (arguments.length || (k = -1 / (6 * this.area())); ++i < n;) a = b, b = this[i], c = a[0] * b[1] - b[0] * a[1], x += (a[0] + b[0]) * c, y += (a[1] + b[1]) * c;
                    return [x * k, y * k]
                }, d3_geom_polygonPrototype.clip = function(subject) {
                    for (var input, j, m, b, c, d, closed = d3_geom_polygonClosed(subject), i = -1, n = this.length - d3_geom_polygonClosed(this), a = this[n - 1]; ++i < n;) {
                        for (input = subject.slice(), subject.length = 0, b = this[i], c = input[(m = input.length - closed) - 1], j = -1; ++j < m;) d3_geom_polygonInside(d = input[j], a, b) ? (d3_geom_polygonInside(c, a, b) || subject.push(d3_geom_polygonIntersect(c, d, a, b)), subject.push(d)) : d3_geom_polygonInside(c, a, b) && subject.push(d3_geom_polygonIntersect(c, d, a, b)), c = d;
                        closed && subject.push(subject[0]), a = b
                    }
                    return subject
                };
                var d3_geom_voronoiEdges, d3_geom_voronoiCells, d3_geom_voronoiBeaches, d3_geom_voronoiFirstCircle, d3_geom_voronoiCircles, d3_geom_voronoiBeachPool = [],
                    d3_geom_voronoiCirclePool = [];

                function d3_geom_voronoiBeach() {
                    d3_geom_voronoiRedBlackNode(this), this.edge = this.site = this.circle = null
                }

                function d3_geom_voronoiCreateBeach(site) {
                    var beach = d3_geom_voronoiBeachPool.pop() || new d3_geom_voronoiBeach;
                    return beach.site = site, beach
                }

                function d3_geom_voronoiDetachBeach(beach) {
                    d3_geom_voronoiDetachCircle(beach), d3_geom_voronoiBeaches.remove(beach), d3_geom_voronoiBeachPool.push(beach), d3_geom_voronoiRedBlackNode(beach)
                }

                function d3_geom_voronoiRemoveBeach(beach) {
                    var circle = beach.circle,
                        x = circle.x,
                        y = circle.cy,
                        vertex = {
                            x: x,
                            y: y
                        },
                        previous = beach.P,
                        next = beach.N,
                        disappearing = [beach];
                    d3_geom_voronoiDetachBeach(beach);
                    for (var lArc = previous; lArc.circle && abs(x - lArc.circle.x) < Îµ && abs(y - lArc.circle.cy) < Îµ;) previous = lArc.P, disappearing.unshift(lArc), d3_geom_voronoiDetachBeach(lArc), lArc = previous;
                    disappearing.unshift(lArc), d3_geom_voronoiDetachCircle(lArc);
                    for (var rArc = next; rArc.circle && abs(x - rArc.circle.x) < Îµ && abs(y - rArc.circle.cy) < Îµ;) next = rArc.N, disappearing.push(rArc), d3_geom_voronoiDetachBeach(rArc), rArc = next;
                    disappearing.push(rArc), d3_geom_voronoiDetachCircle(rArc);
                    var iArc, nArcs = disappearing.length;
                    for (iArc = 1; iArc < nArcs; ++iArc) rArc = disappearing[iArc], lArc = disappearing[iArc - 1], d3_geom_voronoiSetEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);
                    lArc = disappearing[0], (rArc = disappearing[nArcs - 1]).edge = d3_geom_voronoiCreateEdge(lArc.site, rArc.site, null, vertex), d3_geom_voronoiAttachCircle(lArc), d3_geom_voronoiAttachCircle(rArc)
                }

                function d3_geom_voronoiAddBeach(site) {
                    for (var lArc, rArc, dxl, dxr, x = site.x, directrix = site.y, node = d3_geom_voronoiBeaches._; node;)
                        if ((dxl = d3_geom_voronoiLeftBreakPoint(node, directrix) - x) > Îµ) node = node.L;
                        else {
                            if (!((dxr = x - d3_geom_voronoiRightBreakPoint(node, directrix)) > Îµ)) {
                                dxl > -Îµ ? (lArc = node.P, rArc = node) : dxr > -Îµ ? (lArc = node, rArc = node.N) : lArc = rArc = node;
                                break
                            }
                            if (!node.R) {
                                lArc = node;
                                break
                            }
                            node = node.R
                        } var newArc = d3_geom_voronoiCreateBeach(site);
                    if (d3_geom_voronoiBeaches.insert(lArc, newArc), lArc || rArc) {
                        if (lArc === rArc) return d3_geom_voronoiDetachCircle(lArc), rArc = d3_geom_voronoiCreateBeach(lArc.site), d3_geom_voronoiBeaches.insert(newArc, rArc), newArc.edge = rArc.edge = d3_geom_voronoiCreateEdge(lArc.site, newArc.site), d3_geom_voronoiAttachCircle(lArc), void d3_geom_voronoiAttachCircle(rArc);
                        if (rArc) {
                            d3_geom_voronoiDetachCircle(lArc), d3_geom_voronoiDetachCircle(rArc);
                            var lSite = lArc.site,
                                ax = lSite.x,
                                ay = lSite.y,
                                bx = site.x - ax,
                                by = site.y - ay,
                                rSite = rArc.site,
                                cx = rSite.x - ax,
                                cy = rSite.y - ay,
                                d = 2 * (bx * cy - by * cx),
                                hb = bx * bx + by * by,
                                hc = cx * cx + cy * cy,
                                vertex = {
                                    x: (cy * hb - by * hc) / d + ax,
                                    y: (bx * hc - cx * hb) / d + ay
                                };
                            d3_geom_voronoiSetEdgeEnd(rArc.edge, lSite, rSite, vertex), newArc.edge = d3_geom_voronoiCreateEdge(lSite, site, null, vertex), rArc.edge = d3_geom_voronoiCreateEdge(site, rSite, null, vertex), d3_geom_voronoiAttachCircle(lArc), d3_geom_voronoiAttachCircle(rArc)
                        } else newArc.edge = d3_geom_voronoiCreateEdge(lArc.site, newArc.site)
                    }
                }

                function d3_geom_voronoiLeftBreakPoint(arc, directrix) {
                    var site = arc.site,
                        rfocx = site.x,
                        rfocy = site.y,
                        pby2 = rfocy - directrix;
                    if (!pby2) return rfocx;
                    var lArc = arc.P;
                    if (!lArc) return -1 / 0;
                    var lfocx = (site = lArc.site).x,
                        lfocy = site.y,
                        plby2 = lfocy - directrix;
                    if (!plby2) return lfocx;
                    var hl = lfocx - rfocx,
                        aby2 = 1 / pby2 - 1 / plby2,
                        b = hl / plby2;
                    return aby2 ? (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx : (rfocx + lfocx) / 2
                }

                function d3_geom_voronoiRightBreakPoint(arc, directrix) {
                    var rArc = arc.N;
                    if (rArc) return d3_geom_voronoiLeftBreakPoint(rArc, directrix);
                    var site = arc.site;
                    return site.y === directrix ? site.x : 1 / 0
                }

                function d3_geom_voronoiCell(site) {
                    this.site = site, this.edges = []
                }

                function d3_geom_voronoiHalfEdgeOrder(a, b) {
                    return b.angle - a.angle
                }

                function d3_geom_voronoiCircle() {
                    d3_geom_voronoiRedBlackNode(this), this.x = this.y = this.arc = this.site = this.cy = null
                }

                function d3_geom_voronoiAttachCircle(arc) {
                    var lArc = arc.P,
                        rArc = arc.N;
                    if (lArc && rArc) {
                        var lSite = lArc.site,
                            cSite = arc.site,
                            rSite = rArc.site;
                        if (lSite !== rSite) {
                            var bx = cSite.x,
                                by = cSite.y,
                                ax = lSite.x - bx,
                                ay = lSite.y - by,
                                cx = rSite.x - bx,
                                d = 2 * (ax * (cy = rSite.y - by) - ay * cx);
                            if (!(d >= -Îµ2)) {
                                var ha = ax * ax + ay * ay,
                                    hc = cx * cx + cy * cy,
                                    x = (cy * ha - ay * hc) / d,
                                    y = (ax * hc - cx * ha) / d,
                                    cy = y + by,
                                    circle = d3_geom_voronoiCirclePool.pop() || new d3_geom_voronoiCircle;
                                circle.arc = arc, circle.site = cSite, circle.x = x + bx, circle.y = cy + Math.sqrt(x * x + y * y), circle.cy = cy, arc.circle = circle;
                                for (var before = null, node = d3_geom_voronoiCircles._; node;)
                                    if (circle.y < node.y || circle.y === node.y && circle.x <= node.x) {
                                        if (!node.L) {
                                            before = node.P;
                                            break
                                        }
                                        node = node.L
                                    } else {
                                        if (!node.R) {
                                            before = node;
                                            break
                                        }
                                        node = node.R
                                    } d3_geom_voronoiCircles.insert(before, circle), before || (d3_geom_voronoiFirstCircle = circle)
                            }
                        }
                    }
                }

                function d3_geom_voronoiDetachCircle(arc) {
                    var circle = arc.circle;
                    circle && (circle.P || (d3_geom_voronoiFirstCircle = circle.N), d3_geom_voronoiCircles.remove(circle), d3_geom_voronoiCirclePool.push(circle), d3_geom_voronoiRedBlackNode(circle), arc.circle = null)
                }

                function d3_geom_voronoiConnectEdge(edge, extent) {
                    var vb = edge.b;
                    if (vb) return !0;
                    var fm, fb, va = edge.a,
                        x0 = extent[0][0],
                        x1 = extent[1][0],
                        y0 = extent[0][1],
                        y1 = extent[1][1],
                        lSite = edge.l,
                        rSite = edge.r,
                        lx = lSite.x,
                        ly = lSite.y,
                        rx = rSite.x,
                        ry = rSite.y,
                        fx = (lx + rx) / 2,
                        fy = (ly + ry) / 2;
                    if (ry === ly) {
                        if (fx < x0 || fx >= x1) return;
                        if (lx > rx) {
                            if (va) {
                                if (va.y >= y1) return
                            } else va = {
                                x: fx,
                                y: y0
                            };
                            vb = {
                                x: fx,
                                y: y1
                            }
                        } else {
                            if (va) {
                                if (va.y < y0) return
                            } else va = {
                                x: fx,
                                y: y1
                            };
                            vb = {
                                x: fx,
                                y: y0
                            }
                        }
                    } else if (fb = fy - (fm = (lx - rx) / (ry - ly)) * fx, fm < -1 || fm > 1)
                        if (lx > rx) {
                            if (va) {
                                if (va.y >= y1) return
                            } else va = {
                                x: (y0 - fb) / fm,
                                y: y0
                            };
                            vb = {
                                x: (y1 - fb) / fm,
                                y: y1
                            }
                        } else {
                            if (va) {
                                if (va.y < y0) return
                            } else va = {
                                x: (y1 - fb) / fm,
                                y: y1
                            };
                            vb = {
                                x: (y0 - fb) / fm,
                                y: y0
                            }
                        }
                    else if (ly < ry) {
                        if (va) {
                            if (va.x >= x1) return
                        } else va = {
                            x: x0,
                            y: fm * x0 + fb
                        };
                        vb = {
                            x: x1,
                            y: fm * x1 + fb
                        }
                    } else {
                        if (va) {
                            if (va.x < x0) return
                        } else va = {
                            x: x1,
                            y: fm * x1 + fb
                        };
                        vb = {
                            x: x0,
                            y: fm * x0 + fb
                        }
                    }
                    return edge.a = va, edge.b = vb, !0
                }

                function d3_geom_voronoiEdge(lSite, rSite) {
                    this.l = lSite, this.r = rSite, this.a = this.b = null
                }

                function d3_geom_voronoiCreateEdge(lSite, rSite, va, vb) {
                    var edge = new d3_geom_voronoiEdge(lSite, rSite);
                    return d3_geom_voronoiEdges.push(edge), va && d3_geom_voronoiSetEdgeEnd(edge, lSite, rSite, va), vb && d3_geom_voronoiSetEdgeEnd(edge, rSite, lSite, vb), d3_geom_voronoiCells[lSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge, lSite, rSite)), d3_geom_voronoiCells[rSite.i].edges.push(new d3_geom_voronoiHalfEdge(edge, rSite, lSite)), edge
                }

                function d3_geom_voronoiSetEdgeEnd(edge, lSite, rSite, vertex) {
                    edge.a || edge.b ? edge.l === rSite ? edge.b = vertex : edge.a = vertex : (edge.a = vertex, edge.l = lSite, edge.r = rSite)
                }

                function d3_geom_voronoiHalfEdge(edge, lSite, rSite) {
                    var va = edge.a,
                        vb = edge.b;
                    this.edge = edge, this.site = lSite, this.angle = rSite ? Math.atan2(rSite.y - lSite.y, rSite.x - lSite.x) : edge.l === lSite ? Math.atan2(vb.x - va.x, va.y - vb.y) : Math.atan2(va.x - vb.x, vb.y - va.y)
                }

                function d3_geom_voronoiRedBlackTree() {
                    this._ = null
                }

                function d3_geom_voronoiRedBlackNode(node) {
                    node.U = node.C = node.L = node.R = node.P = node.N = null
                }

                function d3_geom_voronoiRedBlackRotateLeft(tree, node) {
                    var p = node,
                        q = node.R,
                        parent = p.U;
                    parent ? parent.L === p ? parent.L = q : parent.R = q : tree._ = q, q.U = parent, p.U = q, p.R = q.L, p.R && (p.R.U = p), q.L = p
                }

                function d3_geom_voronoiRedBlackRotateRight(tree, node) {
                    var p = node,
                        q = node.L,
                        parent = p.U;
                    parent ? parent.L === p ? parent.L = q : parent.R = q : tree._ = q, q.U = parent, p.U = q, p.L = q.R, p.L && (p.L.U = p), q.R = p
                }

                function d3_geom_voronoiRedBlackFirst(node) {
                    for (; node.L;) node = node.L;
                    return node
                }

                function d3_geom_voronoi(sites, bbox) {
                    var x0, y0, circle, site = sites.sort(d3_geom_voronoiVertexOrder).pop();
                    for (d3_geom_voronoiEdges = [], d3_geom_voronoiCells = new Array(sites.length), d3_geom_voronoiBeaches = new d3_geom_voronoiRedBlackTree, d3_geom_voronoiCircles = new d3_geom_voronoiRedBlackTree;;)
                        if (circle = d3_geom_voronoiFirstCircle, site && (!circle || site.y < circle.y || site.y === circle.y && site.x < circle.x)) site.x === x0 && site.y === y0 || (d3_geom_voronoiCells[site.i] = new d3_geom_voronoiCell(site), d3_geom_voronoiAddBeach(site), x0 = site.x, y0 = site.y), site = sites.pop();
                        else {
                            if (!circle) break;
                            d3_geom_voronoiRemoveBeach(circle.arc)
                        } bbox && (function(extent) {
                        for (var e, edges = d3_geom_voronoiEdges, clip = d3_geom_clipLine(extent[0][0], extent[0][1], extent[1][0], extent[1][1]), i = edges.length; i--;)(!d3_geom_voronoiConnectEdge(e = edges[i], extent) || !clip(e) || abs(e.a.x - e.b.x) < Îµ && abs(e.a.y - e.b.y) < Îµ) && (e.a = e.b = null, edges.splice(i, 1))
                    }(bbox), function(extent) {
                        for (var x2, y2, x3, y3, cell, iHalfEdge, halfEdges, nHalfEdges, start, end, x0 = extent[0][0], x1 = extent[1][0], y0 = extent[0][1], y1 = extent[1][1], cells = d3_geom_voronoiCells, iCell = cells.length; iCell--;)
                            if ((cell = cells[iCell]) && cell.prepare())
                                for (nHalfEdges = (halfEdges = cell.edges).length, iHalfEdge = 0; iHalfEdge < nHalfEdges;) x3 = (end = halfEdges[iHalfEdge].end()).x, y3 = end.y, x2 = (start = halfEdges[++iHalfEdge % nHalfEdges].start()).x, y2 = start.y, (abs(x3 - x2) > Îµ || abs(y3 - y2) > Îµ) && (halfEdges.splice(iHalfEdge, 0, new d3_geom_voronoiHalfEdge((lSite = cell.site, va = end, vb = abs(x3 - x0) < Îµ && y1 - y3 > Îµ ? {
                                    x: x0,
                                    y: abs(x2 - x0) < Îµ ? y2 : y1
                                } : abs(y3 - y1) < Îµ && x1 - x3 > Îµ ? {
                                    x: abs(y2 - y1) < Îµ ? x2 : x1,
                                    y: y1
                                } : abs(x3 - x1) < Îµ && y3 - y0 > Îµ ? {
                                    x: x1,
                                    y: abs(x2 - x1) < Îµ ? y2 : y0
                                } : abs(y3 - y0) < Îµ && x3 - x0 > Îµ ? {
                                    x: abs(y2 - y0) < Îµ ? x2 : x0,
                                    y: y0
                                } : null, edge = void 0, edge = new d3_geom_voronoiEdge(lSite, null), edge.a = va, edge.b = vb, d3_geom_voronoiEdges.push(edge), edge), cell.site, null)), ++nHalfEdges);
                        var lSite, va, vb, edge
                    }(bbox));
                    var diagram = {
                        cells: d3_geom_voronoiCells,
                        edges: d3_geom_voronoiEdges
                    };
                    return d3_geom_voronoiBeaches = d3_geom_voronoiCircles = d3_geom_voronoiEdges = d3_geom_voronoiCells = null, diagram
                }

                function d3_geom_voronoiVertexOrder(a, b) {
                    return b.y - a.y || b.x - a.x
                }
                d3_geom_voronoiCell.prototype.prepare = function() {
                    for (var edge, halfEdges = this.edges, iHalfEdge = halfEdges.length; iHalfEdge--;)(edge = halfEdges[iHalfEdge].edge).b && edge.a || halfEdges.splice(iHalfEdge, 1);
                    return halfEdges.sort(d3_geom_voronoiHalfEdgeOrder), halfEdges.length
                }, d3_geom_voronoiHalfEdge.prototype = {
                    start: function() {
                        return this.edge.l === this.site ? this.edge.a : this.edge.b
                    },
                    end: function() {
                        return this.edge.l === this.site ? this.edge.b : this.edge.a
                    }
                }, d3_geom_voronoiRedBlackTree.prototype = {
                    insert: function(after, node) {
                        var parent, grandpa, uncle;
                        if (after) {
                            if (node.P = after, node.N = after.N, after.N && (after.N.P = node), after.N = node, after.R) {
                                for (after = after.R; after.L;) after = after.L;
                                after.L = node
                            } else after.R = node;
                            parent = after
                        } else this._ ? (after = d3_geom_voronoiRedBlackFirst(this._), node.P = null, node.N = after, after.P = after.L = node, parent = after) : (node.P = node.N = null, this._ = node, parent = null);
                        for (node.L = node.R = null, node.U = parent, node.C = !0, after = node; parent && parent.C;) parent === (grandpa = parent.U).L ? (uncle = grandpa.R) && uncle.C ? (parent.C = uncle.C = !1, grandpa.C = !0, after = grandpa) : (after === parent.R && (d3_geom_voronoiRedBlackRotateLeft(this, parent), parent = (after = parent).U), parent.C = !1, grandpa.C = !0, d3_geom_voronoiRedBlackRotateRight(this, grandpa)) : (uncle = grandpa.L) && uncle.C ? (parent.C = uncle.C = !1, grandpa.C = !0, after = grandpa) : (after === parent.L && (d3_geom_voronoiRedBlackRotateRight(this, parent), parent = (after = parent).U), parent.C = !1, grandpa.C = !0, d3_geom_voronoiRedBlackRotateLeft(this, grandpa)), parent = after.U;
                        this._.C = !1
                    },
                    remove: function(node) {
                        node.N && (node.N.P = node.P), node.P && (node.P.N = node.N), node.N = node.P = null;
                        var sibling, next, red, parent = node.U,
                            left = node.L,
                            right = node.R;
                        if (next = left ? right ? d3_geom_voronoiRedBlackFirst(right) : left : right, parent ? parent.L === node ? parent.L = next : parent.R = next : this._ = next, left && right ? (red = next.C, next.C = node.C, next.L = left, left.U = next, next !== right ? (parent = next.U, next.U = node.U, node = next.R, parent.L = node, next.R = right, right.U = next) : (next.U = parent, parent = next, node = next.R)) : (red = node.C, node = next), node && (node.U = parent), !red)
                            if (node && node.C) node.C = !1;
                            else {
                                do {
                                    if (node === this._) break;
                                    if (node === parent.L) {
                                        if ((sibling = parent.R).C && (sibling.C = !1, parent.C = !0, d3_geom_voronoiRedBlackRotateLeft(this, parent), sibling = parent.R), sibling.L && sibling.L.C || sibling.R && sibling.R.C) {
                                            sibling.R && sibling.R.C || (sibling.L.C = !1, sibling.C = !0, d3_geom_voronoiRedBlackRotateRight(this, sibling), sibling = parent.R), sibling.C = parent.C, parent.C = sibling.R.C = !1, d3_geom_voronoiRedBlackRotateLeft(this, parent), node = this._;
                                            break
                                        }
                                    } else if ((sibling = parent.L).C && (sibling.C = !1, parent.C = !0, d3_geom_voronoiRedBlackRotateRight(this, parent), sibling = parent.L), sibling.L && sibling.L.C || sibling.R && sibling.R.C) {
                                        sibling.L && sibling.L.C || (sibling.R.C = !1, sibling.C = !0, d3_geom_voronoiRedBlackRotateLeft(this, sibling), sibling = parent.L), sibling.C = parent.C, parent.C = sibling.L.C = !1, d3_geom_voronoiRedBlackRotateRight(this, parent), node = this._;
                                        break
                                    }
                                    sibling.C = !0, node = parent, parent = parent.U
                                } while (!node.C);
                                node && (node.C = !1)
                            }
                    }
                }, d3.geom.voronoi = function(points) {
                    var x = d3_geom_pointX,
                        y = d3_geom_pointY,
                        fx = x,
                        fy = y,
                        clipExtent = d3_geom_voronoiClipExtent;
                    if (points) return voronoi(points);

                    function voronoi(data) {
                        var polygons = new Array(data.length),
                            x0 = clipExtent[0][0],
                            y0 = clipExtent[0][1],
                            x1 = clipExtent[1][0],
                            y1 = clipExtent[1][1];
                        return d3_geom_voronoi(sites(data), clipExtent).cells.forEach(function(cell, i) {
                            var edges = cell.edges,
                                site = cell.site;
                            (polygons[i] = edges.length ? edges.map(function(e) {
                                var s = e.start();
                                return [s.x, s.y]
                            }) : site.x >= x0 && site.x <= x1 && site.y >= y0 && site.y <= y1 ? [
                                [x0, y1],
                                [x1, y1],
                                [x1, y0],
                                [x0, y0]
                            ] : []).point = data[i]
                        }), polygons
                    }

                    function sites(data) {
                        return data.map(function(d, i) {
                            return {
                                x: Math.round(fx(d, i) / Îµ) * Îµ,
                                y: Math.round(fy(d, i) / Îµ) * Îµ,
                                i: i
                            }
                        })
                    }
                    return voronoi.links = function(data) {
                        return d3_geom_voronoi(sites(data)).edges.filter(function(edge) {
                            return edge.l && edge.r
                        }).map(function(edge) {
                            return {
                                source: data[edge.l.i],
                                target: data[edge.r.i]
                            }
                        })
                    }, voronoi.triangles = function(data) {
                        var triangles = [];
                        return d3_geom_voronoi(sites(data)).cells.forEach(function(cell, i) {
                            for (var s0, a, b, c, site = cell.site, edges = cell.edges.sort(d3_geom_voronoiHalfEdgeOrder), j = -1, m = edges.length, e1 = edges[m - 1].edge, s1 = e1.l === site ? e1.r : e1.l; ++j < m;) e1, s0 = s1, s1 = (e1 = edges[j].edge).l === site ? e1.r : e1.l, i < s0.i && i < s1.i && (b = s0, c = s1, ((a = site).x - c.x) * (b.y - a.y) - (a.x - b.x) * (c.y - a.y) < 0) && triangles.push([data[i], data[s0.i], data[s1.i]])
                        }), triangles
                    }, voronoi.x = function(_) {
                        return arguments.length ? (fx = d3_functor(x = _), voronoi) : x
                    }, voronoi.y = function(_) {
                        return arguments.length ? (fy = d3_functor(y = _), voronoi) : y
                    }, voronoi.clipExtent = function(_) {
                        return arguments.length ? (clipExtent = null == _ ? d3_geom_voronoiClipExtent : _, voronoi) : clipExtent === d3_geom_voronoiClipExtent ? null : clipExtent
                    }, voronoi.size = function(_) {
                        return arguments.length ? voronoi.clipExtent(_ && [
                            [0, 0], _
                        ]) : clipExtent === d3_geom_voronoiClipExtent ? null : clipExtent && clipExtent[1]
                    }, voronoi
                };
                var d3_geom_voronoiClipExtent = [
                    [-1e6, -1e6],
                    [1e6, 1e6]
                ];

                function d3_geom_quadtreeCompatX(d) {
                    return d.x
                }

                function d3_geom_quadtreeCompatY(d) {
                    return d.y
                }

                function d3_interpolateRgb(a, b) {
                    a = d3.rgb(a), b = d3.rgb(b);
                    var ar = a.r,
                        ag = a.g,
                        ab = a.b,
                        br = b.r - ar,
                        bg = b.g - ag,
                        bb = b.b - ab;
                    return function(t) {
                        return "#" + d3_rgb_hex(Math.round(ar + br * t)) + d3_rgb_hex(Math.round(ag + bg * t)) + d3_rgb_hex(Math.round(ab + bb * t))
                    }
                }

                function d3_interpolateObject(a, b) {
                    var k, i = {},
                        c = {};
                    for (k in a) k in b ? i[k] = d3_interpolate(a[k], b[k]) : c[k] = a[k];
                    for (k in b) k in a || (c[k] = b[k]);
                    return function(t) {
                        for (k in i) c[k] = i[k](t);
                        return c
                    }
                }

                function d3_interpolateNumber(a, b) {
                    return a = +a, b = +b,
                        function(t) {
                            return a * (1 - t) + b * t
                        }
                }

                function d3_interpolateString(a, b) {
                    var am, bm, bs, bi = d3_interpolate_numberA.lastIndex = d3_interpolate_numberB.lastIndex = 0,
                        i = -1,
                        s = [],
                        q = [];
                    for (a += "", b += "";
                        (am = d3_interpolate_numberA.exec(a)) && (bm = d3_interpolate_numberB.exec(b));)(bs = bm.index) > bi && (bs = b.slice(bi, bs), s[i] ? s[i] += bs : s[++i] = bs), (am = am[0]) === (bm = bm[0]) ? s[i] ? s[i] += bm : s[++i] = bm : (s[++i] = null, q.push({
                        i: i,
                        x: d3_interpolateNumber(am, bm)
                    })), bi = d3_interpolate_numberB.lastIndex;
                    return bi < b.length && (bs = b.slice(bi), s[i] ? s[i] += bs : s[++i] = bs), s.length < 2 ? q[0] ? (b = q[0].x, function(t) {
                        return b(t) + ""
                    }) : function() {
                        return b
                    } : (b = q.length, function(t) {
                        for (var o, i = 0; i < b; ++i) s[(o = q[i]).i] = o.x(t);
                        return s.join("")
                    })
                }
                d3.geom.delaunay = function(vertices) {
                    return d3.geom.voronoi().triangles(vertices)
                }, d3.geom.quadtree = function(points, x1, y1, x2, y2) {
                    var compat, x = d3_geom_pointX,
                        y = d3_geom_pointY;
                    if (compat = arguments.length) return x = d3_geom_quadtreeCompatX, y = d3_geom_quadtreeCompatY, 3 === compat && (y2 = y1, x2 = x1, y1 = x1 = 0), quadtree(points);

                    function quadtree(data) {
                        var d, xs, ys, i, n, x1_, y1_, x2_, y2_, fx = d3_functor(x),
                            fy = d3_functor(y);
                        if (null != x1) x1_ = x1, y1_ = y1, x2_ = x2, y2_ = y2;
                        else if (x2_ = y2_ = -(x1_ = y1_ = 1 / 0), xs = [], ys = [], n = data.length, compat)
                            for (i = 0; i < n; ++i)(d = data[i]).x < x1_ && (x1_ = d.x), d.y < y1_ && (y1_ = d.y), d.x > x2_ && (x2_ = d.x), d.y > y2_ && (y2_ = d.y), xs.push(d.x), ys.push(d.y);
                        else
                            for (i = 0; i < n; ++i) {
                                var x_ = +fx(d = data[i], i),
                                    y_ = +fy(d, i);
                                x_ < x1_ && (x1_ = x_), y_ < y1_ && (y1_ = y_), x_ > x2_ && (x2_ = x_), y_ > y2_ && (y2_ = y_), xs.push(x_), ys.push(y_)
                            }
                        var dx = x2_ - x1_,
                            dy = y2_ - y1_;

                        function insert(n, d, x, y, x1, y1, x2, y2) {
                            if (!isNaN(x) && !isNaN(y))
                                if (n.leaf) {
                                    var nx = n.x,
                                        ny = n.y;
                                    if (null != nx)
                                        if (abs(nx - x) + abs(ny - y) < .01) insertChild(n, d, x, y, x1, y1, x2, y2);
                                        else {
                                            var nPoint = n.point;
                                            n.x = n.y = n.point = null, insertChild(n, nPoint, nx, ny, x1, y1, x2, y2), insertChild(n, d, x, y, x1, y1, x2, y2)
                                        }
                                    else n.x = x, n.y = y, n.point = d
                                } else insertChild(n, d, x, y, x1, y1, x2, y2)
                        }

                        function insertChild(n, d, x, y, x1, y1, x2, y2) {
                            var xm = .5 * (x1 + x2),
                                ym = .5 * (y1 + y2),
                                right = x >= xm,
                                below = y >= ym,
                                i = below << 1 | right;
                            n.leaf = !1, right ? x1 = xm : x2 = xm, below ? y1 = ym : y2 = ym, insert(n = n.nodes[i] || (n.nodes[i] = {
                                leaf: !0,
                                nodes: [],
                                point: null,
                                x: null,
                                y: null
                            }), d, x, y, x1, y1, x2, y2)
                        }
                        dx > dy ? y2_ = y1_ + dx : x2_ = x1_ + dy;
                        var root = {
                            leaf: !0,
                            nodes: [],
                            point: null,
                            x: null,
                            y: null,
                            add: function(d) {
                                insert(root, d, +fx(d, ++i), +fy(d, i), x1_, y1_, x2_, y2_)
                            }
                        };
                        if (root.visit = function(f) {
                                ! function d3_geom_quadtreeVisit(f, node, x1, y1, x2, y2) {
                                    if (!f(node, x1, y1, x2, y2)) {
                                        var sx = .5 * (x1 + x2),
                                            sy = .5 * (y1 + y2),
                                            children = node.nodes;
                                        children[0] && d3_geom_quadtreeVisit(f, children[0], x1, y1, sx, sy), children[1] && d3_geom_quadtreeVisit(f, children[1], sx, y1, x2, sy), children[2] && d3_geom_quadtreeVisit(f, children[2], x1, sy, sx, y2), children[3] && d3_geom_quadtreeVisit(f, children[3], sx, sy, x2, y2)
                                    }
                                }(f, root, x1_, y1_, x2_, y2_)
                            }, root.find = function(point) {
                                return function(root, x, y, x0, y0, x3, y3) {
                                    var closestPoint, minDistance2 = 1 / 0;
                                    return function find(node, x1, y1, x2, y2) {
                                        if (!(x1 > x3 || y1 > y3 || x2 < x0 || y2 < y0)) {
                                            if (point = node.point) {
                                                var point, dx = x - node.x,
                                                    dy = y - node.y,
                                                    distance2 = dx * dx + dy * dy;
                                                if (distance2 < minDistance2) {
                                                    var distance = Math.sqrt(minDistance2 = distance2);
                                                    x0 = x - distance, y0 = y - distance, x3 = x + distance, y3 = y + distance, closestPoint = point
                                                }
                                            }
                                            for (var children = node.nodes, xm = .5 * (x1 + x2), ym = .5 * (y1 + y2), i = (y >= ym) << 1 | x >= xm, j = i + 4; i < j; ++i)
                                                if (node = children[3 & i]) switch (3 & i) {
                                                    case 0:
                                                        find(node, x1, y1, xm, ym);
                                                        break;
                                                    case 1:
                                                        find(node, xm, y1, x2, ym);
                                                        break;
                                                    case 2:
                                                        find(node, x1, ym, xm, y2);
                                                        break;
                                                    case 3:
                                                        find(node, xm, ym, x2, y2)
                                                }
                                        }
                                    }(root, x0, y0, x3, y3), closestPoint
                                }(root, point[0], point[1], x1_, y1_, x2_, y2_)
                            }, i = -1, null == x1) {
                            for (; ++i < n;) insert(root, data[i], xs[i], ys[i], x1_, y1_, x2_, y2_);
                            --i
                        } else data.forEach(root.add);
                        return xs = ys = data = d = null, root
                    }
                    return quadtree.x = function(_) {
                        return arguments.length ? (x = _, quadtree) : x
                    }, quadtree.y = function(_) {
                        return arguments.length ? (y = _, quadtree) : y
                    }, quadtree.extent = function(_) {
                        return arguments.length ? (null == _ ? x1 = y1 = x2 = y2 = null : (x1 = +_[0][0], y1 = +_[0][1], x2 = +_[1][0], y2 = +_[1][1]), quadtree) : null == x1 ? null : [
                            [x1, y1],
                            [x2, y2]
                        ]
                    }, quadtree.size = function(_) {
                        return arguments.length ? (null == _ ? x1 = y1 = x2 = y2 = null : (x1 = y1 = 0, x2 = +_[0], y2 = +_[1]), quadtree) : null == x1 ? null : [x2 - x1, y2 - y1]
                    }, quadtree
                }, d3.interpolateRgb = d3_interpolateRgb, d3.interpolateObject = d3_interpolateObject, d3.interpolateNumber = d3_interpolateNumber, d3.interpolateString = d3_interpolateString;
                var d3_interpolate_numberA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
                    d3_interpolate_numberB = new RegExp(d3_interpolate_numberA.source, "g");

                function d3_interpolate(a, b) {
                    for (var f, i = d3.interpolators.length; --i >= 0 && !(f = d3.interpolators[i](a, b)););
                    return f
                }

                function d3_interpolateArray(a, b) {
                    var i, x = [],
                        c = [],
                        na = a.length,
                        nb = b.length,
                        n0 = Math.min(a.length, b.length);
                    for (i = 0; i < n0; ++i) x.push(d3_interpolate(a[i], b[i]));
                    for (; i < na; ++i) c[i] = a[i];
                    for (; i < nb; ++i) c[i] = b[i];
                    return function(t) {
                        for (i = 0; i < n0; ++i) c[i] = x[i](t);
                        return c
                    }
                }
                d3.interpolate = d3_interpolate, d3.interpolators = [function(a, b) {
                    var t = typeof b;
                    return ("string" === t ? d3_rgb_names.has(b.toLowerCase()) || /^(#|rgb\(|hsl\()/i.test(b) ? d3_interpolateRgb : d3_interpolateString : b instanceof d3_color ? d3_interpolateRgb : Array.isArray(b) ? d3_interpolateArray : "object" === t && isNaN(b) ? d3_interpolateObject : d3_interpolateNumber)(a, b)
                }], d3.interpolateArray = d3_interpolateArray;
                var d3_ease_default = function() {
                        return d3_identity
                    },
                    d3_ease = d3.map({
                        linear: d3_ease_default,
                        poly: function(e) {
                            return function(t) {
                                return Math.pow(t, e)
                            }
                        },
                        quad: function() {
                            return d3_ease_quad
                        },
                        cubic: function() {
                            return d3_ease_cubic
                        },
                        sin: function() {
                            return d3_ease_sin
                        },
                        exp: function() {
                            return d3_ease_exp
                        },
                        circle: function() {
                            return d3_ease_circle
                        },
                        elastic: function(a, p) {
                            var s;
                            arguments.length < 2 && (p = .45);
                            arguments.length ? s = p / Ï * Math.asin(1 / a) : (a = 1, s = p / 4);
                            return function(t) {
                                return 1 + a * Math.pow(2, -10 * t) * Math.sin((t - s) * Ï / p)
                            }
                        },
                        back: function(s) {
                            s || (s = 1.70158);
                            return function(t) {
                                return t * t * ((s + 1) * t - s)
                            }
                        },
                        bounce: function() {
                            return d3_ease_bounce
                        }
                    }),
                    d3_ease_mode = d3.map({
                        in: d3_identity,
                        out: d3_ease_reverse,
                        "in-out": d3_ease_reflect,
                        "out-in": function(f) {
                            return d3_ease_reflect(d3_ease_reverse(f))
                        }
                    });

                function d3_ease_reverse(f) {
                    return function(t) {
                        return 1 - f(1 - t)
                    }
                }

                function d3_ease_reflect(f) {
                    return function(t) {
                        return .5 * (t < .5 ? f(2 * t) : 2 - f(2 - 2 * t))
                    }
                }

                function d3_ease_quad(t) {
                    return t * t
                }

                function d3_ease_cubic(t) {
                    return t * t * t
                }

                function d3_ease_cubicInOut(t) {
                    if (t <= 0) return 0;
                    if (t >= 1) return 1;
                    var t2 = t * t,
                        t3 = t2 * t;
                    return 4 * (t < .5 ? t3 : 3 * (t - t2) + t3 - .75)
                }

                function d3_ease_sin(t) {
                    return 1 - Math.cos(t * halfÏ)
                }

                function d3_ease_exp(t) {
                    return Math.pow(2, 10 * (t - 1))
                }

                function d3_ease_circle(t) {
                    return 1 - Math.sqrt(1 - t * t)
                }

                function d3_ease_bounce(t) {
                    return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375
                }

                function d3_interpolateRound(a, b) {
                    return b -= a,
                        function(t) {
                            return Math.round(a + b * t)
                        }
                }

                function d3_transform(m) {
                    var a, b, k, r0 = [m.a, m.b],
                        r1 = [m.c, m.d],
                        kx = d3_transformNormalize(r0),
                        kz = d3_transformDot(r0, r1),
                        ky = d3_transformNormalize(((a = r1)[0] += (k = -kz) * (b = r0)[0], a[1] += k * b[1], a)) || 0;
                    r0[0] * r1[1] < r1[0] * r0[1] && (r0[0] *= -1, r0[1] *= -1, kx *= -1, kz *= -1), this.rotate = (kx ? Math.atan2(r0[1], r0[0]) : Math.atan2(-r1[0], r1[1])) * d3_degrees, this.translate = [m.e, m.f], this.scale = [kx, ky], this.skew = ky ? Math.atan2(kz, ky) * d3_degrees : 0
                }

                function d3_transformDot(a, b) {
                    return a[0] * b[0] + a[1] * b[1]
                }

                function d3_transformNormalize(a) {
                    var k = Math.sqrt(d3_transformDot(a, a));
                    return k && (a[0] /= k, a[1] /= k), k
                }
                d3.ease = function(name) {
                    var f, i = name.indexOf("-"),
                        t = i >= 0 ? name.slice(0, i) : name,
                        m = i >= 0 ? name.slice(i + 1) : "in";
                    return t = d3_ease.get(t) || d3_ease_default, m = d3_ease_mode.get(m) || d3_identity, f = m(t.apply(null, d3_arraySlice.call(arguments, 1))),
                        function(t) {
                            return t <= 0 ? 0 : t >= 1 ? 1 : f(t)
                        }
                }, d3.interpolateHcl = function(a, b) {
                    a = d3.hcl(a), b = d3.hcl(b);
                    var ah = a.h,
                        ac = a.c,
                        al = a.l,
                        bh = b.h - ah,
                        bc = b.c - ac,
                        bl = b.l - al;
                    isNaN(bc) && (bc = 0, ac = isNaN(ac) ? b.c : ac);
                    isNaN(bh) ? (bh = 0, ah = isNaN(ah) ? b.h : ah) : bh > 180 ? bh -= 360 : bh < -180 && (bh += 360);
                    return function(t) {
                        return d3_hcl_lab(ah + bh * t, ac + bc * t, al + bl * t) + ""
                    }
                }, d3.interpolateHsl = function(a, b) {
                    a = d3.hsl(a), b = d3.hsl(b);
                    var ah = a.h,
                        as = a.s,
                        al = a.l,
                        bh = b.h - ah,
                        bs = b.s - as,
                        bl = b.l - al;
                    isNaN(bs) && (bs = 0, as = isNaN(as) ? b.s : as);
                    isNaN(bh) ? (bh = 0, ah = isNaN(ah) ? b.h : ah) : bh > 180 ? bh -= 360 : bh < -180 && (bh += 360);
                    return function(t) {
                        return d3_hsl_rgb(ah + bh * t, as + bs * t, al + bl * t) + ""
                    }
                }, d3.interpolateLab = function(a, b) {
                    a = d3.lab(a), b = d3.lab(b);
                    var al = a.l,
                        aa = a.a,
                        ab = a.b,
                        bl = b.l - al,
                        ba = b.a - aa,
                        bb = b.b - ab;
                    return function(t) {
                        return d3_lab_rgb(al + bl * t, aa + ba * t, ab + bb * t) + ""
                    }
                }, d3.interpolateRound = d3_interpolateRound, d3.transform = function(string) {
                    var g = d3_document.createElementNS(d3.ns.prefix.svg, "g");
                    return (d3.transform = function(string) {
                        if (null != string) {
                            g.setAttribute("transform", string);
                            var t = g.transform.baseVal.consolidate()
                        }
                        return new d3_transform(t ? t.matrix : d3_transformIdentity)
                    })(string)
                }, d3_transform.prototype.toString = function() {
                    return "translate(" + this.translate + ")rotate(" + this.rotate + ")skewX(" + this.skew + ")scale(" + this.scale + ")"
                };
                var d3_transformIdentity = {
                    a: 1,
                    b: 0,
                    c: 0,
                    d: 1,
                    e: 0,
                    f: 0
                };

                function d3_interpolateTransformPop(s) {
                    return s.length ? s.pop() + "," : ""
                }

                function d3_interpolateTransform(a, b) {
                    var s = [],
                        q = [];
                    return a = d3.transform(a), b = d3.transform(b),
                        function(ta, tb, s, q) {
                            if (ta[0] !== tb[0] || ta[1] !== tb[1]) {
                                var i = s.push("translate(", null, ",", null, ")");
                                q.push({
                                    i: i - 4,
                                    x: d3_interpolateNumber(ta[0], tb[0])
                                }, {
                                    i: i - 2,
                                    x: d3_interpolateNumber(ta[1], tb[1])
                                })
                            } else(tb[0] || tb[1]) && s.push("translate(" + tb + ")")
                        }(a.translate, b.translate, s, q),
                        function(ra, rb, s, q) {
                            ra !== rb ? (ra - rb > 180 ? rb += 360 : rb - ra > 180 && (ra += 360), q.push({
                                i: s.push(d3_interpolateTransformPop(s) + "rotate(", null, ")") - 2,
                                x: d3_interpolateNumber(ra, rb)
                            })) : rb && s.push(d3_interpolateTransformPop(s) + "rotate(" + rb + ")")
                        }(a.rotate, b.rotate, s, q),
                        function(wa, wb, s, q) {
                            wa !== wb ? q.push({
                                i: s.push(d3_interpolateTransformPop(s) + "skewX(", null, ")") - 2,
                                x: d3_interpolateNumber(wa, wb)
                            }) : wb && s.push(d3_interpolateTransformPop(s) + "skewX(" + wb + ")")
                        }(a.skew, b.skew, s, q),
                        function(ka, kb, s, q) {
                            if (ka[0] !== kb[0] || ka[1] !== kb[1]) {
                                var i = s.push(d3_interpolateTransformPop(s) + "scale(", null, ",", null, ")");
                                q.push({
                                    i: i - 4,
                                    x: d3_interpolateNumber(ka[0], kb[0])
                                }, {
                                    i: i - 2,
                                    x: d3_interpolateNumber(ka[1], kb[1])
                                })
                            } else 1 === kb[0] && 1 === kb[1] || s.push(d3_interpolateTransformPop(s) + "scale(" + kb + ")")
                        }(a.scale, b.scale, s, q), a = b = null,
                        function(t) {
                            for (var o, i = -1, n = q.length; ++i < n;) s[(o = q[i]).i] = o.x(t);
                            return s.join("")
                        }
                }

                function d3_uninterpolateNumber(a, b) {
                    return b = (b -= a = +a) || 1 / b,
                        function(x) {
                            return (x - a) / b
                        }
                }

                function d3_uninterpolateClamp(a, b) {
                    return b = (b -= a = +a) || 1 / b,
                        function(x) {
                            return Math.max(0, Math.min(1, (x - a) / b))
                        }
                }

                function d3_layout_bundlePath(link) {
                    for (var start = link.source, end = link.target, lca = function(a, b) {
                            if (a === b) return a;
                            var aNodes = d3_layout_bundleAncestors(a),
                                bNodes = d3_layout_bundleAncestors(b),
                                aNode = aNodes.pop(),
                                bNode = bNodes.pop(),
                                sharedNode = null;
                            for (; aNode === bNode;) sharedNode = aNode, aNode = aNodes.pop(), bNode = bNodes.pop();
                            return sharedNode
                        }(start, end), points = [start]; start !== lca;) start = start.parent, points.push(start);
                    for (var k = points.length; end !== lca;) points.splice(k, 0, end), end = end.parent;
                    return points
                }

                function d3_layout_bundleAncestors(node) {
                    for (var ancestors = [], parent = node.parent; null != parent;) ancestors.push(node), node = parent, parent = parent.parent;
                    return ancestors.push(node), ancestors
                }

                function d3_layout_forceDragstart(d) {
                    d.fixed |= 2
                }

                function d3_layout_forceDragend(d) {
                    d.fixed &= -7
                }

                function d3_layout_forceMouseover(d) {
                    d.fixed |= 4, d.px = d.x, d.py = d.y
                }

                function d3_layout_forceMouseout(d) {
                    d.fixed &= -5
                }
                d3.interpolateTransform = d3_interpolateTransform, d3.layout = {}, d3.layout.bundle = function() {
                    return function(links) {
                        for (var paths = [], i = -1, n = links.length; ++i < n;) paths.push(d3_layout_bundlePath(links[i]));
                        return paths
                    }
                }, d3.layout.chord = function() {
                    var chords, groups, matrix, n, sortGroups, sortSubgroups, sortChords, chord = {},
                        padding = 0;

                    function relayout() {
                        var k, x, x0, i, j, subgroups = {},
                            groupSums = [],
                            groupIndex = d3.range(n),
                            subgroupIndex = [];
                        for (chords = [], groups = [], k = 0, i = -1; ++i < n;) {
                            for (x = 0, j = -1; ++j < n;) x += matrix[i][j];
                            groupSums.push(x), subgroupIndex.push(d3.range(n)), k += x
                        }
                        for (sortGroups && groupIndex.sort(function(a, b) {
                                return sortGroups(groupSums[a], groupSums[b])
                            }), sortSubgroups && subgroupIndex.forEach(function(d, i) {
                                d.sort(function(a, b) {
                                    return sortSubgroups(matrix[i][a], matrix[i][b])
                                })
                            }), k = (Ï - padding * n) / k, x = 0, i = -1; ++i < n;) {
                            for (x0 = x, j = -1; ++j < n;) {
                                var di = groupIndex[i],
                                    dj = subgroupIndex[di][j],
                                    v = matrix[di][dj],
                                    a0 = x,
                                    a1 = x += v * k;
                                subgroups[di + "-" + dj] = {
                                    index: di,
                                    subindex: dj,
                                    startAngle: a0,
                                    endAngle: a1,
                                    value: v
                                }
                            }
                            groups[di] = {
                                index: di,
                                startAngle: x0,
                                endAngle: x,
                                value: groupSums[di]
                            }, x += padding
                        }
                        for (i = -1; ++i < n;)
                            for (j = i - 1; ++j < n;) {
                                var source = subgroups[i + "-" + j],
                                    target = subgroups[j + "-" + i];
                                (source.value || target.value) && chords.push(source.value < target.value ? {
                                    source: target,
                                    target: source
                                } : {
                                    source: source,
                                    target: target
                                })
                            }
                        sortChords && resort()
                    }

                    function resort() {
                        chords.sort(function(a, b) {
                            return sortChords((a.source.value + a.target.value) / 2, (b.source.value + b.target.value) / 2)
                        })
                    }
                    return chord.matrix = function(x) {
                        return arguments.length ? (n = (matrix = x) && matrix.length, chords = groups = null, chord) : matrix
                    }, chord.padding = function(x) {
                        return arguments.length ? (padding = x, chords = groups = null, chord) : padding
                    }, chord.sortGroups = function(x) {
                        return arguments.length ? (sortGroups = x, chords = groups = null, chord) : sortGroups
                    }, chord.sortSubgroups = function(x) {
                        return arguments.length ? (sortSubgroups = x, chords = null, chord) : sortSubgroups
                    }, chord.sortChords = function(x) {
                        return arguments.length ? (sortChords = x, chords && resort(), chord) : sortChords
                    }, chord.chords = function() {
                        return chords || relayout(), chords
                    }, chord.groups = function() {
                        return groups || relayout(), groups
                    }, chord
                }, d3.layout.force = function() {
                    var timer, drag, alpha, distances, strengths, charges, force = {},
                        event = d3.dispatch("start", "tick", "end"),
                        size = [1, 1],
                        friction = .9,
                        linkDistance = d3_layout_forceLinkDistance,
                        linkStrength = d3_layout_forceLinkStrength,
                        charge = -30,
                        chargeDistance2 = d3_layout_forceChargeDistance2,
                        gravity = .1,
                        theta2 = .64,
                        nodes = [],
                        links = [];

                    function repulse(node) {
                        return function(quad, x1, _, x2) {
                            if (quad.point !== node) {
                                var dx = quad.cx - node.x,
                                    dy = quad.cy - node.y,
                                    dw = x2 - x1,
                                    dn = dx * dx + dy * dy;
                                if (dw * dw / theta2 < dn) {
                                    if (dn < chargeDistance2) {
                                        var k = quad.charge / dn;
                                        node.px -= dx * k, node.py -= dy * k
                                    }
                                    return !0
                                }
                                if (quad.point && dn && dn < chargeDistance2) {
                                    k = quad.pointCharge / dn;
                                    node.px -= dx * k, node.py -= dy * k
                                }
                            }
                            return !quad.charge
                        }
                    }

                    function dragmove(d) {
                        d.px = d3.event.x, d.py = d3.event.y, force.resume()
                    }
                    return force.tick = function() {
                        if ((alpha *= .99) < .005) return timer = null, event.end({
                            type: "end",
                            alpha: alpha = 0
                        }), !0;
                        var q, i, o, s, t, l, k, x, y, n = nodes.length,
                            m = links.length;
                        for (i = 0; i < m; ++i) s = (o = links[i]).source, (l = (x = (t = o.target).x - s.x) * x + (y = t.y - s.y) * y) && (x *= l = alpha * strengths[i] * ((l = Math.sqrt(l)) - distances[i]) / l, y *= l, t.x -= x * (k = s.weight + t.weight ? s.weight / (s.weight + t.weight) : .5), t.y -= y * k, s.x += x * (k = 1 - k), s.y += y * k);
                        if ((k = alpha * gravity) && (x = size[0] / 2, y = size[1] / 2, i = -1, k))
                            for (; ++i < n;)(o = nodes[i]).x += (x - o.x) * k, o.y += (y - o.y) * k;
                        if (charge)
                            for (! function d3_layout_forceAccumulate(quad, alpha, charges) {
                                    var cx = 0,
                                        cy = 0;
                                    quad.charge = 0;
                                    if (!quad.leaf)
                                        for (var c, nodes = quad.nodes, n = nodes.length, i = -1; ++i < n;) null != (c = nodes[i]) && (d3_layout_forceAccumulate(c, alpha, charges), quad.charge += c.charge, cx += c.charge * c.cx, cy += c.charge * c.cy);
                                    if (quad.point) {
                                        quad.leaf || (quad.point.x += Math.random() - .5, quad.point.y += Math.random() - .5);
                                        var k = alpha * charges[quad.point.index];
                                        quad.charge += quad.pointCharge = k, cx += k * quad.point.x, cy += k * quad.point.y
                                    }
                                    quad.cx = cx / quad.charge;
                                    quad.cy = cy / quad.charge
                                }(q = d3.geom.quadtree(nodes), alpha, charges), i = -1; ++i < n;)(o = nodes[i]).fixed || q.visit(repulse(o));
                        for (i = -1; ++i < n;)(o = nodes[i]).fixed ? (o.x = o.px, o.y = o.py) : (o.x -= (o.px - (o.px = o.x)) * friction, o.y -= (o.py - (o.py = o.y)) * friction);
                        event.tick({
                            type: "tick",
                            alpha: alpha
                        })
                    }, force.nodes = function(x) {
                        return arguments.length ? (nodes = x, force) : nodes
                    }, force.links = function(x) {
                        return arguments.length ? (links = x, force) : links
                    }, force.size = function(x) {
                        return arguments.length ? (size = x, force) : size
                    }, force.linkDistance = function(x) {
                        return arguments.length ? (linkDistance = "function" == typeof x ? x : +x, force) : linkDistance
                    }, force.distance = force.linkDistance, force.linkStrength = function(x) {
                        return arguments.length ? (linkStrength = "function" == typeof x ? x : +x, force) : linkStrength
                    }, force.friction = function(x) {
                        return arguments.length ? (friction = +x, force) : friction
                    }, force.charge = function(x) {
                        return arguments.length ? (charge = "function" == typeof x ? x : +x, force) : charge
                    }, force.chargeDistance = function(x) {
                        return arguments.length ? (chargeDistance2 = x * x, force) : Math.sqrt(chargeDistance2)
                    }, force.gravity = function(x) {
                        return arguments.length ? (gravity = +x, force) : gravity
                    }, force.theta = function(x) {
                        return arguments.length ? (theta2 = x * x, force) : Math.sqrt(theta2)
                    }, force.alpha = function(x) {
                        return arguments.length ? (x = +x, alpha ? x > 0 ? alpha = x : (timer.c = null, timer.t = NaN, timer = null, event.end({
                            type: "end",
                            alpha: alpha = 0
                        })) : x > 0 && (event.start({
                            type: "start",
                            alpha: alpha = x
                        }), timer = d3_timer(force.tick)), force) : alpha
                    }, force.start = function() {
                        var i, neighbors, o, n = nodes.length,
                            m = links.length,
                            w = size[0],
                            h = size[1];
                        for (i = 0; i < n; ++i)(o = nodes[i]).index = i, o.weight = 0;
                        for (i = 0; i < m; ++i) "number" == typeof(o = links[i]).source && (o.source = nodes[o.source]), "number" == typeof o.target && (o.target = nodes[o.target]), ++o.source.weight, ++o.target.weight;
                        for (i = 0; i < n; ++i) o = nodes[i], isNaN(o.x) && (o.x = position("x", w)), isNaN(o.y) && (o.y = position("y", h)), isNaN(o.px) && (o.px = o.x), isNaN(o.py) && (o.py = o.y);
                        if (distances = [], "function" == typeof linkDistance)
                            for (i = 0; i < m; ++i) distances[i] = +linkDistance.call(this, links[i], i);
                        else
                            for (i = 0; i < m; ++i) distances[i] = linkDistance;
                        if (strengths = [], "function" == typeof linkStrength)
                            for (i = 0; i < m; ++i) strengths[i] = +linkStrength.call(this, links[i], i);
                        else
                            for (i = 0; i < m; ++i) strengths[i] = linkStrength;
                        if (charges = [], "function" == typeof charge)
                            for (i = 0; i < n; ++i) charges[i] = +charge.call(this, nodes[i], i);
                        else
                            for (i = 0; i < n; ++i) charges[i] = charge;

                        function position(dimension, size) {
                            if (!neighbors) {
                                for (neighbors = new Array(n), j = 0; j < n; ++j) neighbors[j] = [];
                                for (j = 0; j < m; ++j) {
                                    var o = links[j];
                                    neighbors[o.source.index].push(o.target), neighbors[o.target.index].push(o.source)
                                }
                            }
                            for (var x, candidates = neighbors[i], j = -1, l = candidates.length; ++j < l;)
                                if (!isNaN(x = candidates[j][dimension])) return x;
                            return Math.random() * size
                        }
                        return force.resume()
                    }, force.resume = function() {
                        return force.alpha(.1)
                    }, force.stop = function() {
                        return force.alpha(0)
                    }, force.drag = function() {
                        if (drag || (drag = d3.behavior.drag().origin(d3_identity).on("dragstart.force", d3_layout_forceDragstart).on("drag.force", dragmove).on("dragend.force", d3_layout_forceDragend)), !arguments.length) return drag;
                        this.on("mouseover.force", d3_layout_forceMouseover).on("mouseout.force", d3_layout_forceMouseout).call(drag)
                    }, d3.rebind(force, event, "on")
                };
                var d3_layout_forceLinkDistance = 20,
                    d3_layout_forceLinkStrength = 1,
                    d3_layout_forceChargeDistance2 = 1 / 0;

                function d3_layout_hierarchyRebind(object, hierarchy) {
                    return d3.rebind(object, hierarchy, "sort", "children", "value"), object.nodes = object, object.links = d3_layout_hierarchyLinks, object
                }

                function d3_layout_hierarchyVisitBefore(node, callback) {
                    for (var nodes = [node]; null != (node = nodes.pop());)
                        if (callback(node), (children = node.children) && (n = children.length))
                            for (var n, children; --n >= 0;) nodes.push(children[n])
                }

                function d3_layout_hierarchyVisitAfter(node, callback) {
                    for (var nodes = [node], nodes2 = []; null != (node = nodes.pop());)
                        if (nodes2.push(node), (children = node.children) && (n = children.length))
                            for (var n, children, i = -1; ++i < n;) nodes.push(children[i]);
                    for (; null != (node = nodes2.pop());) callback(node)
                }

                function d3_layout_hierarchyChildren(d) {
                    return d.children
                }

                function d3_layout_hierarchyValue(d) {
                    return d.value
                }

                function d3_layout_hierarchySort(a, b) {
                    return b.value - a.value
                }

                function d3_layout_hierarchyLinks(nodes) {
                    return d3.merge(nodes.map(function(parent) {
                        return (parent.children || []).map(function(child) {
                            return {
                                source: parent,
                                target: child
                            }
                        })
                    }))
                }
                d3.layout.hierarchy = function() {
                    var sort = d3_layout_hierarchySort,
                        children = d3_layout_hierarchyChildren,
                        value = d3_layout_hierarchyValue;

                    function hierarchy(root) {
                        var node, stack = [root],
                            nodes = [];
                        for (root.depth = 0; null != (node = stack.pop());)
                            if (nodes.push(node), (childs = children.call(hierarchy, node, node.depth)) && (n = childs.length)) {
                                for (var n, childs, child; --n >= 0;) stack.push(child = childs[n]), child.parent = node, child.depth = node.depth + 1;
                                value && (node.value = 0), node.children = childs
                            } else value && (node.value = +value.call(hierarchy, node, node.depth) || 0), delete node.children;
                        return d3_layout_hierarchyVisitAfter(root, function(node) {
                            var childs, parent;
                            sort && (childs = node.children) && childs.sort(sort), value && (parent = node.parent) && (parent.value += node.value)
                        }), nodes
                    }
                    return hierarchy.sort = function(x) {
                        return arguments.length ? (sort = x, hierarchy) : sort
                    }, hierarchy.children = function(x) {
                        return arguments.length ? (children = x, hierarchy) : children
                    }, hierarchy.value = function(x) {
                        return arguments.length ? (value = x, hierarchy) : value
                    }, hierarchy.revalue = function(root) {
                        return value && (d3_layout_hierarchyVisitBefore(root, function(node) {
                            node.children && (node.value = 0)
                        }), d3_layout_hierarchyVisitAfter(root, function(node) {
                            var parent;
                            node.children || (node.value = +value.call(hierarchy, node, node.depth) || 0), (parent = node.parent) && (parent.value += node.value)
                        })), root
                    }, hierarchy
                }, d3.layout.partition = function() {
                    var hierarchy = d3.layout.hierarchy(),
                        size = [1, 1];

                    function partition(d, i) {
                        var nodes = hierarchy.call(this, d, i);
                        return function position(node, x, dx, dy) {
                            var children = node.children;
                            if (node.x = x, node.y = node.depth * dy, node.dx = dx, node.dy = dy, children && (n = children.length)) {
                                var n, c, d, i = -1;
                                for (dx = node.value ? dx / node.value : 0; ++i < n;) position(c = children[i], x, d = c.value * dx, dy), x += d
                            }
                        }(nodes[0], 0, size[0], size[1] / function depth(node) {
                            var children = node.children,
                                d = 0;
                            if (children && (n = children.length))
                                for (var n, i = -1; ++i < n;) d = Math.max(d, depth(children[i]));
                            return 1 + d
                        }(nodes[0])), nodes
                    }
                    return partition.size = function(x) {
                        return arguments.length ? (size = x, partition) : size
                    }, d3_layout_hierarchyRebind(partition, hierarchy)
                }, d3.layout.pie = function() {
                    var value = Number,
                        sort = d3_layout_pieSortByValue,
                        startAngle = 0,
                        endAngle = Ï,
                        padAngle = 0;

                    function pie(data) {
                        var v, n = data.length,
                            values = data.map(function(d, i) {
                                return +value.call(pie, d, i)
                            }),
                            a = +("function" == typeof startAngle ? startAngle.apply(this, arguments) : startAngle),
                            da = ("function" == typeof endAngle ? endAngle.apply(this, arguments) : endAngle) - a,
                            p = Math.min(Math.abs(da) / n, +("function" == typeof padAngle ? padAngle.apply(this, arguments) : padAngle)),
                            pa = p * (da < 0 ? -1 : 1),
                            sum = d3.sum(values),
                            k = sum ? (da - n * pa) / sum : 0,
                            index = d3.range(n),
                            arcs = [];
                        return null != sort && index.sort(sort === d3_layout_pieSortByValue ? function(i, j) {
                            return values[j] - values[i]
                        } : function(i, j) {
                            return sort(data[i], data[j])
                        }), index.forEach(function(i) {
                            arcs[i] = {
                                data: data[i],
                                value: v = values[i],
                                startAngle: a,
                                endAngle: a += v * k + pa,
                                padAngle: p
                            }
                        }), arcs
                    }
                    return pie.value = function(_) {
                        return arguments.length ? (value = _, pie) : value
                    }, pie.sort = function(_) {
                        return arguments.length ? (sort = _, pie) : sort
                    }, pie.startAngle = function(_) {
                        return arguments.length ? (startAngle = _, pie) : startAngle
                    }, pie.endAngle = function(_) {
                        return arguments.length ? (endAngle = _, pie) : endAngle
                    }, pie.padAngle = function(_) {
                        return arguments.length ? (padAngle = _, pie) : padAngle
                    }, pie
                };
                var d3_layout_pieSortByValue = {};

                function d3_layout_stackX(d) {
                    return d.x
                }

                function d3_layout_stackY(d) {
                    return d.y
                }

                function d3_layout_stackOut(d, y0, y) {
                    d.y0 = y0, d.y = y
                }
                d3.layout.stack = function() {
                    var values = d3_identity,
                        order = d3_layout_stackOrderDefault,
                        offset = d3_layout_stackOffsetZero,
                        out = d3_layout_stackOut,
                        x = d3_layout_stackX,
                        y = d3_layout_stackY;

                    function stack(data, index) {
                        if (!(n = data.length)) return data;
                        var series = data.map(function(d, i) {
                                return values.call(stack, d, i)
                            }),
                            points = series.map(function(d) {
                                return d.map(function(v, i) {
                                    return [x.call(stack, v, i), y.call(stack, v, i)]
                                })
                            }),
                            orders = order.call(stack, points, index);
                        series = d3.permute(series, orders), points = d3.permute(points, orders);
                        var n, i, j, o, offsets = offset.call(stack, points, index),
                            m = series[0].length;
                        for (j = 0; j < m; ++j)
                            for (out.call(stack, series[0][j], o = offsets[j], points[0][j][1]), i = 1; i < n; ++i) out.call(stack, series[i][j], o += points[i - 1][j][1], points[i][j][1]);
                        return data
                    }
                    return stack.values = function(x) {
                        return arguments.length ? (values = x, stack) : values
                    }, stack.order = function(x) {
                        return arguments.length ? (order = "function" == typeof x ? x : d3_layout_stackOrders.get(x) || d3_layout_stackOrderDefault, stack) : order
                    }, stack.offset = function(x) {
                        return arguments.length ? (offset = "function" == typeof x ? x : d3_layout_stackOffsets.get(x) || d3_layout_stackOffsetZero, stack) : offset
                    }, stack.x = function(z) {
                        return arguments.length ? (x = z, stack) : x
                    }, stack.y = function(z) {
                        return arguments.length ? (y = z, stack) : y
                    }, stack.out = function(z) {
                        return arguments.length ? (out = z, stack) : out
                    }, stack
                };
                var d3_layout_stackOrders = d3.map({
                        "inside-out": function(data) {
                            var i, j, n = data.length,
                                max = data.map(d3_layout_stackMaxIndex),
                                sums = data.map(d3_layout_stackReduceSum),
                                index = d3.range(n).sort(function(a, b) {
                                    return max[a] - max[b]
                                }),
                                top = 0,
                                bottom = 0,
                                tops = [],
                                bottoms = [];
                            for (i = 0; i < n; ++i) j = index[i], top < bottom ? (top += sums[j], tops.push(j)) : (bottom += sums[j], bottoms.push(j));
                            return bottoms.reverse().concat(tops)
                        },
                        reverse: function(data) {
                            return d3.range(data.length).reverse()
                        },
                        default: d3_layout_stackOrderDefault
                    }),
                    d3_layout_stackOffsets = d3.map({
                        silhouette: function(data) {
                            var i, j, o, n = data.length,
                                m = data[0].length,
                                sums = [],
                                max = 0,
                                y0 = [];
                            for (j = 0; j < m; ++j) {
                                for (i = 0, o = 0; i < n; i++) o += data[i][j][1];
                                o > max && (max = o), sums.push(o)
                            }
                            for (j = 0; j < m; ++j) y0[j] = (max - sums[j]) / 2;
                            return y0
                        },
                        wiggle: function(data) {
                            var i, j, k, s1, s2, s3, dx, o, o0, n = data.length,
                                x = data[0],
                                m = x.length,
                                y0 = [];
                            for (y0[0] = o = o0 = 0, j = 1; j < m; ++j) {
                                for (i = 0, s1 = 0; i < n; ++i) s1 += data[i][j][1];
                                for (i = 0, s2 = 0, dx = x[j][0] - x[j - 1][0]; i < n; ++i) {
                                    for (k = 0, s3 = (data[i][j][1] - data[i][j - 1][1]) / (2 * dx); k < i; ++k) s3 += (data[k][j][1] - data[k][j - 1][1]) / dx;
                                    s2 += s3 * data[i][j][1]
                                }
                                y0[j] = o -= s1 ? s2 / s1 * dx : 0, o < o0 && (o0 = o)
                            }
                            for (j = 0; j < m; ++j) y0[j] -= o0;
                            return y0
                        },
                        expand: function(data) {
                            var i, j, o, n = data.length,
                                m = data[0].length,
                                k = 1 / n,
                                y0 = [];
                            for (j = 0; j < m; ++j) {
                                for (i = 0, o = 0; i < n; i++) o += data[i][j][1];
                                if (o)
                                    for (i = 0; i < n; i++) data[i][j][1] /= o;
                                else
                                    for (i = 0; i < n; i++) data[i][j][1] = k
                            }
                            for (j = 0; j < m; ++j) y0[j] = 0;
                            return y0
                        },
                        zero: d3_layout_stackOffsetZero
                    });

                function d3_layout_stackOrderDefault(data) {
                    return d3.range(data.length)
                }

                function d3_layout_stackOffsetZero(data) {
                    for (var j = -1, m = data[0].length, y0 = []; ++j < m;) y0[j] = 0;
                    return y0
                }

                function d3_layout_stackMaxIndex(array) {
                    for (var k, i = 1, j = 0, v = array[0][1], n = array.length; i < n; ++i)(k = array[i][1]) > v && (j = i, v = k);
                    return j
                }

                function d3_layout_stackReduceSum(d) {
                    return d.reduce(d3_layout_stackSum, 0)
                }

                function d3_layout_stackSum(p, d) {
                    return p + d[1]
                }

                function d3_layout_histogramBinSturges(range, values) {
                    return d3_layout_histogramBinFixed(range, Math.ceil(Math.log(values.length) / Math.LN2 + 1))
                }

                function d3_layout_histogramBinFixed(range, n) {
                    for (var x = -1, b = +range[0], m = (range[1] - b) / n, f = []; ++x <= n;) f[x] = m * x + b;
                    return f
                }

                function d3_layout_histogramRange(values) {
                    return [d3.min(values), d3.max(values)]
                }

                function d3_layout_packSort(a, b) {
                    return a.value - b.value
                }

                function d3_layout_packInsert(a, b) {
                    var c = a._pack_next;
                    a._pack_next = b, b._pack_prev = a, b._pack_next = c, c._pack_prev = b
                }

                function d3_layout_packSplice(a, b) {
                    a._pack_next = b, b._pack_prev = a
                }

                function d3_layout_packIntersects(a, b) {
                    var dx = b.x - a.x,
                        dy = b.y - a.y,
                        dr = a.r + b.r;
                    return .999 * dr * dr > dx * dx + dy * dy
                }

                function d3_layout_packSiblings(node) {
                    if ((nodes = node.children) && (n = nodes.length)) {
                        var nodes, a, b, c, i, j, k, n, xMin = 1 / 0,
                            xMax = -1 / 0,
                            yMin = 1 / 0,
                            yMax = -1 / 0;
                        if (nodes.forEach(d3_layout_packLink), (a = nodes[0]).x = -a.r, a.y = 0, bound(a), n > 1 && ((b = nodes[1]).x = b.r, b.y = 0, bound(b), n > 2))
                            for (d3_layout_packPlace(a, b, c = nodes[2]), bound(c), d3_layout_packInsert(a, c), a._pack_prev = c, d3_layout_packInsert(c, b), b = a._pack_next, i = 3; i < n; i++) {
                                d3_layout_packPlace(a, b, c = nodes[i]);
                                var isect = 0,
                                    s1 = 1,
                                    s2 = 1;
                                for (j = b._pack_next; j !== b; j = j._pack_next, s1++)
                                    if (d3_layout_packIntersects(j, c)) {
                                        isect = 1;
                                        break
                                    } if (1 == isect)
                                    for (k = a._pack_prev; k !== j._pack_prev && !d3_layout_packIntersects(k, c); k = k._pack_prev, s2++);
                                isect ? (s1 < s2 || s1 == s2 && b.r < a.r ? d3_layout_packSplice(a, b = j) : d3_layout_packSplice(a = k, b), i--) : (d3_layout_packInsert(a, c), b = c, bound(c))
                            }
                        var cx = (xMin + xMax) / 2,
                            cy = (yMin + yMax) / 2,
                            cr = 0;
                        for (i = 0; i < n; i++)(c = nodes[i]).x -= cx, c.y -= cy, cr = Math.max(cr, c.r + Math.sqrt(c.x * c.x + c.y * c.y));
                        node.r = cr, nodes.forEach(d3_layout_packUnlink)
                    }

                    function bound(node) {
                        xMin = Math.min(node.x - node.r, xMin), xMax = Math.max(node.x + node.r, xMax), yMin = Math.min(node.y - node.r, yMin), yMax = Math.max(node.y + node.r, yMax)
                    }
                }

                function d3_layout_packLink(node) {
                    node._pack_next = node._pack_prev = node
                }

                function d3_layout_packUnlink(node) {
                    delete node._pack_next, delete node._pack_prev
                }

                function d3_layout_packPlace(a, b, c) {
                    var db = a.r + c.r,
                        dx = b.x - a.x,
                        dy = b.y - a.y;
                    if (db && (dx || dy)) {
                        var da = b.r + c.r,
                            dc = dx * dx + dy * dy,
                            x = .5 + ((db *= db) - (da *= da)) / (2 * dc),
                            y = Math.sqrt(Math.max(0, 2 * da * (db + dc) - (db -= dc) * db - da * da)) / (2 * dc);
                        c.x = a.x + x * dx + y * dy, c.y = a.y + x * dy - y * dx
                    } else c.x = a.x + db, c.y = a.y
                }

                function d3_layout_treeSeparation(a, b) {
                    return a.parent == b.parent ? 1 : 2
                }

                function d3_layout_treeLeft(v) {
                    var children = v.children;
                    return children.length ? children[0] : v.t
                }

                function d3_layout_treeRight(v) {
                    var n, children = v.children;
                    return (n = children.length) ? children[n - 1] : v.t
                }

                function d3_layout_treeMove(wm, wp, shift) {
                    var change = shift / (wp.i - wm.i);
                    wp.c -= change, wp.s += shift, wm.c += change, wp.z += shift, wp.m += shift
                }

                function d3_layout_treeAncestor(vim, v, ancestor) {
                    return vim.a.parent === v.parent ? vim.a : ancestor
                }

                function d3_layout_treemapPadNull(node) {
                    return {
                        x: node.x,
                        y: node.y,
                        dx: node.dx,
                        dy: node.dy
                    }
                }

                function d3_layout_treemapPad(node, padding) {
                    var x = node.x + padding[3],
                        y = node.y + padding[0],
                        dx = node.dx - padding[1] - padding[3],
                        dy = node.dy - padding[0] - padding[2];
                    return dx < 0 && (x += dx / 2, dx = 0), dy < 0 && (y += dy / 2, dy = 0), {
                        x: x,
                        y: y,
                        dx: dx,
                        dy: dy
                    }
                }

                function d3_scaleExtent(domain) {
                    var start = domain[0],
                        stop = domain[domain.length - 1];
                    return start < stop ? [start, stop] : [stop, start]
                }

                function d3_scaleRange(scale) {
                    return scale.rangeExtent ? scale.rangeExtent() : d3_scaleExtent(scale.range())
                }

                function d3_scale_bilinear(domain, range, uninterpolate, interpolate) {
                    var u = uninterpolate(domain[0], domain[1]),
                        i = interpolate(range[0], range[1]);
                    return function(x) {
                        return i(u(x))
                    }
                }

                function d3_scale_nice(domain, nice) {
                    var dx, i0 = 0,
                        i1 = domain.length - 1,
                        x0 = domain[i0],
                        x1 = domain[i1];
                    return x1 < x0 && (dx = i0, i0 = i1, i1 = dx, dx = x0, x0 = x1, x1 = dx), domain[i0] = nice.floor(x0), domain[i1] = nice.ceil(x1), domain
                }

                function d3_scale_niceStep(step) {
                    return step ? {
                        floor: function(x) {
                            return Math.floor(x / step) * step
                        },
                        ceil: function(x) {
                            return Math.ceil(x / step) * step
                        }
                    } : d3_scale_niceIdentity
                }
                d3.layout.histogram = function() {
                    var frequency = !0,
                        valuer = Number,
                        ranger = d3_layout_histogramRange,
                        binner = d3_layout_histogramBinSturges;

                    function histogram(data, i) {
                        for (var bin, x, bins = [], values = data.map(valuer, this), range = ranger.call(this, values, i), thresholds = binner.call(this, range, values, i), n = (i = -1, values.length), m = thresholds.length - 1, k = frequency ? 1 : 1 / n; ++i < m;)(bin = bins[i] = []).dx = thresholds[i + 1] - (bin.x = thresholds[i]), bin.y = 0;
                        if (m > 0)
                            for (i = -1; ++i < n;)(x = values[i]) >= range[0] && x <= range[1] && ((bin = bins[d3.bisect(thresholds, x, 1, m) - 1]).y += k, bin.push(data[i]));
                        return bins
                    }
                    return histogram.value = function(x) {
                        return arguments.length ? (valuer = x, histogram) : valuer
                    }, histogram.range = function(x) {
                        return arguments.length ? (ranger = d3_functor(x), histogram) : ranger
                    }, histogram.bins = function(x) {
                        return arguments.length ? (binner = "number" == typeof x ? function(range) {
                            return d3_layout_histogramBinFixed(range, x)
                        } : d3_functor(x), histogram) : binner
                    }, histogram.frequency = function(x) {
                        return arguments.length ? (frequency = !!x, histogram) : frequency
                    }, histogram
                }, d3.layout.pack = function() {
                    var radius, hierarchy = d3.layout.hierarchy().sort(d3_layout_packSort),
                        padding = 0,
                        size = [1, 1];

                    function pack(d, i) {
                        var nodes = hierarchy.call(this, d, i),
                            root = nodes[0],
                            w = size[0],
                            h = size[1],
                            r = null == radius ? Math.sqrt : "function" == typeof radius ? radius : function() {
                                return radius
                            };
                        if (root.x = root.y = 0, d3_layout_hierarchyVisitAfter(root, function(d) {
                                d.r = +r(d.value)
                            }), d3_layout_hierarchyVisitAfter(root, d3_layout_packSiblings), padding) {
                            var dr = padding * (radius ? 1 : Math.max(2 * root.r / w, 2 * root.r / h)) / 2;
                            d3_layout_hierarchyVisitAfter(root, function(d) {
                                d.r += dr
                            }), d3_layout_hierarchyVisitAfter(root, d3_layout_packSiblings), d3_layout_hierarchyVisitAfter(root, function(d) {
                                d.r -= dr
                            })
                        }
                        return function d3_layout_packTransform(node, x, y, k) {
                            var children = node.children;
                            node.x = x += k * node.x;
                            node.y = y += k * node.y;
                            node.r *= k;
                            if (children)
                                for (var i = -1, n = children.length; ++i < n;) d3_layout_packTransform(children[i], x, y, k)
                        }(root, w / 2, h / 2, radius ? 1 : 1 / Math.max(2 * root.r / w, 2 * root.r / h)), nodes
                    }
                    return pack.size = function(_) {
                        return arguments.length ? (size = _, pack) : size
                    }, pack.radius = function(_) {
                        return arguments.length ? (radius = null == _ || "function" == typeof _ ? _ : +_, pack) : radius
                    }, pack.padding = function(_) {
                        return arguments.length ? (padding = +_, pack) : padding
                    }, d3_layout_hierarchyRebind(pack, hierarchy)
                }, d3.layout.tree = function() {
                    var hierarchy = d3.layout.hierarchy().sort(null).value(null),
                        separation = d3_layout_treeSeparation,
                        size = [1, 1],
                        nodeSize = null;

                    function tree(d, i) {
                        var nodes = hierarchy.call(this, d, i),
                            root0 = nodes[0],
                            root1 = function(root0) {
                                var node1, root1 = {
                                        A: null,
                                        children: [root0]
                                    },
                                    queue = [root1];
                                for (; null != (node1 = queue.pop());)
                                    for (var child, children = node1.children, i = 0, n = children.length; i < n; ++i) queue.push((children[i] = child = {
                                        _: children[i],
                                        parent: node1,
                                        children: (child = children[i].children) && child.slice() || [],
                                        A: null,
                                        a: null,
                                        z: 0,
                                        m: 0,
                                        c: 0,
                                        s: 0,
                                        t: null,
                                        i: i
                                    }).a = child);
                                return root1.children[0]
                            }(root0);
                        if (d3_layout_hierarchyVisitAfter(root1, firstWalk), root1.parent.m = -root1.z, d3_layout_hierarchyVisitBefore(root1, secondWalk), nodeSize) d3_layout_hierarchyVisitBefore(root0, sizeNode);
                        else {
                            var left = root0,
                                right = root0,
                                bottom = root0;
                            d3_layout_hierarchyVisitBefore(root0, function(node) {
                                node.x < left.x && (left = node), node.x > right.x && (right = node), node.depth > bottom.depth && (bottom = node)
                            });
                            var tx = separation(left, right) / 2 - left.x,
                                kx = size[0] / (right.x + separation(right, left) / 2 + tx),
                                ky = size[1] / (bottom.depth || 1);
                            d3_layout_hierarchyVisitBefore(root0, function(node) {
                                node.x = (node.x + tx) * kx, node.y = node.depth * ky
                            })
                        }
                        return nodes
                    }

                    function firstWalk(v) {
                        var children = v.children,
                            siblings = v.parent.children,
                            w = v.i ? siblings[v.i - 1] : null;
                        if (children.length) {
                            ! function(v) {
                                var w, shift = 0,
                                    change = 0,
                                    children = v.children,
                                    i = children.length;
                                for (; --i >= 0;)(w = children[i]).z += shift, w.m += shift, shift += w.s + (change += w.c)
                            }(v);
                            var midpoint = (children[0].z + children[children.length - 1].z) / 2;
                            w ? (v.z = w.z + separation(v._, w._), v.m = v.z - midpoint) : v.z = midpoint
                        } else w && (v.z = w.z + separation(v._, w._));
                        v.parent.A = function(v, w, ancestor) {
                            if (w) {
                                for (var shift, vip = v, vop = v, vim = w, vom = vip.parent.children[0], sip = vip.m, sop = vop.m, sim = vim.m, som = vom.m; vim = d3_layout_treeRight(vim), vip = d3_layout_treeLeft(vip), vim && vip;) vom = d3_layout_treeLeft(vom), (vop = d3_layout_treeRight(vop)).a = v, (shift = vim.z + sim - vip.z - sip + separation(vim._, vip._)) > 0 && (d3_layout_treeMove(d3_layout_treeAncestor(vim, v, ancestor), v, shift), sip += shift, sop += shift), sim += vim.m, sip += vip.m, som += vom.m, sop += vop.m;
                                vim && !d3_layout_treeRight(vop) && (vop.t = vim, vop.m += sim - sop), vip && !d3_layout_treeLeft(vom) && (vom.t = vip, vom.m += sip - som, ancestor = v)
                            }
                            return ancestor
                        }(v, w, v.parent.A || siblings[0])
                    }

                    function secondWalk(v) {
                        v._.x = v.z + v.parent.m, v.m += v.parent.m
                    }

                    function sizeNode(node) {
                        node.x *= size[0], node.y = node.depth * size[1]
                    }
                    return tree.separation = function(x) {
                        return arguments.length ? (separation = x, tree) : separation
                    }, tree.size = function(x) {
                        return arguments.length ? (nodeSize = null == (size = x) ? sizeNode : null, tree) : nodeSize ? null : size
                    }, tree.nodeSize = function(x) {
                        return arguments.length ? (nodeSize = null == (size = x) ? null : sizeNode, tree) : nodeSize ? size : null
                    }, d3_layout_hierarchyRebind(tree, hierarchy)
                }, d3.layout.cluster = function() {
                    var hierarchy = d3.layout.hierarchy().sort(null).value(null),
                        separation = d3_layout_treeSeparation,
                        size = [1, 1],
                        nodeSize = !1;

                    function cluster(d, i) {
                        var previousNode, nodes = hierarchy.call(this, d, i),
                            root = nodes[0],
                            x = 0;
                        d3_layout_hierarchyVisitAfter(root, function(node) {
                            var children = node.children;
                            children && children.length ? (node.x = function(children) {
                                return children.reduce(function(x, child) {
                                    return x + child.x
                                }, 0) / children.length
                            }(children), node.y = function(children) {
                                return 1 + d3.max(children, function(child) {
                                    return child.y
                                })
                            }(children)) : (node.x = previousNode ? x += separation(node, previousNode) : 0, node.y = 0, previousNode = node)
                        });
                        var left = function d3_layout_clusterLeft(node) {
                                var children = node.children;
                                return children && children.length ? d3_layout_clusterLeft(children[0]) : node
                            }(root),
                            right = function d3_layout_clusterRight(node) {
                                var n, children = node.children;
                                return children && (n = children.length) ? d3_layout_clusterRight(children[n - 1]) : node
                            }(root),
                            x0 = left.x - separation(left, right) / 2,
                            x1 = right.x + separation(right, left) / 2;
                        return d3_layout_hierarchyVisitAfter(root, nodeSize ? function(node) {
                            node.x = (node.x - root.x) * size[0], node.y = (root.y - node.y) * size[1]
                        } : function(node) {
                            node.x = (node.x - x0) / (x1 - x0) * size[0], node.y = (1 - (root.y ? node.y / root.y : 1)) * size[1]
                        }), nodes
                    }
                    return cluster.separation = function(x) {
                        return arguments.length ? (separation = x, cluster) : separation
                    }, cluster.size = function(x) {
                        return arguments.length ? (nodeSize = null == (size = x), cluster) : nodeSize ? null : size
                    }, cluster.nodeSize = function(x) {
                        return arguments.length ? (nodeSize = null != (size = x), cluster) : nodeSize ? size : null
                    }, d3_layout_hierarchyRebind(cluster, hierarchy)
                }, d3.layout.treemap = function() {
                    var stickies, hierarchy = d3.layout.hierarchy(),
                        round = Math.round,
                        size = [1, 1],
                        padding = null,
                        pad = d3_layout_treemapPadNull,
                        sticky = !1,
                        mode = "squarify",
                        ratio = .5 * (1 + Math.sqrt(5));

                    function scale(children, k) {
                        for (var child, area, i = -1, n = children.length; ++i < n;) area = (child = children[i]).value * (k < 0 ? 0 : k), child.area = isNaN(area) || area <= 0 ? 0 : area
                    }

                    function squarify(node) {
                        var children = node.children;
                        if (children && children.length) {
                            var child, score, n, rect = pad(node),
                                row = [],
                                remaining = children.slice(),
                                best = 1 / 0,
                                u = "slice" === mode ? rect.dx : "dice" === mode ? rect.dy : "slice-dice" === mode ? 1 & node.depth ? rect.dy : rect.dx : Math.min(rect.dx, rect.dy);
                            for (scale(remaining, rect.dx * rect.dy / node.value), row.area = 0;
                                (n = remaining.length) > 0;) row.push(child = remaining[n - 1]), row.area += child.area, "squarify" !== mode || (score = worst(row, u)) <= best ? (remaining.pop(), best = score) : (row.area -= row.pop().area, position(row, u, rect, !1), u = Math.min(rect.dx, rect.dy), row.length = row.area = 0, best = 1 / 0);
                            row.length && (position(row, u, rect, !0), row.length = row.area = 0), children.forEach(squarify)
                        }
                    }

                    function stickify(node) {
                        var children = node.children;
                        if (children && children.length) {
                            var child, rect = pad(node),
                                remaining = children.slice(),
                                row = [];
                            for (scale(remaining, rect.dx * rect.dy / node.value), row.area = 0; child = remaining.pop();) row.push(child), row.area += child.area, null != child.z && (position(row, child.z ? rect.dx : rect.dy, rect, !remaining.length), row.length = row.area = 0);
                            children.forEach(stickify)
                        }
                    }

                    function worst(row, u) {
                        for (var r, s = row.area, rmax = 0, rmin = 1 / 0, i = -1, n = row.length; ++i < n;)(r = row[i].area) && (r < rmin && (rmin = r), r > rmax && (rmax = r));
                        return u *= u, (s *= s) ? Math.max(u * rmax * ratio / s, s / (u * rmin * ratio)) : 1 / 0
                    }

                    function position(row, u, rect, flush) {
                        var o, i = -1,
                            n = row.length,
                            x = rect.x,
                            y = rect.y,
                            v = u ? round(row.area / u) : 0;
                        if (u == rect.dx) {
                            for ((flush || v > rect.dy) && (v = rect.dy); ++i < n;)(o = row[i]).x = x, o.y = y, o.dy = v, x += o.dx = Math.min(rect.x + rect.dx - x, v ? round(o.area / v) : 0);
                            o.z = !0, o.dx += rect.x + rect.dx - x, rect.y += v, rect.dy -= v
                        } else {
                            for ((flush || v > rect.dx) && (v = rect.dx); ++i < n;)(o = row[i]).x = x, o.y = y, o.dx = v, y += o.dy = Math.min(rect.y + rect.dy - y, v ? round(o.area / v) : 0);
                            o.z = !1, o.dy += rect.y + rect.dy - y, rect.x += v, rect.dx -= v
                        }
                    }

                    function treemap(d) {
                        var nodes = stickies || hierarchy(d),
                            root = nodes[0];
                        return root.x = root.y = 0, root.value ? (root.dx = size[0], root.dy = size[1]) : root.dx = root.dy = 0, stickies && hierarchy.revalue(root), scale([root], root.dx * root.dy / root.value), (stickies ? stickify : squarify)(root), sticky && (stickies = nodes), nodes
                    }
                    return treemap.size = function(x) {
                        return arguments.length ? (size = x, treemap) : size
                    }, treemap.padding = function(x) {
                        if (!arguments.length) return padding;

                        function padConstant(node) {
                            return d3_layout_treemapPad(node, x)
                        }
                        var type;
                        return pad = null == (padding = x) ? d3_layout_treemapPadNull : "function" == (type = typeof x) ? function(node) {
                            var p = x.call(treemap, node, node.depth);
                            return null == p ? d3_layout_treemapPadNull(node) : d3_layout_treemapPad(node, "number" == typeof p ? [p, p, p, p] : p)
                        } : "number" === type ? (x = [x, x, x, x], padConstant) : padConstant, treemap
                    }, treemap.round = function(x) {
                        return arguments.length ? (round = x ? Math.round : Number, treemap) : round != Number
                    }, treemap.sticky = function(x) {
                        return arguments.length ? (sticky = x, stickies = null, treemap) : sticky
                    }, treemap.ratio = function(x) {
                        return arguments.length ? (ratio = x, treemap) : ratio
                    }, treemap.mode = function(x) {
                        return arguments.length ? (mode = x + "", treemap) : mode
                    }, d3_layout_hierarchyRebind(treemap, hierarchy)
                }, d3.random = {
                    normal: function(Âµ, Ï) {
                        var n = arguments.length;
                        return n < 2 && (Ï = 1), n < 1 && (Âµ = 0),
                            function() {
                                var x, y, r;
                                do {
                                    r = (x = 2 * Math.random() - 1) * x + (y = 2 * Math.random() - 1) * y
                                } while (!r || r > 1);
                                return Âµ + Ï * x * Math.sqrt(-2 * Math.log(r) / r)
                            }
                    },
                    logNormal: function() {
                        var random = d3.random.normal.apply(d3, arguments);
                        return function() {
                            return Math.exp(random())
                        }
                    },
                    bates: function(m) {
                        var random = d3.random.irwinHall(m);
                        return function() {
                            return random() / m
                        }
                    },
                    irwinHall: function(m) {
                        return function() {
                            for (var s = 0, j = 0; j < m; j++) s += Math.random();
                            return s
                        }
                    }
                }, d3.scale = {};
                var d3_scale_niceIdentity = {
                    floor: d3_identity,
                    ceil: d3_identity
                };

                function d3_scale_polylinear(domain, range, uninterpolate, interpolate) {
                    var u = [],
                        i = [],
                        j = 0,
                        k = Math.min(domain.length, range.length) - 1;
                    for (domain[k] < domain[0] && (domain = domain.slice().reverse(), range = range.slice().reverse()); ++j <= k;) u.push(uninterpolate(domain[j - 1], domain[j])), i.push(interpolate(range[j - 1], range[j]));
                    return function(x) {
                        var j = d3.bisect(domain, x, 1, k) - 1;
                        return i[j](u[j](x))
                    }
                }

                function d3_scale_linearRebind(scale, linear) {
                    return d3.rebind(scale, linear, "range", "rangeRound", "interpolate", "clamp")
                }

                function d3_scale_linearNice(domain, m) {
                    return d3_scale_nice(domain, d3_scale_niceStep(d3_scale_linearTickRange(domain, m)[2])), d3_scale_nice(domain, d3_scale_niceStep(d3_scale_linearTickRange(domain, m)[2])), domain
                }

                function d3_scale_linearTickRange(domain, m) {
                    null == m && (m = 10);
                    var extent = d3_scaleExtent(domain),
                        span = extent[1] - extent[0],
                        step = Math.pow(10, Math.floor(Math.log(span / m) / Math.LN10)),
                        err = m / span * step;
                    return err <= .15 ? step *= 10 : err <= .35 ? step *= 5 : err <= .75 && (step *= 2), extent[0] = Math.ceil(extent[0] / step) * step, extent[1] = Math.floor(extent[1] / step) * step + .5 * step, extent[2] = step, extent
                }

                function d3_scale_linearTicks(domain, m) {
                    return d3.range.apply(d3, d3_scale_linearTickRange(domain, m))
                }

                function d3_scale_linearTickFormat(domain, m, format) {
                    var range = d3_scale_linearTickRange(domain, m);
                    if (format) {
                        var match = d3_format_re.exec(format);
                        if (match.shift(), "s" === match[8]) {
                            var prefix = d3.formatPrefix(Math.max(abs(range[0]), abs(range[1])));
                            return match[7] || (match[7] = "." + d3_scale_linearPrecision(prefix.scale(range[2]))), match[8] = "f", format = d3.format(match.join("")),
                                function(d) {
                                    return format(prefix.scale(d)) + prefix.symbol
                                }
                        }
                        match[7] || (match[7] = "." + function(type, range) {
                            var p = d3_scale_linearPrecision(range[2]);
                            return type in d3_scale_linearFormatSignificant ? Math.abs(p - d3_scale_linearPrecision(Math.max(abs(range[0]), abs(range[1])))) + +("e" !== type) : p - 2 * ("%" === type)
                        }(match[8], range)), format = match.join("")
                    } else format = ",." + d3_scale_linearPrecision(range[2]) + "f";
                    return d3.format(format)
                }
                d3.scale.linear = function() {
                    return function d3_scale_linear(domain, range, interpolate, clamp) {
                        var output, input;

                        function rescale() {
                            var linear = Math.min(domain.length, range.length) > 2 ? d3_scale_polylinear : d3_scale_bilinear,
                                uninterpolate = clamp ? d3_uninterpolateClamp : d3_uninterpolateNumber;
                            return output = linear(domain, range, uninterpolate, interpolate), input = linear(range, domain, uninterpolate, d3_interpolate), scale
                        }

                        function scale(x) {
                            return output(x)
                        }
                        scale.invert = function(y) {
                            return input(y)
                        };
                        scale.domain = function(x) {
                            return arguments.length ? (domain = x.map(Number), rescale()) : domain
                        };
                        scale.range = function(x) {
                            return arguments.length ? (range = x, rescale()) : range
                        };
                        scale.rangeRound = function(x) {
                            return scale.range(x).interpolate(d3_interpolateRound)
                        };
                        scale.clamp = function(x) {
                            return arguments.length ? (clamp = x, rescale()) : clamp
                        };
                        scale.interpolate = function(x) {
                            return arguments.length ? (interpolate = x, rescale()) : interpolate
                        };
                        scale.ticks = function(m) {
                            return d3_scale_linearTicks(domain, m)
                        };
                        scale.tickFormat = function(m, format) {
                            return d3_scale_linearTickFormat(domain, m, format)
                        };
                        scale.nice = function(m) {
                            return d3_scale_linearNice(domain, m), rescale()
                        };
                        scale.copy = function() {
                            return d3_scale_linear(domain, range, interpolate, clamp)
                        };
                        return rescale()
                    }([0, 1], [0, 1], d3_interpolate, !1)
                };
                var d3_scale_linearFormatSignificant = {
                    s: 1,
                    g: 1,
                    p: 1,
                    r: 1,
                    e: 1
                };

                function d3_scale_linearPrecision(value) {
                    return -Math.floor(Math.log(value) / Math.LN10 + .01)
                }
                d3.scale.log = function() {
                    return function d3_scale_log(linear, base, positive, domain) {
                        function log(x) {
                            return (positive ? Math.log(x < 0 ? 0 : x) : -Math.log(x > 0 ? 0 : -x)) / Math.log(base)
                        }

                        function pow(x) {
                            return positive ? Math.pow(base, x) : -Math.pow(base, -x)
                        }

                        function scale(x) {
                            return linear(log(x))
                        }
                        scale.invert = function(x) {
                            return pow(linear.invert(x))
                        };
                        scale.domain = function(x) {
                            return arguments.length ? (positive = x[0] >= 0, linear.domain((domain = x.map(Number)).map(log)), scale) : domain
                        };
                        scale.base = function(_) {
                            return arguments.length ? (base = +_, linear.domain(domain.map(log)), scale) : base
                        };
                        scale.nice = function() {
                            var niced = d3_scale_nice(domain.map(log), positive ? Math : d3_scale_logNiceNegative);
                            return linear.domain(niced), domain = niced.map(pow), scale
                        };
                        scale.ticks = function() {
                            var extent = d3_scaleExtent(domain),
                                ticks = [],
                                u = extent[0],
                                v = extent[1],
                                i = Math.floor(log(u)),
                                j = Math.ceil(log(v)),
                                n = base % 1 ? 2 : base;
                            if (isFinite(j - i)) {
                                if (positive) {
                                    for (; i < j; i++)
                                        for (var k = 1; k < n; k++) ticks.push(pow(i) * k);
                                    ticks.push(pow(i))
                                } else
                                    for (ticks.push(pow(i)); i++ < j;)
                                        for (var k = n - 1; k > 0; k--) ticks.push(pow(i) * k);
                                for (i = 0; ticks[i] < u; i++);
                                for (j = ticks.length; ticks[j - 1] > v; j--);
                                ticks = ticks.slice(i, j)
                            }
                            return ticks
                        };
                        scale.tickFormat = function(n, format) {
                            if (!arguments.length) return d3_scale_logFormat;
                            arguments.length < 2 ? format = d3_scale_logFormat : "function" != typeof format && (format = d3.format(format));
                            var k = Math.max(1, base * n / scale.ticks().length);
                            return function(d) {
                                var i = d / pow(Math.round(log(d)));
                                return i * base < base - .5 && (i *= base), i <= k ? format(d) : ""
                            }
                        };
                        scale.copy = function() {
                            return d3_scale_log(linear.copy(), base, positive, domain)
                        };
                        return d3_scale_linearRebind(scale, linear)
                    }(d3.scale.linear().domain([0, 1]), 10, !0, [1, 10])
                };
                var d3_scale_logFormat = d3.format(".0e"),
                    d3_scale_logNiceNegative = {
                        floor: function(x) {
                            return -Math.ceil(-x)
                        },
                        ceil: function(x) {
                            return -Math.floor(-x)
                        }
                    };

                function d3_scale_powPow(e) {
                    return function(x) {
                        return x < 0 ? -Math.pow(-x, e) : Math.pow(x, e)
                    }
                }
                d3.scale.pow = function() {
                    return function d3_scale_pow(linear, exponent, domain) {
                        var powp = d3_scale_powPow(exponent),
                            powb = d3_scale_powPow(1 / exponent);

                        function scale(x) {
                            return linear(powp(x))
                        }
                        scale.invert = function(x) {
                            return powb(linear.invert(x))
                        };
                        scale.domain = function(x) {
                            return arguments.length ? (linear.domain((domain = x.map(Number)).map(powp)), scale) : domain
                        };
                        scale.ticks = function(m) {
                            return d3_scale_linearTicks(domain, m)
                        };
                        scale.tickFormat = function(m, format) {
                            return d3_scale_linearTickFormat(domain, m, format)
                        };
                        scale.nice = function(m) {
                            return scale.domain(d3_scale_linearNice(domain, m))
                        };
                        scale.exponent = function(x) {
                            return arguments.length ? (powp = d3_scale_powPow(exponent = x), powb = d3_scale_powPow(1 / exponent), linear.domain(domain.map(powp)), scale) : exponent
                        };
                        scale.copy = function() {
                            return d3_scale_pow(linear.copy(), exponent, domain)
                        };
                        return d3_scale_linearRebind(scale, linear)
                    }(d3.scale.linear(), 1, [0, 1])
                }, d3.scale.sqrt = function() {
                    return d3.scale.pow().exponent(.5)
                }, d3.scale.ordinal = function() {
                    return function d3_scale_ordinal(domain, ranger) {
                        var index, range, rangeBand;

                        function scale(x) {
                            return range[((index.get(x) || ("range" === ranger.t ? index.set(x, domain.push(x)) : NaN)) - 1) % range.length]
                        }

                        function steps(start, step) {
                            return d3.range(domain.length).map(function(i) {
                                return start + step * i
                            })
                        }
                        scale.domain = function(x) {
                            if (!arguments.length) return domain;
                            domain = [], index = new d3_Map;
                            for (var xi, i = -1, n = x.length; ++i < n;) index.has(xi = x[i]) || index.set(xi, domain.push(xi));
                            return scale[ranger.t].apply(scale, ranger.a)
                        };
                        scale.range = function(x) {
                            return arguments.length ? (range = x, rangeBand = 0, ranger = {
                                t: "range",
                                a: arguments
                            }, scale) : range
                        };
                        scale.rangePoints = function(x, padding) {
                            arguments.length < 2 && (padding = 0);
                            var start = x[0],
                                stop = x[1],
                                step = domain.length < 2 ? (start = (start + stop) / 2, 0) : (stop - start) / (domain.length - 1 + padding);
                            return range = steps(start + step * padding / 2, step), rangeBand = 0, ranger = {
                                t: "rangePoints",
                                a: arguments
                            }, scale
                        };
                        scale.rangeRoundPoints = function(x, padding) {
                            arguments.length < 2 && (padding = 0);
                            var start = x[0],
                                stop = x[1],
                                step = domain.length < 2 ? (start = stop = Math.round((start + stop) / 2), 0) : (stop - start) / (domain.length - 1 + padding) | 0;
                            return range = steps(start + Math.round(step * padding / 2 + (stop - start - (domain.length - 1 + padding) * step) / 2), step), rangeBand = 0, ranger = {
                                t: "rangeRoundPoints",
                                a: arguments
                            }, scale
                        };
                        scale.rangeBands = function(x, padding, outerPadding) {
                            arguments.length < 2 && (padding = 0), arguments.length < 3 && (outerPadding = padding);
                            var reverse = x[1] < x[0],
                                start = x[reverse - 0],
                                stop = x[1 - reverse],
                                step = (stop - start) / (domain.length - padding + 2 * outerPadding);
                            return range = steps(start + step * outerPadding, step), reverse && range.reverse(), rangeBand = step * (1 - padding), ranger = {
                                t: "rangeBands",
                                a: arguments
                            }, scale
                        };
                        scale.rangeRoundBands = function(x, padding, outerPadding) {
                            arguments.length < 2 && (padding = 0), arguments.length < 3 && (outerPadding = padding);
                            var reverse = x[1] < x[0],
                                start = x[reverse - 0],
                                stop = x[1 - reverse],
                                step = Math.floor((stop - start) / (domain.length - padding + 2 * outerPadding));
                            return range = steps(start + Math.round((stop - start - (domain.length - padding) * step) / 2), step), reverse && range.reverse(), rangeBand = Math.round(step * (1 - padding)), ranger = {
                                t: "rangeRoundBands",
                                a: arguments
                            }, scale
                        };
                        scale.rangeBand = function() {
                            return rangeBand
                        };
                        scale.rangeExtent = function() {
                            return d3_scaleExtent(ranger.a[0])
                        };
                        scale.copy = function() {
                            return d3_scale_ordinal(domain, ranger)
                        };
                        return scale.domain(domain)
                    }([], {
                        t: "range",
                        a: [
                            []
                        ]
                    })
                }, d3.scale.category10 = function() {
                    return d3.scale.ordinal().range(d3_category10)
                }, d3.scale.category20 = function() {
                    return d3.scale.ordinal().range(d3_category20)
                }, d3.scale.category20b = function() {
                    return d3.scale.ordinal().range(d3_category20b)
                }, d3.scale.category20c = function() {
                    return d3.scale.ordinal().range(d3_category20c)
                };
                var d3_category10 = [2062260, 16744206, 2924588, 14034728, 9725885, 9197131, 14907330, 8355711, 12369186, 1556175].map(d3_rgbString),
                    d3_category20 = [2062260, 11454440, 16744206, 16759672, 2924588, 10018698, 14034728, 16750742, 9725885, 12955861, 9197131, 12885140, 14907330, 16234194, 8355711, 13092807, 12369186, 14408589, 1556175, 10410725].map(d3_rgbString),
                    d3_category20b = [3750777, 5395619, 7040719, 10264286, 6519097, 9216594, 11915115, 13556636, 9202993, 12426809, 15186514, 15190932, 8666169, 11356490, 14049643, 15177372, 8077683, 10834324, 13528509, 14589654].map(d3_rgbString),
                    d3_category20c = [3244733, 7057110, 10406625, 13032431, 15095053, 16616764, 16625259, 16634018, 3253076, 7652470, 10607003, 13101504, 7695281, 10394312, 12369372, 14342891, 6513507, 9868950, 12434877, 14277081].map(d3_rgbString);

                function d3_zero() {
                    return 0
                }
                d3.scale.quantile = function() {
                    return function d3_scale_quantile(domain, range) {
                        var thresholds;

                        function rescale() {
                            var k = 0,
                                q = range.length;
                            for (thresholds = []; ++k < q;) thresholds[k - 1] = d3.quantile(domain, k / q);
                            return scale
                        }

                        function scale(x) {
                            if (!isNaN(x = +x)) return range[d3.bisect(thresholds, x)]
                        }
                        scale.domain = function(x) {
                            return arguments.length ? (domain = x.map(d3_number).filter(d3_numeric).sort(d3_ascending), rescale()) : domain
                        };
                        scale.range = function(x) {
                            return arguments.length ? (range = x, rescale()) : range
                        };
                        scale.quantiles = function() {
                            return thresholds
                        };
                        scale.invertExtent = function(y) {
                            return (y = range.indexOf(y)) < 0 ? [NaN, NaN] : [y > 0 ? thresholds[y - 1] : domain[0], y < thresholds.length ? thresholds[y] : domain[domain.length - 1]]
                        };
                        scale.copy = function() {
                            return d3_scale_quantile(domain, range)
                        };
                        return rescale()
                    }([], [])
                }, d3.scale.quantize = function() {
                    return function d3_scale_quantize(x0, x1, range) {
                        var kx, i;

                        function scale(x) {
                            return range[Math.max(0, Math.min(i, Math.floor(kx * (x - x0))))]
                        }

                        function rescale() {
                            return kx = range.length / (x1 - x0), i = range.length - 1, scale
                        }
                        scale.domain = function(x) {
                            return arguments.length ? (x0 = +x[0], x1 = +x[x.length - 1], rescale()) : [x0, x1]
                        };
                        scale.range = function(x) {
                            return arguments.length ? (range = x, rescale()) : range
                        };
                        scale.invertExtent = function(y) {
                            return [y = (y = range.indexOf(y)) < 0 ? NaN : y / kx + x0, y + 1 / kx]
                        };
                        scale.copy = function() {
                            return d3_scale_quantize(x0, x1, range)
                        };
                        return rescale()
                    }(0, 1, [0, 1])
                }, d3.scale.threshold = function() {
                    return function d3_scale_threshold(domain, range) {
                        function scale(x) {
                            if (x <= x) return range[d3.bisect(domain, x)]
                        }
                        scale.domain = function(_) {
                            return arguments.length ? (domain = _, scale) : domain
                        };
                        scale.range = function(_) {
                            return arguments.length ? (range = _, scale) : range
                        };
                        scale.invertExtent = function(y) {
                            return y = range.indexOf(y), [domain[y - 1], domain[y]]
                        };
                        scale.copy = function() {
                            return d3_scale_threshold(domain, range)
                        };
                        return scale
                    }([.5], [0, 1])
                }, d3.scale.identity = function() {
                    return function d3_scale_identity(domain) {
                        function identity(x) {
                            return +x
                        }
                        identity.invert = identity;
                        identity.domain = identity.range = function(x) {
                            return arguments.length ? (domain = x.map(identity), identity) : domain
                        };
                        identity.ticks = function(m) {
                            return d3_scale_linearTicks(domain, m)
                        };
                        identity.tickFormat = function(m, format) {
                            return d3_scale_linearTickFormat(domain, m, format)
                        };
                        identity.copy = function() {
                            return d3_scale_identity(domain)
                        };
                        return identity
                    }([0, 1])
                }, d3.svg = {}, d3.svg.arc = function() {
                    var innerRadius = d3_svg_arcInnerRadius,
                        outerRadius = d3_svg_arcOuterRadius,
                        cornerRadius = d3_zero,
                        padRadius = d3_svg_arcAuto,
                        startAngle = d3_svg_arcStartAngle,
                        endAngle = d3_svg_arcEndAngle,
                        padAngle = d3_svg_arcPadAngle;

                    function arc() {
                        var r0 = Math.max(0, +innerRadius.apply(this, arguments)),
                            r1 = Math.max(0, +outerRadius.apply(this, arguments)),
                            a0 = startAngle.apply(this, arguments) - halfÏ,
                            a1 = endAngle.apply(this, arguments) - halfÏ,
                            da = Math.abs(a1 - a0),
                            cw = a0 > a1 ? 0 : 1;
                        if (r1 < r0 && (rc = r1, r1 = r0, r0 = rc), da >= ÏÎµ) return circleSegment(r1, cw) + (r0 ? circleSegment(r0, 1 - cw) : "") + "Z";
                        var rc, cr, rp, ap, x0, y0, x1, y1, x2, y2, x3, y3, p0 = 0,
                            p1 = 0,
                            path = [];
                        if ((ap = (+padAngle.apply(this, arguments) || 0) / 2) && (rp = padRadius === d3_svg_arcAuto ? Math.sqrt(r0 * r0 + r1 * r1) : +padRadius.apply(this, arguments), cw || (p1 *= -1), r1 && (p1 = d3_asin(rp / r1 * Math.sin(ap))), r0 && (p0 = d3_asin(rp / r0 * Math.sin(ap)))), r1) {
                            x0 = r1 * Math.cos(a0 + p1), y0 = r1 * Math.sin(a0 + p1), x1 = r1 * Math.cos(a1 - p1), y1 = r1 * Math.sin(a1 - p1);
                            var l1 = Math.abs(a1 - a0 - 2 * p1) <= Ï ? 0 : 1;
                            if (p1 && d3_svg_arcSweep(x0, y0, x1, y1) === cw ^ l1) {
                                var h1 = (a0 + a1) / 2;
                                x0 = r1 * Math.cos(h1), y0 = r1 * Math.sin(h1), x1 = y1 = null
                            }
                        } else x0 = y0 = 0;
                        if (r0) {
                            x2 = r0 * Math.cos(a1 - p0), y2 = r0 * Math.sin(a1 - p0), x3 = r0 * Math.cos(a0 + p0), y3 = r0 * Math.sin(a0 + p0);
                            var l0 = Math.abs(a0 - a1 + 2 * p0) <= Ï ? 0 : 1;
                            if (p0 && d3_svg_arcSweep(x2, y2, x3, y3) === 1 - cw ^ l0) {
                                var h0 = (a0 + a1) / 2;
                                x2 = r0 * Math.cos(h0), y2 = r0 * Math.sin(h0), x3 = y3 = null
                            }
                        } else x2 = y2 = 0;
                        if (da > Îµ && (rc = Math.min(Math.abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments))) > .001) {
                            cr = r0 < r1 ^ cw ? 0 : 1;
                            var rc1 = rc,
                                rc0 = rc;
                            if (da < Ï) {
                                var oc = null == x3 ? [x2, y2] : null == x1 ? [x0, y0] : d3_geom_polygonIntersect([x0, y0], [x3, y3], [x1, y1], [x2, y2]),
                                    ax = x0 - oc[0],
                                    ay = y0 - oc[1],
                                    bx = x1 - oc[0],
                                    by = y1 - oc[1],
                                    kc = 1 / Math.sin(Math.acos((ax * bx + ay * by) / (Math.sqrt(ax * ax + ay * ay) * Math.sqrt(bx * bx + by * by))) / 2),
                                    lc = Math.sqrt(oc[0] * oc[0] + oc[1] * oc[1]);
                                rc0 = Math.min(rc, (r0 - lc) / (kc - 1)), rc1 = Math.min(rc, (r1 - lc) / (kc + 1))
                            }
                            if (null != x1) {
                                var t30 = d3_svg_arcCornerTangents(null == x3 ? [x2, y2] : [x3, y3], [x0, y0], r1, rc1, cw),
                                    t12 = d3_svg_arcCornerTangents([x1, y1], [x2, y2], r1, rc1, cw);
                                rc === rc1 ? path.push("M", t30[0], "A", rc1, ",", rc1, " 0 0,", cr, " ", t30[1], "A", r1, ",", r1, " 0 ", 1 - cw ^ d3_svg_arcSweep(t30[1][0], t30[1][1], t12[1][0], t12[1][1]), ",", cw, " ", t12[1], "A", rc1, ",", rc1, " 0 0,", cr, " ", t12[0]) : path.push("M", t30[0], "A", rc1, ",", rc1, " 0 1,", cr, " ", t12[0])
                            } else path.push("M", x0, ",", y0);
                            if (null != x3) {
                                var t03 = d3_svg_arcCornerTangents([x0, y0], [x3, y3], r0, -rc0, cw),
                                    t21 = d3_svg_arcCornerTangents([x2, y2], null == x1 ? [x0, y0] : [x1, y1], r0, -rc0, cw);
                                rc === rc0 ? path.push("L", t21[0], "A", rc0, ",", rc0, " 0 0,", cr, " ", t21[1], "A", r0, ",", r0, " 0 ", cw ^ d3_svg_arcSweep(t21[1][0], t21[1][1], t03[1][0], t03[1][1]), ",", 1 - cw, " ", t03[1], "A", rc0, ",", rc0, " 0 0,", cr, " ", t03[0]) : path.push("L", t21[0], "A", rc0, ",", rc0, " 0 0,", cr, " ", t03[0])
                            } else path.push("L", x2, ",", y2)
                        } else path.push("M", x0, ",", y0), null != x1 && path.push("A", r1, ",", r1, " 0 ", l1, ",", cw, " ", x1, ",", y1), path.push("L", x2, ",", y2), null != x3 && path.push("A", r0, ",", r0, " 0 ", l0, ",", 1 - cw, " ", x3, ",", y3);
                        return path.push("Z"), path.join("")
                    }

                    function circleSegment(r1, cw) {
                        return "M0," + r1 + "A" + r1 + "," + r1 + " 0 1," + cw + " 0," + -r1 + "A" + r1 + "," + r1 + " 0 1," + cw + " 0," + r1
                    }
                    return arc.innerRadius = function(v) {
                        return arguments.length ? (innerRadius = d3_functor(v), arc) : innerRadius
                    }, arc.outerRadius = function(v) {
                        return arguments.length ? (outerRadius = d3_functor(v), arc) : outerRadius
                    }, arc.cornerRadius = function(v) {
                        return arguments.length ? (cornerRadius = d3_functor(v), arc) : cornerRadius
                    }, arc.padRadius = function(v) {
                        return arguments.length ? (padRadius = v == d3_svg_arcAuto ? d3_svg_arcAuto : d3_functor(v), arc) : padRadius
                    }, arc.startAngle = function(v) {
                        return arguments.length ? (startAngle = d3_functor(v), arc) : startAngle
                    }, arc.endAngle = function(v) {
                        return arguments.length ? (endAngle = d3_functor(v), arc) : endAngle
                    }, arc.padAngle = function(v) {
                        return arguments.length ? (padAngle = d3_functor(v), arc) : padAngle
                    }, arc.centroid = function() {
                        var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,
                            a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - halfÏ;
                        return [Math.cos(a) * r, Math.sin(a) * r]
                    }, arc
                };
                var d3_svg_arcAuto = "auto";

                function d3_svg_arcInnerRadius(d) {
                    return d.innerRadius
                }

                function d3_svg_arcOuterRadius(d) {
                    return d.outerRadius
                }

                function d3_svg_arcStartAngle(d) {
                    return d.startAngle
                }

                function d3_svg_arcEndAngle(d) {
                    return d.endAngle
                }

                function d3_svg_arcPadAngle(d) {
                    return d && d.padAngle
                }

                function d3_svg_arcSweep(x0, y0, x1, y1) {
                    return (x0 - x1) * y0 - (y0 - y1) * x0 > 0 ? 0 : 1
                }

                function d3_svg_arcCornerTangents(p0, p1, r1, rc, cw) {
                    var x01 = p0[0] - p1[0],
                        y01 = p0[1] - p1[1],
                        lo = (cw ? rc : -rc) / Math.sqrt(x01 * x01 + y01 * y01),
                        ox = lo * y01,
                        oy = -lo * x01,
                        x1 = p0[0] + ox,
                        y1 = p0[1] + oy,
                        x2 = p1[0] + ox,
                        y2 = p1[1] + oy,
                        x3 = (x1 + x2) / 2,
                        y3 = (y1 + y2) / 2,
                        dx = x2 - x1,
                        dy = y2 - y1,
                        d2 = dx * dx + dy * dy,
                        r = r1 - rc,
                        D = x1 * y2 - x2 * y1,
                        d = (dy < 0 ? -1 : 1) * Math.sqrt(Math.max(0, r * r * d2 - D * D)),
                        cx0 = (D * dy - dx * d) / d2,
                        cy0 = (-D * dx - dy * d) / d2,
                        cx1 = (D * dy + dx * d) / d2,
                        cy1 = (-D * dx + dy * d) / d2,
                        dx0 = cx0 - x3,
                        dy0 = cy0 - y3,
                        dx1 = cx1 - x3,
                        dy1 = cy1 - y3;
                    return dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1 && (cx0 = cx1, cy0 = cy1), [
                        [cx0 - ox, cy0 - oy],
                        [cx0 * r1 / r, cy0 * r1 / r]
                    ]
                }

                function d3_svg_line(projection) {
                    var x = d3_geom_pointX,
                        y = d3_geom_pointY,
                        defined = d3_true,
                        interpolate = d3_svg_lineLinear,
                        interpolateKey = interpolate.key,
                        tension = .7;

                    function line(data) {
                        var d, segments = [],
                            points = [],
                            i = -1,
                            n = data.length,
                            fx = d3_functor(x),
                            fy = d3_functor(y);

                        function segment() {
                            segments.push("M", interpolate(projection(points), tension))
                        }
                        for (; ++i < n;) defined.call(this, d = data[i], i) ? points.push([+fx.call(this, d, i), +fy.call(this, d, i)]) : points.length && (segment(), points = []);
                        return points.length && segment(), segments.length ? segments.join("") : null
                    }
                    return line.x = function(_) {
                        return arguments.length ? (x = _, line) : x
                    }, line.y = function(_) {
                        return arguments.length ? (y = _, line) : y
                    }, line.defined = function(_) {
                        return arguments.length ? (defined = _, line) : defined
                    }, line.interpolate = function(_) {
                        return arguments.length ? (interpolateKey = "function" == typeof _ ? interpolate = _ : (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key, line) : interpolateKey
                    }, line.tension = function(_) {
                        return arguments.length ? (tension = _, line) : tension
                    }, line
                }
                d3.svg.line = function() {
                    return d3_svg_line(d3_identity)
                };
                var d3_svg_lineInterpolators = d3.map({
                    linear: d3_svg_lineLinear,
                    "linear-closed": d3_svg_lineLinearClosed,
                    step: function(points) {
                        var i = 0,
                            n = points.length,
                            p = points[0],
                            path = [p[0], ",", p[1]];
                        for (; ++i < n;) path.push("H", (p[0] + (p = points[i])[0]) / 2, "V", p[1]);
                        n > 1 && path.push("H", p[0]);
                        return path.join("")
                    },
                    "step-before": d3_svg_lineStepBefore,
                    "step-after": d3_svg_lineStepAfter,
                    basis: d3_svg_lineBasis,
                    "basis-open": function(points) {
                        if (points.length < 4) return d3_svg_lineLinear(points);
                        var pi, path = [],
                            i = -1,
                            n = points.length,
                            px = [0],
                            py = [0];
                        for (; ++i < 3;) pi = points[i], px.push(pi[0]), py.push(pi[1]);
                        path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3, px) + "," + d3_svg_lineDot4(d3_svg_lineBasisBezier3, py)), --i;
                        for (; ++i < n;) pi = points[i], px.shift(), px.push(pi[0]), py.shift(), py.push(pi[1]), d3_svg_lineBasisBezier(path, px, py);
                        return path.join("")
                    },
                    "basis-closed": function(points) {
                        var path, pi, i = -1,
                            n = points.length,
                            m = n + 4,
                            px = [],
                            py = [];
                        for (; ++i < 4;) pi = points[i % n], px.push(pi[0]), py.push(pi[1]);
                        path = [d3_svg_lineDot4(d3_svg_lineBasisBezier3, px), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier3, py)], --i;
                        for (; ++i < m;) pi = points[i % n], px.shift(), px.push(pi[0]), py.shift(), py.push(pi[1]), d3_svg_lineBasisBezier(path, px, py);
                        return path.join("")
                    },
                    bundle: function(points, tension) {
                        var n = points.length - 1;
                        if (n)
                            for (var p, t, x0 = points[0][0], y0 = points[0][1], dx = points[n][0] - x0, dy = points[n][1] - y0, i = -1; ++i <= n;) p = points[i], t = i / n, p[0] = tension * p[0] + (1 - tension) * (x0 + t * dx), p[1] = tension * p[1] + (1 - tension) * (y0 + t * dy);
                        return d3_svg_lineBasis(points)
                    },
                    cardinal: function(points, tension) {
                        return points.length < 3 ? d3_svg_lineLinear(points) : points[0] + d3_svg_lineHermite(points, d3_svg_lineCardinalTangents(points, tension))
                    },
                    "cardinal-open": function(points, tension) {
                        return points.length < 4 ? d3_svg_lineLinear(points) : points[1] + d3_svg_lineHermite(points.slice(1, -1), d3_svg_lineCardinalTangents(points, tension))
                    },
                    "cardinal-closed": function(points, tension) {
                        return points.length < 3 ? d3_svg_lineLinearClosed(points) : points[0] + d3_svg_lineHermite((points.push(points[0]), points), d3_svg_lineCardinalTangents([points[points.length - 2]].concat(points, [points[1]]), tension))
                    },
                    monotone: function(points) {
                        return points.length < 3 ? d3_svg_lineLinear(points) : points[0] + d3_svg_lineHermite(points, function(points) {
                            var d, a, b, s, tangents = [],
                                m = function(points) {
                                    var i = 0,
                                        j = points.length - 1,
                                        m = [],
                                        p0 = points[0],
                                        p1 = points[1],
                                        d = m[0] = d3_svg_lineSlope(p0, p1);
                                    for (; ++i < j;) m[i] = (d + (d = d3_svg_lineSlope(p0 = p1, p1 = points[i + 1]))) / 2;
                                    return m[i] = d, m
                                }(points),
                                i = -1,
                                j = points.length - 1;
                            for (; ++i < j;) d = d3_svg_lineSlope(points[i], points[i + 1]), abs(d) < Îµ ? m[i] = m[i + 1] = 0 : (a = m[i] / d, b = m[i + 1] / d, (s = a * a + b * b) > 9 && (s = 3 * d / Math.sqrt(s), m[i] = s * a, m[i + 1] = s * b));
                            i = -1;
                            for (; ++i <= j;) s = (points[Math.min(j, i + 1)][0] - points[Math.max(0, i - 1)][0]) / (6 * (1 + m[i] * m[i])), tangents.push([s || 0, m[i] * s || 0]);
                            return tangents
                        }(points))
                    }
                });

                function d3_svg_lineLinear(points) {
                    return points.length > 1 ? points.join("L") : points + "Z"
                }

                function d3_svg_lineLinearClosed(points) {
                    return points.join("L") + "Z"
                }

                function d3_svg_lineStepBefore(points) {
                    for (var i = 0, n = points.length, p = points[0], path = [p[0], ",", p[1]]; ++i < n;) path.push("V", (p = points[i])[1], "H", p[0]);
                    return path.join("")
                }

                function d3_svg_lineStepAfter(points) {
                    for (var i = 0, n = points.length, p = points[0], path = [p[0], ",", p[1]]; ++i < n;) path.push("H", (p = points[i])[0], "V", p[1]);
                    return path.join("")
                }

                function d3_svg_lineHermite(points, tangents) {
                    if (tangents.length < 1 || points.length != tangents.length && points.length != tangents.length + 2) return d3_svg_lineLinear(points);
                    var quad = points.length != tangents.length,
                        path = "",
                        p0 = points[0],
                        p = points[1],
                        t0 = tangents[0],
                        t = t0,
                        pi = 1;
                    if (quad && (path += "Q" + (p[0] - 2 * t0[0] / 3) + "," + (p[1] - 2 * t0[1] / 3) + "," + p[0] + "," + p[1], p0 = points[1], pi = 2), tangents.length > 1) {
                        t = tangents[1], p = points[pi], pi++, path += "C" + (p0[0] + t0[0]) + "," + (p0[1] + t0[1]) + "," + (p[0] - t[0]) + "," + (p[1] - t[1]) + "," + p[0] + "," + p[1];
                        for (var i = 2; i < tangents.length; i++, pi++) p = points[pi], t = tangents[i], path += "S" + (p[0] - t[0]) + "," + (p[1] - t[1]) + "," + p[0] + "," + p[1]
                    }
                    if (quad) {
                        var lp = points[pi];
                        path += "Q" + (p[0] + 2 * t[0] / 3) + "," + (p[1] + 2 * t[1] / 3) + "," + lp[0] + "," + lp[1]
                    }
                    return path
                }

                function d3_svg_lineCardinalTangents(points, tension) {
                    for (var p0, tangents = [], a = (1 - tension) / 2, p1 = points[0], p2 = points[1], i = 1, n = points.length; ++i < n;) p0 = p1, p1 = p2, p2 = points[i], tangents.push([a * (p2[0] - p0[0]), a * (p2[1] - p0[1])]);
                    return tangents
                }

                function d3_svg_lineBasis(points) {
                    if (points.length < 3) return d3_svg_lineLinear(points);
                    var i = 1,
                        n = points.length,
                        pi = points[0],
                        x0 = pi[0],
                        y0 = pi[1],
                        px = [x0, x0, x0, (pi = points[1])[0]],
                        py = [y0, y0, y0, pi[1]],
                        path = [x0, ",", y0, "L", d3_svg_lineDot4(d3_svg_lineBasisBezier3, px), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier3, py)];
                    for (points.push(points[n - 1]); ++i <= n;) pi = points[i], px.shift(), px.push(pi[0]), py.shift(), py.push(pi[1]), d3_svg_lineBasisBezier(path, px, py);
                    return points.pop(), path.push("L", pi), path.join("")
                }

                function d3_svg_lineDot4(a, b) {
                    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3]
                }
                d3_svg_lineInterpolators.forEach(function(key, value) {
                    value.key = key, value.closed = /-closed$/.test(key)
                });
                var d3_svg_lineBasisBezier1 = [0, 2 / 3, 1 / 3, 0],
                    d3_svg_lineBasisBezier2 = [0, 1 / 3, 2 / 3, 0],
                    d3_svg_lineBasisBezier3 = [0, 1 / 6, 2 / 3, 1 / 6];

                function d3_svg_lineBasisBezier(path, x, y) {
                    path.push("C", d3_svg_lineDot4(d3_svg_lineBasisBezier1, x), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier1, y), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier2, x), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier2, y), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier3, x), ",", d3_svg_lineDot4(d3_svg_lineBasisBezier3, y))
                }

                function d3_svg_lineSlope(p0, p1) {
                    return (p1[1] - p0[1]) / (p1[0] - p0[0])
                }

                function d3_svg_lineRadial(points) {
                    for (var point, r, a, i = -1, n = points.length; ++i < n;) r = (point = points[i])[0], a = point[1] - halfÏ, point[0] = r * Math.cos(a), point[1] = r * Math.sin(a);
                    return points
                }

                function d3_svg_area(projection) {
                    var x0 = d3_geom_pointX,
                        x1 = d3_geom_pointX,
                        y0 = 0,
                        y1 = d3_geom_pointY,
                        defined = d3_true,
                        interpolate = d3_svg_lineLinear,
                        interpolateKey = interpolate.key,
                        interpolateReverse = interpolate,
                        L = "L",
                        tension = .7;

                    function area(data) {
                        var d, x, y, segments = [],
                            points0 = [],
                            points1 = [],
                            i = -1,
                            n = data.length,
                            fx0 = d3_functor(x0),
                            fy0 = d3_functor(y0),
                            fx1 = x0 === x1 ? function() {
                                return x
                            } : d3_functor(x1),
                            fy1 = y0 === y1 ? function() {
                                return y
                            } : d3_functor(y1);

                        function segment() {
                            segments.push("M", interpolate(projection(points1), tension), L, interpolateReverse(projection(points0.reverse()), tension), "Z")
                        }
                        for (; ++i < n;) defined.call(this, d = data[i], i) ? (points0.push([x = +fx0.call(this, d, i), y = +fy0.call(this, d, i)]), points1.push([+fx1.call(this, d, i), +fy1.call(this, d, i)])) : points0.length && (segment(), points0 = [], points1 = []);
                        return points0.length && segment(), segments.length ? segments.join("") : null
                    }
                    return area.x = function(_) {
                        return arguments.length ? (x0 = x1 = _, area) : x1
                    }, area.x0 = function(_) {
                        return arguments.length ? (x0 = _, area) : x0
                    }, area.x1 = function(_) {
                        return arguments.length ? (x1 = _, area) : x1
                    }, area.y = function(_) {
                        return arguments.length ? (y0 = y1 = _, area) : y1
                    }, area.y0 = function(_) {
                        return arguments.length ? (y0 = _, area) : y0
                    }, area.y1 = function(_) {
                        return arguments.length ? (y1 = _, area) : y1
                    }, area.defined = function(_) {
                        return arguments.length ? (defined = _, area) : defined
                    }, area.interpolate = function(_) {
                        return arguments.length ? (interpolateKey = "function" == typeof _ ? interpolate = _ : (interpolate = d3_svg_lineInterpolators.get(_) || d3_svg_lineLinear).key, interpolateReverse = interpolate.reverse || interpolate, L = interpolate.closed ? "M" : "L", area) : interpolateKey
                    }, area.tension = function(_) {
                        return arguments.length ? (tension = _, area) : tension
                    }, area
                }

                function d3_svg_chordRadius(d) {
                    return d.radius
                }

                function d3_svg_diagonalProjection(d) {
                    return [d.x, d.y]
                }

                function d3_svg_symbolSize() {
                    return 64
                }

                function d3_svg_symbolType() {
                    return "circle"
                }

                function d3_svg_symbolCircle(size) {
                    var r = Math.sqrt(size / Ï);
                    return "M0," + r + "A" + r + "," + r + " 0 1,1 0," + -r + "A" + r + "," + r + " 0 1,1 0," + r + "Z"
                }
                d3.svg.line.radial = function() {
                    var line = d3_svg_line(d3_svg_lineRadial);
                    return line.radius = line.x, delete line.x, line.angle = line.y, delete line.y, line
                }, d3_svg_lineStepBefore.reverse = d3_svg_lineStepAfter, d3_svg_lineStepAfter.reverse = d3_svg_lineStepBefore, d3.svg.area = function() {
                    return d3_svg_area(d3_identity)
                }, d3.svg.area.radial = function() {
                    var area = d3_svg_area(d3_svg_lineRadial);
                    return area.radius = area.x, delete area.x, area.innerRadius = area.x0, delete area.x0, area.outerRadius = area.x1, delete area.x1, area.angle = area.y, delete area.y, area.startAngle = area.y0, delete area.y0, area.endAngle = area.y1, delete area.y1, area
                }, d3.svg.chord = function() {
                    var source = d3_source,
                        target = d3_target,
                        radius = d3_svg_chordRadius,
                        startAngle = d3_svg_arcStartAngle,
                        endAngle = d3_svg_arcEndAngle;

                    function chord(d, i) {
                        var a, b, s = subgroup(this, source, d, i),
                            t = subgroup(this, target, d, i);
                        return "M" + s.p0 + arc(s.r, s.p1, s.a1 - s.a0) + (b = t, (a = s).a0 == b.a0 && a.a1 == b.a1 ? curve(s.r, s.p1, s.r, s.p0) : curve(s.r, s.p1, t.r, t.p0) + arc(t.r, t.p1, t.a1 - t.a0) + curve(t.r, t.p1, s.r, s.p0)) + "Z"
                    }

                    function subgroup(self, f, d, i) {
                        var subgroup = f.call(self, d, i),
                            r = radius.call(self, subgroup, i),
                            a0 = startAngle.call(self, subgroup, i) - halfÏ,
                            a1 = endAngle.call(self, subgroup, i) - halfÏ;
                        return {
                            r: r,
                            a0: a0,
                            a1: a1,
                            p0: [r * Math.cos(a0), r * Math.sin(a0)],
                            p1: [r * Math.cos(a1), r * Math.sin(a1)]
                        }
                    }

                    function arc(r, p, a) {
                        return "A" + r + "," + r + " 0 " + +(a > Ï) + ",1 " + p
                    }

                    function curve(r0, p0, r1, p1) {
                        return "Q 0,0 " + p1
                    }
                    return chord.radius = function(v) {
                        return arguments.length ? (radius = d3_functor(v), chord) : radius
                    }, chord.source = function(v) {
                        return arguments.length ? (source = d3_functor(v), chord) : source
                    }, chord.target = function(v) {
                        return arguments.length ? (target = d3_functor(v), chord) : target
                    }, chord.startAngle = function(v) {
                        return arguments.length ? (startAngle = d3_functor(v), chord) : startAngle
                    }, chord.endAngle = function(v) {
                        return arguments.length ? (endAngle = d3_functor(v), chord) : endAngle
                    }, chord
                }, d3.svg.diagonal = function() {
                    var source = d3_source,
                        target = d3_target,
                        projection = d3_svg_diagonalProjection;

                    function diagonal(d, i) {
                        var p0 = source.call(this, d, i),
                            p3 = target.call(this, d, i),
                            m = (p0.y + p3.y) / 2,
                            p = [p0, {
                                x: p0.x,
                                y: m
                            }, {
                                x: p3.x,
                                y: m
                            }, p3];
                        return "M" + (p = p.map(projection))[0] + "C" + p[1] + " " + p[2] + " " + p[3]
                    }
                    return diagonal.source = function(x) {
                        return arguments.length ? (source = d3_functor(x), diagonal) : source
                    }, diagonal.target = function(x) {
                        return arguments.length ? (target = d3_functor(x), diagonal) : target
                    }, diagonal.projection = function(x) {
                        return arguments.length ? (projection = x, diagonal) : projection
                    }, diagonal
                }, d3.svg.diagonal.radial = function() {
                    var diagonal = d3.svg.diagonal(),
                        projection = d3_svg_diagonalProjection,
                        projection_ = diagonal.projection;
                    return diagonal.projection = function(x) {
                        return arguments.length ? projection_(function(projection) {
                            return function() {
                                var d = projection.apply(this, arguments),
                                    r = d[0],
                                    a = d[1] - halfÏ;
                                return [r * Math.cos(a), r * Math.sin(a)]
                            }
                        }(projection = x)) : projection
                    }, diagonal
                }, d3.svg.symbol = function() {
                    var type = d3_svg_symbolType,
                        size = d3_svg_symbolSize;

                    function symbol(d, i) {
                        return (d3_svg_symbols.get(type.call(this, d, i)) || d3_svg_symbolCircle)(size.call(this, d, i))
                    }
                    return symbol.type = function(x) {
                        return arguments.length ? (type = d3_functor(x), symbol) : type
                    }, symbol.size = function(x) {
                        return arguments.length ? (size = d3_functor(x), symbol) : size
                    }, symbol
                };
                var d3_svg_symbols = d3.map({
                    circle: d3_svg_symbolCircle,
                    cross: function(size) {
                        var r = Math.sqrt(size / 5) / 2;
                        return "M" + -3 * r + "," + -r + "H" + -r + "V" + -3 * r + "H" + r + "V" + -r + "H" + 3 * r + "V" + r + "H" + r + "V" + 3 * r + "H" + -r + "V" + r + "H" + -3 * r + "Z"
                    },
                    diamond: function(size) {
                        var ry = Math.sqrt(size / (2 * d3_svg_symbolTan30)),
                            rx = ry * d3_svg_symbolTan30;
                        return "M0," + -ry + "L" + rx + ",0 0," + ry + " " + -rx + ",0Z"
                    },
                    square: function(size) {
                        var r = Math.sqrt(size) / 2;
                        return "M" + -r + "," + -r + "L" + r + "," + -r + " " + r + "," + r + " " + -r + "," + r + "Z"
                    },
                    "triangle-down": function(size) {
                        var rx = Math.sqrt(size / d3_svg_symbolSqrt3),
                            ry = rx * d3_svg_symbolSqrt3 / 2;
                        return "M0," + ry + "L" + rx + "," + -ry + " " + -rx + "," + -ry + "Z"
                    },
                    "triangle-up": function(size) {
                        var rx = Math.sqrt(size / d3_svg_symbolSqrt3),
                            ry = rx * d3_svg_symbolSqrt3 / 2;
                        return "M0," + -ry + "L" + rx + "," + ry + " " + -rx + "," + ry + "Z"
                    }
                });
                d3.svg.symbolTypes = d3_svg_symbols.keys();
                var d3_svg_symbolSqrt3 = Math.sqrt(3),
                    d3_svg_symbolTan30 = Math.tan(30 * d3_radians);
                d3_selectionPrototype.transition = function(name) {
                    for (var subgroup, node, id = d3_transitionInheritId || ++d3_transitionId, ns = d3_transitionNamespace(name), subgroups = [], transition = d3_transitionInherit || {
                            time: Date.now(),
                            ease: d3_ease_cubicInOut,
                            delay: 0,
                            duration: 250
                        }, j = -1, m = this.length; ++j < m;) {
                        subgroups.push(subgroup = []);
                        for (var group = this[j], i = -1, n = group.length; ++i < n;)(node = group[i]) && d3_transitionNode(node, i, ns, id, transition), subgroup.push(node)
                    }
                    return d3_transition(subgroups, ns, id)
                }, d3_selectionPrototype.interrupt = function(name) {
                    return this.each(null == name ? d3_selection_interrupt : d3_selection_interruptNS(d3_transitionNamespace(name)))
                };
                var d3_selection_interrupt = d3_selection_interruptNS(d3_transitionNamespace());

                function d3_selection_interruptNS(ns) {
                    return function() {
                        var lock, activeId, active;
                        (lock = this[ns]) && (active = lock[activeId = lock.active]) && (active.timer.c = null, active.timer.t = NaN, --lock.count ? delete lock[activeId] : delete this[ns], lock.active += .5, active.event && active.event.interrupt.call(this, this.__data__, active.index))
                    }
                }

                function d3_transition(groups, ns, id) {
                    return d3_subclass(groups, d3_transitionPrototype), groups.namespace = ns, groups.id = id, groups
                }
                var d3_transitionInheritId, d3_transitionInherit, d3_transitionPrototype = [],
                    d3_transitionId = 0;

                function d3_transition_tween(groups, name, value, tween) {
                    var id = groups.id,
                        ns = groups.namespace;
                    return d3_selection_each(groups, "function" == typeof value ? function(node, i, j) {
                        node[ns][id].tween.set(name, tween(value.call(node, node.__data__, i, j)))
                    } : (value = tween(value), function(node) {
                        node[ns][id].tween.set(name, value)
                    }))
                }

                function d3_transition_text(b) {
                    return null == b && (b = ""),
                        function() {
                            this.textContent = b
                        }
                }

                function d3_transitionNamespace(name) {
                    return null == name ? "__transition__" : "__transition_" + name + "__"
                }

                function d3_transitionNode(node, i, ns, id, inherit) {
                    var time, timer, duration, ease, tweens, lock = node[ns] || (node[ns] = {
                            active: 0,
                            count: 0
                        }),
                        transition = lock[id];

                    function start(elapsed) {
                        var activeId = lock.active,
                            active = lock[activeId];
                        for (var cancelId in active && (active.timer.c = null, active.timer.t = NaN, --lock.count, delete lock[activeId], active.event && active.event.interrupt.call(node, node.__data__, active.index)), lock)
                            if (+cancelId < id) {
                                var cancel = lock[cancelId];
                                cancel.timer.c = null, cancel.timer.t = NaN, --lock.count, delete lock[cancelId]
                            } timer.c = tick, d3_timer(function() {
                            return timer.c && tick(elapsed || 1) && (timer.c = null, timer.t = NaN), 1
                        }, 0, time), lock.active = id, transition.event && transition.event.start.call(node, node.__data__, i), tweens = [], transition.tween.forEach(function(key, value) {
                            (value = value.call(node, node.__data__, i)) && tweens.push(value)
                        }), ease = transition.ease, duration = transition.duration
                    }

                    function tick(elapsed) {
                        for (var t = elapsed / duration, e = ease(t), n = tweens.length; n > 0;) tweens[--n].call(node, e);
                        if (t >= 1) return transition.event && transition.event.end.call(node, node.__data__, i), --lock.count ? delete lock[id] : delete node[ns], 1
                    }
                    transition || (time = inherit.time, timer = d3_timer(function(elapsed) {
                        var delay = transition.delay;
                        if (timer.t = delay + time, delay <= elapsed) return start(elapsed - delay);
                        timer.c = start
                    }, 0, time), transition = lock[id] = {
                        tween: new d3_Map,
                        time: time,
                        timer: timer,
                        delay: inherit.delay,
                        duration: inherit.duration,
                        ease: inherit.ease,
                        index: i
                    }, inherit = null, ++lock.count)
                }
                d3_transitionPrototype.call = d3_selectionPrototype.call, d3_transitionPrototype.empty = d3_selectionPrototype.empty, d3_transitionPrototype.node = d3_selectionPrototype.node, d3_transitionPrototype.size = d3_selectionPrototype.size, d3.transition = function(selection, name) {
                    return selection && selection.transition ? d3_transitionInheritId ? selection.transition(name) : selection : d3.selection().transition(selection)
                }, d3.transition.prototype = d3_transitionPrototype, d3_transitionPrototype.select = function(selector) {
                    var subgroup, subnode, node, id = this.id,
                        ns = this.namespace,
                        subgroups = [];
                    selector = d3_selection_selector(selector);
                    for (var j = -1, m = this.length; ++j < m;) {
                        subgroups.push(subgroup = []);
                        for (var group = this[j], i = -1, n = group.length; ++i < n;)(node = group[i]) && (subnode = selector.call(node, node.__data__, i, j)) ? ("__data__" in node && (subnode.__data__ = node.__data__), d3_transitionNode(subnode, i, ns, id, node[ns][id]), subgroup.push(subnode)) : subgroup.push(null)
                    }
                    return d3_transition(subgroups, ns, id)
                }, d3_transitionPrototype.selectAll = function(selector) {
                    var subgroup, subnodes, node, subnode, transition, id = this.id,
                        ns = this.namespace,
                        subgroups = [];
                    selector = d3_selection_selectorAll(selector);
                    for (var j = -1, m = this.length; ++j < m;)
                        for (var group = this[j], i = -1, n = group.length; ++i < n;)
                            if (node = group[i]) {
                                transition = node[ns][id], subnodes = selector.call(node, node.__data__, i, j), subgroups.push(subgroup = []);
                                for (var k = -1, o = subnodes.length; ++k < o;)(subnode = subnodes[k]) && d3_transitionNode(subnode, k, ns, id, transition), subgroup.push(subnode)
                            } return d3_transition(subgroups, ns, id)
                }, d3_transitionPrototype.filter = function(filter) {
                    var subgroup, node, subgroups = [];
                    "function" != typeof filter && (filter = d3_selection_filter(filter));
                    for (var j = 0, m = this.length; j < m; j++) {
                        subgroups.push(subgroup = []);
                        for (var group, i = 0, n = (group = this[j]).length; i < n; i++)(node = group[i]) && filter.call(node, node.__data__, i, j) && subgroup.push(node)
                    }
                    return d3_transition(subgroups, this.namespace, this.id)
                }, d3_transitionPrototype.tween = function(name, tween) {
                    var id = this.id,
                        ns = this.namespace;
                    return arguments.length < 2 ? this.node()[ns][id].tween.get(name) : d3_selection_each(this, null == tween ? function(node) {
                        node[ns][id].tween.remove(name)
                    } : function(node) {
                        node[ns][id].tween.set(name, tween)
                    })
                }, d3_transitionPrototype.attr = function(nameNS, value) {
                    if (arguments.length < 2) {
                        for (value in nameNS) this.attr(value, nameNS[value]);
                        return this
                    }
                    var interpolate = "transform" == nameNS ? d3_interpolateTransform : d3_interpolate,
                        name = d3.ns.qualify(nameNS);

                    function attrNull() {
                        this.removeAttribute(name)
                    }

                    function attrNullNS() {
                        this.removeAttributeNS(name.space, name.local)
                    }
                    return d3_transition_tween(this, "attr." + nameNS, value, name.local ? function(b) {
                        return null == b ? attrNullNS : (b += "", function() {
                            var i, a = this.getAttributeNS(name.space, name.local);
                            return a !== b && (i = interpolate(a, b), function(t) {
                                this.setAttributeNS(name.space, name.local, i(t))
                            })
                        })
                    } : function(b) {
                        return null == b ? attrNull : (b += "", function() {
                            var i, a = this.getAttribute(name);
                            return a !== b && (i = interpolate(a, b), function(t) {
                                this.setAttribute(name, i(t))
                            })
                        })
                    })
                }, d3_transitionPrototype.attrTween = function(nameNS, tween) {
                    var name = d3.ns.qualify(nameNS);
                    return this.tween("attr." + nameNS, name.local ? function(d, i) {
                        var f = tween.call(this, d, i, this.getAttributeNS(name.space, name.local));
                        return f && function(t) {
                            this.setAttributeNS(name.space, name.local, f(t))
                        }
                    } : function(d, i) {
                        var f = tween.call(this, d, i, this.getAttribute(name));
                        return f && function(t) {
                            this.setAttribute(name, f(t))
                        }
                    })
                }, d3_transitionPrototype.style = function(name, value, priority) {
                    var n = arguments.length;
                    if (n < 3) {
                        if ("string" != typeof name) {
                            for (priority in n < 2 && (value = ""), name) this.style(priority, name[priority], value);
                            return this
                        }
                        priority = ""
                    }

                    function styleNull() {
                        this.style.removeProperty(name)
                    }
                    return d3_transition_tween(this, "style." + name, value, function(b) {
                        return null == b ? styleNull : (b += "", function() {
                            var i, a = d3_window(this).getComputedStyle(this, null).getPropertyValue(name);
                            return a !== b && (i = d3_interpolate(a, b), function(t) {
                                this.style.setProperty(name, i(t), priority)
                            })
                        })
                    })
                }, d3_transitionPrototype.styleTween = function(name, tween, priority) {
                    return arguments.length < 3 && (priority = ""), this.tween("style." + name, function(d, i) {
                        var f = tween.call(this, d, i, d3_window(this).getComputedStyle(this, null).getPropertyValue(name));
                        return f && function(t) {
                            this.style.setProperty(name, f(t), priority)
                        }
                    })
                }, d3_transitionPrototype.text = function(value) {
                    return d3_transition_tween(this, "text", value, d3_transition_text)
                }, d3_transitionPrototype.remove = function() {
                    var ns = this.namespace;
                    return this.each("end.transition", function() {
                        var p;
                        this[ns].count < 2 && (p = this.parentNode) && p.removeChild(this)
                    })
                }, d3_transitionPrototype.ease = function(value) {
                    var id = this.id,
                        ns = this.namespace;
                    return arguments.length < 1 ? this.node()[ns][id].ease : ("function" != typeof value && (value = d3.ease.apply(d3, arguments)), d3_selection_each(this, function(node) {
                        node[ns][id].ease = value
                    }))
                }, d3_transitionPrototype.delay = function(value) {
                    var id = this.id,
                        ns = this.namespace;
                    return arguments.length < 1 ? this.node()[ns][id].delay : d3_selection_each(this, "function" == typeof value ? function(node, i, j) {
                        node[ns][id].delay = +value.call(node, node.__data__, i, j)
                    } : (value = +value, function(node) {
                        node[ns][id].delay = value
                    }))
                }, d3_transitionPrototype.duration = function(value) {
                    var id = this.id,
                        ns = this.namespace;
                    return arguments.length < 1 ? this.node()[ns][id].duration : d3_selection_each(this, "function" == typeof value ? function(node, i, j) {
                        node[ns][id].duration = Math.max(1, value.call(node, node.__data__, i, j))
                    } : (value = Math.max(1, value), function(node) {
                        node[ns][id].duration = value
                    }))
                }, d3_transitionPrototype.each = function(type, listener) {
                    var id = this.id,
                        ns = this.namespace;
                    if (arguments.length < 2) {
                        var inherit = d3_transitionInherit,
                            inheritId = d3_transitionInheritId;
                        try {
                            d3_transitionInheritId = id, d3_selection_each(this, function(node, i, j) {
                                d3_transitionInherit = node[ns][id], type.call(node, node.__data__, i, j)
                            })
                        } finally {
                            d3_transitionInherit = inherit, d3_transitionInheritId = inheritId
                        }
                    } else d3_selection_each(this, function(node) {
                        var transition = node[ns][id];
                        (transition.event || (transition.event = d3.dispatch("start", "end", "interrupt"))).on(type, listener)
                    });
                    return this
                }, d3_transitionPrototype.transition = function() {
                    for (var subgroup, node, transition, id0 = this.id, id1 = ++d3_transitionId, ns = this.namespace, subgroups = [], j = 0, m = this.length; j < m; j++) {
                        subgroups.push(subgroup = []);
                        for (var group, i = 0, n = (group = this[j]).length; i < n; i++)(node = group[i]) && d3_transitionNode(node, i, ns, id1, {
                            time: (transition = node[ns][id0]).time,
                            ease: transition.ease,
                            delay: transition.delay + transition.duration,
                            duration: transition.duration
                        }), subgroup.push(node)
                    }
                    return d3_transition(subgroups, ns, id1)
                }, d3.svg.axis = function() {
                    var tickFormat_, scale = d3.scale.linear(),
                        orient = d3_svg_axisDefaultOrient,
                        innerTickSize = 6,
                        outerTickSize = 6,
                        tickPadding = 3,
                        tickArguments_ = [10],
                        tickValues = null;

                    function axis(g) {
                        g.each(function() {
                            var tickTransform, g = d3.select(this),
                                scale0 = this.__chart__ || scale,
                                scale1 = this.__chart__ = scale.copy(),
                                ticks = null == tickValues ? scale1.ticks ? scale1.ticks.apply(scale1, tickArguments_) : scale1.domain() : tickValues,
                                tickFormat = null == tickFormat_ ? scale1.tickFormat ? scale1.tickFormat.apply(scale1, tickArguments_) : d3_identity : tickFormat_,
                                tick = g.selectAll(".tick").data(ticks, scale1),
                                tickEnter = tick.enter().insert("g", ".domain").attr("class", "tick").style("opacity", Îµ),
                                tickExit = d3.transition(tick.exit()).style("opacity", Îµ).remove(),
                                tickUpdate = d3.transition(tick.order()).style("opacity", 1),
                                tickSpacing = Math.max(innerTickSize, 0) + tickPadding,
                                range = d3_scaleRange(scale1),
                                path = g.selectAll(".domain").data([0]),
                                pathUpdate = (path.enter().append("path").attr("class", "domain"), d3.transition(path));
                            tickEnter.append("line"), tickEnter.append("text");
                            var x1, x2, y1, y2, lineEnter = tickEnter.select("line"),
                                lineUpdate = tickUpdate.select("line"),
                                text = tick.select("text").text(tickFormat),
                                textEnter = tickEnter.select("text"),
                                textUpdate = tickUpdate.select("text"),
                                sign = "top" === orient || "left" === orient ? -1 : 1;
                            if ("bottom" === orient || "top" === orient ? (tickTransform = d3_svg_axisX, x1 = "x", y1 = "y", x2 = "x2", y2 = "y2", text.attr("dy", sign < 0 ? "0em" : ".71em").style("text-anchor", "middle"), pathUpdate.attr("d", "M" + range[0] + "," + sign * outerTickSize + "V0H" + range[1] + "V" + sign * outerTickSize)) : (tickTransform = d3_svg_axisY, x1 = "y", y1 = "x", x2 = "y2", y2 = "x2", text.attr("dy", ".32em").style("text-anchor", sign < 0 ? "end" : "start"), pathUpdate.attr("d", "M" + sign * outerTickSize + "," + range[0] + "H0V" + range[1] + "H" + sign * outerTickSize)), lineEnter.attr(y2, sign * innerTickSize), textEnter.attr(y1, sign * tickSpacing), lineUpdate.attr(x2, 0).attr(y2, sign * innerTickSize), textUpdate.attr(x1, 0).attr(y1, sign * tickSpacing), scale1.rangeBand) {
                                var x = scale1,
                                    dx = x.rangeBand() / 2;
                                scale0 = scale1 = function(d) {
                                    return x(d) + dx
                                }
                            } else scale0.rangeBand ? scale0 = scale1 : tickExit.call(tickTransform, scale1, scale0);
                            tickEnter.call(tickTransform, scale0, scale1), tickUpdate.call(tickTransform, scale1, scale1)
                        })
                    }
                    return axis.scale = function(x) {
                        return arguments.length ? (scale = x, axis) : scale
                    }, axis.orient = function(x) {
                        return arguments.length ? (orient = x in d3_svg_axisOrients ? x + "" : d3_svg_axisDefaultOrient, axis) : orient
                    }, axis.ticks = function() {
                        return arguments.length ? (tickArguments_ = d3_array(arguments), axis) : tickArguments_
                    }, axis.tickValues = function(x) {
                        return arguments.length ? (tickValues = x, axis) : tickValues
                    }, axis.tickFormat = function(x) {
                        return arguments.length ? (tickFormat_ = x, axis) : tickFormat_
                    }, axis.tickSize = function(x) {
                        var n = arguments.length;
                        return n ? (innerTickSize = +x, outerTickSize = +arguments[n - 1], axis) : innerTickSize
                    }, axis.innerTickSize = function(x) {
                        return arguments.length ? (innerTickSize = +x, axis) : innerTickSize
                    }, axis.outerTickSize = function(x) {
                        return arguments.length ? (outerTickSize = +x, axis) : outerTickSize
                    }, axis.tickPadding = function(x) {
                        return arguments.length ? (tickPadding = +x, axis) : tickPadding
                    }, axis.tickSubdivide = function() {
                        return arguments.length && axis
                    }, axis
                };
                var d3_svg_axisDefaultOrient = "bottom",
                    d3_svg_axisOrients = {
                        top: 1,
                        right: 1,
                        bottom: 1,
                        left: 1
                    };

                function d3_svg_axisX(selection, x0, x1) {
                    selection.attr("transform", function(d) {
                        var v0 = x0(d);
                        return "translate(" + (isFinite(v0) ? v0 : x1(d)) + ",0)"
                    })
                }

                function d3_svg_axisY(selection, y0, y1) {
                    selection.attr("transform", function(d) {
                        var v0 = y0(d);
                        return "translate(0," + (isFinite(v0) ? v0 : y1(d)) + ")"
                    })
                }
                d3.svg.brush = function() {
                    var xExtentDomain, yExtentDomain, event = d3_eventDispatch(brush, "brushstart", "brush", "brushend"),
                        x = null,
                        y = null,
                        xExtent = [0, 0],
                        yExtent = [0, 0],
                        xClamp = !0,
                        yClamp = !0,
                        resizes = d3_svg_brushResizes[0];

                    function brush(g) {
                        g.each(function() {
                            var g = d3.select(this).style("pointer-events", "all").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)").on("mousedown.brush", brushstart).on("touchstart.brush", brushstart),
                                background = g.selectAll(".background").data([0]);
                            background.enter().append("rect").attr("class", "background").style("visibility", "hidden").style("cursor", "crosshair"), g.selectAll(".extent").data([0]).enter().append("rect").attr("class", "extent").style("cursor", "move");
                            var resize = g.selectAll(".resize").data(resizes, d3_identity);
                            resize.exit().remove(), resize.enter().append("g").attr("class", function(d) {
                                return "resize " + d
                            }).style("cursor", function(d) {
                                return d3_svg_brushCursor[d]
                            }).append("rect").attr("x", function(d) {
                                return /[ew]$/.test(d) ? -3 : null
                            }).attr("y", function(d) {
                                return /^[ns]/.test(d) ? -3 : null
                            }).attr("width", 6).attr("height", 6).style("visibility", "hidden"), resize.style("display", brush.empty() ? "none" : null);
                            var range, gUpdate = d3.transition(g),
                                backgroundUpdate = d3.transition(background);
                            x && (range = d3_scaleRange(x), backgroundUpdate.attr("x", range[0]).attr("width", range[1] - range[0]), redrawX(gUpdate)), y && (range = d3_scaleRange(y), backgroundUpdate.attr("y", range[0]).attr("height", range[1] - range[0]), redrawY(gUpdate)), redraw(gUpdate)
                        })
                    }

                    function redraw(g) {
                        g.selectAll(".resize").attr("transform", function(d) {
                            return "translate(" + xExtent[+/e$/.test(d)] + "," + yExtent[+/^s/.test(d)] + ")"
                        })
                    }

                    function redrawX(g) {
                        g.select(".extent").attr("x", xExtent[0]), g.selectAll(".extent,.n>rect,.s>rect").attr("width", xExtent[1] - xExtent[0])
                    }

                    function redrawY(g) {
                        g.select(".extent").attr("y", yExtent[0]), g.selectAll(".extent,.e>rect,.w>rect").attr("height", yExtent[1] - yExtent[0])
                    }

                    function brushstart() {
                        var center, offset, target = this,
                            eventTarget = d3.select(d3.event.target),
                            event_ = event.of(target, arguments),
                            g = d3.select(target),
                            resizing = eventTarget.datum(),
                            resizingX = !/^(n|s)$/.test(resizing) && x,
                            resizingY = !/^(e|w)$/.test(resizing) && y,
                            dragging = eventTarget.classed("extent"),
                            dragRestore = d3_event_dragSuppress(target),
                            origin = d3.mouse(target),
                            w = d3.select(d3_window(target)).on("keydown.brush", function() {
                                32 == d3.event.keyCode && (dragging || (center = null, origin[0] -= xExtent[1], origin[1] -= yExtent[1], dragging = 2), d3_eventPreventDefault())
                            }).on("keyup.brush", function() {
                                32 == d3.event.keyCode && 2 == dragging && (origin[0] += xExtent[1], origin[1] += yExtent[1], dragging = 0, d3_eventPreventDefault())
                            });
                        if (d3.event.changedTouches ? w.on("touchmove.brush", brushmove).on("touchend.brush", brushend) : w.on("mousemove.brush", brushmove).on("mouseup.brush", brushend), g.interrupt().selectAll("*").interrupt(), dragging) origin[0] = xExtent[0] - origin[0], origin[1] = yExtent[0] - origin[1];
                        else if (resizing) {
                            var ex = +/w$/.test(resizing),
                                ey = +/^n/.test(resizing);
                            offset = [xExtent[1 - ex] - origin[0], yExtent[1 - ey] - origin[1]], origin[0] = xExtent[ex], origin[1] = yExtent[ey]
                        } else d3.event.altKey && (center = origin.slice());

                        function brushmove() {
                            var point = d3.mouse(target),
                                moved = !1;
                            offset && (point[0] += offset[0], point[1] += offset[1]), dragging || (d3.event.altKey ? (center || (center = [(xExtent[0] + xExtent[1]) / 2, (yExtent[0] + yExtent[1]) / 2]), origin[0] = xExtent[+(point[0] < center[0])], origin[1] = yExtent[+(point[1] < center[1])]) : center = null), resizingX && move1(point, x, 0) && (redrawX(g), moved = !0), resizingY && move1(point, y, 1) && (redrawY(g), moved = !0), moved && (redraw(g), event_({
                                type: "brush",
                                mode: dragging ? "move" : "resize"
                            }))
                        }

                        function move1(point, scale, i) {
                            var min, max, range = d3_scaleRange(scale),
                                r0 = range[0],
                                r1 = range[1],
                                position = origin[i],
                                extent = i ? yExtent : xExtent,
                                size = extent[1] - extent[0];
                            if (dragging && (r0 -= position, r1 -= size + position), min = (i ? yClamp : xClamp) ? Math.max(r0, Math.min(r1, point[i])) : point[i], dragging ? max = (min += position) + size : (center && (position = Math.max(r0, Math.min(r1, 2 * center[i] - min))), position < min ? (max = min, min = position) : max = position), extent[0] != min || extent[1] != max) return i ? yExtentDomain = null : xExtentDomain = null, extent[0] = min, extent[1] = max, !0
                        }

                        function brushend() {
                            brushmove(), g.style("pointer-events", "all").selectAll(".resize").style("display", brush.empty() ? "none" : null), d3.select("body").style("cursor", null), w.on("mousemove.brush", null).on("mouseup.brush", null).on("touchmove.brush", null).on("touchend.brush", null).on("keydown.brush", null).on("keyup.brush", null), dragRestore(), event_({
                                type: "brushend"
                            })
                        }
                        g.style("pointer-events", "none").selectAll(".resize").style("display", null), d3.select("body").style("cursor", eventTarget.style("cursor")), event_({
                            type: "brushstart"
                        }), brushmove()
                    }
                    return brush.event = function(g) {
                        g.each(function() {
                            var event_ = event.of(this, arguments),
                                extent1 = {
                                    x: xExtent,
                                    y: yExtent,
                                    i: xExtentDomain,
                                    j: yExtentDomain
                                },
                                extent0 = this.__chart__ || extent1;
                            this.__chart__ = extent1, d3_transitionInheritId ? d3.select(this).transition().each("start.brush", function() {
                                xExtentDomain = extent0.i, yExtentDomain = extent0.j, xExtent = extent0.x, yExtent = extent0.y, event_({
                                    type: "brushstart"
                                })
                            }).tween("brush:brush", function() {
                                var xi = d3_interpolateArray(xExtent, extent1.x),
                                    yi = d3_interpolateArray(yExtent, extent1.y);
                                return xExtentDomain = yExtentDomain = null,
                                    function(t) {
                                        xExtent = extent1.x = xi(t), yExtent = extent1.y = yi(t), event_({
                                            type: "brush",
                                            mode: "resize"
                                        })
                                    }
                            }).each("end.brush", function() {
                                xExtentDomain = extent1.i, yExtentDomain = extent1.j, event_({
                                    type: "brush",
                                    mode: "resize"
                                }), event_({
                                    type: "brushend"
                                })
                            }) : (event_({
                                type: "brushstart"
                            }), event_({
                                type: "brush",
                                mode: "resize"
                            }), event_({
                                type: "brushend"
                            }))
                        })
                    }, brush.x = function(z) {
                        return arguments.length ? (resizes = d3_svg_brushResizes[!(x = z) << 1 | !y], brush) : x
                    }, brush.y = function(z) {
                        return arguments.length ? (resizes = d3_svg_brushResizes[!x << 1 | !(y = z)], brush) : y
                    }, brush.clamp = function(z) {
                        return arguments.length ? (x && y ? (xClamp = !!z[0], yClamp = !!z[1]) : x ? xClamp = !!z : y && (yClamp = !!z), brush) : x && y ? [xClamp, yClamp] : x ? xClamp : y ? yClamp : null
                    }, brush.extent = function(z) {
                        var x0, x1, y0, y1, t;
                        return arguments.length ? (x && (x0 = z[0], x1 = z[1], y && (x0 = x0[0], x1 = x1[0]), xExtentDomain = [x0, x1], x.invert && (x0 = x(x0), x1 = x(x1)), x1 < x0 && (t = x0, x0 = x1, x1 = t), x0 == xExtent[0] && x1 == xExtent[1] || (xExtent = [x0, x1])), y && (y0 = z[0], y1 = z[1], x && (y0 = y0[1], y1 = y1[1]), yExtentDomain = [y0, y1], y.invert && (y0 = y(y0), y1 = y(y1)), y1 < y0 && (t = y0, y0 = y1, y1 = t), y0 == yExtent[0] && y1 == yExtent[1] || (yExtent = [y0, y1])), brush) : (x && (xExtentDomain ? (x0 = xExtentDomain[0], x1 = xExtentDomain[1]) : (x0 = xExtent[0], x1 = xExtent[1], x.invert && (x0 = x.invert(x0), x1 = x.invert(x1)), x1 < x0 && (t = x0, x0 = x1, x1 = t))), y && (yExtentDomain ? (y0 = yExtentDomain[0], y1 = yExtentDomain[1]) : (y0 = yExtent[0], y1 = yExtent[1], y.invert && (y0 = y.invert(y0), y1 = y.invert(y1)), y1 < y0 && (t = y0, y0 = y1, y1 = t))), x && y ? [
                            [x0, y0],
                            [x1, y1]
                        ] : x ? [x0, x1] : y && [y0, y1])
                    }, brush.clear = function() {
                        return brush.empty() || (xExtent = [0, 0], yExtent = [0, 0], xExtentDomain = yExtentDomain = null), brush
                    }, brush.empty = function() {
                        return !!x && xExtent[0] == xExtent[1] || !!y && yExtent[0] == yExtent[1]
                    }, d3.rebind(brush, event, "on")
                };
                var d3_svg_brushCursor = {
                        n: "ns-resize",
                        e: "ew-resize",
                        s: "ns-resize",
                        w: "ew-resize",
                        nw: "nwse-resize",
                        ne: "nesw-resize",
                        se: "nwse-resize",
                        sw: "nesw-resize"
                    },
                    d3_svg_brushResizes = [
                        ["n", "e", "s", "w", "nw", "ne", "se", "sw"],
                        ["e", "w"],
                        ["n", "s"],
                        []
                    ],
                    d3_time_format = d3_time.format = d3_locale_enUS.timeFormat,
                    d3_time_formatUtc = d3_time_format.utc,
                    d3_time_formatIso = d3_time_formatUtc("%Y-%m-%dT%H:%M:%S.%LZ");

                function d3_time_formatIsoNative(date) {
                    return date.toISOString()
                }

                function d3_time_scale(linear, methods, format) {
                    function scale(x) {
                        return linear(x)
                    }

                    function tickMethod(extent, count) {
                        var target = (extent[1] - extent[0]) / count,
                            i = d3.bisect(d3_time_scaleSteps, target);
                        return i == d3_time_scaleSteps.length ? [methods.year, d3_scale_linearTickRange(extent.map(function(d) {
                            return d / 31536e6
                        }), count)[2]] : i ? methods[target / d3_time_scaleSteps[i - 1] < d3_time_scaleSteps[i] / target ? i - 1 : i] : [d3_time_scaleMilliseconds, d3_scale_linearTickRange(extent, count)[2]]
                    }
                    return scale.invert = function(x) {
                        return d3_time_scaleDate(linear.invert(x))
                    }, scale.domain = function(x) {
                        return arguments.length ? (linear.domain(x), scale) : linear.domain().map(d3_time_scaleDate)
                    }, scale.nice = function(interval, skip) {
                        var domain = scale.domain(),
                            extent = d3_scaleExtent(domain),
                            method = null == interval ? tickMethod(extent, 10) : "number" == typeof interval && tickMethod(extent, interval);

                        function skipped(date) {
                            return !isNaN(date) && !interval.range(date, d3_time_scaleDate(+date + 1), skip).length
                        }
                        return method && (interval = method[0], skip = method[1]), scale.domain(d3_scale_nice(domain, skip > 1 ? {
                            floor: function(date) {
                                for (; skipped(date = interval.floor(date));) date = d3_time_scaleDate(date - 1);
                                return date
                            },
                            ceil: function(date) {
                                for (; skipped(date = interval.ceil(date));) date = d3_time_scaleDate(+date + 1);
                                return date
                            }
                        } : interval))
                    }, scale.ticks = function(interval, skip) {
                        var extent = d3_scaleExtent(scale.domain()),
                            method = null == interval ? tickMethod(extent, 10) : "number" == typeof interval ? tickMethod(extent, interval) : !interval.range && [{
                                range: interval
                            }, skip];
                        return method && (interval = method[0], skip = method[1]), interval.range(extent[0], d3_time_scaleDate(+extent[1] + 1), skip < 1 ? 1 : skip)
                    }, scale.tickFormat = function() {
                        return format
                    }, scale.copy = function() {
                        return d3_time_scale(linear.copy(), methods, format)
                    }, d3_scale_linearRebind(scale, linear)
                }

                function d3_time_scaleDate(t) {
                    return new Date(t)
                }
                d3_time_format.iso = Date.prototype.toISOString && +new Date("2000-01-01T00:00:00.000Z") ? d3_time_formatIsoNative : d3_time_formatIso, d3_time_formatIsoNative.parse = function(string) {
                    var date = new Date(string);
                    return isNaN(date) ? null : date
                }, d3_time_formatIsoNative.toString = d3_time_formatIso.toString, d3_time.second = d3_time_interval(function(date) {
                    return new d3_date(1e3 * Math.floor(date / 1e3))
                }, function(date, offset) {
                    date.setTime(date.getTime() + 1e3 * Math.floor(offset))
                }, function(date) {
                    return date.getSeconds()
                }), d3_time.seconds = d3_time.second.range, d3_time.seconds.utc = d3_time.second.utc.range, d3_time.minute = d3_time_interval(function(date) {
                    return new d3_date(6e4 * Math.floor(date / 6e4))
                }, function(date, offset) {
                    date.setTime(date.getTime() + 6e4 * Math.floor(offset))
                }, function(date) {
                    return date.getMinutes()
                }), d3_time.minutes = d3_time.minute.range, d3_time.minutes.utc = d3_time.minute.utc.range, d3_time.hour = d3_time_interval(function(date) {
                    var timezone = date.getTimezoneOffset() / 60;
                    return new d3_date(36e5 * (Math.floor(date / 36e5 - timezone) + timezone))
                }, function(date, offset) {
                    date.setTime(date.getTime() + 36e5 * Math.floor(offset))
                }, function(date) {
                    return date.getHours()
                }), d3_time.hours = d3_time.hour.range, d3_time.hours.utc = d3_time.hour.utc.range, d3_time.month = d3_time_interval(function(date) {
                    return (date = d3_time.day(date)).setDate(1), date
                }, function(date, offset) {
                    date.setMonth(date.getMonth() + offset)
                }, function(date) {
                    return date.getMonth()
                }), d3_time.months = d3_time.month.range, d3_time.months.utc = d3_time.month.utc.range;
                var d3_time_scaleSteps = [1e3, 5e3, 15e3, 3e4, 6e4, 3e5, 9e5, 18e5, 36e5, 108e5, 216e5, 432e5, 864e5, 1728e5, 6048e5, 2592e6, 7776e6, 31536e6],
                    d3_time_scaleLocalMethods = [
                        [d3_time.second, 1],
                        [d3_time.second, 5],
                        [d3_time.second, 15],
                        [d3_time.second, 30],
                        [d3_time.minute, 1],
                        [d3_time.minute, 5],
                        [d3_time.minute, 15],
                        [d3_time.minute, 30],
                        [d3_time.hour, 1],
                        [d3_time.hour, 3],
                        [d3_time.hour, 6],
                        [d3_time.hour, 12],
                        [d3_time.day, 1],
                        [d3_time.day, 2],
                        [d3_time.week, 1],
                        [d3_time.month, 1],
                        [d3_time.month, 3],
                        [d3_time.year, 1]
                    ],
                    d3_time_scaleLocalFormat = d3_time_format.multi([
                        [".%L", function(d) {
                            return d.getMilliseconds()
                        }],
                        [":%S", function(d) {
                            return d.getSeconds()
                        }],
                        ["%I:%M", function(d) {
                            return d.getMinutes()
                        }],
                        ["%I %p", function(d) {
                            return d.getHours()
                        }],
                        ["%a %d", function(d) {
                            return d.getDay() && 1 != d.getDate()
                        }],
                        ["%b %d", function(d) {
                            return 1 != d.getDate()
                        }],
                        ["%B", function(d) {
                            return d.getMonth()
                        }],
                        ["%Y", d3_true]
                    ]),
                    d3_time_scaleMilliseconds = {
                        range: function(start, stop, step) {
                            return d3.range(Math.ceil(start / step) * step, +stop, step).map(d3_time_scaleDate)
                        },
                        floor: d3_identity,
                        ceil: d3_identity
                    };
                d3_time_scaleLocalMethods.year = d3_time.year, d3_time.scale = function() {
                    return d3_time_scale(d3.scale.linear(), d3_time_scaleLocalMethods, d3_time_scaleLocalFormat)
                };
                var d3_time_scaleUtcMethods = d3_time_scaleLocalMethods.map(function(m) {
                        return [m[0].utc, m[1]]
                    }),
                    d3_time_scaleUtcFormat = d3_time_formatUtc.multi([
                        [".%L", function(d) {
                            return d.getUTCMilliseconds()
                        }],
                        [":%S", function(d) {
                            return d.getUTCSeconds()
                        }],
                        ["%I:%M", function(d) {
                            return d.getUTCMinutes()
                        }],
                        ["%I %p", function(d) {
                            return d.getUTCHours()
                        }],
                        ["%a %d", function(d) {
                            return d.getUTCDay() && 1 != d.getUTCDate()
                        }],
                        ["%b %d", function(d) {
                            return 1 != d.getUTCDate()
                        }],
                        ["%B", function(d) {
                            return d.getUTCMonth()
                        }],
                        ["%Y", d3_true]
                    ]);

                function d3_json(request) {
                    return JSON.parse(request.responseText)
                }

                function d3_html(request) {
                    var range = d3_document.createRange();
                    return range.selectNode(d3_document.body), range.createContextualFragment(request.responseText)
                }
                d3_time_scaleUtcMethods.year = d3_time.year.utc, d3_time.scale.utc = function() {
                    return d3_time_scale(d3.scale.linear(), d3_time_scaleUtcMethods, d3_time_scaleUtcFormat)
                }, d3.text = d3_xhrType(function(request) {
                    return request.responseText
                }), d3.json = function(url, callback) {
                    return d3_xhr(url, "application/json", d3_json, callback)
                }, d3.html = function(url, callback) {
                    return d3_xhr(url, "text/html", d3_html, callback)
                }, d3.xml = d3_xhrType(function(request) {
                    return request.responseXML
                }), this.d3 = d3, void 0 === (__WEBPACK_AMD_DEFINE_RESULT__ = "function" == typeof(__WEBPACK_AMD_DEFINE_FACTORY__ = d3) ? __WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module) : __WEBPACK_AMD_DEFINE_FACTORY__) || (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)
            }()
        }, function(module, __webpack_exports__, __webpack_require__) {
            "use strict";
            __webpack_require__.d(__webpack_exports__, "a", function() {
                return Core
            });
            var core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39),
                core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_0__),
                core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(48),
                core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_1___default = __webpack_require__.n(core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_1__),
                core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(22),
                core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_2___default = __webpack_require__.n(core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_2__),
                core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(24),
                core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_3___default = __webpack_require__.n(core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_3__),
                core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(30),
                core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_4___default = __webpack_require__.n(core_js_modules_es6_array_find__WEBPACK_IMPORTED_MODULE_4__),
                core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(15),
                core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_5___default = __webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_5__),
                core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16),
                core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_6___default = __webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_6__),
                core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(11),
                core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_7___default = __webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_7__),
                core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(35),
                core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_8___default = __webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_8__),
                core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(66),
                core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_9___default = __webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_9__),
                core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(114),
                core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_10___default = __webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_10__),
                core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(90),
                core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_11___default = __webpack_require__.n(core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_11__),
                core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(38),
                core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_12___default = __webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_12__),
                core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(29),
                core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_13___default = __webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_13__),
                core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(36),
                core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_14___default = __webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_14__),
                core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(10),
                core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_15___default = __webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_15__),
                core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(13),
                core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_16___default = __webpack_require__.n(core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_16__),
                core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(17),
                core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_17___default = __webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_17__),
                d3__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(1),
                d3__WEBPACK_IMPORTED_MODULE_18___default = __webpack_require__.n(d3__WEBPACK_IMPORTED_MODULE_18__),
                jquery__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(0),
                jquery__WEBPACK_IMPORTED_MODULE_19___default = __webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_19__);

            function _toConsumableArray(arr) {
                return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()
            }

            function _nonIterableSpread() {
                throw new TypeError("Invalid attempt to spread non-iterable instance")
            }

            function _iterableToArray(iter) {
                if (Symbol.iterator in Object(iter) || "[object Arguments]" === Object.prototype.toString.call(iter)) return Array.from(iter)
            }

            function _arrayWithoutHoles(arr) {
                if (Array.isArray(arr)) {
                    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];
                    return arr2
                }
            }

            function _typeof(obj) {
                return (_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
                    return typeof obj
                } : function(obj) {
                    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
                })(obj)
            }

            function _classCallCheck(instance, Constructor) {
                if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
            }

            function _defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function _createClass(Constructor, protoProps, staticProps) {
                return protoProps && _defineProperties(Constructor.prototype, protoProps), staticProps && _defineProperties(Constructor, staticProps), Constructor
            }

            function _defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var Core = function() {
                function Core() {
                    _classCallCheck(this, Core)
                }
                return _createClass(Core, null, [{
                    key: "escapeHtml",
                    value: function(str) {
                        var div = document.createElement("div");
                        return div.appendChild(document.createTextNode(str)), div.innerHTML
                    }
                }, {
                    key: "isEmptyObject",
                    value: function(o) {
                        return !o || Object.keys(o).every(function(x) {
                            return "" === o[x] || null === o[x] || jquery__WEBPACK_IMPORTED_MODULE_19__.isArray(o[x]) && 0 == o[x].length
                        })
                    }
                }, {
                    key: "hexToRgbA",
                    value: function(hex, opacity) {
                        var c;
                        if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) return 3 == (c = hex.substring(1).split("")).length && (c = [c[0], c[0], c[1], c[1], c[2], c[2]]), c = "0x".concat(c.join("")), "rgba(".concat([c >> 16 & 255, c >> 8 & 255, 255 & c].join(","), ", ").concat(opacity || "1", " )")
                    }
                }, {
                    key: "formatUnit",
                    value: function(d, scale) {
                        return (d.prefix ? d.prefix + " " : "") + (d.scale ? scale.suffix + d.suffix : d.suffix)
                    }
                }, {
                    key: "formatNumber",
                    value: function(value) {
                        var decPlaces = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            prefix = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "",
                            suffix = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "",
                            negFormat = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "",
                            thouSeparator = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : ",",
                            decSeparator = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : ".",
                            n = Number(value);
                        decPlaces = isNaN(decPlaces = Math.abs(decPlaces)) ? 0 : decPlaces;
                        var j, signPrefix = n < 0 ? "(0)" == negFormat ? "(" : "-0" == negFormat ? "-" : "" : "",
                            signSuffix = n < 0 ? "(0)" == negFormat ? ")" : "0-" == negFormat ? "-" : "" : "",
                            i = "".concat(parseInt(n = Math.abs(+n || 0).toFixed(decPlaces)));
                        return [signPrefix, prefix, (j = (j = i.length) > 3 ? j % 3 : 0) ? i.substr(0, j) + thouSeparator : "", i.substr(j).replace(/(\d{3})(?=\d)/g, "$1".concat(thouSeparator)), decPlaces ? decSeparator + Math.abs(Number(n) - Number(i)).toFixed(decPlaces).slice(2) : "", suffix, signSuffix].join("")
                    }
                }, {
                    key: "formatPct",
                    value: function(value, negFormat) {
                        var thouSeparator = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : ",",
                            decSeparator = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : ".",
                            max = arguments.length > 4 ? arguments[4] : void 0,
                            n = Number(value);
                        return max = max || 99, Core.formatNumber(Math.min(Math.max(n, -max), max), 0, n < -max || n > max ? ">" : "", "%", negFormat, thouSeparator, decSeparator)
                    }
                }, {
                    key: "roundVal",
                    value: function(value, d, scale) {
                        var n = d.scale ? Number(value) / (scale.div || 1) : Number(value),
                            decPlaces = "X" == d.scale ? scale.dec : d.dec;
                        return Math.abs(n).toFixed(decPlaces)
                    }
                }, {
                    key: "roundValWithFormat",
                    value: function(value, d, scale, prefix, suffix, negFormat) {
                        var zeroDisplay = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : "",
                            thouSeparator = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : ",",
                            decSeparator = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : ".",
                            formattedVal = Core.formatVal(value, d, scale, prefix, suffix, "-0", zeroDisplay, thouSeparator, decSeparator);
                        return isNaN(Number(formattedVal)) ? formattedVal : Number(formattedVal)
                    }
                }, {
                    key: "formatVal",
                    value: function(value, d, scale, prefix, suffix, negFormat) {
                        var zeroDisplay = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : "",
                            thouSeparator = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : ",",
                            decSeparator = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : ".",
                            n = d.scale ? Number(value) / (scale.div || 1) : value,
                            decPlaces = "X" == d.scale ? scale.dec : d.dec;
                        return prefix = null == prefix ? d.prefix : prefix, suffix = null == suffix ? d.scale ? scale.suffix + d.suffix : d.suffix : suffix, n ? Core.formatNumber(n, decPlaces, prefix, suffix, negFormat, thouSeparator, decSeparator) : zeroDisplay
                    }
                }, {
                    key: "formatEnumVal",
                    value: function(value, d) {
                        var res = [],
                            enumList = d.enumList || {};
                        return null != value && "object" === _typeof(value) ? Object.keys(value).map(function(key) {
                            return {
                                key: key,
                                count: value[key]
                            }
                        }).sort(function(a, b) {
                            return b.count - a.count
                        }).forEach(function(val) {
                            void 0 !== enumList["N" + val.key] && res.push("".concat(val.count, " x ").concat(enumList["N" + val.key]))
                        }) : res.push(void 0 !== enumList["N" + value] ? enumList["N" + value] : ""), res
                    }
                }, {
                    key: "overflowText",
                    value: function(element, wrapWidth) {
                        for (var length = element.node().getComputedTextLength(), content = element.text(); length > wrapWidth - 2 && "" !== content;) content = content.slice(0, -1), element.text(content + "..."), length = element.node().getComputedTextLength();
                        return element
                    }
                }, {
                    key: "formatLargeValue",
                    value: function(v, d, scale, negFormat) {
                        var zeroDisplay = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "",
                            thouSeparator = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : ",",
                            decSeparator = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : ".";
                        if (v && d) {
                            var negativeDisplayPre = v < 0 ? "(0)" === negFormat ? "(" : "-0" == negFormat ? "-" : "" : "",
                                prefix = d.prefix && v ? '<span class="d2VDTPrefix">'.concat(Core.escapeHtml(d.prefix), "</span>") : "",
                                val = "<span>".concat(Core.escapeHtml(Core.formatVal(v, d, scale, "", "", "", zeroDisplay, thouSeparator, decSeparator)), "</span>"),
                                suffix = v ? d.scale ? scale.suffix + d.suffix : d.suffix : "";
                            suffix = suffix ? '<span class="d2VDTSuffix">'.concat(suffix, "</span>") : "";
                            var negativeDisplayPost = v < 0 ? "(0)" === negFormat ? ")" : "0-" == negFormat ? "-" : "" : "";
                            return "".concat(negativeDisplayPre).concat(prefix).concat(val).concat(suffix).concat(negativeDisplayPost)
                        }
                        return ""
                    }
                }, {
                    key: "escapeRegExp",
                    value: function(text) {
                        return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&")
                    }
                }, {
                    key: "splitString",
                    value: function(text, maxLength, returnLine) {
                        var word, words = [],
                            line = [],
                            lines = [];
                        if (text.length <= maxLength) lines.push(text);
                        else if (1 == (words = text.split(/\s+/).reverse()).length && (words = text.split(/\|+/).reverse()), 1 == words.length) lines = text.match(new RegExp(".{1," + maxLength + "}", "g"));
                        else {
                            for (; word = words.pop();) line.push(word), line.join(" ").length > maxLength && (line.pop(), lines.push(line.join(" ")), line = [word]);
                            lines.push(line.join(" "))
                        }
                        return lines.length >= returnLine ? lines[returnLine - 1] : ""
                    }
                }, {
                    key: "alert",
                    value: function(_alert) {
                        function alert(_x) {
                            return _alert.apply(this, arguments)
                        }
                        return alert.toString = function() {
                            return _alert.toString()
                        }, alert
                    }(function(message) {
                        alert(message)
                    })
                }, {
                    key: "calculateNode",
                    value: function calculateNode(d, TreeRef) {
                        var props = TreeRef.props,
                            results = [],
                            act = [],
                            tgt = [],
                            v = null,
                            rowMap = d.rowMap || d.name,
                            g = {
                                i: 0
                            },
                            calcAct, calcBase, calcTgt;
                        "" != d.cMeth && "DN" != d.cMeth || props.sourceData[rowMap] && (act = props.sourceData[rowMap].act || [], tgt = props.sourceData[rowMap].tgt || []), ("C" == d.cMeth || "DN" == d.cMeth || "" == d.cMeth && props.useConstants && !props.sourceData[rowMap]) && (v = d.manAct, act = jquery__WEBPACK_IMPORTED_MODULE_19__.isNumeric(v) ? Array.apply(void 0, _toConsumableArray(Array(props.periods))).map(function() {
                            return Number(v)
                        }) : v && eval(v).constructor === Array ? eval(v) : [], v = d.manTgt, tgt = jquery__WEBPACK_IMPORTED_MODULE_19__.isNumeric(v) ? Array.apply(void 0, _toConsumableArray(Array(props.periods))).map(function() {
                            return Number(v)
                        }) : v && eval(v).constructor === Array ? eval(v) : []);
                        var base = act.slice(0);
                        if (d.formula) {
                            var coreFormula = null,
                                hasTotal = !1;
                            d.formula.includes("].") && (d.formula.includes("].total") ? hasTotal = !0 : coreFormula = d.formula.includes("].") ? d.formula.replace(/\[/g, 'props.nodes["').replace(/\]/g, '"].results[g.i]') : null), calcAct = function calcAct() {
                                window.dataSeries = "act", window.n = props.periods;
                                try {
                                    return eval(coreFormula || (hasTotal ? d.formula.replace(/\[/g, 'props.nodes["').replace(/\]/g, '"].results[g.i].act').replace(/\[g\.i\]\.act\.total/g, "[n].act") : d.formula.replace(/\[/g, 'props.nodes["').replace(/\]/g, '"].results[g.i].act')))
                                } catch (err) {
                                    console.log("Formula Error when calculating Active for node ".concat(d.name, " for period ").concat(g.i + 1))
                                }
                            }, calcBase = function calcBase() {
                                window.dataSeries = "base", window.n = props.periods;
                                try {
                                    return eval(coreFormula || (hasTotal ? d.formula.replace(/\[/g, 'props.nodes["').replace(/\]/g, '"].results[g.i].base').replace(/\[g\.i\]\.base\.total/g, "[n].base") : d.formula.replace(/\[/g, 'props.nodes["').replace(/\]/g, '"].results[g.i].base')))
                                } catch (err) {
                                    console.log("Formula Error when calculating Baseline for node ".concat(d.name, " for period ").concat(g.i + 1))
                                }
                            }, calcTgt = function calcTgt() {
                                window.dataSeries = "tgt", window.n = props.periods;
                                try {
                                    return eval(coreFormula || (hasTotal ? d.formula.replace(/\[/g, 'props.nodes["').replace(/\]/g, '"].results[g.i].tgt').replace(/\[g\.i\]\.tgt\.total/g, "[n].tgt") : d.formula.replace(/\[/g, 'props.nodes["').replace(/\]/g, '"].results[g.i].tgt')))
                                } catch (err) {
                                    console.log("Formula Error when calculating Comparison for node ".concat(d.name, " for period ").concat(g.i + 1))
                                }
                            }
                        }
                        for (var preAct = null, from = 0, n = props.periods, periodTo = props.periods, sumAct = 0, sumBase = 0, sumTgt = 0, sumCapacity = 0, ptdAct = 0, ptdBase = 0, ptdTgt = 0, ptdMaxCap = 0, ptdMinCap = 0, selAct = 0, selBase = 0, selTgt = 0, selMaxCap = 0, selMinCap = 0, sumMinCapacity = 0, sumActEnum = {}, sumBaseEnum = {}, sumTgtEnum = {}, ptdActEnum = {}, ptdBaseEnum = {}, ptdTgtEnum = {}, selActEnum = {}, selBaseEnum = {}, selTgtEnum = {}, i = 0; i < props.periods + 3; i++) {
                            g.i = i, v = {}, v.key = props.periodsMetadata[i].key, v.text = props.periodsMetadata[i].text, d.formula && (act[i] = calcAct(), base[i] = calcBase(), tgt[i] = calcTgt()), v.act = jquery__WEBPACK_IMPORTED_MODULE_19__.isNumeric(act[i]) ? act[i] : 0, v.base = jquery__WEBPACK_IMPORTED_MODULE_19__.isNumeric(base[i]) ? base[i] : 0, v.tgt = jquery__WEBPACK_IMPORTED_MODULE_19__.isNumeric(tgt[i]) ? tgt[i] : 0;
                            var simName = d.lSimNode || d.name;
                            if ((null != props.simVar[simName] || props.simMan[simName]) && i >= props.PeriodColumn - 1 && i <= props.PeriodToColumn - 1) {
                                var simVar = props.simVar[simName];
                                if (null != simVar) switch (props.simMeth[simName]) {
                                    case "P":
                                        v.act = Number((v.act + v.act * simVar / (v.act < 0 ? -100 : 100)).toFixed(d.dec));
                                        break;
                                    case "C":
                                        v.act = Number(simVar);
                                        break;
                                    case "G":
                                        var pct = simVar * (i - props.PeriodColumn + 2);
                                        v.act = Number((v.act + v.act * pct / (v.act < 0 ? -100 : 100)).toFixed(d.dec))
                                }
                                var manVal = (props.simMan[simName] || {})[i];
                                v.act = null == manVal ? v.act : manVal
                            }
                            if ("C" == d.aMeth && i > 0 && (v.act += results[i - 1].act, v.base += results[i - 1].base, v.tgt += results[i - 1].tgt), d.max && (v.capacity = d.max), d.minCap && (v.minCap = d.minCap), d.enableEnumList)
                                if (i < props.periods) i == props.PeriodColumn - 1 && (ptdActEnum = jquery__WEBPACK_IMPORTED_MODULE_19__.extend({}, sumActEnum), ptdTgtEnum = jquery__WEBPACK_IMPORTED_MODULE_19__.extend({}, sumTgtEnum), ptdBaseEnum = jquery__WEBPACK_IMPORTED_MODULE_19__.extend({}, sumBaseEnum)), i >= props.PeriodColumn - 1 && i <= props.PeriodToColumn - 1 && (selActEnum[v.act] = (selActEnum[v.act] || 0) + 1, selTgtEnum[v.tgt] = (selTgtEnum[v.tgt] || 0) + 1, selBaseEnum[v.base] = (selBaseEnum[v.base] || 0) + 1), sumActEnum[v.act] = (sumActEnum[v.act] || 0) + 1, sumTgtEnum[v.tgt] = (sumTgtEnum[v.tgt] || 0) + 1, sumBaseEnum[v.base] = (sumBaseEnum[v.base] || 0) + 1;
                                else switch (i) {
                                        case props.periods + 1:
                                            v.act = ptdActEnum, v.tgt = ptdTgtEnum, v.base = ptdBaseEnum;
                                            break;
                                        case props.periods + 2:
                                            v.act = selActEnum, v.tgt = selTgtEnum, v.base = selBaseEnum;
                                            break;
                                        case props.periods:
                                            v.act = sumActEnum, v.tgt = sumTgtEnum, v.base = sumBaseEnum
                                    } else if (i < props.periods) i == props.PeriodColumn - 1 && (ptdAct = sumAct, ptdTgt = sumTgt, ptdBase = sumBase, ptdMaxCap = sumCapacity, ptdMinCap = sumMinCapacity), i >= props.PeriodColumn - 1 && i <= props.PeriodToColumn - 1 && (selAct += v.act, selTgt += v.tgt, selBase += v.base, selMaxCap += d.max, selMinCap += d.minCap), sumAct += v.act, sumTgt += v.tgt, sumBase += v.base, d.max && (sumCapacity += d.max), d.minCap && (sumMinCapacity += d.minCap);
                                    else {
                                        switch (i) {
                                            case props.periods + 1:
                                                n = props.PeriodColumn - 1, periodTo = n, sumAct = ptdAct, sumTgt = ptdTgt, sumBase = ptdBase, sumCapacity = ptdMaxCap, sumMinCapacity = ptdMinCap;
                                                break;
                                            case props.periods + 2:
                                                from = props.PeriodColumn - 1, n = props.PeriodToColumn - from, periodTo = props.PeriodToColumn, sumAct = selAct, sumTgt = selTgt, sumBase = selBase, sumCapacity = selMaxCap, sumMinCapacity = selMinCap
                                        }
                                        switch (d.aMeth) {
                                            case "F":
                                                break;
                                            case "A":
                                                d.max && (v.capacity = d.max), d.minCap && (v.minCap = d.minCap), d.wAvgNode && props.nodes[d.wAvgNode] && props.nodes[d.wAvgNode].results ? function() {
                                                    var values = results.slice(from, periodTo),
                                                        weights = props.nodes[d.wAvgNode].results.slice(from, periodTo);
                                                    v.act = d3__WEBPACK_IMPORTED_MODULE_18__.sum(values, function(v, i) {
                                                        return v.act * weights[i].act
                                                    }) / d3__WEBPACK_IMPORTED_MODULE_18__.sum(weights, function(v) {
                                                        return v.act
                                                    }), v.tgt = d3__WEBPACK_IMPORTED_MODULE_18__.sum(values, function(v, i) {
                                                        return v.tgt * weights[i].tgt
                                                    }) / d3__WEBPACK_IMPORTED_MODULE_18__.sum(weights, function(v) {
                                                        return v.tgt
                                                    }), v.base = d3__WEBPACK_IMPORTED_MODULE_18__.sum(values, function(v, i) {
                                                        return v.base * weights[i].base
                                                    }) / d3__WEBPACK_IMPORTED_MODULE_18__.sum(weights, function(v) {
                                                        return v.base
                                                    })
                                                }() : (v.act = sumAct / n, v.tgt = sumTgt / n, v.base = sumBase / n);
                                                break;
                                            case "C":
                                            case "L":
                                                var last = Math.max(from + n - 1, 0);
                                                v.act = results[last].act, v.tgt = results[last].tgt, v.base = results[last].base;
                                                break;
                                            default:
                                                v.act = sumAct, v.tgt = sumTgt, v.base = sumBase, d.max && (v.capacity = sumCapacity), d.minCap && (v.minCap = sumMinCapacity)
                                        }
                                    } d.max && (v.util = v.act / v.capacity * 100), d.minCap && (v.minUtil = v.act / v.minCap * 100), v.varAbs = v.act && v.tgt ? v.act - v.tgt : null, v.varPct = v.tgt && v.act ? (v.varAbs / (v.tgt < 0 ? -v.tgt : v.tgt) * 100).toFixed(0) : null, v.origVarAbs = v.base && v.tgt ? v.base - v.tgt : null, v.origVarPct = v.base && v.tgt ? (v.origVarAbs / (v.tgt < 0 ? -v.tgt : v.tgt) * 100).toFixed(0) : null, v.simChangeAbs = v.act && v.base ? v.act - v.base : null, v.simChangePct = v.act && v.base ? (v.simChangeAbs / (v.base < 0 ? -v.base : v.base) * 100).toFixed(0) : null, v.simChangeText = "", v.simChangeAbs ? "I" == d.trend ? (v.simChangeStatus = v.simChangePct > 0 ? "Green" : "Red", v.simChangeText = v.simChangePct > 0 ? "better" : "worse") : (v.simChangeStatus = v.simChangePct < 0 ? "Green" : "Red", v.simChangeText = v.simChangePct < 0 ? "better" : "worse") : v.simChangeStatus = "Neutral", null !== v.varPct && "X" !== d.hideStatus ? d.trend ? v.varPct > props.PctVarGreen ? v.status = "Green" : v.varPct > props.PctVarAmber ? v.status = "Neutral" : v.varPct > props.PctVarRed ? v.status = "Amber" : v.status = "Red" : v.varPct > -props.PctVarRed ? v.status = "Red" : v.varPct > -props.PctVarAmber ? v.status = "Amber" : v.varPct > -props.PctVarGreen ? v.status = "Neutral" : v.status = "Green" : v.status = "Neutral", v.change = v.act && preAct ? v.act - preAct : null, v.changePct = v.act && preAct ? (v.change / preAct * 100).toFixed(0) : null, v.preAct = preAct, preAct = v.act, v.green = v.tgt * (1 + props.PctVarGreen / 100), v.amber = v.tgt * (1 + props.PctVarAmber / 100), v.red = v.tgt * (1 + props.PctVarRed / 100), results[i] = v
                        }
                        for (var max = d3__WEBPACK_IMPORTED_MODULE_18__.max([d.max, d3__WEBPACK_IMPORTED_MODULE_18__.max(results.slice(0, props.periods), function(d) {
                                return d3__WEBPACK_IMPORTED_MODULE_18__.max([d.act, d.tgt, d.base])
                            })]), min = d3__WEBPACK_IMPORTED_MODULE_18__.min([d.min, d3__WEBPACK_IMPORTED_MODULE_18__.min(results.slice(0, props.periods), function(d) {
                                return d3__WEBPACK_IMPORTED_MODULE_18__.min([d.act, d.tgt, d.base])
                            })]), range = max - min, _i = 0; _i < props.periods + 3; _i++) v = results[_i] || {}, v.statusMax = d3__WEBPACK_IMPORTED_MODULE_18__.max([v.green, v.Amber, v.Red]), v.statusMin = d3__WEBPACK_IMPORTED_MODULE_18__.min([v.green, v.Amber, v.Red]), v.statusMax = v.statusMax < max ? max : 1.1 * v.statusMax, v.statusMin = v.statusMin > min ? min : .9 * v.statusMin, v.min = min, v.max = max, v.range = range, v.statusRange = v.statusMax - v.statusMin, v.statusRange > 0 && (v.pctRange = {
                            Tgt: (v.tgt - v.statusMin) / v.statusRange,
                            Act: (v.act - v.statusMin) / v.statusRange,
                            Prev: (v.preAct - v.statusMin) / v.statusRange,
                            Green: (v.green - v.statusMin) / v.statusRange,
                            Amber: (v.amber - v.statusMin) / v.statusRange,
                            Red: (v.red - v.statusMin) / v.statusRange
                        }), results[_i] = v;
                        return results
                    }
                }, {
                    key: "attachScroll",
                    value: function(el) {
                        var props = {};
                        el.on("touchstart", props, function(_ref) {
                            var data = _ref.data;
                            jquery__WEBPACK_IMPORTED_MODULE_19__(this).is(":animated") && jquery__WEBPACK_IMPORTED_MODULE_19__(this).stop(), data.lastScrollTime = void 0
                        }).on("touchmove", props, function(e) {
                            var data = e.data,
                                touchEvent = e.originalEvent;
                            jquery__WEBPACK_IMPORTED_MODULE_19__(this).is(":animated") && jquery__WEBPACK_IMPORTED_MODULE_19__(this).stop();
                            var scrollTime = new Date;
                            !data.lastScrollTime || (scrollTime - data.lastScrollTime) / 1e3 > .2 ? (data.lastScrollTime = scrollTime, data.max = this.scrollHeight - this.offsetHeight, data.maxX = this.scrollWidth - this.offsetWidth, data.y = touchEvent.touches[0].clientY, data.x = touchEvent.touches[0].clientX, data.start = jquery__WEBPACK_IMPORTED_MODULE_19__(this).scrollTop(), data.startX = jquery__WEBPACK_IMPORTED_MODULE_19__(this).scrollLeft(), data.startTime = new Date) : (data.dy = data.y - touchEvent.touches[0].clientY, jquery__WEBPACK_IMPORTED_MODULE_19__(this).scrollTop(data.dy + data.start), (data.dy < 0 && this.scrollTop < 1 || data.dy > 0 && this.scrollTop >= data.max) && e.preventDefault(), data.dx = data.x - touchEvent.touches[0].clientX, jquery__WEBPACK_IMPORTED_MODULE_19__(this).scrollLeft(data.dx + data.startX), (data.dx < 0 && this.scrollLeft < 1 || data.dx > 0 && this.scrollLeft >= data.maxX) && e.preventDefault())
                        }).on("touchend", props, function(_ref2) {
                            var data = _ref2.data;
                            data.lastScrollTime = void 0;
                            var endTime = new Date,
                                time = (endTime - data.startTime) / 1e3;
                            if (console.log("touch end:".concat(endTime, "  Start time was: ").concat(data.startTime, "Difference:").concat(time.toString())), time < .2) {
                                var swipeTop = 4 * data.dy + data.start,
                                    swipeLeft = 4 * data.dx + data.startX;
                                jquery__WEBPACK_IMPORTED_MODULE_19__(this).animate({
                                    scrollTop: swipeTop,
                                    scrollLeft: swipeLeft
                                }, 2e3, "d2EaseScroll"), console.log("vertical swipe: New Top:".concat(swipeTop))
                            }
                        })
                    }
                }, {
                    key: "fixedTable",
                    value: function(el) {
                        var $body = jquery__WEBPACK_IMPORTED_MODULE_19__(el).find(".d2FixedTable-body"),
                            $sidebar = jquery__WEBPACK_IMPORTED_MODULE_19__(el).find(".d2FixedTable-sidebar table"),
                            $header = jquery__WEBPACK_IMPORTED_MODULE_19__(el).find(".d2FixedTable-header table");
                        return jquery__WEBPACK_IMPORTED_MODULE_19__($body).scroll(function() {
                            return jquery__WEBPACK_IMPORTED_MODULE_19__($sidebar).css("margin-top", -jquery__WEBPACK_IMPORTED_MODULE_19__($body).scrollTop()), jquery__WEBPACK_IMPORTED_MODULE_19__($header).css("margin-left", -jquery__WEBPACK_IMPORTED_MODULE_19__($body).scrollLeft())
                        })
                    }
                }, {
                    key: "openExcel",
                    value: function(xmlXLS) {
                        var fileName = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "VDT_DOWNLOAD.xml",
                            blob = new Blob([xmlXLS]);
                        if (window.navigator.msSaveOrOpenBlob) window.navigator.msSaveBlob(blob, fileName);
                        else {
                            var a = window.document.createElement("a");
                            a.href = window.URL.createObjectURL(blob), a.download = fileName, document.body.appendChild(a), a.click(), document.body.removeChild(a)
                        }
                    }
                }]), Core
            }();
            _defineProperty(Core, "uniqueKey", function() {
                return Math.random().toString(36).substring(2, 9)
            }), _defineProperty(Core, "clone", function(o) {
                return jquery__WEBPACK_IMPORTED_MODULE_19__.extend({}, o)
            }), _defineProperty(Core, "removeNumberFormat", function(valueText) {
                var decSeparator = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ".",
                    thouSeparator = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : ",",
                    thouRe = new RegExp(Core.escapeRegExp(thouSeparator), "g"),
                    decRe = "." === decSeparator ? null : new RegExp(Core.escapeRegExp(decSeparator), "g");
                return valueText = valueText.replace(thouRe, ""), valueText = decRe ? valueText.replace(decRe, ".") : valueText, Number(valueText)
            })
        }, function(module, exports, __webpack_require__) {
            var store = __webpack_require__(50)("wks"),
                uid = __webpack_require__(32),
                Symbol = __webpack_require__(5).Symbol,
                USE_SYMBOL = "function" == typeof Symbol;
            (module.exports = function(name) {
                return store[name] || (store[name] = USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)("Symbol." + name))
            }).store = store
        }, function(module, exports) {
            module.exports = function(exec) {
                try {
                    return !!exec()
                } catch (e) {
                    return !0
                }
            }
        }, function(module, exports) {
            var global = module.exports = void 0 !== window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
            "number" == typeof __g && (__g = global)
        }, function(module, exports, __webpack_require__) {
            var anObject = __webpack_require__(7),
                IE8_DOM_DEFINE = __webpack_require__(69),
                toPrimitive = __webpack_require__(41),
                dP = Object.defineProperty;
            exports.f = __webpack_require__(8) ? Object.defineProperty : function(O, P, Attributes) {
                if (anObject(O), P = toPrimitive(P, !0), anObject(Attributes), IE8_DOM_DEFINE) try {
                    return dP(O, P, Attributes)
                } catch (e) {}
                if ("get" in Attributes || "set" in Attributes) throw TypeError("Accessors not supported!");
                return "value" in Attributes && (O[P] = Attributes.value), O
            }
        }, function(module, exports, __webpack_require__) {
            var isObject = __webpack_require__(12);
            module.exports = function(it) {
                if (!isObject(it)) throw TypeError(it + " is not an object!");
                return it
            }
        }, function(module, exports, __webpack_require__) {
            module.exports = !__webpack_require__(4)(function() {
                return 7 != Object.defineProperty({}, "a", {
                    get: function() {
                        return 7
                    }
                }).a
            })
        }, function(module, exports, __webpack_require__) {
            var global = __webpack_require__(5),
                core = __webpack_require__(23),
                hide = __webpack_require__(19),
                redefine = __webpack_require__(14),
                ctx = __webpack_require__(25),
                $export = function(type, name, source) {
                    var key, own, out, exp, IS_FORCED = type & $export.F,
                        IS_GLOBAL = type & $export.G,
                        IS_STATIC = type & $export.S,
                        IS_PROTO = type & $export.P,
                        IS_BIND = type & $export.B,
                        target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {}).prototype,
                        exports = IS_GLOBAL ? core : core[name] || (core[name] = {}),
                        expProto = exports.prototype || (exports.prototype = {});
                    for (key in IS_GLOBAL && (source = name), source) out = ((own = !IS_FORCED && target && void 0 !== target[key]) ? target : source)[key], exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && "function" == typeof out ? ctx(Function.call, out) : out, target && redefine(target, key, out, type & $export.U), exports[key] != out && hide(exports, key, exp), IS_PROTO && expProto[key] != out && (expProto[key] = out)
                };
            global.core = core, $export.F = 1, $export.G = 2, $export.S = 4, $export.P = 8, $export.B = 16, $export.W = 32, $export.U = 64, $export.R = 128, module.exports = $export
        }, function(module, exports, __webpack_require__) {
            for (var $iterators = __webpack_require__(13), getKeys = __webpack_require__(26), redefine = __webpack_require__(14), global = __webpack_require__(5), hide = __webpack_require__(19), Iterators = __webpack_require__(37), wks = __webpack_require__(3), ITERATOR = wks("iterator"), TO_STRING_TAG = wks("toStringTag"), ArrayValues = Iterators.Array, DOMIterables = {
                    CSSRuleList: !0,
                    CSSStyleDeclaration: !1,
                    CSSValueList: !1,
                    ClientRectList: !1,
                    DOMRectList: !1,
                    DOMStringList: !1,
                    DOMTokenList: !0,
                    DataTransferItemList: !1,
                    FileList: !1,
                    HTMLAllCollection: !1,
                    HTMLCollection: !1,
                    HTMLFormElement: !1,
                    HTMLSelectElement: !1,
                    MediaList: !0,
                    MimeTypeArray: !1,
                    NamedNodeMap: !1,
                    NodeList: !0,
                    PaintRequestList: !1,
                    Plugin: !1,
                    PluginArray: !1,
                    SVGLengthList: !1,
                    SVGNumberList: !1,
                    SVGPathSegList: !1,
                    SVGPointList: !1,
                    SVGStringList: !1,
                    SVGTransformList: !1,
                    SourceBufferList: !1,
                    StyleSheetList: !0,
                    TextTrackCueList: !1,
                    TextTrackList: !1,
                    TouchList: !1
                }, collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {
                var key, NAME = collections[i],
                    explicit = DOMIterables[NAME],
                    Collection = global[NAME],
                    proto = Collection && Collection.prototype;
                if (proto && (proto[ITERATOR] || hide(proto, ITERATOR, ArrayValues), proto[TO_STRING_TAG] || hide(proto, TO_STRING_TAG, NAME), Iterators[NAME] = ArrayValues, explicit))
                    for (key in $iterators) proto[key] || redefine(proto, key, $iterators[key], !0)
            }
        }, function(module, exports, __webpack_require__) {
            var dP = __webpack_require__(6).f,
                FProto = Function.prototype,
                nameRE = /^\s*function ([^ (]*)/;
            "name" in FProto || __webpack_require__(8) && dP(FProto, "name", {
                configurable: !0,
                get: function() {
                    try {
                        return ("" + this).match(nameRE)[1]
                    } catch (e) {
                        return ""
                    }
                }
            })
        }, function(module, exports) {
            module.exports = function(it) {
                return "object" == typeof it ? null !== it : "function" == typeof it
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var addToUnscopables = __webpack_require__(63),
                step = __webpack_require__(78),
                Iterators = __webpack_require__(37),
                toIObject = __webpack_require__(27);
            module.exports = __webpack_require__(64)(Array, "Array", function(iterated, kind) {
                this._t = toIObject(iterated), this._i = 0, this._k = kind
            }, function() {
                var O = this._t,
                    kind = this._k,
                    index = this._i++;
                return !O || index >= O.length ? (this._t = void 0, step(1)) : step(0, "keys" == kind ? index : "values" == kind ? O[index] : [index, O[index]])
            }, "values"), Iterators.Arguments = Iterators.Array, addToUnscopables("keys"), addToUnscopables("values"), addToUnscopables("entries")
        }, function(module, exports, __webpack_require__) {
            var global = __webpack_require__(5),
                hide = __webpack_require__(19),
                has = __webpack_require__(18),
                SRC = __webpack_require__(32)("src"),
                $toString = Function.toString,
                TPL = ("" + $toString).split("toString");
            __webpack_require__(23).inspectSource = function(it) {
                return $toString.call(it)
            }, (module.exports = function(O, key, val, safe) {
                var isFunction = "function" == typeof val;
                isFunction && (has(val, "name") || hide(val, "name", key)), O[key] !== val && (isFunction && (has(val, SRC) || hide(val, SRC, O[key] ? "" + O[key] : TPL.join(String(key)))), O === global ? O[key] = val : safe ? O[key] ? O[key] = val : hide(O, key, val) : (delete O[key], hide(O, key, val)))
            })(Function.prototype, "toString", function() {
                return "function" == typeof this && this[SRC] || $toString.call(this)
            })
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var $export = __webpack_require__(9),
                $includes = __webpack_require__(72)(!0);
            $export($export.P, "Array", {
                includes: function(el) {
                    return $includes(this, el, arguments.length > 1 ? arguments[1] : void 0)
                }
            }), __webpack_require__(63)("includes")
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var $export = __webpack_require__(9),
                context = __webpack_require__(105);
            $export($export.P + $export.F * __webpack_require__(106)("includes"), "String", {
                includes: function(searchString) {
                    return !!~context(this, searchString, "includes").indexOf(searchString, arguments.length > 1 ? arguments[1] : void 0)
                }
            })
        }, function(module, exports, __webpack_require__) {
            var toObject = __webpack_require__(21),
                $keys = __webpack_require__(26);
            __webpack_require__(108)("keys", function() {
                return function(it) {
                    return $keys(toObject(it))
                }
            })
        }, function(module, exports) {
            var hasOwnProperty = {}.hasOwnProperty;
            module.exports = function(it, key) {
                return hasOwnProperty.call(it, key)
            }
        }, function(module, exports, __webpack_require__) {
            var dP = __webpack_require__(6),
                createDesc = __webpack_require__(33);
            module.exports = __webpack_require__(8) ? function(object, key, value) {
                return dP.f(object, key, createDesc(1, value))
            } : function(object, key, value) {
                return object[key] = value, object
            }
        }, function(module, exports, __webpack_require__) {
            var toInteger = __webpack_require__(43),
                min = Math.min;
            module.exports = function(it) {
                return it > 0 ? min(toInteger(it), 9007199254740991) : 0
            }
        }, function(module, exports, __webpack_require__) {
            var defined = __webpack_require__(28);
            module.exports = function(it) {
                return Object(defined(it))
            }
        }, function(module, exports, __webpack_require__) {
            __webpack_require__(67)("asyncIterator")
        }, function(module, exports) {
            var core = module.exports = {
                version: "2.6.0"
            };
            "number" == typeof __e && (__e = core)
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var global = __webpack_require__(5),
                has = __webpack_require__(18),
                DESCRIPTORS = __webpack_require__(8),
                $export = __webpack_require__(9),
                redefine = __webpack_require__(14),
                META = __webpack_require__(52).KEY,
                $fails = __webpack_require__(4),
                shared = __webpack_require__(50),
                setToStringTag = __webpack_require__(42),
                uid = __webpack_require__(32),
                wks = __webpack_require__(3),
                wksExt = __webpack_require__(68),
                wksDefine = __webpack_require__(67),
                enumKeys = __webpack_require__(92),
                isArray = __webpack_require__(73),
                anObject = __webpack_require__(7),
                isObject = __webpack_require__(12),
                toIObject = __webpack_require__(27),
                toPrimitive = __webpack_require__(41),
                createDesc = __webpack_require__(33),
                _create = __webpack_require__(45),
                gOPNExt = __webpack_require__(96),
                $GOPD = __webpack_require__(57),
                $DP = __webpack_require__(6),
                $keys = __webpack_require__(26),
                gOPD = $GOPD.f,
                dP = $DP.f,
                gOPN = gOPNExt.f,
                $Symbol = global.Symbol,
                $JSON = global.JSON,
                _stringify = $JSON && $JSON.stringify,
                HIDDEN = wks("_hidden"),
                TO_PRIMITIVE = wks("toPrimitive"),
                isEnum = {}.propertyIsEnumerable,
                SymbolRegistry = shared("symbol-registry"),
                AllSymbols = shared("symbols"),
                OPSymbols = shared("op-symbols"),
                ObjectProto = Object.prototype,
                USE_NATIVE = "function" == typeof $Symbol,
                QObject = global.QObject,
                setter = !QObject || !QObject.prototype || !QObject.prototype.findChild,
                setSymbolDesc = DESCRIPTORS && $fails(function() {
                    return 7 != _create(dP({}, "a", {
                        get: function() {
                            return dP(this, "a", {
                                value: 7
                            }).a
                        }
                    })).a
                }) ? function(it, key, D) {
                    var protoDesc = gOPD(ObjectProto, key);
                    protoDesc && delete ObjectProto[key], dP(it, key, D), protoDesc && it !== ObjectProto && dP(ObjectProto, key, protoDesc)
                } : dP,
                wrap = function(tag) {
                    var sym = AllSymbols[tag] = _create($Symbol.prototype);
                    return sym._k = tag, sym
                },
                isSymbol = USE_NATIVE && "symbol" == typeof $Symbol.iterator ? function(it) {
                    return "symbol" == typeof it
                } : function(it) {
                    return it instanceof $Symbol
                },
                $defineProperty = function(it, key, D) {
                    return it === ObjectProto && $defineProperty(OPSymbols, key, D), anObject(it), key = toPrimitive(key, !0), anObject(D), has(AllSymbols, key) ? (D.enumerable ? (has(it, HIDDEN) && it[HIDDEN][key] && (it[HIDDEN][key] = !1), D = _create(D, {
                        enumerable: createDesc(0, !1)
                    })) : (has(it, HIDDEN) || dP(it, HIDDEN, createDesc(1, {})), it[HIDDEN][key] = !0), setSymbolDesc(it, key, D)) : dP(it, key, D)
                },
                $defineProperties = function(it, P) {
                    anObject(it);
                    for (var key, keys = enumKeys(P = toIObject(P)), i = 0, l = keys.length; l > i;) $defineProperty(it, key = keys[i++], P[key]);
                    return it
                },
                $propertyIsEnumerable = function(key) {
                    var E = isEnum.call(this, key = toPrimitive(key, !0));
                    return !(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) && (!(E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key]) || E)
                },
                $getOwnPropertyDescriptor = function(it, key) {
                    if (it = toIObject(it), key = toPrimitive(key, !0), it !== ObjectProto || !has(AllSymbols, key) || has(OPSymbols, key)) {
                        var D = gOPD(it, key);
                        return !D || !has(AllSymbols, key) || has(it, HIDDEN) && it[HIDDEN][key] || (D.enumerable = !0), D
                    }
                },
                $getOwnPropertyNames = function(it) {
                    for (var key, names = gOPN(toIObject(it)), result = [], i = 0; names.length > i;) has(AllSymbols, key = names[i++]) || key == HIDDEN || key == META || result.push(key);
                    return result
                },
                $getOwnPropertySymbols = function(it) {
                    for (var key, IS_OP = it === ObjectProto, names = gOPN(IS_OP ? OPSymbols : toIObject(it)), result = [], i = 0; names.length > i;) !has(AllSymbols, key = names[i++]) || IS_OP && !has(ObjectProto, key) || result.push(AllSymbols[key]);
                    return result
                };
            USE_NATIVE || (redefine(($Symbol = function() {
                if (this instanceof $Symbol) throw TypeError("Symbol is not a constructor!");
                var tag = uid(arguments.length > 0 ? arguments[0] : void 0),
                    $set = function(value) {
                        this === ObjectProto && $set.call(OPSymbols, value), has(this, HIDDEN) && has(this[HIDDEN], tag) && (this[HIDDEN][tag] = !1), setSymbolDesc(this, tag, createDesc(1, value))
                    };
                return DESCRIPTORS && setter && setSymbolDesc(ObjectProto, tag, {
                    configurable: !0,
                    set: $set
                }), wrap(tag)
            }).prototype, "toString", function() {
                return this._k
            }), $GOPD.f = $getOwnPropertyDescriptor, $DP.f = $defineProperty, __webpack_require__(46).f = gOPNExt.f = $getOwnPropertyNames, __webpack_require__(44).f = $propertyIsEnumerable, __webpack_require__(56).f = $getOwnPropertySymbols, DESCRIPTORS && !__webpack_require__(40) && redefine(ObjectProto, "propertyIsEnumerable", $propertyIsEnumerable, !0), wksExt.f = function(name) {
                return wrap(wks(name))
            }), $export($export.G + $export.W + $export.F * !USE_NATIVE, {
                Symbol: $Symbol
            });
            for (var es6Symbols = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), j = 0; es6Symbols.length > j;) wks(es6Symbols[j++]);
            for (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);
            $export($export.S + $export.F * !USE_NATIVE, "Symbol", {
                for: function(key) {
                    return has(SymbolRegistry, key += "") ? SymbolRegistry[key] : SymbolRegistry[key] = $Symbol(key)
                },
                keyFor: function(sym) {
                    if (!isSymbol(sym)) throw TypeError(sym + " is not a symbol!");
                    for (var key in SymbolRegistry)
                        if (SymbolRegistry[key] === sym) return key
                },
                useSetter: function() {
                    setter = !0
                },
                useSimple: function() {
                    setter = !1
                }
            }), $export($export.S + $export.F * !USE_NATIVE, "Object", {
                create: function(it, P) {
                    return void 0 === P ? _create(it) : $defineProperties(_create(it), P)
                },
                defineProperty: $defineProperty,
                defineProperties: $defineProperties,
                getOwnPropertyDescriptor: $getOwnPropertyDescriptor,
                getOwnPropertyNames: $getOwnPropertyNames,
                getOwnPropertySymbols: $getOwnPropertySymbols
            }), $JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function() {
                var S = $Symbol();
                return "[null]" != _stringify([S]) || "{}" != _stringify({
                    a: S
                }) || "{}" != _stringify(Object(S))
            })), "JSON", {
                stringify: function(it) {
                    for (var replacer, $replacer, args = [it], i = 1; arguments.length > i;) args.push(arguments[i++]);
                    if ($replacer = replacer = args[1], (isObject(replacer) || void 0 !== it) && !isSymbol(it)) return isArray(replacer) || (replacer = function(key, value) {
                        if ("function" == typeof $replacer && (value = $replacer.call(this, key, value)), !isSymbol(value)) return value
                    }), args[1] = replacer, _stringify.apply($JSON, args)
                }
            }), $Symbol.prototype[TO_PRIMITIVE] || __webpack_require__(19)($Symbol.prototype, TO_PRIMITIVE, $Symbol.prototype.valueOf), setToStringTag($Symbol, "Symbol"), setToStringTag(Math, "Math", !0), setToStringTag(global.JSON, "JSON", !0)
        }, function(module, exports, __webpack_require__) {
            var aFunction = __webpack_require__(51);
            module.exports = function(fn, that, length) {
                if (aFunction(fn), void 0 === that) return fn;
                switch (length) {
                    case 1:
                        return function(a) {
                            return fn.call(that, a)
                        };
                    case 2:
                        return function(a, b) {
                            return fn.call(that, a, b)
                        };
                    case 3:
                        return function(a, b, c) {
                            return fn.call(that, a, b, c)
                        }
                }
                return function() {
                    return fn.apply(that, arguments)
                }
            }
        }, function(module, exports, __webpack_require__) {
            var $keys = __webpack_require__(71),
                enumBugKeys = __webpack_require__(55);
            module.exports = Object.keys || function(O) {
                return $keys(O, enumBugKeys)
            }
        }, function(module, exports, __webpack_require__) {
            var IObject = __webpack_require__(53),
                defined = __webpack_require__(28);
            module.exports = function(it) {
                return IObject(defined(it))
            }
        }, function(module, exports) {
            module.exports = function(it) {
                if (null == it) throw TypeError("Can't call method on  " + it);
                return it
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var global = __webpack_require__(5),
                has = __webpack_require__(18),
                cof = __webpack_require__(34),
                inheritIfRequired = __webpack_require__(65),
                toPrimitive = __webpack_require__(41),
                fails = __webpack_require__(4),
                gOPN = __webpack_require__(46).f,
                gOPD = __webpack_require__(57).f,
                dP = __webpack_require__(6).f,
                $trim = __webpack_require__(102).trim,
                $Number = global.Number,
                Base = $Number,
                proto = $Number.prototype,
                BROKEN_COF = "Number" == cof(__webpack_require__(45)(proto)),
                TRIM = "trim" in String.prototype,
                toNumber = function(argument) {
                    var it = toPrimitive(argument, !1);
                    if ("string" == typeof it && it.length > 2) {
                        var third, radix, maxCode, first = (it = TRIM ? it.trim() : $trim(it, 3)).charCodeAt(0);
                        if (43 === first || 45 === first) {
                            if (88 === (third = it.charCodeAt(2)) || 120 === third) return NaN
                        } else if (48 === first) {
                            switch (it.charCodeAt(1)) {
                                case 66:
                                case 98:
                                    radix = 2, maxCode = 49;
                                    break;
                                case 79:
                                case 111:
                                    radix = 8, maxCode = 55;
                                    break;
                                default:
                                    return +it
                            }
                            for (var code, digits = it.slice(2), i = 0, l = digits.length; i < l; i++)
                                if ((code = digits.charCodeAt(i)) < 48 || code > maxCode) return NaN;
                            return parseInt(digits, radix)
                        }
                    }
                    return +it
                };
            if (!$Number(" 0o1") || !$Number("0b1") || $Number("+0x1")) {
                $Number = function(value) {
                    var it = arguments.length < 1 ? 0 : value,
                        that = this;
                    return that instanceof $Number && (BROKEN_COF ? fails(function() {
                        proto.valueOf.call(that)
                    }) : "Number" != cof(that)) ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it)
                };
                for (var key, keys = __webpack_require__(8) ? gOPN(Base) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), j = 0; keys.length > j; j++) has(Base, key = keys[j]) && !has($Number, key) && dP($Number, key, gOPD(Base, key));
                $Number.prototype = proto, proto.constructor = $Number, __webpack_require__(14)(global, "Number", $Number)
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var $export = __webpack_require__(9),
                $find = __webpack_require__(111)(5),
                forced = !0;
            "find" in [] && Array(1).find(function() {
                forced = !1
            }), $export($export.P + $export.F * forced, "Array", {
                find: function(callbackfn) {
                    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : void 0)
                }
            }), __webpack_require__(63)("find")
        }, function(module, exports, __webpack_require__) {
            (function(module) {
                ! function(root, factory) {
                    "use strict";
                    var PubSub = {};
                    root.PubSub = PubSub;
                    var define = root.define;
                    ! function(PubSub) {
                        var messages = {},
                            lastUid = -1;

                        function hasKeys(obj) {
                            var key;
                            for (key in obj)
                                if (obj.hasOwnProperty(key)) return !0;
                            return !1
                        }

                        function callSubscriberWithDelayedExceptions(subscriber, message, data) {
                            try {
                                subscriber(message, data)
                            } catch (ex) {
                                setTimeout(function(ex) {
                                    return function() {
                                        throw ex
                                    }
                                }(ex), 0)
                            }
                        }

                        function callSubscriberWithImmediateExceptions(subscriber, message, data) {
                            subscriber(message, data)
                        }

                        function deliverMessage(originalMessage, matchedMessage, data, immediateExceptions) {
                            var s, subscribers = messages[matchedMessage],
                                callSubscriber = immediateExceptions ? callSubscriberWithImmediateExceptions : callSubscriberWithDelayedExceptions;
                            if (messages.hasOwnProperty(matchedMessage))
                                for (s in subscribers) subscribers.hasOwnProperty(s) && callSubscriber(subscribers[s], originalMessage, data)
                        }

                        function publish(message, data, sync, immediateExceptions) {
                            var deliver = function(message, data, immediateExceptions) {
                                    return function() {
                                        var topic = String(message),
                                            position = topic.lastIndexOf(".");
                                        for (deliverMessage(message, message, data, immediateExceptions); - 1 !== position;) topic = topic.substr(0, position), position = topic.lastIndexOf("."), deliverMessage(message, topic, data, immediateExceptions)
                                    }
                                }(message = "symbol" == typeof message ? message.toString() : message, data, immediateExceptions),
                                hasSubscribers = function(message) {
                                    var topic = String(message),
                                        found = Boolean(messages.hasOwnProperty(topic) && hasKeys(messages[topic])),
                                        position = topic.lastIndexOf(".");
                                    for (; !found && -1 !== position;) topic = topic.substr(0, position), position = topic.lastIndexOf("."), found = Boolean(messages.hasOwnProperty(topic) && hasKeys(messages[topic]));
                                    return found
                                }(message);
                            return !!hasSubscribers && (!0 === sync ? deliver() : setTimeout(deliver, 0), !0)
                        }
                        PubSub.publish = function(message, data) {
                            return publish(message, data, !1, PubSub.immediateExceptions)
                        }, PubSub.publishSync = function(message, data) {
                            return publish(message, data, !0, PubSub.immediateExceptions)
                        }, PubSub.subscribe = function(message, func) {
                            if ("function" != typeof func) return !1;
                            message = "symbol" == typeof message ? message.toString() : message, messages.hasOwnProperty(message) || (messages[message] = {});
                            var token = "uid_" + String(++lastUid);
                            return messages[message][token] = func, token
                        }, PubSub.subscribeOnce = function(message, func) {
                            var token = PubSub.subscribe(message, function() {
                                PubSub.unsubscribe(token), func.apply(this, arguments)
                            });
                            return PubSub
                        }, PubSub.clearAllSubscriptions = function() {
                            messages = {}
                        }, PubSub.clearSubscriptions = function(topic) {
                            var m;
                            for (m in messages) messages.hasOwnProperty(m) && 0 === m.indexOf(topic) && delete messages[m]
                        }, PubSub.unsubscribe = function(value) {
                            var m, message, t, isTopic = "string" == typeof value && (messages.hasOwnProperty(value) || function(topic) {
                                    var m;
                                    for (m in messages)
                                        if (messages.hasOwnProperty(m) && 0 === m.indexOf(topic)) return !0;
                                    return !1
                                }(value)),
                                isToken = !isTopic && "string" == typeof value,
                                isFunction = "function" == typeof value,
                                result = !1;
                            if (!isTopic) {
                                for (m in messages)
                                    if (messages.hasOwnProperty(m)) {
                                        if (message = messages[m], isToken && message[value]) {
                                            delete message[value], result = value;
                                            break
                                        }
                                        if (isFunction)
                                            for (t in message) message.hasOwnProperty(t) && message[t] === value && (delete message[t], result = !0)
                                    } return result
                            }
                            PubSub.clearSubscriptions(value)
                        }
                    }(PubSub), (void 0 !== module && module.exports && (exports = module.exports = PubSub), exports.PubSub = PubSub, module.exports = exports = PubSub)
                }("object" == typeof window && window || this)
            }).call(this, __webpack_require__(116)(module))
        }, function(module, exports) {
            var id = 0,
                px = Math.random();
            module.exports = function(key) {
                return "Symbol(".concat(void 0 === key ? "" : key, ")_", (++id + px).toString(36))
            }
        }, function(module, exports) {
            module.exports = function(bitmap, value) {
                return {
                    enumerable: !(1 & bitmap),
                    configurable: !(2 & bitmap),
                    writable: !(4 & bitmap),
                    value: value
                }
            }
        }, function(module, exports) {
            var toString = {}.toString;
            module.exports = function(it) {
                return toString.call(it).slice(8, -1)
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            __webpack_require__(97);
            var anObject = __webpack_require__(7),
                $flags = __webpack_require__(47),
                DESCRIPTORS = __webpack_require__(8),
                $toString = /./.toString,
                define = function(fn) {
                    __webpack_require__(14)(RegExp.prototype, "toString", fn, !0)
                };
            __webpack_require__(4)(function() {
                return "/a/b" != $toString.call({
                    source: "a",
                    flags: "b"
                })
            }) ? define(function() {
                var R = anObject(this);
                return "/".concat(R.source, "/", "flags" in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : void 0)
            }) : "toString" != $toString.name && define(function() {
                return $toString.call(this)
            })
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var isRegExp = __webpack_require__(58),
                anObject = __webpack_require__(7),
                speciesConstructor = __webpack_require__(98),
                advanceStringIndex = __webpack_require__(59),
                toLength = __webpack_require__(20),
                callRegExpExec = __webpack_require__(60),
                regexpExec = __webpack_require__(61),
                $min = Math.min,
                $push = [].push,
                SUPPORTS_Y = !! function() {
                    try {
                        return new RegExp("x", "y")
                    } catch (e) {}
                }();
            __webpack_require__(62)("split", 2, function(defined, SPLIT, $split, maybeCallNative) {
                var internalSplit = $split;
                return "c" == "abbc".split(/(b)*/)[1] || 4 != "test".split(/(?:)/, -1).length || 2 != "ab".split(/(?:ab)*/).length || 4 != ".".split(/(.?)(.?)/).length || ".".split(/()()/).length > 1 || "".split(/.?/).length ? internalSplit = function(separator, limit) {
                    var string = String(this);
                    if (void 0 === separator && 0 === limit) return [];
                    if (!isRegExp(separator)) return $split.call(string, separator, limit);
                    for (var match, lastIndex, lastLength, output = [], flags = (separator.ignoreCase ? "i" : "") + (separator.multiline ? "m" : "") + (separator.unicode ? "u" : "") + (separator.sticky ? "y" : ""), lastLastIndex = 0, splitLimit = void 0 === limit ? 4294967295 : limit >>> 0, separatorCopy = new RegExp(separator.source, flags + "g");
                        (match = regexpExec.call(separatorCopy, string)) && !((lastIndex = separatorCopy.lastIndex) > lastLastIndex && (output.push(string.slice(lastLastIndex, match.index)), match.length > 1 && match.index < string.length && $push.apply(output, match.slice(1)), lastLength = match[0].length, lastLastIndex = lastIndex, output.length >= splitLimit));) separatorCopy.lastIndex === match.index && separatorCopy.lastIndex++;
                    return lastLastIndex === string.length ? !lastLength && separatorCopy.test("") || output.push("") : output.push(string.slice(lastLastIndex)), output.length > splitLimit ? output.slice(0, splitLimit) : output
                } : "0".split(void 0, 0).length && (internalSplit = function(separator, limit) {
                    return void 0 === separator && 0 === limit ? [] : $split.call(this, separator, limit)
                }), [function(separator, limit) {
                    var O = defined(this),
                        splitter = null == separator ? void 0 : separator[SPLIT];
                    return void 0 !== splitter ? splitter.call(separator, O, limit) : internalSplit.call(String(O), separator, limit)
                }, function(regexp, limit) {
                    var res = maybeCallNative(internalSplit, regexp, this, limit, internalSplit !== $split);
                    if (res.done) return res.value;
                    var rx = anObject(regexp),
                        S = String(this),
                        C = speciesConstructor(rx, RegExp),
                        unicodeMatching = rx.unicode,
                        flags = (rx.ignoreCase ? "i" : "") + (rx.multiline ? "m" : "") + (rx.unicode ? "u" : "") + (SUPPORTS_Y ? "y" : "g"),
                        splitter = new C(SUPPORTS_Y ? rx : "^(?:" + rx.source + ")", flags),
                        lim = void 0 === limit ? 4294967295 : limit >>> 0;
                    if (0 === lim) return [];
                    if (0 === S.length) return null === callRegExpExec(splitter, S) ? [S] : [];
                    for (var p = 0, q = 0, A = []; q < S.length;) {
                        splitter.lastIndex = SUPPORTS_Y ? q : 0;
                        var e, z = callRegExpExec(splitter, SUPPORTS_Y ? S : S.slice(q));
                        if (null === z || (e = $min(toLength(splitter.lastIndex + (SUPPORTS_Y ? 0 : q)), S.length)) === p) q = advanceStringIndex(S, q, unicodeMatching);
                        else {
                            if (A.push(S.slice(p, q)), A.length === lim) return A;
                            for (var i = 1; i <= z.length - 1; i++)
                                if (A.push(z[i]), A.length === lim) return A;
                            q = p = e
                        }
                    }
                    return A.push(S.slice(p)), A
                }]
            })
        }, function(module, exports) {
            module.exports = {}
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var anObject = __webpack_require__(7),
                toObject = __webpack_require__(21),
                toLength = __webpack_require__(20),
                toInteger = __webpack_require__(43),
                advanceStringIndex = __webpack_require__(59),
                regExpExec = __webpack_require__(60),
                max = Math.max,
                min = Math.min,
                floor = Math.floor,
                SUBSTITUTION_SYMBOLS = /\$([$&`']|\d\d?|<[^>]*>)/g,
                SUBSTITUTION_SYMBOLS_NO_NAMED = /\$([$&`']|\d\d?)/g;
            __webpack_require__(62)("replace", 2, function(defined, REPLACE, $replace, maybeCallNative) {
                return [function(searchValue, replaceValue) {
                    var O = defined(this),
                        fn = null == searchValue ? void 0 : searchValue[REPLACE];
                    return void 0 !== fn ? fn.call(searchValue, O, replaceValue) : $replace.call(String(O), searchValue, replaceValue)
                }, function(regexp, replaceValue) {
                    var res = maybeCallNative($replace, regexp, this, replaceValue);
                    if (res.done) return res.value;
                    var rx = anObject(regexp),
                        S = String(this),
                        functionalReplace = "function" == typeof replaceValue;
                    functionalReplace || (replaceValue = String(replaceValue));
                    var global = rx.global;
                    if (global) {
                        var fullUnicode = rx.unicode;
                        rx.lastIndex = 0
                    }
                    for (var results = [];;) {
                        var result = regExpExec(rx, S);
                        if (null === result) break;
                        if (results.push(result), !global) break;
                        "" === String(result[0]) && (rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode))
                    }
                    for (var it, accumulatedResult = "", nextSourcePosition = 0, i = 0; i < results.length; i++) {
                        result = results[i];
                        for (var matched = String(result[0]), position = max(min(toInteger(result.index), S.length), 0), captures = [], j = 1; j < result.length; j++) captures.push(void 0 === (it = result[j]) ? it : String(it));
                        var namedCaptures = result.groups;
                        if (functionalReplace) {
                            var replacerArgs = [matched].concat(captures, position, S);
                            void 0 !== namedCaptures && replacerArgs.push(namedCaptures);
                            var replacement = String(replaceValue.apply(void 0, replacerArgs))
                        } else replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);
                        position >= nextSourcePosition && (accumulatedResult += S.slice(nextSourcePosition, position) + replacement, nextSourcePosition = position + matched.length)
                    }
                    return accumulatedResult + S.slice(nextSourcePosition)
                }];

                function getSubstitution(matched, str, position, captures, namedCaptures, replacement) {
                    var tailPos = position + matched.length,
                        m = captures.length,
                        symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;
                    return void 0 !== namedCaptures && (namedCaptures = toObject(namedCaptures), symbols = SUBSTITUTION_SYMBOLS), $replace.call(replacement, symbols, function(match, ch) {
                        var capture;
                        switch (ch.charAt(0)) {
                            case "$":
                                return "$";
                            case "&":
                                return matched;
                            case "`":
                                return str.slice(0, position);
                            case "'":
                                return str.slice(tailPos);
                            case "<":
                                capture = namedCaptures[ch.slice(1, -1)];
                                break;
                            default:
                                var n = +ch;
                                if (0 === n) return ch;
                                if (n > m) {
                                    var f = floor(n / 10);
                                    return 0 === f ? ch : f <= m ? void 0 === captures[f - 1] ? ch.charAt(1) : captures[f - 1] + ch.charAt(1) : ch
                                }
                                capture = captures[n - 1]
                        }
                        return void 0 === capture ? "" : capture
                    })
                }
            })
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var $at = __webpack_require__(76)(!0);
            __webpack_require__(64)(String, "String", function(iterated) {
                this._t = String(iterated), this._i = 0
            }, function() {
                var point, O = this._t,
                    index = this._i;
                return index >= O.length ? {
                    value: void 0,
                    done: !0
                } : (point = $at(O, index), this._i += point.length, {
                    value: point,
                    done: !1
                })
            })
        }, function(module, exports) {
            module.exports = !1
        }, function(module, exports, __webpack_require__) {
            var isObject = __webpack_require__(12);
            module.exports = function(it, S) {
                if (!isObject(it)) return it;
                var fn, val;
                if (S && "function" == typeof(fn = it.toString) && !isObject(val = fn.call(it))) return val;
                if ("function" == typeof(fn = it.valueOf) && !isObject(val = fn.call(it))) return val;
                if (!S && "function" == typeof(fn = it.toString) && !isObject(val = fn.call(it))) return val;
                throw TypeError("Can't convert object to primitive value")
            }
        }, function(module, exports, __webpack_require__) {
            var def = __webpack_require__(6).f,
                has = __webpack_require__(18),
                TAG = __webpack_require__(3)("toStringTag");
            module.exports = function(it, tag, stat) {
                it && !has(it = stat ? it : it.prototype, TAG) && def(it, TAG, {
                    configurable: !0,
                    value: tag
                })
            }
        }, function(module, exports) {
            var ceil = Math.ceil,
                floor = Math.floor;
            module.exports = function(it) {
                return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it)
            }
        }, function(module, exports) {
            exports.f = {}.propertyIsEnumerable
        }, function(module, exports, __webpack_require__) {
            var anObject = __webpack_require__(7),
                dPs = __webpack_require__(94),
                enumBugKeys = __webpack_require__(55),
                IE_PROTO = __webpack_require__(54)("IE_PROTO"),
                Empty = function() {},
                createDict = function() {
                    var iframeDocument, iframe = __webpack_require__(70)("iframe"),
                        i = enumBugKeys.length;
                    for (iframe.style.display = "none", __webpack_require__(95).appendChild(iframe), iframe.src = "javascript:", (iframeDocument = iframe.contentWindow.document).open(), iframeDocument.write("<script>document.F=Object<\/script>"), iframeDocument.close(), createDict = iframeDocument.F; i--;) delete createDict.prototype[enumBugKeys[i]];
                    return createDict()
                };
            module.exports = Object.create || function(O, Properties) {
                var result;
                return null !== O ? (Empty.prototype = anObject(O), result = new Empty, Empty.prototype = null, result[IE_PROTO] = O) : result = createDict(), void 0 === Properties ? result : dPs(result, Properties)
            }
        }, function(module, exports, __webpack_require__) {
            var $keys = __webpack_require__(71),
                hiddenKeys = __webpack_require__(55).concat("length", "prototype");
            exports.f = Object.getOwnPropertyNames || function(O) {
                return $keys(O, hiddenKeys)
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var anObject = __webpack_require__(7);
            module.exports = function() {
                var that = anObject(this),
                    result = "";
                return that.global && (result += "g"), that.ignoreCase && (result += "i"), that.multiline && (result += "m"), that.unicode && (result += "u"), that.sticky && (result += "y"), result
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var ctx = __webpack_require__(25),
                $export = __webpack_require__(9),
                toObject = __webpack_require__(21),
                call = __webpack_require__(80),
                isArrayIter = __webpack_require__(81),
                toLength = __webpack_require__(20),
                createProperty = __webpack_require__(107),
                getIterFn = __webpack_require__(82);
            $export($export.S + $export.F * !__webpack_require__(83)(function(iter) {
                Array.from(iter)
            }), "Array", {
                from: function(arrayLike) {
                    var length, result, step, iterator, O = toObject(arrayLike),
                        C = "function" == typeof this ? this : Array,
                        aLen = arguments.length,
                        mapfn = aLen > 1 ? arguments[1] : void 0,
                        mapping = void 0 !== mapfn,
                        index = 0,
                        iterFn = getIterFn(O);
                    if (mapping && (mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : void 0, 2)), null == iterFn || C == Array && isArrayIter(iterFn))
                        for (result = new C(length = toLength(O.length)); length > index; index++) createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);
                    else
                        for (iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++) createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], !0) : step.value);
                    return result.length = index, result
                }
            })
        }, function(module, exports, __webpack_require__) {
            var __WEBPACK_AMD_DEFINE_RESULT__, LZString = function() {
                var f = String.fromCharCode,
                    keyStrBase64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                    keyStrUriSafe = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",
                    baseReverseDic = {};

                function getBaseValue(alphabet, character) {
                    if (!baseReverseDic[alphabet]) {
                        baseReverseDic[alphabet] = {};
                        for (var i = 0; i < alphabet.length; i++) baseReverseDic[alphabet][alphabet.charAt(i)] = i
                    }
                    return baseReverseDic[alphabet][character]
                }
                var LZString = {
                    compressToBase64: function(input) {
                        if (null == input) return "";
                        var res = LZString._compress(input, 6, function(a) {
                            return keyStrBase64.charAt(a)
                        });
                        switch (res.length % 4) {
                            default:
                            case 0:
                                return res;
                            case 1:
                                return res + "===";
                            case 2:
                                return res + "==";
                            case 3:
                                return res + "="
                        }
                    },
                    decompressFromBase64: function(input) {
                        return null == input ? "" : "" == input ? null : LZString._decompress(input.length, 32, function(index) {
                            return getBaseValue(keyStrBase64, input.charAt(index))
                        })
                    },
                    compressToUTF16: function(input) {
                        return null == input ? "" : LZString._compress(input, 15, function(a) {
                            return f(a + 32)
                        }) + " "
                    },
                    decompressFromUTF16: function(compressed) {
                        return null == compressed ? "" : "" == compressed ? null : LZString._decompress(compressed.length, 16384, function(index) {
                            return compressed.charCodeAt(index) - 32
                        })
                    },
                    compressToUint8Array: function(uncompressed) {
                        for (var compressed = LZString.compress(uncompressed), buf = new Uint8Array(2 * compressed.length), i = 0, TotalLen = compressed.length; i < TotalLen; i++) {
                            var current_value = compressed.charCodeAt(i);
                            buf[2 * i] = current_value >>> 8, buf[2 * i + 1] = current_value % 256
                        }
                        return buf
                    },
                    decompressFromUint8Array: function(compressed) {
                        if (null == compressed) return LZString.decompress(compressed);
                        for (var buf = new Array(compressed.length / 2), i = 0, TotalLen = buf.length; i < TotalLen; i++) buf[i] = 256 * compressed[2 * i] + compressed[2 * i + 1];
                        var result = [];
                        return buf.forEach(function(c) {
                            result.push(f(c))
                        }), LZString.decompress(result.join(""))
                    },
                    compressToEncodedURIComponent: function(input) {
                        return null == input ? "" : LZString._compress(input, 6, function(a) {
                            return keyStrUriSafe.charAt(a)
                        })
                    },
                    decompressFromEncodedURIComponent: function(input) {
                        return null == input ? "" : "" == input ? null : (input = input.replace(/ /g, "+"), LZString._decompress(input.length, 32, function(index) {
                            return getBaseValue(keyStrUriSafe, input.charAt(index))
                        }))
                    },
                    compress: function(uncompressed) {
                        return LZString._compress(uncompressed, 16, function(a) {
                            return f(a)
                        })
                    },
                    _compress: function(uncompressed, bitsPerChar, getCharFromInt) {
                        if (null == uncompressed) return "";
                        var i, value, ii, context_dictionary = {},
                            context_dictionaryToCreate = {},
                            context_c = "",
                            context_wc = "",
                            context_w = "",
                            context_enlargeIn = 2,
                            context_dictSize = 3,
                            context_numBits = 2,
                            context_data = [],
                            context_data_val = 0,
                            context_data_position = 0;
                        for (ii = 0; ii < uncompressed.length; ii += 1)
                            if (context_c = uncompressed.charAt(ii), Object.prototype.hasOwnProperty.call(context_dictionary, context_c) || (context_dictionary[context_c] = context_dictSize++, context_dictionaryToCreate[context_c] = !0), context_wc = context_w + context_c, Object.prototype.hasOwnProperty.call(context_dictionary, context_wc)) context_w = context_wc;
                            else {
                                if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {
                                    if (context_w.charCodeAt(0) < 256) {
                                        for (i = 0; i < context_numBits; i++) context_data_val <<= 1, context_data_position == bitsPerChar - 1 ? (context_data_position = 0, context_data.push(getCharFromInt(context_data_val)), context_data_val = 0) : context_data_position++;
                                        for (value = context_w.charCodeAt(0), i = 0; i < 8; i++) context_data_val = context_data_val << 1 | 1 & value, context_data_position == bitsPerChar - 1 ? (context_data_position = 0, context_data.push(getCharFromInt(context_data_val)), context_data_val = 0) : context_data_position++, value >>= 1
                                    } else {
                                        for (value = 1, i = 0; i < context_numBits; i++) context_data_val = context_data_val << 1 | value, context_data_position == bitsPerChar - 1 ? (context_data_position = 0, context_data.push(getCharFromInt(context_data_val)), context_data_val = 0) : context_data_position++, value = 0;
                                        for (value = context_w.charCodeAt(0), i = 0; i < 16; i++) context_data_val = context_data_val << 1 | 1 & value, context_data_position == bitsPerChar - 1 ? (context_data_position = 0, context_data.push(getCharFromInt(context_data_val)), context_data_val = 0) : context_data_position++, value >>= 1
                                    }
                                    0 == --context_enlargeIn && (context_enlargeIn = Math.pow(2, context_numBits), context_numBits++), delete context_dictionaryToCreate[context_w]
                                } else
                                    for (value = context_dictionary[context_w], i = 0; i < context_numBits; i++) context_data_val = context_data_val << 1 | 1 & value, context_data_position == bitsPerChar - 1 ? (context_data_position = 0, context_data.push(getCharFromInt(context_data_val)), context_data_val = 0) : context_data_position++, value >>= 1;
                                0 == --context_enlargeIn && (context_enlargeIn = Math.pow(2, context_numBits), context_numBits++), context_dictionary[context_wc] = context_dictSize++, context_w = String(context_c)
                            } if ("" !== context_w) {
                            if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {
                                if (context_w.charCodeAt(0) < 256) {
                                    for (i = 0; i < context_numBits; i++) context_data_val <<= 1, context_data_position == bitsPerChar - 1 ? (context_data_position = 0, context_data.push(getCharFromInt(context_data_val)), context_data_val = 0) : context_data_position++;
                                    for (value = context_w.charCodeAt(0), i = 0; i < 8; i++) context_data_val = context_data_val << 1 | 1 & value, context_data_position == bitsPerChar - 1 ? (context_data_position = 0, context_data.push(getCharFromInt(context_data_val)), context_data_val = 0) : context_data_position++, value >>= 1
                                } else {
                                    for (value = 1, i = 0; i < context_numBits; i++) context_data_val = context_data_val << 1 | value, context_data_position == bitsPerChar - 1 ? (context_data_position = 0, context_data.push(getCharFromInt(context_data_val)), context_data_val = 0) : context_data_position++, value = 0;
                                    for (value = context_w.charCodeAt(0), i = 0; i < 16; i++) context_data_val = context_data_val << 1 | 1 & value, context_data_position == bitsPerChar - 1 ? (context_data_position = 0, context_data.push(getCharFromInt(context_data_val)), context_data_val = 0) : context_data_position++, value >>= 1
                                }
                                0 == --context_enlargeIn && (context_enlargeIn = Math.pow(2, context_numBits), context_numBits++), delete context_dictionaryToCreate[context_w]
                            } else
                                for (value = context_dictionary[context_w], i = 0; i < context_numBits; i++) context_data_val = context_data_val << 1 | 1 & value, context_data_position == bitsPerChar - 1 ? (context_data_position = 0, context_data.push(getCharFromInt(context_data_val)), context_data_val = 0) : context_data_position++, value >>= 1;
                            0 == --context_enlargeIn && (context_enlargeIn = Math.pow(2, context_numBits), context_numBits++)
                        }
                        for (value = 2, i = 0; i < context_numBits; i++) context_data_val = context_data_val << 1 | 1 & value, context_data_position == bitsPerChar - 1 ? (context_data_position = 0, context_data.push(getCharFromInt(context_data_val)), context_data_val = 0) : context_data_position++, value >>= 1;
                        for (;;) {
                            if (context_data_val <<= 1, context_data_position == bitsPerChar - 1) {
                                context_data.push(getCharFromInt(context_data_val));
                                break
                            }
                            context_data_position++
                        }
                        return context_data.join("")
                    },
                    decompress: function(compressed) {
                        return null == compressed ? "" : "" == compressed ? null : LZString._decompress(compressed.length, 32768, function(index) {
                            return compressed.charCodeAt(index)
                        })
                    },
                    _decompress: function(length, resetValue, getNextValue) {
                        var i, w, bits, resb, maxpower, power, c, dictionary = [],
                            enlargeIn = 4,
                            dictSize = 4,
                            numBits = 3,
                            entry = "",
                            result = [],
                            data = {
                                val: getNextValue(0),
                                position: resetValue,
                                index: 1
                            };
                        for (i = 0; i < 3; i += 1) dictionary[i] = i;
                        for (bits = 0, maxpower = Math.pow(2, 2), power = 1; power != maxpower;) resb = data.val & data.position, data.position >>= 1, 0 == data.position && (data.position = resetValue, data.val = getNextValue(data.index++)), bits |= (resb > 0 ? 1 : 0) * power, power <<= 1;
                        switch (bits) {
                            case 0:
                                for (bits = 0, maxpower = Math.pow(2, 8), power = 1; power != maxpower;) resb = data.val & data.position, data.position >>= 1, 0 == data.position && (data.position = resetValue, data.val = getNextValue(data.index++)), bits |= (resb > 0 ? 1 : 0) * power, power <<= 1;
                                c = f(bits);
                                break;
                            case 1:
                                for (bits = 0, maxpower = Math.pow(2, 16), power = 1; power != maxpower;) resb = data.val & data.position, data.position >>= 1, 0 == data.position && (data.position = resetValue, data.val = getNextValue(data.index++)), bits |= (resb > 0 ? 1 : 0) * power, power <<= 1;
                                c = f(bits);
                                break;
                            case 2:
                                return ""
                        }
                        for (dictionary[3] = c, w = c, result.push(c);;) {
                            if (data.index > length) return "";
                            for (bits = 0, maxpower = Math.pow(2, numBits), power = 1; power != maxpower;) resb = data.val & data.position, data.position >>= 1, 0 == data.position && (data.position = resetValue, data.val = getNextValue(data.index++)), bits |= (resb > 0 ? 1 : 0) * power, power <<= 1;
                            switch (c = bits) {
                                case 0:
                                    for (bits = 0, maxpower = Math.pow(2, 8), power = 1; power != maxpower;) resb = data.val & data.position, data.position >>= 1, 0 == data.position && (data.position = resetValue, data.val = getNextValue(data.index++)), bits |= (resb > 0 ? 1 : 0) * power, power <<= 1;
                                    dictionary[dictSize++] = f(bits), c = dictSize - 1, enlargeIn--;
                                    break;
                                case 1:
                                    for (bits = 0, maxpower = Math.pow(2, 16), power = 1; power != maxpower;) resb = data.val & data.position, data.position >>= 1, 0 == data.position && (data.position = resetValue, data.val = getNextValue(data.index++)), bits |= (resb > 0 ? 1 : 0) * power, power <<= 1;
                                    dictionary[dictSize++] = f(bits), c = dictSize - 1, enlargeIn--;
                                    break;
                                case 2:
                                    return result.join("")
                            }
                            if (0 == enlargeIn && (enlargeIn = Math.pow(2, numBits), numBits++), dictionary[c]) entry = dictionary[c];
                            else {
                                if (c !== dictSize) return null;
                                entry = w + w.charAt(0)
                            }
                            result.push(entry), dictionary[dictSize++] = w + entry.charAt(0), w = entry, 0 == --enlargeIn && (enlargeIn = Math.pow(2, numBits), numBits++)
                        }
                    }
                };
                return LZString
            }();
            void 0 === (__WEBPACK_AMD_DEFINE_RESULT__ = function() {
                return LZString
            }.call(exports, __webpack_require__, exports, module)) || (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)
        }, function(module, exports, __webpack_require__) {
            var core = __webpack_require__(23),
                global = __webpack_require__(5),
                store = global["__core-js_shared__"] || (global["__core-js_shared__"] = {});
            (module.exports = function(key, value) {
                return store[key] || (store[key] = void 0 !== value ? value : {})
            })("versions", []).push({
                version: core.version,
                mode: __webpack_require__(40) ? "pure" : "global",
                copyright: "Â© 2018 Denis Pushkarev (zloirock.ru)"
            })
        }, function(module, exports) {
            module.exports = function(it) {
                if ("function" != typeof it) throw TypeError(it + " is not a function!");
                return it
            }
        }, function(module, exports, __webpack_require__) {
            var META = __webpack_require__(32)("meta"),
                isObject = __webpack_require__(12),
                has = __webpack_require__(18),
                setDesc = __webpack_require__(6).f,
                id = 0,
                isExtensible = Object.isExtensible || function() {
                    return !0
                },
                FREEZE = !__webpack_require__(4)(function() {
                    return isExtensible(Object.preventExtensions({}))
                }),
                setMeta = function(it) {
                    setDesc(it, META, {
                        value: {
                            i: "O" + ++id,
                            w: {}
                        }
                    })
                },
                meta = module.exports = {
                    KEY: META,
                    NEED: !1,
                    fastKey: function(it, create) {
                        if (!isObject(it)) return "symbol" == typeof it ? it : ("string" == typeof it ? "S" : "P") + it;
                        if (!has(it, META)) {
                            if (!isExtensible(it)) return "F";
                            if (!create) return "E";
                            setMeta(it)
                        }
                        return it[META].i
                    },
                    getWeak: function(it, create) {
                        if (!has(it, META)) {
                            if (!isExtensible(it)) return !0;
                            if (!create) return !1;
                            setMeta(it)
                        }
                        return it[META].w
                    },
                    onFreeze: function(it) {
                        return FREEZE && meta.NEED && isExtensible(it) && !has(it, META) && setMeta(it), it
                    }
                }
        }, function(module, exports, __webpack_require__) {
            var cof = __webpack_require__(34);
            module.exports = Object("z").propertyIsEnumerable(0) ? Object : function(it) {
                return "String" == cof(it) ? it.split("") : Object(it)
            }
        }, function(module, exports, __webpack_require__) {
            var shared = __webpack_require__(50)("keys"),
                uid = __webpack_require__(32);
            module.exports = function(key) {
                return shared[key] || (shared[key] = uid(key))
            }
        }, function(module, exports) {
            module.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")
        }, function(module, exports) {
            exports.f = Object.getOwnPropertySymbols
        }, function(module, exports, __webpack_require__) {
            var pIE = __webpack_require__(44),
                createDesc = __webpack_require__(33),
                toIObject = __webpack_require__(27),
                toPrimitive = __webpack_require__(41),
                has = __webpack_require__(18),
                IE8_DOM_DEFINE = __webpack_require__(69),
                gOPD = Object.getOwnPropertyDescriptor;
            exports.f = __webpack_require__(8) ? gOPD : function(O, P) {
                if (O = toIObject(O), P = toPrimitive(P, !0), IE8_DOM_DEFINE) try {
                    return gOPD(O, P)
                } catch (e) {}
                if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P])
            }
        }, function(module, exports, __webpack_require__) {
            var isObject = __webpack_require__(12),
                cof = __webpack_require__(34),
                MATCH = __webpack_require__(3)("match");
            module.exports = function(it) {
                var isRegExp;
                return isObject(it) && (void 0 !== (isRegExp = it[MATCH]) ? !!isRegExp : "RegExp" == cof(it))
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var at = __webpack_require__(76)(!0);
            module.exports = function(S, index, unicode) {
                return index + (unicode ? at(S, index).length : 1)
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var classof = __webpack_require__(77),
                builtinExec = RegExp.prototype.exec;
            module.exports = function(R, S) {
                var exec = R.exec;
                if ("function" == typeof exec) {
                    var result = exec.call(R, S);
                    if ("object" != typeof result) throw new TypeError("RegExp exec method returned something other than an Object or null");
                    return result
                }
                if ("RegExp" !== classof(R)) throw new TypeError("RegExp#exec called on incompatible receiver");
                return builtinExec.call(R, S)
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var re1, re2, regexpFlags = __webpack_require__(47),
                nativeExec = RegExp.prototype.exec,
                nativeReplace = String.prototype.replace,
                patchedExec = nativeExec,
                UPDATES_LAST_INDEX_WRONG = (re1 = /a/, re2 = /b*/g, nativeExec.call(re1, "a"), nativeExec.call(re2, "a"), 0 !== re1.lastIndex || 0 !== re2.lastIndex),
                NPCG_INCLUDED = void 0 !== /()??/.exec("")[1];
            (UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED) && (patchedExec = function(str) {
                var lastIndex, reCopy, match, i, re = this;
                return NPCG_INCLUDED && (reCopy = new RegExp("^" + re.source + "$(?!\\s)", regexpFlags.call(re))), UPDATES_LAST_INDEX_WRONG && (lastIndex = re.lastIndex), match = nativeExec.call(re, str), UPDATES_LAST_INDEX_WRONG && match && (re.lastIndex = re.global ? match.index + match[0].length : lastIndex), NPCG_INCLUDED && match && match.length > 1 && nativeReplace.call(match[0], reCopy, function() {
                    for (i = 1; i < arguments.length - 2; i++) void 0 === arguments[i] && (match[i] = void 0)
                }), match
            }), module.exports = patchedExec
        }, function(module, exports, __webpack_require__) {
            "use strict";
            __webpack_require__(99);
            var redefine = __webpack_require__(14),
                hide = __webpack_require__(19),
                fails = __webpack_require__(4),
                defined = __webpack_require__(28),
                wks = __webpack_require__(3),
                regexpExec = __webpack_require__(61),
                SPECIES = wks("species"),
                REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function() {
                    var re = /./;
                    return re.exec = function() {
                        var result = [];
                        return result.groups = {
                            a: "7"
                        }, result
                    }, "7" !== "".replace(re, "$<a>")
                }),
                SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = function() {
                    var re = /(?:)/,
                        originalExec = re.exec;
                    re.exec = function() {
                        return originalExec.apply(this, arguments)
                    };
                    var result = "ab".split(re);
                    return 2 === result.length && "a" === result[0] && "b" === result[1]
                }();
            module.exports = function(KEY, length, exec) {
                var SYMBOL = wks(KEY),
                    DELEGATES_TO_SYMBOL = !fails(function() {
                        var O = {};
                        return O[SYMBOL] = function() {
                            return 7
                        }, 7 != "" [KEY](O)
                    }),
                    DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL ? !fails(function() {
                        var execCalled = !1,
                            re = /a/;
                        return re.exec = function() {
                            return execCalled = !0, null
                        }, "split" === KEY && (re.constructor = {}, re.constructor[SPECIES] = function() {
                            return re
                        }), re[SYMBOL](""), !execCalled
                    }) : void 0;
                if (!DELEGATES_TO_SYMBOL || !DELEGATES_TO_EXEC || "replace" === KEY && !REPLACE_SUPPORTS_NAMED_GROUPS || "split" === KEY && !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC) {
                    var nativeRegExpMethod = /./ [SYMBOL],
                        fns = exec(defined, SYMBOL, "" [KEY], function(nativeMethod, regexp, str, arg2, forceStringMethod) {
                            return regexp.exec === regexpExec ? DELEGATES_TO_SYMBOL && !forceStringMethod ? {
                                done: !0,
                                value: nativeRegExpMethod.call(regexp, str, arg2)
                            } : {
                                done: !0,
                                value: nativeMethod.call(str, regexp, arg2)
                            } : {
                                done: !1
                            }
                        }),
                        strfn = fns[0],
                        rxfn = fns[1];
                    redefine(String.prototype, KEY, strfn), hide(RegExp.prototype, SYMBOL, 2 == length ? function(string, arg) {
                        return rxfn.call(string, this, arg)
                    } : function(string) {
                        return rxfn.call(string, this)
                    })
                }
            }
        }, function(module, exports, __webpack_require__) {
            var UNSCOPABLES = __webpack_require__(3)("unscopables"),
                ArrayProto = Array.prototype;
            null == ArrayProto[UNSCOPABLES] && __webpack_require__(19)(ArrayProto, UNSCOPABLES, {}), module.exports = function(key) {
                ArrayProto[UNSCOPABLES][key] = !0
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var LIBRARY = __webpack_require__(40),
                $export = __webpack_require__(9),
                redefine = __webpack_require__(14),
                hide = __webpack_require__(19),
                Iterators = __webpack_require__(37),
                $iterCreate = __webpack_require__(100),
                setToStringTag = __webpack_require__(42),
                getPrototypeOf = __webpack_require__(101),
                ITERATOR = __webpack_require__(3)("iterator"),
                BUGGY = !([].keys && "next" in [].keys()),
                returnThis = function() {
                    return this
                };
            module.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {
                $iterCreate(Constructor, NAME, next);
                var methods, key, IteratorPrototype, getMethod = function(kind) {
                        if (!BUGGY && kind in proto) return proto[kind];
                        switch (kind) {
                            case "keys":
                            case "values":
                                return function() {
                                    return new Constructor(this, kind)
                                }
                        }
                        return function() {
                            return new Constructor(this, kind)
                        }
                    },
                    TAG = NAME + " Iterator",
                    DEF_VALUES = "values" == DEFAULT,
                    VALUES_BUG = !1,
                    proto = Base.prototype,
                    $native = proto[ITERATOR] || proto["@@iterator"] || DEFAULT && proto[DEFAULT],
                    $default = $native || getMethod(DEFAULT),
                    $entries = DEFAULT ? DEF_VALUES ? getMethod("entries") : $default : void 0,
                    $anyNative = "Array" == NAME && proto.entries || $native;
                if ($anyNative && (IteratorPrototype = getPrototypeOf($anyNative.call(new Base))) !== Object.prototype && IteratorPrototype.next && (setToStringTag(IteratorPrototype, TAG, !0), LIBRARY || "function" == typeof IteratorPrototype[ITERATOR] || hide(IteratorPrototype, ITERATOR, returnThis)), DEF_VALUES && $native && "values" !== $native.name && (VALUES_BUG = !0, $default = function() {
                        return $native.call(this)
                    }), LIBRARY && !FORCED || !BUGGY && !VALUES_BUG && proto[ITERATOR] || hide(proto, ITERATOR, $default), Iterators[NAME] = $default, Iterators[TAG] = returnThis, DEFAULT)
                    if (methods = {
                            values: DEF_VALUES ? $default : getMethod("values"),
                            keys: IS_SET ? $default : getMethod("keys"),
                            entries: $entries
                        }, FORCED)
                        for (key in methods) key in proto || redefine(proto, key, methods[key]);
                    else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);
                return methods
            }
        }, function(module, exports, __webpack_require__) {
            var isObject = __webpack_require__(12),
                setPrototypeOf = __webpack_require__(75).set;
            module.exports = function(that, target, C) {
                var P, S = target.constructor;
                return S !== C && "function" == typeof S && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf && setPrototypeOf(that, P), that
            }
        }, function(module, exports, __webpack_require__) {
            var global = __webpack_require__(5),
                inheritIfRequired = __webpack_require__(65),
                dP = __webpack_require__(6).f,
                gOPN = __webpack_require__(46).f,
                isRegExp = __webpack_require__(58),
                $flags = __webpack_require__(47),
                $RegExp = global.RegExp,
                Base = $RegExp,
                proto = $RegExp.prototype,
                re1 = /a/g,
                re2 = /a/g,
                CORRECT_NEW = new $RegExp(re1) !== re1;
            if (__webpack_require__(8) && (!CORRECT_NEW || __webpack_require__(4)(function() {
                    return re2[__webpack_require__(3)("match")] = !1, $RegExp(re1) != re1 || $RegExp(re2) == re2 || "/a/i" != $RegExp(re1, "i")
                }))) {
                $RegExp = function(p, f) {
                    var tiRE = this instanceof $RegExp,
                        piRE = isRegExp(p),
                        fiU = void 0 === f;
                    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p : inheritIfRequired(CORRECT_NEW ? new Base(piRE && !fiU ? p.source : p, f) : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f), tiRE ? this : proto, $RegExp)
                };
                for (var proxy = function(key) {
                        key in $RegExp || dP($RegExp, key, {
                            configurable: !0,
                            get: function() {
                                return Base[key]
                            },
                            set: function(it) {
                                Base[key] = it
                            }
                        })
                    }, keys = gOPN(Base), i = 0; keys.length > i;) proxy(keys[i++]);
                proto.constructor = $RegExp, $RegExp.prototype = proto, __webpack_require__(14)(global, "RegExp", $RegExp)
            }
            __webpack_require__(88)("RegExp")
        }, function(module, exports, __webpack_require__) {
            var global = __webpack_require__(5),
                core = __webpack_require__(23),
                LIBRARY = __webpack_require__(40),
                wksExt = __webpack_require__(68),
                defineProperty = __webpack_require__(6).f;
            module.exports = function(name) {
                var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});
                "_" == name.charAt(0) || name in $Symbol || defineProperty($Symbol, name, {
                    value: wksExt.f(name)
                })
            }
        }, function(module, exports, __webpack_require__) {
            exports.f = __webpack_require__(3)
        }, function(module, exports, __webpack_require__) {
            module.exports = !__webpack_require__(8) && !__webpack_require__(4)(function() {
                return 7 != Object.defineProperty(__webpack_require__(70)("div"), "a", {
                    get: function() {
                        return 7
                    }
                }).a
            })
        }, function(module, exports, __webpack_require__) {
            var isObject = __webpack_require__(12),
                document = __webpack_require__(5).document,
                is = isObject(document) && isObject(document.createElement);
            module.exports = function(it) {
                return is ? document.createElement(it) : {}
            }
        }, function(module, exports, __webpack_require__) {
            var has = __webpack_require__(18),
                toIObject = __webpack_require__(27),
                arrayIndexOf = __webpack_require__(72)(!1),
                IE_PROTO = __webpack_require__(54)("IE_PROTO");
            module.exports = function(object, names) {
                var key, O = toIObject(object),
                    i = 0,
                    result = [];
                for (key in O) key != IE_PROTO && has(O, key) && result.push(key);
                for (; names.length > i;) has(O, key = names[i++]) && (~arrayIndexOf(result, key) || result.push(key));
                return result
            }
        }, function(module, exports, __webpack_require__) {
            var toIObject = __webpack_require__(27),
                toLength = __webpack_require__(20),
                toAbsoluteIndex = __webpack_require__(93);
            module.exports = function(IS_INCLUDES) {
                return function($this, el, fromIndex) {
                    var value, O = toIObject($this),
                        length = toLength(O.length),
                        index = toAbsoluteIndex(fromIndex, length);
                    if (IS_INCLUDES && el != el) {
                        for (; length > index;)
                            if ((value = O[index++]) != value) return !0
                    } else
                        for (; length > index; index++)
                            if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;
                    return !IS_INCLUDES && -1
                }
            }
        }, function(module, exports, __webpack_require__) {
            var cof = __webpack_require__(34);
            module.exports = Array.isArray || function(arg) {
                return "Array" == cof(arg)
            }
        }, function(module, exports, __webpack_require__) {
            var $export = __webpack_require__(9);
            $export($export.S, "Object", {
                setPrototypeOf: __webpack_require__(75).set
            })
        }, function(module, exports, __webpack_require__) {
            var isObject = __webpack_require__(12),
                anObject = __webpack_require__(7),
                check = function(O, proto) {
                    if (anObject(O), !isObject(proto) && null !== proto) throw TypeError(proto + ": can't set as prototype!")
                };
            module.exports = {
                set: Object.setPrototypeOf || ("__proto__" in {} ? function(test, buggy, set) {
                    try {
                        (set = __webpack_require__(25)(Function.call, __webpack_require__(57).f(Object.prototype, "__proto__").set, 2))(test, []), buggy = !(test instanceof Array)
                    } catch (e) {
                        buggy = !0
                    }
                    return function(O, proto) {
                        return check(O, proto), buggy ? O.__proto__ = proto : set(O, proto), O
                    }
                }({}, !1) : void 0),
                check: check
            }
        }, function(module, exports, __webpack_require__) {
            var toInteger = __webpack_require__(43),
                defined = __webpack_require__(28);
            module.exports = function(TO_STRING) {
                return function(that, pos) {
                    var a, b, s = String(defined(that)),
                        i = toInteger(pos),
                        l = s.length;
                    return i < 0 || i >= l ? TO_STRING ? "" : void 0 : (a = s.charCodeAt(i)) < 55296 || a > 56319 || i + 1 === l || (b = s.charCodeAt(i + 1)) < 56320 || b > 57343 ? TO_STRING ? s.charAt(i) : a : TO_STRING ? s.slice(i, i + 2) : b - 56320 + (a - 55296 << 10) + 65536
                }
            }
        }, function(module, exports, __webpack_require__) {
            var cof = __webpack_require__(34),
                TAG = __webpack_require__(3)("toStringTag"),
                ARG = "Arguments" == cof(function() {
                    return arguments
                }());
            module.exports = function(it) {
                var O, T, B;
                return void 0 === it ? "Undefined" : null === it ? "Null" : "string" == typeof(T = function(it, key) {
                    try {
                        return it[key]
                    } catch (e) {}
                }(O = Object(it), TAG)) ? T : ARG ? cof(O) : "Object" == (B = cof(O)) && "function" == typeof O.callee ? "Arguments" : B
            }
        }, function(module, exports) {
            module.exports = function(done, value) {
                return {
                    value: value,
                    done: !!done
                }
            }
        }, function(module, exports, __webpack_require__) {
            var $export = __webpack_require__(9);
            $export($export.S + $export.F, "Object", {
                assign: __webpack_require__(104)
            })
        }, function(module, exports, __webpack_require__) {
            var anObject = __webpack_require__(7);
            module.exports = function(iterator, fn, value, entries) {
                try {
                    return entries ? fn(anObject(value)[0], value[1]) : fn(value)
                } catch (e) {
                    var ret = iterator.return;
                    throw void 0 !== ret && anObject(ret.call(iterator)), e
                }
            }
        }, function(module, exports, __webpack_require__) {
            var Iterators = __webpack_require__(37),
                ITERATOR = __webpack_require__(3)("iterator"),
                ArrayProto = Array.prototype;
            module.exports = function(it) {
                return void 0 !== it && (Iterators.Array === it || ArrayProto[ITERATOR] === it)
            }
        }, function(module, exports, __webpack_require__) {
            var classof = __webpack_require__(77),
                ITERATOR = __webpack_require__(3)("iterator"),
                Iterators = __webpack_require__(37);
            module.exports = __webpack_require__(23).getIteratorMethod = function(it) {
                if (null != it) return it[ITERATOR] || it["@@iterator"] || Iterators[classof(it)]
            }
        }, function(module, exports, __webpack_require__) {
            var ITERATOR = __webpack_require__(3)("iterator"),
                SAFE_CLOSING = !1;
            try {
                var riter = [7][ITERATOR]();
                riter.return = function() {
                    SAFE_CLOSING = !0
                }, Array.from(riter, function() {
                    throw 2
                })
            } catch (e) {}
            module.exports = function(exec, skipClosing) {
                if (!skipClosing && !SAFE_CLOSING) return !1;
                var safe = !1;
                try {
                    var arr = [7],
                        iter = arr[ITERATOR]();
                    iter.next = function() {
                        return {
                            done: safe = !0
                        }
                    }, arr[ITERATOR] = function() {
                        return iter
                    }, exec(arr)
                } catch (e) {}
                return safe
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var strong = __webpack_require__(109),
                validate = __webpack_require__(89);
            module.exports = __webpack_require__(110)("Set", function(get) {
                return function() {
                    return get(this, arguments.length > 0 ? arguments[0] : void 0)
                }
            }, {
                add: function(value) {
                    return strong.def(validate(this, "Set"), value = 0 === value ? 0 : value, value)
                }
            }, strong)
        }, function(module, exports, __webpack_require__) {
            var redefine = __webpack_require__(14);
            module.exports = function(target, src, safe) {
                for (var key in src) redefine(target, key, src[key], safe);
                return target
            }
        }, function(module, exports) {
            module.exports = function(it, Constructor, name, forbiddenField) {
                if (!(it instanceof Constructor) || void 0 !== forbiddenField && forbiddenField in it) throw TypeError(name + ": incorrect invocation!");
                return it
            }
        }, function(module, exports, __webpack_require__) {
            var ctx = __webpack_require__(25),
                call = __webpack_require__(80),
                isArrayIter = __webpack_require__(81),
                anObject = __webpack_require__(7),
                toLength = __webpack_require__(20),
                getIterFn = __webpack_require__(82),
                BREAK = {},
                RETURN = {};
            (exports = module.exports = function(iterable, entries, fn, that, ITERATOR) {
                var length, step, iterator, result, iterFn = ITERATOR ? function() {
                        return iterable
                    } : getIterFn(iterable),
                    f = ctx(fn, that, entries ? 2 : 1),
                    index = 0;
                if ("function" != typeof iterFn) throw TypeError(iterable + " is not iterable!");
                if (isArrayIter(iterFn)) {
                    for (length = toLength(iterable.length); length > index; index++)
                        if ((result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index])) === BREAK || result === RETURN) return result
                } else
                    for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;)
                        if ((result = call(iterator, f, step.value, entries)) === BREAK || result === RETURN) return result
            }).BREAK = BREAK, exports.RETURN = RETURN
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var global = __webpack_require__(5),
                dP = __webpack_require__(6),
                DESCRIPTORS = __webpack_require__(8),
                SPECIES = __webpack_require__(3)("species");
            module.exports = function(KEY) {
                var C = global[KEY];
                DESCRIPTORS && C && !C[SPECIES] && dP.f(C, SPECIES, {
                    configurable: !0,
                    get: function() {
                        return this
                    }
                })
            }
        }, function(module, exports, __webpack_require__) {
            var isObject = __webpack_require__(12);
            module.exports = function(it, TYPE) {
                if (!isObject(it) || it._t !== TYPE) throw TypeError("Incompatible receiver, " + TYPE + " required!");
                return it
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var $export = __webpack_require__(9),
                aFunction = __webpack_require__(51),
                toObject = __webpack_require__(21),
                fails = __webpack_require__(4),
                $sort = [].sort,
                test = [1, 2, 3];
            $export($export.P + $export.F * (fails(function() {
                test.sort(void 0)
            }) || !fails(function() {
                test.sort(null)
            }) || !__webpack_require__(115)($sort)), "Array", {
                sort: function(comparefn) {
                    return void 0 === comparefn ? $sort.call(toObject(this)) : $sort.call(toObject(this), aFunction(comparefn))
                }
            })
        }, function(module, exports, __webpack_require__) {
            ! function(nacl) {
                "use strict";
                var u64 = function(h, l) {
                        this.hi = 0 | h, this.lo = 0 | l
                    },
                    gf = function(init) {
                        var i, r = new Float64Array(16);
                        if (init)
                            for (i = 0; i < init.length; i++) r[i] = init[i];
                        return r
                    },
                    randombytes = function() {
                        throw new Error("no PRNG")
                    },
                    _0 = new Uint8Array(16),
                    _9 = new Uint8Array(32);
                _9[0] = 9;
                var gf0 = gf(),
                    gf1 = gf([1]),
                    _121665 = gf([56129, 1]),
                    D = gf([30883, 4953, 19914, 30187, 55467, 16705, 2637, 112, 59544, 30585, 16505, 36039, 65139, 11119, 27886, 20995]),
                    D2 = gf([61785, 9906, 39828, 60374, 45398, 33411, 5274, 224, 53552, 61171, 33010, 6542, 64743, 22239, 55772, 9222]),
                    X = gf([54554, 36645, 11616, 51542, 42930, 38181, 51040, 26924, 56412, 64982, 57905, 49316, 21502, 52590, 14035, 8553]),
                    Y = gf([26200, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214, 26214]),
                    I = gf([41136, 18958, 6951, 50414, 58488, 44335, 6150, 12099, 55207, 15867, 153, 11085, 57099, 20417, 9344, 11139]);

                function L32(x, c) {
                    return x << c | x >>> 32 - c
                }

                function ld32(x, i) {
                    var u = 255 & x[i + 3];
                    return (u = (u = u << 8 | 255 & x[i + 2]) << 8 | 255 & x[i + 1]) << 8 | 255 & x[i + 0]
                }

                function dl64(x, i) {
                    var h = x[i] << 24 | x[i + 1] << 16 | x[i + 2] << 8 | x[i + 3],
                        l = x[i + 4] << 24 | x[i + 5] << 16 | x[i + 6] << 8 | x[i + 7];
                    return new u64(h, l)
                }

                function st32(x, j, u) {
                    var i;
                    for (i = 0; i < 4; i++) x[j + i] = 255 & u, u >>>= 8
                }

                function ts64(x, i, u) {
                    x[i] = u.hi >> 24 & 255, x[i + 1] = u.hi >> 16 & 255, x[i + 2] = u.hi >> 8 & 255, x[i + 3] = 255 & u.hi, x[i + 4] = u.lo >> 24 & 255, x[i + 5] = u.lo >> 16 & 255, x[i + 6] = u.lo >> 8 & 255, x[i + 7] = 255 & u.lo
                }

                function vn(x, xi, y, yi, n) {
                    var i, d = 0;
                    for (i = 0; i < n; i++) d |= x[xi + i] ^ y[yi + i];
                    return (1 & d - 1 >>> 8) - 1
                }

                function crypto_verify_16(x, xi, y, yi) {
                    return vn(x, xi, y, yi, 16)
                }

                function crypto_verify_32(x, xi, y, yi) {
                    return vn(x, xi, y, yi, 32)
                }

                function core(out, inp, k, c, h) {
                    var i, j, m, w = new Uint32Array(16),
                        x = new Uint32Array(16),
                        y = new Uint32Array(16),
                        t = new Uint32Array(4);
                    for (i = 0; i < 4; i++) x[5 * i] = ld32(c, 4 * i), x[1 + i] = ld32(k, 4 * i), x[6 + i] = ld32(inp, 4 * i), x[11 + i] = ld32(k, 16 + 4 * i);
                    for (i = 0; i < 16; i++) y[i] = x[i];
                    for (i = 0; i < 20; i++) {
                        for (j = 0; j < 4; j++) {
                            for (m = 0; m < 4; m++) t[m] = x[(5 * j + 4 * m) % 16];
                            for (t[1] ^= L32(t[0] + t[3] | 0, 7), t[2] ^= L32(t[1] + t[0] | 0, 9), t[3] ^= L32(t[2] + t[1] | 0, 13), t[0] ^= L32(t[3] + t[2] | 0, 18), m = 0; m < 4; m++) w[4 * j + (j + m) % 4] = t[m]
                        }
                        for (m = 0; m < 16; m++) x[m] = w[m]
                    }
                    if (h) {
                        for (i = 0; i < 16; i++) x[i] = x[i] + y[i] | 0;
                        for (i = 0; i < 4; i++) x[5 * i] = x[5 * i] - ld32(c, 4 * i) | 0, x[6 + i] = x[6 + i] - ld32(inp, 4 * i) | 0;
                        for (i = 0; i < 4; i++) st32(out, 4 * i, x[5 * i]), st32(out, 16 + 4 * i, x[6 + i])
                    } else
                        for (i = 0; i < 16; i++) st32(out, 4 * i, x[i] + y[i] | 0)
                }

                function crypto_core_salsa20(out, inp, k, c) {
                    return core(out, inp, k, c, !1), 0
                }

                function crypto_core_hsalsa20(out, inp, k, c) {
                    return core(out, inp, k, c, !0), 0
                }
                var sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);

                function crypto_stream_salsa20_xor(c, cpos, m, mpos, b, n, k) {
                    var u, i, z = new Uint8Array(16),
                        x = new Uint8Array(64);
                    if (!b) return 0;
                    for (i = 0; i < 16; i++) z[i] = 0;
                    for (i = 0; i < 8; i++) z[i] = n[i];
                    for (; b >= 64;) {
                        for (crypto_core_salsa20(x, z, k, sigma), i = 0; i < 64; i++) c[cpos + i] = (m ? m[mpos + i] : 0) ^ x[i];
                        for (u = 1, i = 8; i < 16; i++) u = u + (255 & z[i]) | 0, z[i] = 255 & u, u >>>= 8;
                        b -= 64, cpos += 64, m && (mpos += 64)
                    }
                    if (b > 0)
                        for (crypto_core_salsa20(x, z, k, sigma), i = 0; i < b; i++) c[cpos + i] = (m ? m[mpos + i] : 0) ^ x[i];
                    return 0
                }

                function crypto_stream_salsa20(c, cpos, d, n, k) {
                    return crypto_stream_salsa20_xor(c, cpos, null, 0, d, n, k)
                }

                function crypto_stream(c, cpos, d, n, k) {
                    var s = new Uint8Array(32);
                    return crypto_core_hsalsa20(s, n, k, sigma), crypto_stream_salsa20(c, cpos, d, n.subarray(16), s)
                }

                function crypto_stream_xor(c, cpos, m, mpos, d, n, k) {
                    var s = new Uint8Array(32);
                    return crypto_core_hsalsa20(s, n, k, sigma), crypto_stream_salsa20_xor(c, cpos, m, mpos, d, n.subarray(16), s)
                }

                function add1305(h, c) {
                    var j, u = 0;
                    for (j = 0; j < 17; j++) u = u + (h[j] + c[j] | 0) | 0, h[j] = 255 & u, u >>>= 8
                }
                var minusp = new Uint32Array([5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 252]);

                function crypto_onetimeauth(out, outpos, m, mpos, n, k) {
                    var s, i, j, u, x = new Uint32Array(17),
                        r = new Uint32Array(17),
                        h = new Uint32Array(17),
                        c = new Uint32Array(17),
                        g = new Uint32Array(17);
                    for (j = 0; j < 17; j++) r[j] = h[j] = 0;
                    for (j = 0; j < 16; j++) r[j] = k[j];
                    for (r[3] &= 15, r[4] &= 252, r[7] &= 15, r[8] &= 252, r[11] &= 15, r[12] &= 252, r[15] &= 15; n > 0;) {
                        for (j = 0; j < 17; j++) c[j] = 0;
                        for (j = 0; j < 16 && j < n; ++j) c[j] = m[mpos + j];
                        for (c[j] = 1, mpos += j, n -= j, add1305(h, c), i = 0; i < 17; i++)
                            for (x[i] = 0, j = 0; j < 17; j++) x[i] = 0 | x[i] + h[j] * (j <= i ? r[i - j] : 320 * r[i + 17 - j] | 0);
                        for (i = 0; i < 17; i++) h[i] = x[i];
                        for (u = 0, j = 0; j < 16; j++) u = u + h[j] | 0, h[j] = 255 & u, u >>>= 8;
                        for (u = u + h[16] | 0, h[16] = 3 & u, u = 5 * (u >>> 2) | 0, j = 0; j < 16; j++) u = u + h[j] | 0, h[j] = 255 & u, u >>>= 8;
                        u = u + h[16] | 0, h[16] = u
                    }
                    for (j = 0; j < 17; j++) g[j] = h[j];
                    for (add1305(h, minusp), s = 0 | -(h[16] >>> 7), j = 0; j < 17; j++) h[j] ^= s & (g[j] ^ h[j]);
                    for (j = 0; j < 16; j++) c[j] = k[j + 16];
                    for (c[16] = 0, add1305(h, c), j = 0; j < 16; j++) out[outpos + j] = h[j];
                    return 0
                }

                function crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {
                    var x = new Uint8Array(16);
                    return crypto_onetimeauth(x, 0, m, mpos, n, k), crypto_verify_16(h, hpos, x, 0)
                }

                function crypto_secretbox(c, m, d, n, k) {
                    var i;
                    if (d < 32) return -1;
                    for (crypto_stream_xor(c, 0, m, 0, d, n, k), crypto_onetimeauth(c, 16, c, 32, d - 32, c), i = 0; i < 16; i++) c[i] = 0;
                    return 0
                }

                function crypto_secretbox_open(m, c, d, n, k) {
                    var i, x = new Uint8Array(32);
                    if (d < 32) return -1;
                    if (crypto_stream(x, 0, 32, n, k), 0 !== crypto_onetimeauth_verify(c, 16, c, 32, d - 32, x)) return -1;
                    for (crypto_stream_xor(m, 0, c, 0, d, n, k), i = 0; i < 32; i++) m[i] = 0;
                    return 0
                }

                function set25519(r, a) {
                    var i;
                    for (i = 0; i < 16; i++) r[i] = 0 | a[i]
                }

                function car25519(o) {
                    var c, i;
                    for (i = 0; i < 16; i++) o[i] += 65536, c = Math.floor(o[i] / 65536), o[(i + 1) * (i < 15 ? 1 : 0)] += c - 1 + 37 * (c - 1) * (15 === i ? 1 : 0), o[i] -= 65536 * c
                }

                function sel25519(p, q, b) {
                    for (var t, c = ~(b - 1), i = 0; i < 16; i++) t = c & (p[i] ^ q[i]), p[i] ^= t, q[i] ^= t
                }

                function pack25519(o, n) {
                    var i, j, b, m = gf(),
                        t = gf();
                    for (i = 0; i < 16; i++) t[i] = n[i];
                    for (car25519(t), car25519(t), car25519(t), j = 0; j < 2; j++) {
                        for (m[0] = t[0] - 65517, i = 1; i < 15; i++) m[i] = t[i] - 65535 - (m[i - 1] >> 16 & 1), m[i - 1] &= 65535;
                        m[15] = t[15] - 32767 - (m[14] >> 16 & 1), b = m[15] >> 16 & 1, m[14] &= 65535, sel25519(t, m, 1 - b)
                    }
                    for (i = 0; i < 16; i++) o[2 * i] = 255 & t[i], o[2 * i + 1] = t[i] >> 8
                }

                function neq25519(a, b) {
                    var c = new Uint8Array(32),
                        d = new Uint8Array(32);
                    return pack25519(c, a), pack25519(d, b), crypto_verify_32(c, 0, d, 0)
                }

                function par25519(a) {
                    var d = new Uint8Array(32);
                    return pack25519(d, a), 1 & d[0]
                }

                function unpack25519(o, n) {
                    var i;
                    for (i = 0; i < 16; i++) o[i] = n[2 * i] + (n[2 * i + 1] << 8);
                    o[15] &= 32767
                }

                function A(o, a, b) {
                    var i;
                    for (i = 0; i < 16; i++) o[i] = a[i] + b[i] | 0
                }

                function Z(o, a, b) {
                    var i;
                    for (i = 0; i < 16; i++) o[i] = a[i] - b[i] | 0
                }

                function M(o, a, b) {
                    var i, j, t = new Float64Array(31);
                    for (i = 0; i < 31; i++) t[i] = 0;
                    for (i = 0; i < 16; i++)
                        for (j = 0; j < 16; j++) t[i + j] += a[i] * b[j];
                    for (i = 0; i < 15; i++) t[i] += 38 * t[i + 16];
                    for (i = 0; i < 16; i++) o[i] = t[i];
                    car25519(o), car25519(o)
                }

                function S(o, a) {
                    M(o, a, a)
                }

                function inv25519(o, i) {
                    var a, c = gf();
                    for (a = 0; a < 16; a++) c[a] = i[a];
                    for (a = 253; a >= 0; a--) S(c, c), 2 !== a && 4 !== a && M(c, c, i);
                    for (a = 0; a < 16; a++) o[a] = c[a]
                }

                function crypto_scalarmult(q, n, p) {
                    var r, i, z = new Uint8Array(32),
                        x = new Float64Array(80),
                        a = gf(),
                        b = gf(),
                        c = gf(),
                        d = gf(),
                        e = gf(),
                        f = gf();
                    for (i = 0; i < 31; i++) z[i] = n[i];
                    for (z[31] = 127 & n[31] | 64, z[0] &= 248, unpack25519(x, p), i = 0; i < 16; i++) b[i] = x[i], d[i] = a[i] = c[i] = 0;
                    for (a[0] = d[0] = 1, i = 254; i >= 0; --i) sel25519(a, b, r = z[i >>> 3] >>> (7 & i) & 1), sel25519(c, d, r), A(e, a, c), Z(a, a, c), A(c, b, d), Z(b, b, d), S(d, e), S(f, a), M(a, c, a), M(c, b, e), A(e, a, c), Z(a, a, c), S(b, a), Z(c, d, f), M(a, c, _121665), A(a, a, d), M(c, c, a), M(a, d, f), M(d, b, x), S(b, e), sel25519(a, b, r), sel25519(c, d, r);
                    for (i = 0; i < 16; i++) x[i + 16] = a[i], x[i + 32] = c[i], x[i + 48] = b[i], x[i + 64] = d[i];
                    var x32 = x.subarray(32),
                        x16 = x.subarray(16);
                    return inv25519(x32, x32), M(x16, x16, x32), pack25519(q, x16), 0
                }

                function crypto_scalarmult_base(q, n) {
                    return crypto_scalarmult(q, n, _9)
                }

                function crypto_box_keypair(y, x) {
                    return randombytes(x, 32), crypto_scalarmult_base(y, x)
                }

                function crypto_box_beforenm(k, y, x) {
                    var s = new Uint8Array(32);
                    return crypto_scalarmult(s, x, y), crypto_core_hsalsa20(k, _0, s, sigma)
                }
                var crypto_box_afternm = crypto_secretbox,
                    crypto_box_open_afternm = crypto_secretbox_open;

                function add64() {
                    var l, h, i, a = 0,
                        b = 0,
                        c = 0,
                        d = 0;
                    for (i = 0; i < arguments.length; i++) a += 65535 & (l = arguments[i].lo), b += l >>> 16, c += 65535 & (h = arguments[i].hi), d += h >>> 16;
                    return new u64(65535 & (c += (b += a >>> 16) >>> 16) | (d += c >>> 16) << 16, 65535 & a | b << 16)
                }

                function shr64(x, c) {
                    return new u64(x.hi >>> c, x.lo >>> c | x.hi << 32 - c)
                }

                function xor64() {
                    var i, l = 0,
                        h = 0;
                    for (i = 0; i < arguments.length; i++) l ^= arguments[i].lo, h ^= arguments[i].hi;
                    return new u64(h, l)
                }

                function R(x, c) {
                    var h, l, c1 = 32 - c;
                    return c < 32 ? (h = x.hi >>> c | x.lo << c1, l = x.lo >>> c | x.hi << c1) : c < 64 && (h = x.lo >>> c | x.hi << c1, l = x.hi >>> c | x.lo << c1), new u64(h, l)
                }

                function Ch(x, y, z) {
                    var h = x.hi & y.hi ^ ~x.hi & z.hi,
                        l = x.lo & y.lo ^ ~x.lo & z.lo;
                    return new u64(h, l)
                }

                function Maj(x, y, z) {
                    var h = x.hi & y.hi ^ x.hi & z.hi ^ y.hi & z.hi,
                        l = x.lo & y.lo ^ x.lo & z.lo ^ y.lo & z.lo;
                    return new u64(h, l)
                }

                function Sigma0(x) {
                    return xor64(R(x, 28), R(x, 34), R(x, 39))
                }

                function Sigma1(x) {
                    return xor64(R(x, 14), R(x, 18), R(x, 41))
                }

                function sigma0(x) {
                    return xor64(R(x, 1), R(x, 8), shr64(x, 7))
                }

                function sigma1(x) {
                    return xor64(R(x, 19), R(x, 61), shr64(x, 6))
                }
                var K = [new u64(1116352408, 3609767458), new u64(1899447441, 602891725), new u64(3049323471, 3964484399), new u64(3921009573, 2173295548), new u64(961987163, 4081628472), new u64(1508970993, 3053834265), new u64(2453635748, 2937671579), new u64(2870763221, 3664609560), new u64(3624381080, 2734883394), new u64(310598401, 1164996542), new u64(607225278, 1323610764), new u64(1426881987, 3590304994), new u64(1925078388, 4068182383), new u64(2162078206, 991336113), new u64(2614888103, 633803317), new u64(3248222580, 3479774868), new u64(3835390401, 2666613458), new u64(4022224774, 944711139), new u64(264347078, 2341262773), new u64(604807628, 2007800933), new u64(770255983, 1495990901), new u64(1249150122, 1856431235), new u64(1555081692, 3175218132), new u64(1996064986, 2198950837), new u64(2554220882, 3999719339), new u64(2821834349, 766784016), new u64(2952996808, 2566594879), new u64(3210313671, 3203337956), new u64(3336571891, 1034457026), new u64(3584528711, 2466948901), new u64(113926993, 3758326383), new u64(338241895, 168717936), new u64(666307205, 1188179964), new u64(773529912, 1546045734), new u64(1294757372, 1522805485), new u64(1396182291, 2643833823), new u64(1695183700, 2343527390), new u64(1986661051, 1014477480), new u64(2177026350, 1206759142), new u64(2456956037, 344077627), new u64(2730485921, 1290863460), new u64(2820302411, 3158454273), new u64(3259730800, 3505952657), new u64(3345764771, 106217008), new u64(3516065817, 3606008344), new u64(3600352804, 1432725776), new u64(4094571909, 1467031594), new u64(275423344, 851169720), new u64(430227734, 3100823752), new u64(506948616, 1363258195), new u64(659060556, 3750685593), new u64(883997877, 3785050280), new u64(958139571, 3318307427), new u64(1322822218, 3812723403), new u64(1537002063, 2003034995), new u64(1747873779, 3602036899), new u64(1955562222, 1575990012), new u64(2024104815, 1125592928), new u64(2227730452, 2716904306), new u64(2361852424, 442776044), new u64(2428436474, 593698344), new u64(2756734187, 3733110249), new u64(3204031479, 2999351573), new u64(3329325298, 3815920427), new u64(3391569614, 3928383900), new u64(3515267271, 566280711), new u64(3940187606, 3454069534), new u64(4118630271, 4000239992), new u64(116418474, 1914138554), new u64(174292421, 2731055270), new u64(289380356, 3203993006), new u64(460393269, 320620315), new u64(685471733, 587496836), new u64(852142971, 1086792851), new u64(1017036298, 365543100), new u64(1126000580, 2618297676), new u64(1288033470, 3409855158), new u64(1501505948, 4234509866), new u64(1607167915, 987167468), new u64(1816402316, 1246189591)];

                function crypto_hashblocks(x, m, n) {
                    var t, i, j, z = [],
                        b = [],
                        a = [],
                        w = [];
                    for (i = 0; i < 8; i++) z[i] = a[i] = dl64(x, 8 * i);
                    for (var pos = 0; n >= 128;) {
                        for (i = 0; i < 16; i++) w[i] = dl64(m, 8 * i + pos);
                        for (i = 0; i < 80; i++) {
                            for (j = 0; j < 8; j++) b[j] = a[j];
                            for (t = add64(a[7], Sigma1(a[4]), Ch(a[4], a[5], a[6]), K[i], w[i % 16]), b[7] = add64(t, Sigma0(a[0]), Maj(a[0], a[1], a[2])), b[3] = add64(b[3], t), j = 0; j < 8; j++) a[(j + 1) % 8] = b[j];
                            if (i % 16 == 15)
                                for (j = 0; j < 16; j++) w[j] = add64(w[j], w[(j + 9) % 16], sigma0(w[(j + 1) % 16]), sigma1(w[(j + 14) % 16]))
                        }
                        for (i = 0; i < 8; i++) a[i] = add64(a[i], z[i]), z[i] = a[i];
                        pos += 128, n -= 128
                    }
                    for (i = 0; i < 8; i++) ts64(x, 8 * i, z[i]);
                    return n
                }
                var iv = new Uint8Array([106, 9, 230, 103, 243, 188, 201, 8, 187, 103, 174, 133, 132, 202, 167, 59, 60, 110, 243, 114, 254, 148, 248, 43, 165, 79, 245, 58, 95, 29, 54, 241, 81, 14, 82, 127, 173, 230, 130, 209, 155, 5, 104, 140, 43, 62, 108, 31, 31, 131, 217, 171, 251, 65, 189, 107, 91, 224, 205, 25, 19, 126, 33, 121]);

                function crypto_hash(out, m, n) {
                    var i, h = new Uint8Array(64),
                        x = new Uint8Array(256),
                        b = n;
                    for (i = 0; i < 64; i++) h[i] = iv[i];
                    for (crypto_hashblocks(h, m, n), n %= 128, i = 0; i < 256; i++) x[i] = 0;
                    for (i = 0; i < n; i++) x[i] = m[b - n + i];
                    for (x[n] = 128, x[(n = 256 - 128 * (n < 112 ? 1 : 0)) - 9] = 0, ts64(x, n - 8, new u64(b / 536870912 | 0, b << 3)), crypto_hashblocks(h, x, n), i = 0; i < 64; i++) out[i] = h[i];
                    return 0
                }

                function add(p, q) {
                    var a = gf(),
                        b = gf(),
                        c = gf(),
                        d = gf(),
                        e = gf(),
                        f = gf(),
                        g = gf(),
                        h = gf(),
                        t = gf();
                    Z(a, p[1], p[0]), Z(t, q[1], q[0]), M(a, a, t), A(b, p[0], p[1]), A(t, q[0], q[1]), M(b, b, t), M(c, p[3], q[3]), M(c, c, D2), M(d, p[2], q[2]), A(d, d, d), Z(e, b, a), Z(f, d, c), A(g, d, c), A(h, b, a), M(p[0], e, f), M(p[1], h, g), M(p[2], g, f), M(p[3], e, h)
                }

                function cswap(p, q, b) {
                    var i;
                    for (i = 0; i < 4; i++) sel25519(p[i], q[i], b)
                }

                function pack(r, p) {
                    var tx = gf(),
                        ty = gf(),
                        zi = gf();
                    inv25519(zi, p[2]), M(tx, p[0], zi), M(ty, p[1], zi), pack25519(r, ty), r[31] ^= par25519(tx) << 7
                }

                function scalarmult(p, q, s) {
                    var b, i;
                    for (set25519(p[0], gf0), set25519(p[1], gf1), set25519(p[2], gf1), set25519(p[3], gf0), i = 255; i >= 0; --i) cswap(p, q, b = s[i / 8 | 0] >> (7 & i) & 1), add(q, p), add(p, p), cswap(p, q, b)
                }

                function scalarbase(p, s) {
                    var q = [gf(), gf(), gf(), gf()];
                    set25519(q[0], X), set25519(q[1], Y), set25519(q[2], gf1), M(q[3], X, Y), scalarmult(p, q, s)
                }

                function crypto_sign_keypair(pk, sk, seeded) {
                    var i, d = new Uint8Array(64),
                        p = [gf(), gf(), gf(), gf()];
                    for (seeded || randombytes(sk, 32), crypto_hash(d, sk, 32), d[0] &= 248, d[31] &= 127, d[31] |= 64, scalarbase(p, d), pack(pk, p), i = 0; i < 32; i++) sk[i + 32] = pk[i];
                    return 0
                }
                var L = new Float64Array([237, 211, 245, 92, 26, 99, 18, 88, 214, 156, 247, 162, 222, 249, 222, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16]);

                function modL(r, x) {
                    var carry, i, j, k;
                    for (i = 63; i >= 32; --i) {
                        for (carry = 0, j = i - 32, k = i - 12; j < k; ++j) x[j] += carry - 16 * x[i] * L[j - (i - 32)], carry = x[j] + 128 >> 8, x[j] -= 256 * carry;
                        x[j] += carry, x[i] = 0
                    }
                    for (carry = 0, j = 0; j < 32; j++) x[j] += carry - (x[31] >> 4) * L[j], carry = x[j] >> 8, x[j] &= 255;
                    for (j = 0; j < 32; j++) x[j] -= carry * L[j];
                    for (i = 0; i < 32; i++) x[i + 1] += x[i] >> 8, r[i] = 255 & x[i]
                }

                function reduce(r) {
                    var i, x = new Float64Array(64);
                    for (i = 0; i < 64; i++) x[i] = r[i];
                    for (i = 0; i < 64; i++) r[i] = 0;
                    modL(r, x)
                }

                function crypto_sign(sm, m, n, sk) {
                    var i, j, d = new Uint8Array(64),
                        h = new Uint8Array(64),
                        r = new Uint8Array(64),
                        x = new Float64Array(64),
                        p = [gf(), gf(), gf(), gf()];
                    crypto_hash(d, sk, 32), d[0] &= 248, d[31] &= 127, d[31] |= 64;
                    var smlen = n + 64;
                    for (i = 0; i < n; i++) sm[64 + i] = m[i];
                    for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i];
                    for (crypto_hash(r, sm.subarray(32), n + 32), reduce(r), scalarbase(p, r), pack(sm, p), i = 32; i < 64; i++) sm[i] = sk[i];
                    for (crypto_hash(h, sm, n + 64), reduce(h), i = 0; i < 64; i++) x[i] = 0;
                    for (i = 0; i < 32; i++) x[i] = r[i];
                    for (i = 0; i < 32; i++)
                        for (j = 0; j < 32; j++) x[i + j] += h[i] * d[j];
                    return modL(sm.subarray(32), x), smlen
                }

                function unpackneg(r, p) {
                    var t = gf(),
                        chk = gf(),
                        num = gf(),
                        den = gf(),
                        den2 = gf(),
                        den4 = gf(),
                        den6 = gf();
                    return set25519(r[2], gf1), unpack25519(r[1], p), S(num, r[1]), M(den, num, D), Z(num, num, r[2]), A(den, r[2], den), S(den2, den), S(den4, den2), M(den6, den4, den2), M(t, den6, num), M(t, t, den),
                        function(o, i) {
                            var a, c = gf();
                            for (a = 0; a < 16; a++) c[a] = i[a];
                            for (a = 250; a >= 0; a--) S(c, c), 1 !== a && M(c, c, i);
                            for (a = 0; a < 16; a++) o[a] = c[a]
                        }(t, t), M(t, t, num), M(t, t, den), M(t, t, den), M(r[0], t, den), S(chk, r[0]), M(chk, chk, den), neq25519(chk, num) && M(r[0], r[0], I), S(chk, r[0]), M(chk, chk, den), neq25519(chk, num) ? -1 : (par25519(r[0]) === p[31] >> 7 && Z(r[0], gf0, r[0]), M(r[3], r[0], r[1]), 0)
                }

                function crypto_sign_open(m, sm, n, pk) {
                    var i, t = new Uint8Array(32),
                        h = new Uint8Array(64),
                        p = [gf(), gf(), gf(), gf()],
                        q = [gf(), gf(), gf(), gf()];
                    if (-1, n < 64) return -1;
                    if (unpackneg(q, pk)) return -1;
                    for (i = 0; i < n; i++) m[i] = sm[i];
                    for (i = 0; i < 32; i++) m[i + 32] = pk[i];
                    if (crypto_hash(h, m, n), reduce(h), scalarmult(p, q, h), scalarbase(q, sm.subarray(32)), add(p, q), pack(t, p), n -= 64, crypto_verify_32(sm, 0, t, 0)) {
                        for (i = 0; i < n; i++) m[i] = 0;
                        return -1
                    }
                    for (i = 0; i < n; i++) m[i] = sm[i + 64];
                    return n
                }
                var crypto_secretbox_KEYBYTES = 32,
                    crypto_secretbox_NONCEBYTES = 24,
                    crypto_box_PUBLICKEYBYTES = 32,
                    crypto_box_SECRETKEYBYTES = 32,
                    crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES;

                function checkLengths(k, n) {
                    if (k.length !== crypto_secretbox_KEYBYTES) throw new Error("bad key size");
                    if (n.length !== crypto_secretbox_NONCEBYTES) throw new Error("bad nonce size")
                }

                function checkArrayTypes() {
                    for (var i = 0; i < arguments.length; i++)
                        if (!(arguments[i] instanceof Uint8Array)) throw new TypeError("unexpected type, use Uint8Array")
                }

                function cleanup(arr) {
                    for (var i = 0; i < arr.length; i++) arr[i] = 0
                }
                nacl.lowlevel = {
                        crypto_core_hsalsa20: crypto_core_hsalsa20,
                        crypto_stream_xor: crypto_stream_xor,
                        crypto_stream: crypto_stream,
                        crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,
                        crypto_stream_salsa20: crypto_stream_salsa20,
                        crypto_onetimeauth: crypto_onetimeauth,
                        crypto_onetimeauth_verify: crypto_onetimeauth_verify,
                        crypto_verify_16: crypto_verify_16,
                        crypto_verify_32: crypto_verify_32,
                        crypto_secretbox: crypto_secretbox,
                        crypto_secretbox_open: crypto_secretbox_open,
                        crypto_scalarmult: crypto_scalarmult,
                        crypto_scalarmult_base: crypto_scalarmult_base,
                        crypto_box_beforenm: crypto_box_beforenm,
                        crypto_box_afternm: crypto_box_afternm,
                        crypto_box: function(c, m, d, n, y, x) {
                            var k = new Uint8Array(32);
                            return crypto_box_beforenm(k, y, x), crypto_box_afternm(c, m, d, n, k)
                        },
                        crypto_box_open: function(m, c, d, n, y, x) {
                            var k = new Uint8Array(32);
                            return crypto_box_beforenm(k, y, x), crypto_box_open_afternm(m, c, d, n, k)
                        },
                        crypto_box_keypair: crypto_box_keypair,
                        crypto_hash: crypto_hash,
                        crypto_sign: crypto_sign,
                        crypto_sign_keypair: crypto_sign_keypair,
                        crypto_sign_open: crypto_sign_open,
                        crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,
                        crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,
                        crypto_secretbox_ZEROBYTES: 32,
                        crypto_secretbox_BOXZEROBYTES: 16,
                        crypto_scalarmult_BYTES: 32,
                        crypto_scalarmult_SCALARBYTES: 32,
                        crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,
                        crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,
                        crypto_box_BEFORENMBYTES: 32,
                        crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,
                        crypto_box_ZEROBYTES: 32,
                        crypto_box_BOXZEROBYTES: 16,
                        crypto_sign_BYTES: 64,
                        crypto_sign_PUBLICKEYBYTES: 32,
                        crypto_sign_SECRETKEYBYTES: 64,
                        crypto_sign_SEEDBYTES: 32,
                        crypto_hash_BYTES: 64
                    }, nacl.randomBytes = function(n) {
                        var b = new Uint8Array(n);
                        return randombytes(b, n), b
                    }, nacl.secretbox = function(msg, nonce, key) {
                        checkArrayTypes(msg, nonce, key), checkLengths(key, nonce);
                        for (var m = new Uint8Array(32 + msg.length), c = new Uint8Array(m.length), i = 0; i < msg.length; i++) m[i + 32] = msg[i];
                        return crypto_secretbox(c, m, m.length, nonce, key), c.subarray(16)
                    }, nacl.secretbox.open = function(box, nonce, key) {
                        checkArrayTypes(box, nonce, key), checkLengths(key, nonce);
                        for (var c = new Uint8Array(16 + box.length), m = new Uint8Array(c.length), i = 0; i < box.length; i++) c[i + 16] = box[i];
                        return c.length < 32 ? null : 0 !== crypto_secretbox_open(m, c, c.length, nonce, key) ? null : m.subarray(32)
                    }, nacl.secretbox.keyLength = crypto_secretbox_KEYBYTES, nacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES, nacl.secretbox.overheadLength = 16, nacl.scalarMult = function(n, p) {
                        if (checkArrayTypes(n, p), 32 !== n.length) throw new Error("bad n size");
                        if (32 !== p.length) throw new Error("bad p size");
                        var q = new Uint8Array(32);
                        return crypto_scalarmult(q, n, p), q
                    }, nacl.scalarMult.base = function(n) {
                        if (checkArrayTypes(n), 32 !== n.length) throw new Error("bad n size");
                        var q = new Uint8Array(32);
                        return crypto_scalarmult_base(q, n), q
                    }, nacl.scalarMult.scalarLength = 32, nacl.scalarMult.groupElementLength = 32, nacl.box = function(msg, nonce, publicKey, secretKey) {
                        var k = nacl.box.before(publicKey, secretKey);
                        return nacl.secretbox(msg, nonce, k)
                    }, nacl.box.before = function(publicKey, secretKey) {
                        checkArrayTypes(publicKey, secretKey),
                            function(pk, sk) {
                                if (pk.length !== crypto_box_PUBLICKEYBYTES) throw new Error("bad public key size");
                                if (sk.length !== crypto_box_SECRETKEYBYTES) throw new Error("bad secret key size")
                            }(publicKey, secretKey);
                        var k = new Uint8Array(32);
                        return crypto_box_beforenm(k, publicKey, secretKey), k
                    }, nacl.box.after = nacl.secretbox, nacl.box.open = function(msg, nonce, publicKey, secretKey) {
                        var k = nacl.box.before(publicKey, secretKey);
                        return nacl.secretbox.open(msg, nonce, k)
                    }, nacl.box.open.after = nacl.secretbox.open, nacl.box.keyPair = function() {
                        var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES),
                            sk = new Uint8Array(crypto_box_SECRETKEYBYTES);
                        return crypto_box_keypair(pk, sk), {
                            publicKey: pk,
                            secretKey: sk
                        }
                    }, nacl.box.keyPair.fromSecretKey = function(secretKey) {
                        if (checkArrayTypes(secretKey), secretKey.length !== crypto_box_SECRETKEYBYTES) throw new Error("bad secret key size");
                        var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);
                        return crypto_scalarmult_base(pk, secretKey), {
                            publicKey: pk,
                            secretKey: new Uint8Array(secretKey)
                        }
                    }, nacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES, nacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES, nacl.box.sharedKeyLength = 32, nacl.box.nonceLength = crypto_box_NONCEBYTES, nacl.box.overheadLength = nacl.secretbox.overheadLength, nacl.sign = function(msg, secretKey) {
                        if (checkArrayTypes(msg, secretKey), 64 !== secretKey.length) throw new Error("bad secret key size");
                        var signedMsg = new Uint8Array(64 + msg.length);
                        return crypto_sign(signedMsg, msg, msg.length, secretKey), signedMsg
                    }, nacl.sign.open = function(signedMsg, publicKey) {
                        if (checkArrayTypes(signedMsg, publicKey), 32 !== publicKey.length) throw new Error("bad public key size");
                        var tmp = new Uint8Array(signedMsg.length),
                            mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);
                        if (mlen < 0) return null;
                        for (var m = new Uint8Array(mlen), i = 0; i < m.length; i++) m[i] = tmp[i];
                        return m
                    }, nacl.sign.detached = function(msg, secretKey) {
                        for (var signedMsg = nacl.sign(msg, secretKey), sig = new Uint8Array(64), i = 0; i < sig.length; i++) sig[i] = signedMsg[i];
                        return sig
                    }, nacl.sign.detached.verify = function(msg, sig, publicKey) {
                        if (checkArrayTypes(msg, sig, publicKey), 64 !== sig.length) throw new Error("bad signature size");
                        if (32 !== publicKey.length) throw new Error("bad public key size");
                        var i, sm = new Uint8Array(64 + msg.length),
                            m = new Uint8Array(64 + msg.length);
                        for (i = 0; i < 64; i++) sm[i] = sig[i];
                        for (i = 0; i < msg.length; i++) sm[i + 64] = msg[i];
                        return crypto_sign_open(m, sm, sm.length, publicKey) >= 0
                    }, nacl.sign.keyPair = function() {
                        var pk = new Uint8Array(32),
                            sk = new Uint8Array(64);
                        return crypto_sign_keypair(pk, sk), {
                            publicKey: pk,
                            secretKey: sk
                        }
                    }, nacl.sign.keyPair.fromSecretKey = function(secretKey) {
                        if (checkArrayTypes(secretKey), 64 !== secretKey.length) throw new Error("bad secret key size");
                        for (var pk = new Uint8Array(32), i = 0; i < pk.length; i++) pk[i] = secretKey[32 + i];
                        return {
                            publicKey: pk,
                            secretKey: new Uint8Array(secretKey)
                        }
                    }, nacl.sign.keyPair.fromSeed = function(seed) {
                        if (checkArrayTypes(seed), 32 !== seed.length) throw new Error("bad seed size");
                        for (var pk = new Uint8Array(32), sk = new Uint8Array(64), i = 0; i < 32; i++) sk[i] = seed[i];
                        return crypto_sign_keypair(pk, sk, !0), {
                            publicKey: pk,
                            secretKey: sk
                        }
                    }, nacl.sign.publicKeyLength = 32, nacl.sign.secretKeyLength = 64, nacl.sign.seedLength = 32, nacl.sign.signatureLength = 64, nacl.hash = function(msg) {
                        checkArrayTypes(msg);
                        var h = new Uint8Array(64);
                        return crypto_hash(h, msg, msg.length), h
                    }, nacl.hash.hashLength = 64, nacl.verify = function(x, y) {
                        return checkArrayTypes(x, y), 0 !== x.length && 0 !== y.length && (x.length === y.length && 0 === vn(x, 0, y, 0, x.length))
                    }, nacl.setPRNG = function(fn) {
                        randombytes = fn
                    },
                    function() {
                        var crypto = "undefined" != typeof self ? self.crypto || self.msCrypto : null;
                        if (crypto && crypto.getRandomValues) {
                            nacl.setPRNG(function(x, n) {
                                var i, v = new Uint8Array(n);
                                for (i = 0; i < n; i += 65536) crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, 65536)));
                                for (i = 0; i < n; i++) x[i] = v[i];
                                cleanup(v)
                            })
                        } else(crypto = __webpack_require__(117)) && crypto.randomBytes && nacl.setPRNG(function(x, n) {
                            var i, v = crypto.randomBytes(n);
                            for (i = 0; i < n; i++) x[i] = v[i];
                            cleanup(v)
                        })
                    }()
            }(module.exports ? module.exports : self.nacl = self.nacl || {})
        }, function(module, exports, __webpack_require__) {
            var getKeys = __webpack_require__(26),
                gOPS = __webpack_require__(56),
                pIE = __webpack_require__(44);
            module.exports = function(it) {
                var result = getKeys(it),
                    getSymbols = gOPS.f;
                if (getSymbols)
                    for (var key, symbols = getSymbols(it), isEnum = pIE.f, i = 0; symbols.length > i;) isEnum.call(it, key = symbols[i++]) && result.push(key);
                return result
            }
        }, function(module, exports, __webpack_require__) {
            var toInteger = __webpack_require__(43),
                max = Math.max,
                min = Math.min;
            module.exports = function(index, length) {
                return (index = toInteger(index)) < 0 ? max(index + length, 0) : min(index, length)
            }
        }, function(module, exports, __webpack_require__) {
            var dP = __webpack_require__(6),
                anObject = __webpack_require__(7),
                getKeys = __webpack_require__(26);
            module.exports = __webpack_require__(8) ? Object.defineProperties : function(O, Properties) {
                anObject(O);
                for (var P, keys = getKeys(Properties), length = keys.length, i = 0; length > i;) dP.f(O, P = keys[i++], Properties[P]);
                return O
            }
        }, function(module, exports, __webpack_require__) {
            var document = __webpack_require__(5).document;
            module.exports = document && document.documentElement
        }, function(module, exports, __webpack_require__) {
            var toIObject = __webpack_require__(27),
                gOPN = __webpack_require__(46).f,
                toString = {}.toString,
                windowNames = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
            module.exports.f = function(it) {
                return windowNames && "[object Window]" == toString.call(it) ? function(it) {
                    try {
                        return gOPN(it)
                    } catch (e) {
                        return windowNames.slice()
                    }
                }(it) : gOPN(toIObject(it))
            }
        }, function(module, exports, __webpack_require__) {
            __webpack_require__(8) && "g" != /./g.flags && __webpack_require__(6).f(RegExp.prototype, "flags", {
                configurable: !0,
                get: __webpack_require__(47)
            })
        }, function(module, exports, __webpack_require__) {
            var anObject = __webpack_require__(7),
                aFunction = __webpack_require__(51),
                SPECIES = __webpack_require__(3)("species");
            module.exports = function(O, D) {
                var S, C = anObject(O).constructor;
                return void 0 === C || null == (S = anObject(C)[SPECIES]) ? D : aFunction(S)
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var regexpExec = __webpack_require__(61);
            __webpack_require__(9)({
                target: "RegExp",
                proto: !0,
                forced: regexpExec !== /./.exec
            }, {
                exec: regexpExec
            })
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var create = __webpack_require__(45),
                descriptor = __webpack_require__(33),
                setToStringTag = __webpack_require__(42),
                IteratorPrototype = {};
            __webpack_require__(19)(IteratorPrototype, __webpack_require__(3)("iterator"), function() {
                return this
            }), module.exports = function(Constructor, NAME, next) {
                Constructor.prototype = create(IteratorPrototype, {
                    next: descriptor(1, next)
                }), setToStringTag(Constructor, NAME + " Iterator")
            }
        }, function(module, exports, __webpack_require__) {
            var has = __webpack_require__(18),
                toObject = __webpack_require__(21),
                IE_PROTO = __webpack_require__(54)("IE_PROTO"),
                ObjectProto = Object.prototype;
            module.exports = Object.getPrototypeOf || function(O) {
                return O = toObject(O), has(O, IE_PROTO) ? O[IE_PROTO] : "function" == typeof O.constructor && O instanceof O.constructor ? O.constructor.prototype : O instanceof Object ? ObjectProto : null
            }
        }, function(module, exports, __webpack_require__) {
            var $export = __webpack_require__(9),
                defined = __webpack_require__(28),
                fails = __webpack_require__(4),
                spaces = __webpack_require__(103),
                space = "[" + spaces + "]",
                ltrim = RegExp("^" + space + space + "*"),
                rtrim = RegExp(space + space + "*$"),
                exporter = function(KEY, exec, ALIAS) {
                    var exp = {},
                        FORCE = fails(function() {
                            return !!spaces[KEY]() || "âÂ" != "âÂ" [KEY]()
                        }),
                        fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];
                    ALIAS && (exp[ALIAS] = fn), $export($export.P + $export.F * FORCE, "String", exp)
                },
                trim = exporter.trim = function(string, TYPE) {
                    return string = String(defined(string)), 1 & TYPE && (string = string.replace(ltrim, "")), 2 & TYPE && (string = string.replace(rtrim, "")), string
                };
            module.exports = exporter
        }, function(module, exports) {
            module.exports = "\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff"
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var getKeys = __webpack_require__(26),
                gOPS = __webpack_require__(56),
                pIE = __webpack_require__(44),
                toObject = __webpack_require__(21),
                IObject = __webpack_require__(53),
                $assign = Object.assign;
            module.exports = !$assign || __webpack_require__(4)(function() {
                var A = {},
                    B = {},
                    S = Symbol(),
                    K = "abcdefghijklmnopqrst";
                return A[S] = 7, K.split("").forEach(function(k) {
                    B[k] = k
                }), 7 != $assign({}, A)[S] || Object.keys($assign({}, B)).join("") != K
            }) ? function(target, source) {
                for (var T = toObject(target), aLen = arguments.length, index = 1, getSymbols = gOPS.f, isEnum = pIE.f; aLen > index;)
                    for (var key, S = IObject(arguments[index++]), keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S), length = keys.length, j = 0; length > j;) isEnum.call(S, key = keys[j++]) && (T[key] = S[key]);
                return T
            } : $assign
        }, function(module, exports, __webpack_require__) {
            var isRegExp = __webpack_require__(58),
                defined = __webpack_require__(28);
            module.exports = function(that, searchString, NAME) {
                if (isRegExp(searchString)) throw TypeError("String#" + NAME + " doesn't accept regex!");
                return String(defined(that))
            }
        }, function(module, exports, __webpack_require__) {
            var MATCH = __webpack_require__(3)("match");
            module.exports = function(KEY) {
                var re = /./;
                try {
                    "/./" [KEY](re)
                } catch (e) {
                    try {
                        return re[MATCH] = !1, !"/./" [KEY](re)
                    } catch (f) {}
                }
                return !0
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var $defineProperty = __webpack_require__(6),
                createDesc = __webpack_require__(33);
            module.exports = function(object, index, value) {
                index in object ? $defineProperty.f(object, index, createDesc(0, value)) : object[index] = value
            }
        }, function(module, exports, __webpack_require__) {
            var $export = __webpack_require__(9),
                core = __webpack_require__(23),
                fails = __webpack_require__(4);
            module.exports = function(KEY, exec) {
                var fn = (core.Object || {})[KEY] || Object[KEY],
                    exp = {};
                exp[KEY] = exec(fn), $export($export.S + $export.F * fails(function() {
                    fn(1)
                }), "Object", exp)
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var dP = __webpack_require__(6).f,
                create = __webpack_require__(45),
                redefineAll = __webpack_require__(85),
                ctx = __webpack_require__(25),
                anInstance = __webpack_require__(86),
                forOf = __webpack_require__(87),
                $iterDefine = __webpack_require__(64),
                step = __webpack_require__(78),
                setSpecies = __webpack_require__(88),
                DESCRIPTORS = __webpack_require__(8),
                fastKey = __webpack_require__(52).fastKey,
                validate = __webpack_require__(89),
                SIZE = DESCRIPTORS ? "_s" : "size",
                getEntry = function(that, key) {
                    var entry, index = fastKey(key);
                    if ("F" !== index) return that._i[index];
                    for (entry = that._f; entry; entry = entry.n)
                        if (entry.k == key) return entry
                };
            module.exports = {
                getConstructor: function(wrapper, NAME, IS_MAP, ADDER) {
                    var C = wrapper(function(that, iterable) {
                        anInstance(that, C, NAME, "_i"), that._t = NAME, that._i = create(null), that._f = void 0, that._l = void 0, that[SIZE] = 0, null != iterable && forOf(iterable, IS_MAP, that[ADDER], that)
                    });
                    return redefineAll(C.prototype, {
                        clear: function() {
                            for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) entry.r = !0, entry.p && (entry.p = entry.p.n = void 0), delete data[entry.i];
                            that._f = that._l = void 0, that[SIZE] = 0
                        },
                        delete: function(key) {
                            var that = validate(this, NAME),
                                entry = getEntry(that, key);
                            if (entry) {
                                var next = entry.n,
                                    prev = entry.p;
                                delete that._i[entry.i], entry.r = !0, prev && (prev.n = next), next && (next.p = prev), that._f == entry && (that._f = next), that._l == entry && (that._l = prev), that[SIZE]--
                            }
                            return !!entry
                        },
                        forEach: function(callbackfn) {
                            validate(this, NAME);
                            for (var entry, f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : void 0, 3); entry = entry ? entry.n : this._f;)
                                for (f(entry.v, entry.k, this); entry && entry.r;) entry = entry.p
                        },
                        has: function(key) {
                            return !!getEntry(validate(this, NAME), key)
                        }
                    }), DESCRIPTORS && dP(C.prototype, "size", {
                        get: function() {
                            return validate(this, NAME)[SIZE]
                        }
                    }), C
                },
                def: function(that, key, value) {
                    var prev, index, entry = getEntry(that, key);
                    return entry ? entry.v = value : (that._l = entry = {
                        i: index = fastKey(key, !0),
                        k: key,
                        v: value,
                        p: prev = that._l,
                        n: void 0,
                        r: !1
                    }, that._f || (that._f = entry), prev && (prev.n = entry), that[SIZE]++, "F" !== index && (that._i[index] = entry)), that
                },
                getEntry: getEntry,
                setStrong: function(C, NAME, IS_MAP) {
                    $iterDefine(C, NAME, function(iterated, kind) {
                        this._t = validate(iterated, NAME), this._k = kind, this._l = void 0
                    }, function() {
                        for (var kind = this._k, entry = this._l; entry && entry.r;) entry = entry.p;
                        return this._t && (this._l = entry = entry ? entry.n : this._t._f) ? step(0, "keys" == kind ? entry.k : "values" == kind ? entry.v : [entry.k, entry.v]) : (this._t = void 0, step(1))
                    }, IS_MAP ? "entries" : "values", !IS_MAP, !0), setSpecies(NAME)
                }
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var global = __webpack_require__(5),
                $export = __webpack_require__(9),
                redefine = __webpack_require__(14),
                redefineAll = __webpack_require__(85),
                meta = __webpack_require__(52),
                forOf = __webpack_require__(87),
                anInstance = __webpack_require__(86),
                isObject = __webpack_require__(12),
                fails = __webpack_require__(4),
                $iterDetect = __webpack_require__(83),
                setToStringTag = __webpack_require__(42),
                inheritIfRequired = __webpack_require__(65);
            module.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {
                var Base = global[NAME],
                    C = Base,
                    ADDER = IS_MAP ? "set" : "add",
                    proto = C && C.prototype,
                    O = {},
                    fixMethod = function(KEY) {
                        var fn = proto[KEY];
                        redefine(proto, KEY, "delete" == KEY ? function(a) {
                            return !(IS_WEAK && !isObject(a)) && fn.call(this, 0 === a ? 0 : a)
                        } : "has" == KEY ? function(a) {
                            return !(IS_WEAK && !isObject(a)) && fn.call(this, 0 === a ? 0 : a)
                        } : "get" == KEY ? function(a) {
                            return IS_WEAK && !isObject(a) ? void 0 : fn.call(this, 0 === a ? 0 : a)
                        } : "add" == KEY ? function(a) {
                            return fn.call(this, 0 === a ? 0 : a), this
                        } : function(a, b) {
                            return fn.call(this, 0 === a ? 0 : a, b), this
                        })
                    };
                if ("function" == typeof C && (IS_WEAK || proto.forEach && !fails(function() {
                        (new C).entries().next()
                    }))) {
                    var instance = new C,
                        HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance,
                        THROWS_ON_PRIMITIVES = fails(function() {
                            instance.has(1)
                        }),
                        ACCEPT_ITERABLES = $iterDetect(function(iter) {
                            new C(iter)
                        }),
                        BUGGY_ZERO = !IS_WEAK && fails(function() {
                            for (var $instance = new C, index = 5; index--;) $instance[ADDER](index, index);
                            return !$instance.has(-0)
                        });
                    ACCEPT_ITERABLES || ((C = wrapper(function(target, iterable) {
                        anInstance(target, C, NAME);
                        var that = inheritIfRequired(new Base, target, C);
                        return null != iterable && forOf(iterable, IS_MAP, that[ADDER], that), that
                    })).prototype = proto, proto.constructor = C), (THROWS_ON_PRIMITIVES || BUGGY_ZERO) && (fixMethod("delete"), fixMethod("has"), IS_MAP && fixMethod("get")), (BUGGY_ZERO || HASNT_CHAINING) && fixMethod(ADDER), IS_WEAK && proto.clear && delete proto.clear
                } else C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER), redefineAll(C.prototype, methods), meta.NEED = !0;
                return setToStringTag(C, NAME), O[NAME] = C, $export($export.G + $export.W + $export.F * (C != Base), O), IS_WEAK || common.setStrong(C, NAME, IS_MAP), C
            }
        }, function(module, exports, __webpack_require__) {
            var ctx = __webpack_require__(25),
                IObject = __webpack_require__(53),
                toObject = __webpack_require__(21),
                toLength = __webpack_require__(20),
                asc = __webpack_require__(112);
            module.exports = function(TYPE, $create) {
                var IS_MAP = 1 == TYPE,
                    IS_FILTER = 2 == TYPE,
                    IS_SOME = 3 == TYPE,
                    IS_EVERY = 4 == TYPE,
                    IS_FIND_INDEX = 6 == TYPE,
                    NO_HOLES = 5 == TYPE || IS_FIND_INDEX,
                    create = $create || asc;
                return function($this, callbackfn, that) {
                    for (var val, res, O = toObject($this), self = IObject(O), f = ctx(callbackfn, that, 3), length = toLength(self.length), index = 0, result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : void 0; length > index; index++)
                        if ((NO_HOLES || index in self) && (res = f(val = self[index], index, O), TYPE))
                            if (IS_MAP) result[index] = res;
                            else if (res) switch (TYPE) {
                        case 3:
                            return !0;
                        case 5:
                            return val;
                        case 6:
                            return index;
                        case 2:
                            result.push(val)
                    } else if (IS_EVERY) return !1;
                    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result
                }
            }
        }, function(module, exports, __webpack_require__) {
            var speciesConstructor = __webpack_require__(113);
            module.exports = function(original, length) {
                return new(speciesConstructor(original))(length)
            }
        }, function(module, exports, __webpack_require__) {
            var isObject = __webpack_require__(12),
                isArray = __webpack_require__(73),
                SPECIES = __webpack_require__(3)("species");
            module.exports = function(original) {
                var C;
                return isArray(original) && ("function" != typeof(C = original.constructor) || C !== Array && !isArray(C.prototype) || (C = void 0), isObject(C) && null === (C = C[SPECIES]) && (C = void 0)), void 0 === C ? Array : C
            }
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var anObject = __webpack_require__(7),
                toLength = __webpack_require__(20),
                advanceStringIndex = __webpack_require__(59),
                regExpExec = __webpack_require__(60);
            __webpack_require__(62)("match", 1, function(defined, MATCH, $match, maybeCallNative) {
                return [function(regexp) {
                    var O = defined(this),
                        fn = null == regexp ? void 0 : regexp[MATCH];
                    return void 0 !== fn ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O))
                }, function(regexp) {
                    var res = maybeCallNative($match, regexp, this);
                    if (res.done) return res.value;
                    var rx = anObject(regexp),
                        S = String(this);
                    if (!rx.global) return regExpExec(rx, S);
                    var fullUnicode = rx.unicode;
                    rx.lastIndex = 0;
                    for (var result, A = [], n = 0; null !== (result = regExpExec(rx, S));) {
                        var matchStr = String(result[0]);
                        A[n] = matchStr, "" === matchStr && (rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode)), n++
                    }
                    return 0 === n ? null : A
                }]
            })
        }, function(module, exports, __webpack_require__) {
            "use strict";
            var fails = __webpack_require__(4);
            module.exports = function(method, arg) {
                return !!method && fails(function() {
                    arg ? method.call(null, function() {}, 1) : method.call(null)
                })
            }
        }, function(module, exports) {
            module.exports = function(module) {
                return module.webpackPolyfill || (module.deprecate = function() {}, module.paths = [], module.children || (module.children = []), Object.defineProperty(module, "loaded", {
                    enumerable: !0,
                    get: function() {
                        return module.l
                    }
                }), Object.defineProperty(module, "id", {
                    enumerable: !0,
                    get: function() {
                        return module.i
                    }
                }), module.webpackPolyfill = 1), module
            }
        }, function(module, exports) {}, function(module, exports, __webpack_require__) {}, function(module, exports, __webpack_require__) {}, function(module, exports, __webpack_require__) {}, function(module, __webpack_exports__, __webpack_require__) {
            "use strict";
            __webpack_require__.r(__webpack_exports__);
            var registry = {},
                jquery = (__webpack_require__(22), __webpack_require__(24), __webpack_require__(74), __webpack_require__(35), __webpack_require__(36), __webpack_require__(10), __webpack_require__(38), __webpack_require__(29), __webpack_require__(79), __webpack_require__(11), __webpack_require__(15), __webpack_require__(16), __webpack_require__(39), __webpack_require__(48), __webpack_require__(0)),
                d3 = __webpack_require__(1),
                core = (__webpack_require__(17), __webpack_require__(13), __webpack_require__(84), __webpack_require__(2)),
                pubsub = __webpack_require__(31);

            function _defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function _defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var eventService_EventService = function() {
                function EventService() {
                    var id = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "EventService-".concat(core.a.uniqueKey());
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, EventService), _defineProperty(this, "channel", void 0), _defineProperty(this, "tokenStore", {}), this.channel = id
                }
                var Constructor, protoProps, staticProps;
                return Constructor = EventService, (protoProps = [{
                    key: "getChannel",
                    value: function() {
                        return this.channel
                    }
                }, {
                    key: "getTopic",
                    value: function(channel, eventName) {
                        return "".concat(channel).concat(eventName ? ".".concat(eventName) : "")
                    }
                }, {
                    key: "subscribe",
                    value: function(channel, eventName, handler) {
                        var topic = this.getTopic(channel, eventName),
                            token = pubsub.subscribe(topic, handler);
                        return this.tokenStore[token] = topic, token
                    }
                }, {
                    key: "subscribeOnce",
                    value: function(channel, eventName, handler) {
                        var topic = this.getTopic(channel, eventName);
                        pubsub.subscribeOnce(topic, handler)
                    }
                }, {
                    key: "publish",
                    value: function() {
                        var eventName = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
                            data = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",
                            topic = this.getTopic(this.getChannel(), eventName);
                        pubsub.publish(topic, data)
                    }
                }, {
                    key: "unsubscribe",
                    value: function(token) {
                        pubsub.unsubscribe(token), delete this.tokenStore[token]
                    }
                }, {
                    key: "clearSubscriptions",
                    value: function() {
                        pubsub.unsubscribe(this.channel)
                    }
                }, {
                    key: "clearAll",
                    value: function() {
                        for (var token, keys = Object.keys(this.tokenStore), len = keys.length, i = 0; i < len;) token = keys[i++], this.unsubscribe(token);
                        this.clearSubscriptions()
                    }
                }]) && _defineProperties(Constructor.prototype, protoProps), staticProps && _defineProperties(Constructor, staticProps), EventService
            }();

            function defaultProps_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }
            var TreeDefault = function() {
                function TreeDefault() {
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, TreeDefault)
                }
                var Constructor, protoProps, staticProps;
                return Constructor = TreeDefault, staticProps = [{
                    key: "getConfigurableProps",
                    value: function() {
                        return {
                            data: null,
                            sourceRef: "",
                            configServerMap: [],
                            PeriodColumn: 1,
                            PeriodToColumn: 12,
                            primaryDisplayValue: "total",
                            visualization: "Tree",
                            tableStyle: "S",
                            tableCellAlignment: "C",
                            scale: "0.0m",
                            scaleSuffixK: "k",
                            scaleSuffixM: "m",
                            scaleSuffixB: "b",
                            scaleSuffixT: "t",
                            PctVarAmber: -1,
                            PctVarGreen: 1,
                            PctVarRed: -10,
                            nodeMapping: "text",
                            nodeMappingSep: ":",
                            zeroDisplay: "",
                            negativeDisplay: "(0)",
                            useConstants: !0,
                            activeTopNode: "",
                            dispLevels: 2,
                            dispChildCount: !1,
                            zoom: 100,
                            waterFallType: "V",
                            hint: "Hint: Hover over a node and drag the slider left or right to simulate changes",
                            onClickDefault: "E",
                            nodeStyle: "S",
                            nodeTrend: !0,
                            nodeVar: !0,
                            nodeSecVal: !0,
                            nodeOperand: !0,
                            nodeStatus: "V",
                            withComparison: !0,
                            periods: 12,
                            periodsLabels: "Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec",
                            pVerTitle: "Baseline",
                            cVerTitle: "Target",
                            valTextSper: "Mth",
                            valTextLper: "Month",
                            valTextSptd: "YtD",
                            valTextLptd: "YtD",
                            valTextStotal: "FY",
                            valTextLtotal: "Full Year",
                            valTextSsel: "Sim",
                            valTextLsel: "Sim.Mths",
                            secValDispper: "total",
                            secValDispptd: "total",
                            secValDisptotal: "per",
                            secValDispsel: "total",
                            colorNodePrimaryFont: "#000000",
                            colorNodeSecondaryFont: "#777777",
                            colorSim: "#2E8AB8",
                            colorNodeBg: "#FFFFFF",
                            opacityNodeBg: "0.9",
                            colorNodeBorder: "#000000",
                            opacityNodeBorder: "0.2",
                            colorNodeBgDerived: "#FFFFFF",
                            opacityNodeBgDerived: "0.3",
                            colorLinks: "#666666",
                            colorNodeBorderFocus: "#0078d4",
                            colorCanvasBase: "#E2E8EF",
                            colorCanvas1: "#C5DADC",
                            colorCanvas2: "#91ABBF",
                            colorCanvas3: "#CFDDE7",
                            exportMode: "SCRIPT",
                            exportUrl: "",
                            decimalSeparator: ".",
                            thousandSeparator: ",",
                            customDefaultDetailPageRef: "",
                            isEditModeAllowed: !1,
                            treeConfig: [{
                                level: 0,
                                name: "TOP",
                                title: "Net Profit",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "S",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "X",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Simple aggregation of children. Node is locked so no simulation. Dynamic Scaling",
                                footer: ""
                            }, {
                                level: 1,
                                name: "1",
                                title: "Revenue",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "M",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Simple multiplication of children. Dynamic Scaling",
                                footer: ""
                            }, {
                                level: 2,
                                name: "2",
                                title: "Copper Sold",
                                tPrefix: "",
                                formula: "(( {3} - {4} ) * 1000000 ) * ( {5} /100 ) * ( {6} /100 ) ",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "F",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "t",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "More complex formula with calculation orders",
                                footer: ""
                            }, {
                                level: 3,
                                name: "3",
                                title: "Mill Throughput",
                                tPrefix: "",
                                formula: "",
                                linkNode: "11",
                                manAct: "",
                                manTgt: "",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "L",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 2,
                                suffix: "m t",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Node linked to Production. When production changes, this node changes as well. If you simulate this node, the production node is changed as well.",
                                footer: ""
                            }, {
                                level: 3,
                                name: "4",
                                title: "Change in Stock",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[0.1,0.1,0.1,0.1,0.05,-0.05,-0.05,-0.05,-0.05,-0.05,-0.05,-0.05]",
                                manTgt: "[0,0,0,0,0,0,0,0,0,0,0,0]",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 2,
                                suffix: "m t",
                                locked: "",
                                hideStatus: "X",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Example of a node with hidden status",
                                footer: ""
                            }, {
                                level: 3,
                                name: "5",
                                title: "Grade",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[0.6123,0.6123,0.6307,0.6875,0.6669,0.7203,0.7851,0.77,0.83,0.81,0.79,0.79]",
                                manTgt: "[0.62,0.64,0.69,0.75,0.81,0.89,0.96,1.03,1.05,1,1.06,1.13]",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 4,
                                suffix: "%",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "2",
                                header: "",
                                descr: "Example of Pct with 4 decimals",
                                footer: ""
                            }, {
                                level: 3,
                                name: "6",
                                title: "Recovery",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[82,80.36,81.16,81.97,84.43,86.96,86.09,81,81,81,81,81]",
                                manTgt: "[81,81,81,81,81,81,81,81,81,81,81,81]",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 2,
                                suffix: "%",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "2",
                                header: "",
                                descr: "Example of pct with 2 decimals",
                                footer: ""
                            }, {
                                level: 2,
                                name: "8",
                                title: "Copper Price",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[2.6,2.68,2.84,2.78,2.95,2.98,2.98,2.4,2.4,2.4,2.4,2.4]",
                                manTgt: "[2.3,2.3,2.3,2.3,2.3,2.4,2.4,2.4,2.4,2.4,2.4,2.4]",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "C",
                                lSimNode: "",
                                prefix: "$",
                                dec: 2,
                                suffix: "/lb",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "2",
                                header: "",
                                descr: "Example of a weighted average calculation of full total. Simulation method is also set to constant as default as we are often talking about a specific price rather than a pct. change.",
                                footer: ""
                            }, {
                                level: 2,
                                name: "7",
                                title: "Conversion",
                                tPrefix: "",
                                formula: "2204.62",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "F",
                                rowMap: "",
                                noDetail: "X",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "lb",
                                dec: 0,
                                suffix: "/t",
                                locked: "X",
                                hideStatus: "X",
                                derived: "",
                                aMeth: "F",
                                wAvgNode: "",
                                header: "",
                                descr: "Example of a constant value. The node is also locked as well as having the popup and the status switched off.",
                                footer: ""
                            }, {
                                level: 1,
                                name: "9",
                                title: "Total Cost",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "A",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Simple aggregation. Note that for cost, a decrease is good so the status determination is reversed.",
                                footer: ""
                            }, {
                                level: 2,
                                name: "10",
                                title: "Production Cost",
                                tPrefix: "",
                                formula: "{22} + {35}",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "F",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Example of simple formula. Note that we have a derived child and we have Quantity Produced listed at this level. This could be modelled differently but it demonstrates the option of having  nodes below that are not part of the calculation",
                                footer: ""
                            }, {
                                level: 3,
                                name: "22",
                                title: "Mining",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "A",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Simle aggregation of children",
                                footer: ""
                            }, {
                                level: 4,
                                name: "23",
                                title: "Fuel Cost",
                                hidden: "X",
                                tPrefix: "",
                                formula: "{24} * {25} * 1000 * {34} ",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "F",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Example of formula. Note that the hrs are in 1000 so we multiply.",
                                footer: ""
                            }, {
                                level: 5,
                                name: "24",
                                title: "Fuel Consumption Rate",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[152,152,153.52,156.59,151.89,153.41,148.81,150,150,150,150,150]",
                                manTgt: "[150,150,150,150,150,150,150,150,150,150,150,150]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "l",
                                dec: 0,
                                suffix: "/hr",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "25",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 5,
                                name: "25",
                                title: "Operating hours",
                                tPrefix: "",
                                formula: "( {26} * 1000 / {27} ) * ( {30} / 60 )",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "F",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "k hrs",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Example of a mathematical formula",
                                footer: ""
                            }, {
                                level: 6,
                                name: "26",
                                title: "Material Moved",
                                tPrefix: "",
                                formula: "{11}",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "F",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 2,
                                suffix: "m t",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Node linked to Production. When production changes, this node changes as well. If you simulate this node, the production node is changed as well. There is a bit more to it in the real world as we would need to consider other factors but this demonstrates the principle.",
                                footer: ""
                            }, {
                                level: 6,
                                name: "27",
                                title: "Average load",
                                tPrefix: "",
                                formula: "{28} * ( {29} / 100 )",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "F",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "t",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "26",
                                header: "",
                                descr: "Example of simple multiplication and a weighted average",
                                footer: ""
                            }, {
                                level: 7,
                                name: "28",
                                title: "Truck Capacity",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[64,64,64,64,64,64,64,64,64,64,64,64]",
                                manTgt: "[64,64,64,64,64,64,64,64,64,64,64,64]",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "t",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "26",
                                header: "",
                                descr: "Weighted average full total calculation",
                                footer: ""
                            }, {
                                level: 7,
                                name: "29",
                                title: "Fill factor",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[85,84.15,82.47,80,79.2,79.99,78.39,84,84,84,84,84]",
                                manTgt: "[84,84,84,84,84,84,84,84,84,84,84,84]",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "%",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "26",
                                header: "",
                                descr: "Weighted average full total calculation",
                                footer: ""
                            }, {
                                level: 6,
                                name: "30",
                                title: "Truck Cycle Time",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "A",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "mins",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "26",
                                header: "",
                                descr: "Example of simple multiplication and a weighted average",
                                footer: ""
                            }, {
                                level: 7,
                                name: "31",
                                title: "Time Spent Queing",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[30,29.4,28.22,28.22,29.91,28.71,31.01,10,10,10,10,10]",
                                manTgt: "[10,10,10,10,10,10,10,10,10,10,10,10]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "mins",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "26",
                                header: "",
                                descr: "Weighted average full total calculation",
                                footer: ""
                            }, {
                                level: 7,
                                name: "32",
                                title: "Time Spent Loading",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[10,10.1,9.39,9.11,8.56,8.73,8.38,10,10,10,10,10]",
                                manTgt: "[10,10,10,10,10,10,10,10,10,10,10,10]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "mins",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "26",
                                header: "",
                                descr: "Weighted average full total calculation",
                                footer: ""
                            }, {
                                level: 7,
                                name: "33",
                                title: "Time Spent Travelling",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[20,19.8,19.4,19.98,19.18,20.14,21.15,20,20,20,20,20]",
                                manTgt: "[20,20,20,20,20,20,20,20,20,20,20,20]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "mins",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "26",
                                header: "",
                                descr: "Weighted average full total calculation",
                                footer: ""
                            }, {
                                level: 5,
                                name: "34",
                                title: "Diesel Price",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[0.95,0.98,1.01,1.06,1.07,1.07,1.1,0.95,0.95,0.95,0.95,0.95]",
                                manTgt: "[0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 3,
                                suffix: "/l",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "25",
                                header: "",
                                descr: "Weighted average full total calculation",
                                footer: ""
                            }, {
                                level: 4,
                                name: "41",
                                title: "Explosives Cost",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[1000000,1020000,999600,1039584,1101959,1146037,1100196,1200000,1200000,1200000,1200000,1200000]",
                                manTgt: "[1200000,1200000,1200000,1200000,1200000,1200000,1200000,1200000,1200000,1200000,1200000,1200000]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 4,
                                name: "42",
                                title: "Mobile Maintenance",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[13200000,12672000,12925440,13054694,13054694,13315788,13848420,13200000,13200000,13200000,13200000,13200000]",
                                manTgt: "[13200000,13200000,13200000,13200000,13200000,13200000,13200000,13200000,13200000,13200000,13200000,13200000]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 4,
                                name: "40",
                                title: "Other",
                                tPrefix: "",
                                formula: 'dataSeries == "tgt" ? ( {39}.tgt - {23}.tgt - {41}.tgt - {42}.tgt ) : ( {39}.base - {23}.base - {41}.base - {42}.base )',
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "F",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: 'This is an Example of how you can calculate a recidual for a particular level to reconcile to the total posted cost. This formula uses the baseline data for both the simulated and baseline and then the target for target. This effectively allows you to calculate nodes ignoring the simulated change in cases like this. Using an "Other" node is a powerful technique when working with actuals and want reconciliation but only want to model material drivers. The formula also shows how you can do if/then constructs.',
                                footer: ""
                            }, {
                                level: 5,
                                name: "39",
                                title: "Posted Mining Cost",
                                hidden: "X",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[17000000,18190000,19099500,20436465,19823371,20021605,20822469,17000000,17000000,17000000,17000000,17000000]",
                                manTgt: "[17000000,17000000,17000000,17000000,17000000,17000000,17000000,17000000,17000000,17000000,17000000,17000000]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "X",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "X",
                                hideStatus: "X",
                                derived: "X",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Dynamic Scaling",
                                footer: ""
                            }, {
                                level: 3,
                                name: "35",
                                title: "Processing",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[8500000,8075000,7913500,7676095,7676095,7292290,6927676,8500000,8500000,8500000,8500000,8500000]",
                                manTgt: "[8500000,8500000,8500000,8500000,8500000,8500000,8500000,8500000,8500000,8500000,8500000,8500000]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Dynamic Scaling",
                                footer: ""
                            }, {
                                level: 3,
                                name: "11",
                                title: "Mill Throughput",
                                tPrefix: "",
                                formula: "{12} * {13} / 1000000",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "F",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 2,
                                suffix: "m t",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Formula. Note that we are converting it to a fixed scale of 1.000.000. Cost Driver volume x Rate",
                                footer: ""
                            }, {
                                level: 4,
                                name: "12",
                                title: "Production Rate",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[1510,1510,1540.2,1524.8,1540.05,1540.05,1540.05,1500,1500,1500,1500,1500]",
                                manTgt: "[1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500,1500]",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "t",
                                dec: 0,
                                suffix: "/hr",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "A",
                                wAvgNode: "31",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 4,
                                name: "13",
                                title: "Net Production Time",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "S",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "hrs",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 5,
                                name: "14",
                                title: "Available Time",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "S",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "hrs",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 6,
                                name: "15",
                                title: "Scheduled Hours",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[744,672,744,720,744,720,744,720,744,720,744,720]",
                                manTgt: "[744,672,744,720,744,720,744,720,744,720,744,720]",
                                trend: "X",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "hrs",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 6,
                                name: "43",
                                title: "Maintenance Downtime",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[37.2,38,38,42,40,80,37.2,20,20,20,20,20]",
                                manTgt: "[20,20,20,20,20,70,20,20,20,20,20,20]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "hrs",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 5,
                                name: "18",
                                title: "Operating Delays",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "A",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "hrs",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 6,
                                name: "19",
                                title: "Internal Delays",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[20,20,22,21,22,40,50,10,10,10,10,10]",
                                manTgt: "[10,10,10,10,10,10,10,10,10,10,10,10]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "hrs",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 6,
                                name: "20",
                                title: "External Delays",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[8,8,8,8,8,8,8,8,8,8,8,8]",
                                manTgt: "[8,8,8,8,8,8,8,8,8,8,8,8]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "hrs",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 6,
                                name: "21",
                                title: "Consequential Delays",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[5,5,5,5,5,5,5,5,5,5,5,5]",
                                manTgt: "[5,5,5,5,5,5,5,5,5,5,5,5]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "",
                                dec: 0,
                                suffix: "hrs",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "",
                                footer: ""
                            }, {
                                level: 3,
                                name: "38",
                                title: "C1 Cash Cost",
                                tPrefix: "",
                                formula: "{10} / ( ( {3} * 1000000 ) * ( {5} /100 ) * ( {6} /100 ) * {7}  )",
                                linkNode: "",
                                manAct: "",
                                manTgt: "",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "",
                                cMeth: "F",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 2,
                                suffix: "/lb",
                                locked: "X",
                                hideStatus: "",
                                derived: "X",
                                aMeth: "F",
                                wAvgNode: "",
                                header: "",
                                descr: "Derived node example. It is visualised as additional information underneath the calculation. There are often these key metrics that are important benchmarks but not used directly in the calculations but key for evaluations. Derived nodes allows you to include these.",
                                footer: ""
                            }, {
                                level: 2,
                                name: "36",
                                title: "Realisation Cost",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[1000000,1000000,1030000,988800,939360,958147,929403,900000,900000,900000,900000,900000]",
                                manTgt: "[900000,900000,900000,900000,900000,900000,900000,900000,900000,900000,900000,900000]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "",
                                descr: "Simple example of sourced cost",
                                footer: ""
                            }, {
                                level: 2,
                                name: "37",
                                title: "Support Services",
                                tPrefix: "",
                                formula: "",
                                linkNode: "",
                                manAct: "[500000,505000,535300,562065,533962,560660,560660,600000,600000,600000,600000,600000]",
                                manTgt: "[600000,600000,600000,600000,600000,600000,600000,600000,600000,600000,600000,600000]",
                                trend: "",
                                min: null,
                                max: null,
                                scale: "X",
                                cMeth: "",
                                rowMap: "",
                                noDetail: "",
                                sMeth: "P",
                                lSimNode: "",
                                prefix: "$",
                                dec: 0,
                                suffix: "",
                                locked: "",
                                hideStatus: "",
                                derived: "",
                                aMeth: "S",
                                wAvgNode: "",
                                header: "Custom Header Text",
                                descr: "Simple example of sourced cost. Example of custom header text and custom footer text.",
                                footer: "Custom Footer Text"
                            }],
                            scenarios: [{
                                name: "1",
                                title: "Scenario 1",
                                descr: "",
                                defaultDescr: "",
                                compare: !0,
                                simVar: []
                            }],
                            externalConfig: {
                                vdt: {}
                            },
                            nodesToExport: [],
                            selectedNode: null,
                            clickedPeriod: null,
                            activeScenario: "1",
                            focusNode: "",
                            deltaConfig: null,
                            ztlEdits: null,
                            treeConfigBackup: "",
                            onNodeClick: null,
                            onSimulation: null,
                            blankCanvas: !1,
                            disableDownload: !1,
                            maxChild: 250,
                            enableNodeSearch: !0
                        }
                    }
                }, {
                    key: "getGeneralProps",
                    value: function() {
                        return {
                            deriveTreeFromSource: !1,
                            derivedTreeConfig: [],
                            dynDataNodes: [],
                            sourceData: {},
                            periodsMetadata: [],
                            duration: 500,
                            nodeWidth: 220,
                            nodeHeight: 65,
                            nodeCornerRad: 4,
                            nodeCollapseRad: 9,
                            nodeStatusBarWidth: 6,
                            simTooltipWidth: 170,
                            simVar: {},
                            simVarInfo: [],
                            simMan: {},
                            simMeth: {},
                            simBaseVal: null,
                            statusMap: {
                                Red: {
                                    icon: "î",
                                    color: "rgba(255,0,0,.8)"
                                },
                                Amber: {
                                    icon: "î±",
                                    color: "rgba(255,192,0,.8)"
                                },
                                Green: {
                                    icon: "î",
                                    color: "rgba(0,176,80,1)"
                                },
                                Neutral: {
                                    icon: "",
                                    color: ""
                                }
                            },
                            scales: {
                                "0.0t": {
                                    div: 1e12,
                                    dec: 1,
                                    suffix: "t",
                                    caption: "0.0t"
                                },
                                "0.00t": {
                                    div: 1e12,
                                    dec: 2,
                                    suffix: "t",
                                    caption: "0.00t"
                                },
                                "0.0b": {
                                    div: 1e9,
                                    dec: 1,
                                    suffix: "b",
                                    caption: "0.0b"
                                },
                                "0.00b": {
                                    div: 1e9,
                                    dec: 2,
                                    suffix: "b",
                                    caption: "0.00b"
                                },
                                "0m": {
                                    div: 1e6,
                                    dec: 0,
                                    suffix: "m",
                                    caption: "0m"
                                },
                                "0.0m": {
                                    div: 1e6,
                                    dec: 1,
                                    suffix: "m",
                                    caption: "0.0m"
                                },
                                "0.00m": {
                                    div: 1e6,
                                    dec: 2,
                                    suffix: "m",
                                    caption: "0.00m"
                                },
                                "0k": {
                                    div: 1e3,
                                    dec: 0,
                                    suffix: "k",
                                    caption: "0k"
                                },
                                "0.0k": {
                                    div: 1e3,
                                    dec: 1,
                                    suffix: "k",
                                    caption: "0.0k"
                                },
                                0: {
                                    div: 1,
                                    dec: 0,
                                    suffix: "",
                                    caption: "0"
                                },
                                M: {
                                    div: 1e6,
                                    suffix: "m",
                                    caption: "M"
                                },
                                K: {
                                    div: 1e3,
                                    suffix: "k",
                                    caption: "K"
                                },
                                P: {
                                    div: .01,
                                    suffix: "%",
                                    caption: "P"
                                }
                            },
                            ops: {
                                A: {
                                    str: "+",
                                    d: "h 6 m -3 -3 v 6"
                                },
                                S: {
                                    str: "-",
                                    d: "h 6"
                                },
                                D: {
                                    str: "/",
                                    d: "m .5 2.5 l 5 -5"
                                },
                                M: {
                                    str: "*",
                                    d: "m .5 2.5 l 5 -5 m -5 0 l 5 5"
                                }
                            },
                            icons: {
                                Edit: "î¸",
                                linkNode: "î",
                                close: "î¾",
                                enter: "î"
                            },
                            zoomSlider: {
                                w: 100,
                                h: 35
                            },
                            margin: {
                                top: 85,
                                right: 320,
                                bottom: 85,
                                left: 20
                            },
                            showDetail: "",
                            simMethods: {
                                P: {
                                    header: "% Change",
                                    label: "Pct Change to baseline",
                                    title: "% Change applied to baseline in future periods"
                                },
                                C: {
                                    header: "Constant",
                                    label: "Constant Value",
                                    title: "Constant Value for future periods"
                                },
                                G: {
                                    header: "% Growth",
                                    label: "Pct Period Growth",
                                    title: "% Growth applied to baseline in future periods"
                                },
                                M: {
                                    header: "Manual Only",
                                    label: "Manual",
                                    title: "Values set manually for each period"
                                }
                            },
                            displayValueText: null,
                            valueDispConfig: {},
                            exportedNodeData: "",
                            nodes: {},
                            treeData: null,
                            container: null,
                            popUpBgDiv: null,
                            tooltip: null,
                            simDisp: {},
                            simLinkNodes: {},
                            depNodes: {},
                            activeNode: null,
                            simLinkedNodes: null,
                            debugMode: !1,
                            calcLevel: 0,
                            constraints: [],
                            levels: 0,
                            root: null,
                            valDisp: null,
                            valueDisp: null,
                            metaData: {},
                            nodesExceededMaxChild: {},
                            tmpl: null,
                            singleSeriesTable: !0,
                            globalMaxNodeLimit: 5e3,
                            hasExceededMaxNodeLimit: !1
                        }
                    }
                }], (protoProps = null) && defaultProps_defineProperties(Constructor.prototype, protoProps), staticProps && defaultProps_defineProperties(Constructor, staticProps), TreeDefault
            }();

            function navPanel_defaultProps_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }
            var NavPanelDefault = function() {
                function NavPanelDefault() {
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, NavPanelDefault)
                }
                var Constructor, protoProps, staticProps;
                return Constructor = NavPanelDefault, staticProps = [{
                    key: "getConfigurableProps",
                    value: function() {
                        return {
                            valueDriverTree: "",
                            showTitles: !0,
                            topNodeVisibility: "",
                            assumpVisibility: "",
                            kpiVisibility: "",
                            valueDisplayVisibility: "",
                            periodsVisibility: "",
                            scenariosVisibility: "",
                            constraintsVisibility: "",
                            visualizationVisibility: "",
                            scenariosTitle: "Scenarios",
                            topNodeTitle: "Sub Models",
                            assumpTitle: "Key Inputs",
                            kpiTitle: "KPI's",
                            valueDisplayTitle: "Value Display",
                            periodsTitle: "Simulation Period",
                            constraintsTitle: "Constraints",
                            visualizationTitle: "Visualization",
                            constraintsSort: !1,
                            topNodeList: [],
                            kpiList: [],
                            assumpList: [],
                            valueDisplayList: ["per", "ptd", "total", "sel"],
                            scalesList: ["0", "0k", "0.0m", "0.00b"],
                            constraintsList: [],
                            theme: "dark",
                            filterLists: !1,
                            onCompareClick: null,
                            onShowEditInputsClick: null,
                            enableNavPanel: !0
                        }
                    }
                }, {
                    key: "getGeneralProps",
                    value: function() {
                        return {
                            valueDisplayListDefault: ["per", "ptd", "total", "sel"],
                            scalesListDefault: ["0", "0k", "0.0m", "0.00b"],
                            visualStyleList: ["S", "F", "M"],
                            visualStyleListDefault: ["S", "F", "M"],
                            tableStyleTexts: [{
                                name: "F",
                                text: "Full",
                                caption: "Both Primary and Secondary data"
                            }, {
                                name: "S",
                                text: "Standard",
                                caption: "Only the Primary data"
                            }, {
                                name: "M",
                                text: "Minimal",
                                caption: "Only the Primary data without variance"
                            }],
                            visualStyleTexts: [{
                                name: "F",
                                text: "Full",
                                caption: "Full Nodes (More space for more digits but fewer widgets on a page)"
                            }, {
                                name: "S",
                                text: "Standard",
                                caption: "Standard Nodes (Good compromise between space and widget density)"
                            }, {
                                name: "M",
                                text: "Minimal",
                                caption: "Minimal Nodes: (no trend and secondary information)"
                            }],
                            displayValueText: {
                                per: {
                                    short: "Mth",
                                    long: "Month"
                                },
                                total: {
                                    short: "FY",
                                    long: "Full total"
                                }
                            },
                            panels: ["scenarios", "topNode", "periods", "valueDisplay", "assump", "kpi", "constraints", "visualization"],
                            visualization: "Tree",
                            visualizations: ["Tree", "Table"],
                            setPeriodTo: !1,
                            container: null,
                            navDiv: null,
                            scenariosSection: null,
                            scenariosTitleDiv: null,
                            scenariosTitleText: null,
                            scenariosDiv: null,
                            scenariosFooter: null,
                            topNodeSection: null,
                            topNodeTitleDiv: null,
                            topNodeTitleText: null,
                            topNodeDiv: null,
                            topNodeFooter: null,
                            periodsSection: null,
                            periodsTitleDiv: null,
                            periodsTitleText: null,
                            periodsDiv: null,
                            periodsFooter: null,
                            valueDisplaySection: null,
                            valueDisplayDiv: null,
                            valueDisplayTitleDiv: null,
                            valueDisplayTitleText: null,
                            valueDisplayFooter: null,
                            primaryDisplayValueDiv: null,
                            scaleDiv: null,
                            visualStyleDiv: null,
                            assumpSection: null,
                            assumpTitleDiv: null,
                            assumpTitleText: null,
                            assumpDiv: null,
                            assumpFooter: null,
                            kpiSection: null,
                            kpiTitleDiv: null,
                            kpiTitleText: null,
                            kpiDiv: null,
                            kpiFooter: null,
                            constraintsSection: null,
                            constraintsTitleDiv: null,
                            constraintsTitleText: null,
                            constraintsDiv: null,
                            constraintsFooter: null,
                            visualizationSection: null,
                            visualizationTitleDiv: null,
                            visualizationTitleText: null,
                            visualizationDiv: null,
                            visualizationFooter: null,
                            visualizationDisplayDiv: null,
                            visualizationViewDiv: null,
                            createScenarioDiv: null,
                            compareScenarioDiv: null,
                            editInputsDiv: null,
                            setPeriodToDiv: null,
                            exportsExcelDiv: null,
                            scale: "",
                            scales: {},
                            zeroDisplay: "",
                            decimalSeparator: "",
                            thousandSeparator: "",
                            negativeDisplay: "",
                            scenarios: [],
                            activeScenario: "",
                            showEditScenarioInfoDialog: null,
                            activeTopNode: "",
                            PeriodColumn: 1,
                            PeriodToColumn: 12,
                            periods: 12,
                            periodsMetadata: [],
                            primaryDisplayValue: "",
                            simDisp: {},
                            constraints: null,
                            tableStyle: "",
                            nodeStyle: "",
                            disableDownload: !1
                        }
                    }
                }], (protoProps = null) && navPanel_defaultProps_defineProperties(Constructor.prototype, protoProps), staticProps && navPanel_defaultProps_defineProperties(Constructor, staticProps), NavPanelDefault
            }();

            function _typeof(obj) {
                return (_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
                    return typeof obj
                } : function(obj) {
                    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
                })(obj)
            }

            function vdtBase_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function vdtBase_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var vdtBase_VDTBase = function() {
                function VDTBase(config, visualCount) {
                    var _this = this;
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, VDTBase), vdtBase_defineProperty(this, "id", void 0), vdtBase_defineProperty(this, "type", void 0), vdtBase_defineProperty(this, "parentContainer", void 0), vdtBase_defineProperty(this, "config", void 0), vdtBase_defineProperty(this, "_props", void 0), vdtBase_defineProperty(this, "baseProps", void 0), vdtBase_defineProperty(this, "timerId", void 0), vdtBase_defineProperty(this, "firePropsList", new Set), vdtBase_defineProperty(this, "getConfigurableProps", void 0), vdtBase_defineProperty(this, "getGeneralProps", void 0), vdtBase_defineProperty(this, "propsChanged", new Set), vdtBase_defineProperty(this, "eventService", void 0), vdtBase_defineProperty(this, "firePropertiesChanged", function(firePropsList) {
                        _this.timerId && window.clearTimeout(_this.timerId);
                        var configProps = _this.getConfigurableProps();
                        Array.isArray(firePropsList) ? firePropsList.forEach(function(propName) {
                            configProps.hasOwnProperty(propName) && (_this.propsChanged.has(propName) || (_this.baseProps[propName] = _this.baseProps[propName]), _this.firePropsList.add(propName))
                        }) : Object.keys(firePropsList).forEach(function(propName) {
                            configProps.hasOwnProperty(propName) && (_this.baseProps[propName] = _this.getClonnedVal(firePropsList[propName]), _this.firePropsList.add(propName))
                        }), _this.timerId = window.setTimeout(function() {
                            _this.timerId = null;
                            var propsChanged = new Set;
                            _this.firePropsList.forEach(function(propName) {
                                _this.propsChanged.has(propName) && (_this.config.properties[propName] = _this.baseProps[propName], propsChanged.add(propName))
                            }), _this.firePropsList.clear(), _this.propsChanged.clear(), propsChanged.size && _this.baseBeforeRender(propsChanged)
                        }, 0)
                    }), this.type = config.type, this.id = "".concat(this.type, "-").concat(core.a.uniqueKey(), "-").concat(visualCount), this.parentContainer = "string" === config.container ? document.querySelector("#".concat(config.container)) : config.container, this.config = Object.assign({}, config), this.setPropMethods(), this.setupGetterSetter(), this.eventService = this.eventService || new eventService_EventService(this.id)
                }
                var Constructor, protoProps, staticProps;
                return Constructor = VDTBase, (protoProps = [{
                    key: "getClonnedVal",
                    value: function(val) {
                        var toString = Object.prototype.toString;
                        return val instanceof Element || val instanceof HTMLElement ? val : "[object Array]" === toString.call(val) ? jquery.extend(!0, [], val) : "[object object]" === toString.call(val) ? jquery.extend(!0, {}, val) : val
                    }
                }, {
                    key: "getBaseProps",
                    value: function() {
                        return this.baseProps
                    }
                }, {
                    key: "remove",
                    value: function() {
                        var id = this.id;
                        if (registry[id]) {
                            var visual = registry[id];
                            for (var key in visual.eventService && visual.eventService.clearAll(), jquery(this.parentContainer).empty(), visual.__proto__ = null, visual) delete visual[key];
                            delete registry[id], visual = null
                        }
                    }
                }, {
                    key: "propsChangedHandler",
                    value: function(beforeRender) {
                        this.baseBeforeRender = beforeRender
                    }
                }, {
                    key: "fireEvent",
                    value: function(eventName) {
                        var evtCallback = this.baseProps[eventName];
                        evtCallback && "function" == typeof evtCallback && evtCallback(), this.eventService.publish("event:".concat(eventName), null)
                    }
                }, {
                    key: "restoreProps",
                    value: function(propNames) {
                        var _this2 = this,
                            configProps = this.config.properties;
                        propNames.forEach(function(key) {
                            configProps.hasOwnProperty(key) && _this2.baseProps[key] !== configProps[key] && (_this2.baseProps[key] = configProps[key])
                        })
                    }
                }, {
                    key: "exportConfig",
                    value: function() {
                        return {
                            id: this.id,
                            type: this.type,
                            properties: this.config.properties
                        }
                    }
                }, {
                    key: "setPropMethods",
                    value: function() {
                        switch (this.type) {
                            case "tree":
                                this.getConfigurableProps = TreeDefault.getConfigurableProps, this.getGeneralProps = TreeDefault.getGeneralProps;
                                break;
                            case "navpanel":
                                this.getConfigurableProps = NavPanelDefault.getConfigurableProps, this.getGeneralProps = NavPanelDefault.getGeneralProps
                        }
                    }
                }, {
                    key: "hasChanged",
                    value: function(propName, newVal) {
                        return "function" == typeof newVal || null !== newVal && "object" === _typeof(newVal) || this._props[propName] !== newVal
                    }
                }, {
                    key: "setupConfigurableProps",
                    value: function() {
                        var key, self = this,
                            configurableProps = this.getConfigurableProps(),
                            options = this.config.properties,
                            keys = Object.keys(configurableProps),
                            i = 0,
                            len = keys.length;
                        for (self._props = {}, self.baseProps = {}, self.config.properties = {}; i < len;) key = keys[i++], self._props[key] = self.config.properties[key] = options.hasOwnProperty(key) ? self.getClonnedVal(options[key]) : configurableProps[key],
                            function(propName) {
                                Object.defineProperty(self.baseProps, propName, {
                                    enumerable: !0,
                                    configurable: !1,
                                    get: function() {
                                        return self._props[propName]
                                    },
                                    set: function(newVal) {
                                        self.hasChanged(propName, newVal) && (self._props[propName] = newVal, self.propsChanged.add(propName))
                                    }
                                })
                            }(key)
                    }
                }, {
                    key: "setupGeneralProps",
                    value: function() {
                        for (var key, generalProps = this.getGeneralProps(), keys = Object.keys(generalProps), i = 0, len = keys.length; i < len;) key = keys[i++], this.baseProps[key] = generalProps[key]
                    }
                }, {
                    key: "setupGetterSetter",
                    value: function() {
                        this.setupConfigurableProps(), this.setupGeneralProps()
                    }
                }, {
                    key: "baseBeforeRender",
                    value: function(propsChanged) {}
                }]) && vdtBase_defineProperties(Constructor.prototype, protoProps), staticProps && vdtBase_defineProperties(Constructor, staticProps), VDTBase
            }();
            __webpack_require__(30);

            function scenarioService_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function scenarioService_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var scenarioService_ScenarioService = function() {
                function ScenarioService(TreeRef) {
                    var _this = this;
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, ScenarioService), scenarioService_defineProperty(this, "TreeRef", void 0), scenarioService_defineProperty(this, "props", void 0), scenarioService_defineProperty(this, "scenarios", void 0), scenarioService_defineProperty(this, "activeScenario", void 0), scenarioService_defineProperty(this, "editScenarioInfoDiv", void 0), scenarioService_defineProperty(this, "scenarioInfoElements", void 0), scenarioService_defineProperty(this, "scenarioInfoToEdit", void 0), scenarioService_defineProperty(this, "navDivRef", void 0), scenarioService_defineProperty(this, "editBtnEventTarget", void 0), scenarioService_defineProperty(this, "scenarioDiv", void 0), scenarioService_defineProperty(this, "scenarioHeaderDiv", void 0), scenarioService_defineProperty(this, "scenarioFooterDiv", void 0), scenarioService_defineProperty(this, "scenarioTitleDiv", void 0), scenarioService_defineProperty(this, "scenarioTableDiv", void 0), scenarioService_defineProperty(this, "scenarioDownloadDiv", void 0), scenarioService_defineProperty(this, "scenarioBgDiv", void 0), scenarioService_defineProperty(this, "scenarioCloseDiv", void 0), scenarioService_defineProperty(this, "showEditScenarioInfoDialog", function(scenario, navDiv, event) {
                        _this.scenarioInfoToEdit = scenario, _this.scenarioInfoElements.titleRef.val(scenario.title), _this.scenarioInfoElements.descrRef.val(scenario.descr || scenario.defaultDescr), _this.navDivRef = navDiv, _this.editBtnEventTarget = event.currentTarget, _this.updateScenarioInfoDialogPosition(), _this.editScenarioInfoDiv.appendTo(_this.props.popUpBgDiv), jquery(_this.props.popUpBgDiv).fadeIn()
                    }), this.TreeRef = TreeRef, this.props = TreeRef.props, this.init(), this.renderEditScenarioInfoDialog(), window.addEventListener("resize", function() {
                        _this.editScenarioInfoDiv && _this.editScenarioInfoDiv.is(":visible") && _this.updateScenarioInfoDialogPosition()
                    })
                }
                var Constructor, protoProps, staticProps;
                return Constructor = ScenarioService, (protoProps = [{
                    key: "init",
                    value: function() {
                        var _this2 = this;
                        this.scenarioBgDiv = document.createElement("DIV"), jquery(this.scenarioBgDiv).addClass("d2VDTScenarioBg"), this.scenarioDiv = document.createElement("DIV"), jquery(this.scenarioDiv).addClass("d2VDTSceario").appendTo(this.scenarioBgDiv), this.scenarioHeaderDiv = document.createElement("DIV"), jquery(this.scenarioHeaderDiv).addClass("d2VDTHeader").appendTo(this.scenarioDiv), this.scenarioTitleDiv = document.createElement("DIV"), jquery(this.scenarioTitleDiv).addClass("d2VDTTitle").appendTo(this.scenarioDiv), this.scenarioTableDiv = document.createElement("DIV"), jquery(this.scenarioTableDiv).addClass("d2VDTScearioTable d2FixedTable").appendTo(this.scenarioDiv), this.scenarioFooterDiv = document.createElement("DIV"), jquery(this.scenarioFooterDiv).addClass("d2VDTFooter").appendTo(this.scenarioDiv), this.scenarioCloseDiv = document.createElement("DIV"), jquery(this.scenarioCloseDiv).addClass("d2VDTClose").appendTo(this.scenarioBgDiv), jquery(this.scenarioCloseDiv).click(function(e) {
                            e.stopPropagation(), _this2.props.tooltip.style("visibility", "hidden"), _this2.scenarioDiv && (jquery(_this2.scenarioDownloadDiv).unbind("click"), jquery(_this2.props.popUpBgDiv).fadeOut(), jquery(_this2.scenarioBgDiv).detach()), _this2.TreeRef.eventService.publish("closedScenarioPopup", {})
                        })
                    }
                }, {
                    key: "setDefaultScenario",
                    value: function() {
                        this.props.scenarios = [{
                            name: "1",
                            title: "Scenario 1",
                            descr: "",
                            defaultDescr: "",
                            compare: !0,
                            simVar: []
                        }], this.props.activeScenario = "1", this.props.simVarInfo = []
                    }
                }, {
                    key: "setActiveScenario",
                    value: function(name, calculate) {
                        var _this3 = this;
                        this.props.simVarInfo = [], this.props.simVar = {}, this.props.simMeth = {}, this.props.simMan = {}, this.props.scenarios.forEach(function(scenario) {
                            if (scenario.name == name) {
                                _this3.props.activeScenario = name, _this3.props.simVarInfo = scenario.simVar || [];
                                for (var i = 0; i < _this3.props.simVarInfo.length; i++) {
                                    var n = _this3.props.simVarInfo[i].name,
                                        s = _this3.props.simVarInfo[i];
                                    _this3.props.simVar[n] = s.value, _this3.props.simMeth[n] = s.sMeth, s.manSim && (_this3.props.simMan[n] = s.manSim)
                                }
                                calculate && (_this3.TreeRef.calculationService.calculate(), _this3.TreeRef.simulationService.analyseSimulations())
                            }
                        }), this.TreeRef.firePropertiesChanged(["activeScenario"])
                    }
                }, {
                    key: "createScenario",
                    value: function() {
                        for (var name = "".concat(d3.max(this.props.scenarios, function(d) {
                                return parseInt(d.name)
                            }) + 1), defaultDescr = "", i = 0; i < this.props.scenarios.length; i++) {
                            var scenario = this.props.scenarios[i];
                            if (scenario.name === this.props.activeScenario) {
                                defaultDescr = scenario.defaultDescr;
                                break
                            }
                        }
                        this.props.activeScenario = name, this.props.scenarios.push({
                            name: name,
                            title: "Scenario ".concat(name),
                            descr: "",
                            defaultDescr: defaultDescr,
                            compare: !0,
                            simVar: this.props.simVarInfo.slice(0) || []
                        }), this.props.scenarios = this.props.scenarios, this.TreeRef.firePropertiesChanged(["activeScenario", "scenarios"])
                    }
                }, {
                    key: "deleteScenario",
                    value: function(name) {
                        "ALL" == name ? this.setDefaultScenario() : this.props.scenarios = jquery.grep(this.props.scenarios, function(d) {
                            return d.name != name
                        }), name == this.props.activeScenario || "ALL" == name ? (this.setActiveScenario(this.props.scenarios[0].name, !1), this.TreeRef.firePropertiesChanged(["scenarios", "activeScenario"])) : this.TreeRef.firePropertiesChanged(["scenarios"])
                    }
                }, {
                    key: "editScenarioInfo",
                    value: function(scenarioName, title, descr) {
                        var _this4 = this;
                        jquery.each(this.props.scenarios, function(index, scenario) {
                            if (scenario.name === scenarioName) return scenario.title = title, scenario.defaultDescr === descr ? scenario.descr = "" : scenario.descr = descr, _this4.TreeRef.firePropertiesChanged(["scenarios"]), !1
                        })
                    }
                }, {
                    key: "renderEditScenarioInfoDialog",
                    value: function() {
                        var _this5 = this;
                        this.editScenarioInfoDiv = jquery('<div class="edit-scenario-info-dialog"></div>'), this.scenarioInfoElements = {};
                        var headerDiv = jquery('<div class="edit-scenario-info-dailog-row"></div>');
                        this.scenarioInfoElements.closeRef = jquery('<span class="close-edit-scenario-info-dialog" title="save and close the dialog"></span>'), headerDiv.append(this.scenarioInfoElements.closeRef);
                        var titleDiv = jquery('<div class="edit-scenario-info-dailog-row"><span class="label">Title</span></div>');
                        this.scenarioInfoElements.titleRef = jquery('<input type="text" class="edit-scenario-info-input" />'), titleDiv.append(this.scenarioInfoElements.titleRef);
                        var descriptionDiv = jquery('<div class="edit-scenario-info-dailog-row"><span class="label">Description</span></div>'),
                            textAreaDiv = jquery('<div class="edit-scernario-descr-descr-div"></div>');
                        this.scenarioInfoElements.descrRef = jquery('<textarea class="editScenarioInfo_descr"></textarea>'), textAreaDiv.append(this.scenarioInfoElements.descrRef), descriptionDiv.append(textAreaDiv);
                        var notch = jquery('<b class="notch"></b>');
                        this.editScenarioInfoDiv.append([headerDiv, titleDiv, descriptionDiv, notch]), this.scenarioInfoElements.closeRef.on("click", function() {
                            var title = _this5.scenarioInfoElements.titleRef.val(),
                                descr = _this5.scenarioInfoElements.descrRef.val();
                            _this5.editScenarioInfo(_this5.scenarioInfoToEdit.name, title, descr), _this5.scenarioInfoToEdit = null, _this5.props.tooltip.style("visibility", "hidden"), _this5.editScenarioInfoDiv && (jquery(_this5.props.popUpBgDiv).fadeOut(), jquery(_this5.editScenarioInfoDiv).detach())
                        })
                    }
                }, {
                    key: "updateScenarioInfoDialogPosition",
                    value: function() {
                        var leftPos = this.navDivRef.getBoundingClientRect().left + 5,
                            bottomPos = this.editBtnEventTarget.getBoundingClientRect().bottom + 5,
                            diff = leftPos + 400 - window.innerWidth,
                            calloutLeftPos = 20;
                        diff > 0 && (leftPos = leftPos - diff - 5, calloutLeftPos += diff), this.editScenarioInfoDiv.find(".notch").css("left", calloutLeftPos + "px"), this.editScenarioInfoDiv.css({
                            left: leftPos + "px",
                            top: bottomPos + "px"
                        })
                    }
                }, {
                    key: "renderCompareScenarios",
                    value: function(config) {
                        var _this6 = this,
                            c = config || {},
                            topNode = this.props.nodes["N".concat(c.topNode)] || {},
                            assumpList = c.assumpList || [],
                            assumpTitle = assumpList.length > 0 && c.assumpTitle || "",
                            kpiList = c.kpiList || [],
                            kpiTitle = kpiList.length > 0 && c.kpiTitle || "",
                            currentScenario = this.props.activeScenario,
                            scenarios = {},
                            hasSim = !1,
                            nodeList = [],
                            rowList = [],
                            availScenarios = this.props.scenarios.map(function(_ref) {
                                var name = _ref.name;
                                return "".concat(name)
                            }),
                            scList = c.scenarioList || availScenarios,
                            field = this.props.valueDisp.primary.key;
                        jquery(this.scenarioBgDiv).appendTo(this.props.popUpBgDiv), jquery(this.props.popUpBgDiv).fadeIn(), scList = scList.reduce(function(list, s) {
                            var i = jquery.inArray("".concat(s), availScenarios);
                            return -1 != i && (list.push(s), scenarios[s] = {
                                scenario: _this6.props.scenarios[i],
                                nodes: {},
                                field: _this6.props.valueDisp.primary.key,
                                dataSeries: "act"
                            }), list
                        }, []);
                        var nodeMap = (nodeList = nodeList.concat([c.topNode], assumpList, kpiList).reduce(function(l, v) {
                            return _this6.props.nodes["N".concat(v)] && l.push(_this6.props.nodes["N".concat(v)]), l
                        }, [])).reduce(function(map, d) {
                            return d.comparison = {}, map[d.name] = d, map
                        }, {});
                        scList.forEach(function(s) {
                            _this6.setActiveScenario(s, !0), scenarios[s].simBaseVal = core.a.clone(_this6.props.simBaseVal) || {}, jquery.isEmptyObject(scenarios[s].simBaseVal) || (hasSim = !0), nodeList.forEach(function(_ref2) {
                                var name = _ref2.name,
                                    n = _this6.props.nodes[name],
                                    v = n[_this6.props.valueDisp.primary.key],
                                    c = nodeMap[name].comparison;
                                scenarios[s].nodes[name] = core.a.clone(n), c.max = c.max ? d3.max([c.max, v.act]) : v.act, c.min = c.min ? d3.min([c.min, v.act]) : v.act
                            })
                        }), scList.push("base", "tgt"), scenarios.base = jquery.extend({}, scenarios[scList[0]], {
                            scenario: {
                                name: "base",
                                title: this.props.pVerTitle
                            },
                            field: field,
                            simBaseVal: {},
                            dataSeries: "base"
                        }), scenarios.tgt = jquery.extend({}, scenarios.base, {
                            scenario: {
                                name: "tgt",
                                title: this.props.cVerTitle
                            },
                            dataSeries: "tgt"
                        }), "ptd" != field && (scList.push("baseptd"), scenarios.baseptd = jquery.extend({}, scenarios.base, {
                            scenario: {
                                name: "baseptd",
                                title: this.props.pVerTitle
                            },
                            field: "ptd"
                        })), this.setActiveScenario(currentScenario, !0), rowList = rowList.concat([topNode ? {
                            type: "topNode",
                            d: topNode
                        } : null, hasSim ? {
                            type: "waterfall",
                            d: {
                                title: ""
                            }
                        } : null, {
                            type: "scenario-description",
                            d: {
                                title: ""
                            }
                        }, kpiTitle ? {
                            type: "kpi",
                            d: {
                                title: kpiTitle
                            }
                        } : null], kpiList.map(function(v) {
                            var d = _this6.props.nodes["N".concat(v)];
                            return d ? {
                                type: "valueItem",
                                d: d
                            } : {
                                type: "textItem",
                                d: {
                                    title: v
                                }
                            }
                        }), [assumpTitle ? {
                            type: "assump",
                            d: {
                                title: assumpTitle
                            }
                        } : null], assumpList.map(function(v) {
                            var d = _this6.props.nodes["N".concat(v)];
                            return d ? {
                                type: "valueItem",
                                d: d
                            } : {
                                type: "textItem",
                                d: {
                                    title: v
                                }
                            }
                        }), [{
                            type: "scenarioFooter",
                            d: {
                                title: ""
                            }
                        }]).reduce(function(l, r) {
                            return r && l.push(r), l
                        }, []);
                        var title = "".concat((topNode ? "".concat(topNode.title, ": ") : "") + this.props.displayValueText[field].long, " Scenario Comparison");
                        jquery(this.scenarioTitleDiv).html(title);
                        var html = ['<header class="d2FixedTable-header"> <table> <thead> <tr>', scList.map(function(s) {
                            var scenario = (s = scenarios[s] || {}).scenario || {},
                                swapIconSpan = -1 !== availScenarios.indexOf(scenario.name) ? '<span class="swapScenarioIcon" title="Go to '.concat(scenario.title, '"></span>') : "";
                            return '<th>\n                <div data-scenario="'.concat(scenario.name, '" class="scenarioHeader').concat(scenario.name == _this6.props.activeScenario ? " active" : "", '">\n                <span class="scenarioTitleText">').concat(core.a.escapeHtml(scenario.title), ": ").concat(_this6.props.displayValueText[s.field].long, "</span> \n                ").concat(swapIconSpan, "\n                </div>\n                </th>")
                        }).join(""), "</tr> </thead> </table> </header>"].join("") + ['<aside class="d2FixedTable-sidebar"> <table> <tbody>', rowList.map(function(_ref3) {
                            var type = _ref3.type,
                                d = _ref3.d;
                            switch (type) {
                                case "assump":
                                case "kpi":
                                    return '<tr> <td><div class="group"><div class ="d2VDTIcon '.concat(type, '"></div><div class="text">').concat(d.title, "</div></div></td></tr>");
                                case "valueItem":
                                case "textItem":
                                    return '<tr> <td><div class="'.concat(type, '">').concat(d.tPrefix || "").concat(d.title, "</div></td></tr>");
                                default:
                                    return '<tr> <td><div class="'.concat(type, '" style="visibility:hidden"></div></td></tr>')
                            }
                        }).join(""), "</tbody> </table> </aside>"].join("") + ['<div class="d2FixedTable-body d2Scroll"> <table> <tbody>', rowList.map(function(r) {
                            return "<tr>".concat(scList.map(function(s) {
                                var d = scenarios[s].nodes[r.d.name],
                                    f = scenarios[s].field,
                                    ds = scenarios[s].dataSeries,
                                    v = d ? d[f][ds] : null,
                                    c = d ? nodeMap[d.name].comparison : {},
                                    active = scenarios[s].scenario.name == _this6.props.activeScenario ? " active" : "",
                                    compare = d && c.max != c.min ? c.max == v ? "I" == d.trend ? " best" : " worst" : c.min == v ? "I" == d.trend ? " worst" : " best" : "" : "",
                                    descr = core.a.escapeHtml(scenarios[s].scenario.descr || scenarios[s].scenario.defaultDescr || "");
                                switch (r.type) {
                                    case "topNode":
                                        return '<td><div class="topNode d2VDTValue'.concat(active).concat(compare, '">').concat(core.a.formatLargeValue(v, d, _this6.props.scales[d.scale], _this6.props.negativeDisplay, _this6.props.zeroDisplay, _this6.props.thousandSeparator, _this6.props.decimalSeparator), "</div></td>");
                                    case "waterfall":
                                        return '<td><div class="waterfall'.concat(active, '" id="waterfall-').concat(s, '"></div></td>');
                                    case "assump":
                                    case "kpi":
                                        return '<td><div class="group'.concat(active, '"></div></td>');
                                    case "scenario-description":
                                        return '<td><div class="scenario-description'.concat(active, '"><div>').concat(descr || "", "</div></div></td>");
                                    default:
                                        return '<td><div class="'.concat(r.type).concat(active).concat(compare, '">').concat(v ? d.enableEnumList ? core.a.formatEnumVal(v, d).join(", ") : core.a.formatVal(v, d, _this6.props.scales[d.scale], null, null, _this6.props.negativeDisplay, _this6.props.zeroDisplay, _this6.props.thousandSeparator, _this6.props.decimalSeparator) : "", "</div></td>")
                                }
                            }).join(""), "</tr>")
                        }).join(""), "</tbody> </table> </div>"].join("");
                        jquery(this.scenarioTableDiv).html(html), jquery(this.scenarioTableDiv).find(".swapScenarioIcon").click(function(event) {
                            event.preventDefault();
                            var name = jquery(event.target.parentNode).attr("data-scenario");
                            jquery(_this6.scenarioCloseDiv).click(), _this6.setActiveScenario(name, !0)
                        }), hasSim && jquery.each(scenarios, function(i, _ref4) {
                            for (var nodes = _ref4.nodes, scenario = _ref4.scenario, simBaseVal = _ref4.simBaseVal, currentSimVar = {}, simVar = scenario.simVar || [], _i = 0; _i < simVar.length; _i++) {
                                var n = simVar[_i].name,
                                    s = simVar[_i];
                                currentSimVar[n] = s.value
                            }
                            _this6.TreeRef.detailPageService.renderWaterFallChart(nodes[topNode.name], jquery("#waterfall-".concat(scenario.name))[0], _this6.props.primaryDisplayValue, simBaseVal, 20, currentSimVar)
                        });
                        core.a.fixedTable(this.scenarioTableDiv);
                        core.a.attachScroll(jquery(".d2FixedTable-body.d2Scroll")), this.scenarioDownloadDiv = document.createElement("DIV"), jquery(this.scenarioDownloadDiv).addClass("d2VDTDownload").appendTo(this.scenarioBgDiv).html(" Download to Excel"), jquery(this.scenarioDownloadDiv).unbind("click"), jquery(this.scenarioDownloadDiv).bind("click", function(e) {
                            e.stopPropagation(), exportToExcel()
                        }), this.props.disableDownload && jquery(this.scenarioDownloadDiv).addClass("download-disabled").attr("disabled", "disabled").off("click");
                        var exportToExcel = function() {
                            var xmlXLS = ['<?xml version="1.0"?>', '<?mso-application progid="Excel.Sheet"?>', '<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">', " <Styles>", '  <Style ss:ID="Default" ss:Name="Normal">', "  </Style>", '  <Style ss:ID="vdtTitle" ss:Name="VDT_Title">', '   <Font ss:Size="16" />', "  </Style>", '  <Style ss:ID="vdtHdr" ss:Name="VDT_Headers">', '   <Font ss:Color="#FFFFFF"/>', '   <Interior ss:Color="#808080" ss:Pattern="Solid"/>', "  </Style>", '  <Style ss:ID="vdtH1" ss:Name="VDT_H1">', '   <Font ss:Size="12" ss:Color="#000000" ss:Bold="1"/> ', '   <Interior ss:Color="#DDDDDD" ss:Pattern="Solid"/>', "  </Style>", '  <Style ss:ID="vdtH2" ss:Name="VDT_H2">', '   <Font ss:Bold="1"/> ', "  </Style>", " </Styles>", ' <Worksheet ss:Name="Scenario Comparison">', '  <Table ss:DefaultColumnWidth="120">', '<Column ss:Index="1" ss:Width="200"/>', '<Column ss:Index="2" ss:Width="50"/>', "<Row>", '<Cell ss:StyleID="vdtTitle" ><Data ss:Type="String">'.concat(title, "</Data></Cell>"), "</Row>", "<Row/>", "<Row>", '<Cell ss:StyleID="vdtHdr" ></Cell><Cell ss:StyleID="vdtHdr" ></Cell>', scList.map(function(s) {
                                var scenario = (s = scenarios[s] || {}).scenario || {};
                                return '<Cell ss:StyleID="vdtHdr" ><Data ss:Type="String">'.concat(scenario.title, ": ").concat(_this6.props.displayValueText[s.field].long, "</Data></Cell>")
                            }).join(""), "</Row>", rowList.map(function(r) {
                                return "<Row>".concat(function() {
                                    switch (r.type) {
                                        case "assump":
                                        case "kpi":
                                            return '<Cell ss:StyleID="vdtH1" ><Data ss:Type="String">'.concat(r.d.title, '</Data></Cell><Cell ss:StyleID="vdtH1" ></Cell>');
                                        case "topNode":
                                        case "valueItem":
                                            return '<Cell><Data ss:Type="String">'.concat(r.d.tPrefix || "").concat(r.d.title, '</Data></Cell><Cell><Data ss:Type="String">').concat(core.a.formatUnit(r.d, _this6.props.scales[r.d.scale]), "</Data></Cell>");
                                        case "textItem":
                                            return '<Cell ss:StyleID="vdtH2" ><Data ss:Type="String">'.concat(r.d.title, "</Data></Cell><Cell></Cell>");
                                        default:
                                            return "<Cell></Cell><Cell></Cell>"
                                    }
                                }()).concat(scList.map(function(s) {
                                    var d = scenarios[s].nodes[r.d.name],
                                        f = scenarios[s].field,
                                        ds = scenarios[s].dataSeries,
                                        v = d ? d[f][ds] : "",
                                        descr = scenarios[s].scenario.descr || scenarios[s].scenario.defaultDescr,
                                        roundedValue = d ? d.enableEnumList ? core.a.formatEnumVal(v, d).join(", ") : core.a.roundVal(v, d, _this6.props.scales[d.scale]) : v;
                                    switch (r.type) {
                                        case "topNode":
                                            return '<Cell><Data ss:Type="'.concat(jquery.isNumeric(roundedValue) ? "Number" : "String", '">').concat(roundedValue, "</Data></Cell>");
                                        case "waterfall":
                                            return '<Cell><Data ss:Type="String">'.concat(descr || "", "</Data></Cell>");
                                        case "assump":
                                        case "kpi":
                                            return '<Cell ss:StyleID="vdtH1" ></Cell>';
                                        case "scenario-description":
                                            return "";
                                        default:
                                            return '<Cell><Data ss:Type="'.concat(jquery.isNumeric(roundedValue) ? "Number" : "String", '">').concat(roundedValue, "</Data></Cell>")
                                    }
                                }).join(""), "</Row>")
                            }).join(""), "  </Table>", "</Worksheet>", "</Workbook>"].join("");
                            core.a.openExcel(xmlXLS)
                        }
                    }
                }, {
                    key: "exportData",
                    value: function() {
                        var _this7 = this,
                            cols = {
                                config: [{
                                    id: "name",
                                    hdr: "NodeId"
                                }, {
                                    id: "title",
                                    hdr: "Node"
                                }, {
                                    id: "notes",
                                    hdr: "Technical Notes"
                                }, {
                                    id: "level",
                                    hdr: "Level"
                                }, {
                                    id: "formula",
                                    hdr: "Formula"
                                }, {
                                    id: "trend",
                                    hdr: "Desired Trend"
                                }, {
                                    id: "unit",
                                    hdr: "Unit"
                                }],
                                per: [{
                                    id: "act",
                                    hdr: "Simulated Value"
                                }, {
                                    id: "tgt",
                                    hdr: "Target"
                                }, {
                                    id: "varAbs",
                                    hdr: "Var"
                                }, {
                                    id: "varPct",
                                    hdr: "Var %"
                                }, {
                                    id: "base",
                                    hdr: "Original Value"
                                }, {
                                    id: "origVarAbs",
                                    hdr: "Orig. Var"
                                }, {
                                    id: "origVarPct",
                                    hdr: "Orig. Var %"
                                }, {
                                    id: "simChangeAbs",
                                    hdr: "Sim Change"
                                }, {
                                    id: "simChangePct",
                                    hdr: "Sim Change %"
                                }, {
                                    id: "simChangeText",
                                    hdr: "Sim Change Text"
                                }, {
                                    id: "status",
                                    hdr: "Status"
                                }]
                            },
                            headers = [],
                            periodsMetadata = this.props.periodsMetadata.slice(0, this.props.periods);
                        headers = cols.config.map(function(_ref5) {
                            return _ref5.hdr
                        }), jquery.merge(headers, cols.per.map(function(_ref6) {
                            var hdr = _ref6.hdr;
                            return "Per ".concat(hdr)
                        })), jquery.merge(headers, cols.per.map(function(_ref7) {
                            var hdr = _ref7.hdr;
                            return "ptd ".concat(hdr)
                        })), jquery.merge(headers, cols.per.map(function(_ref8) {
                            var hdr = _ref8.hdr;
                            return "total ".concat(hdr)
                        })), jquery.merge(headers, cols.per.map(function(_ref9) {
                            var hdr = _ref9.hdr;
                            return "Sim Range ".concat(hdr)
                        })), jquery.merge(headers, periodsMetadata.map(function(v) {
                            return "Sim ".concat(v.text)
                        })), jquery.merge(headers, periodsMetadata.map(function(v) {
                            return "Tgt ".concat(v.text)
                        })), jquery.merge(headers, periodsMetadata.map(function(v) {
                            return "Orig. ".concat(v.text)
                        }));
                        var rows = this.props.derivedTreeConfig.map(function(_ref10) {
                                var name = _ref10.name,
                                    row = [],
                                    d = _this7.props.nodes[name] || {},
                                    results = d.results.slice(0, _this7.props.periods);
                                return jquery.each(cols.config, function(key, _ref11) {
                                    var id = _ref11.id;
                                    row.push("title" == id ? Array(2 * d.level + 1).join("  ") + d.tPrefix + d[id] : "unit" == id ? core.a.formatUnit(d, _this7.props.scales[d.scale]) : d[id])
                                }), jquery.each(cols.per, function(key, _ref12) {
                                    var id = _ref12.id;
                                    row.push(core.a.roundVal(d.per[id], d, _this7.props.scales[d.scale]))
                                }), jquery.each(cols.per, function(key, _ref13) {
                                    var id = _ref13.id;
                                    row.push(core.a.roundVal(d.ptd[id], d, _this7.props.scales[d.scale]))
                                }), jquery.each(cols.per, function(key, _ref14) {
                                    var id = _ref14.id;
                                    row.push(core.a.roundVal(d.total[id], d, _this7.props.scales[d.scale]))
                                }), jquery.each(cols.per, function(key, _ref15) {
                                    var id = _ref15.id;
                                    row.push(core.a.roundVal(d.sel[id], d, _this7.props.scales[d.scale]))
                                }), jquery.merge(row, results.map(function(_ref16) {
                                    var act = _ref16.act;
                                    return core.a.roundVal(act, d, _this7.props.scales[d.scale])
                                })), jquery.merge(row, results.map(function(_ref17) {
                                    var tgt = _ref17.tgt;
                                    return core.a.roundVal(tgt, d, _this7.props.scales[d.scale])
                                })), jquery.merge(row, results.map(function(_ref18) {
                                    var base = _ref18.base;
                                    return core.a.roundVal(base, d, _this7.props.scales[d.scale])
                                })), row
                            }),
                            xmlXLS = ['<?xml version="1.0"?>', '<?mso-application progid="Excel.Sheet"?>', '<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">', " <Styles>", '  <Style ss:ID="Default" ss:Name="Normal">', "  </Style>", '  <Style ss:ID="vdtHdr" ss:Name="VDT_Headers">', '   <Font ss:Color="#FFFFFF"/>', '   <Interior ss:Color="#808080" ss:Pattern="Solid"/>', "  </Style>", " </Styles>", ' <Worksheet ss:Name="Value Driver Tree Data">', "  <Table>", '<Column ss:Index="2" ss:Width="200"/>', '<Column ss:Index="3" ss:Width="200"/>', "<Row>", '<Cell ss:StyleID="vdtHdr" ><Data ss:Type="String">'.concat(headers.join('</Data></Cell><Cell ss:StyleID="vdtHdr" ><Data ss:Type="String">'), "</Data></Cell>"), "</Row>", rows.map(function(d) {
                                return "<Row>".concat(d.map(function(v) {
                                    return '<Cell><Data ss:Type="'.concat(jquery.isNumeric(v) ? "Number" : "String", '">').concat(v, "</Data></Cell>")
                                }).join(""), "</Row>")
                            }).join(""), "  </Table>", "</Worksheet>", ' <Worksheet ss:Name="Simulated Changes">', "  <Table>", '<Column ss:Index="2" ss:Width="200"/>', '<Column ss:Index="3" ss:Width="200"/>', "<Row>", '<Cell ss:StyleID="vdtHdr"><Data ss:Type="String">'.concat(jquery.merge(["Node Id", "Node", "Technical Notes", "Simulation Method", "Variation"], periodsMetadata.map(function(v) {
                                return "Sim ".concat(v.text)
                            })).join('</Data></Cell><Cell ss:StyleID="vdtHdr" ><Data ss:Type="String">'), "</Data></Cell>"), "</Row>", this.props.simVarInfo.map(function(d) {
                                var n = _this7.props.nodes[d.name];
                                return "<Row>".concat(jquery.merge([d.name, n.title, n.notes, d.sMeth, d.value], n.results.slice(0, _this7.props.periods).map(function(_ref19) {
                                    var act = _ref19.act;
                                    return core.a.roundVal(act, n, _this7.props.scales[n.scale])
                                })).map(function(v) {
                                    return '<Cell><Data ss:Type="'.concat(jquery.isNumeric(v) ? "Number" : "String", '">').concat(v, "</Data></Cell>")
                                }).join(""), "</Row>")
                            }).join(""), "  </Table>", "</Worksheet>", "</Workbook>"].join("");
                        core.a.openExcel(xmlXLS)
                    }
                }, {
                    key: "exportSeriesData",
                    value: function() {
                        var _this8 = this,
                            cols = {
                                config: [{
                                    id: "name",
                                    hdr: "NodeId"
                                }, {
                                    id: "title",
                                    hdr: "Node"
                                }, {
                                    id: "level",
                                    hdr: "Level"
                                }, {
                                    id: "unit",
                                    hdr: "Unit"
                                }],
                                per: []
                            },
                            periodsMetadata = this.props.periodsMetadata.slice(0, this.props.periods),
                            headers = [];
                        headers = cols.config.map(function(_ref20) {
                            return _ref20.hdr
                        }), jquery.merge(headers, periodsMetadata.map(function(v) {
                            return "Sim ".concat(v.text)
                        })), this.props.withComparison && jquery.merge(headers, periodsMetadata.map(function(v) {
                            return "Tgt ".concat(v.text)
                        })), jquery.merge(headers, periodsMetadata.map(function(v) {
                            return "Orig. ".concat(v.text)
                        }));
                        for (var rows = this.props.derivedTreeConfig.map(function(_ref21) {
                                var name = _ref21.name,
                                    row = [],
                                    d = _this8.props.nodes[name] || {},
                                    results = d.results.slice(0, _this8.props.periods);
                                return jquery.each(cols.config, function(key, _ref22) {
                                    var id = _ref22.id;
                                    row.push("title" == id ? Array(2 * d.level + 1).join("  ") + d.tPrefix + d[id] : "unit" == id ? core.a.formatUnit(d, _this8.props.scales[d.scale]) : d[id])
                                }), jquery.merge(row, results.map(function(_ref23) {
                                    var act = _ref23.act;
                                    return core.a.roundVal(act, d, _this8.props.scales[d.scale])
                                })), jquery.merge(row, results.map(function(_ref24) {
                                    var tgt = _ref24.tgt;
                                    return core.a.roundVal(tgt, d, _this8.props.scales[d.scale])
                                })), jquery.merge(row, results.map(function(_ref25) {
                                    var base = _ref25.base;
                                    return core.a.roundVal(base, d, _this8.props.scales[d.scale])
                                })), row
                            }), xmlXLS = ['<?xml version="1.0"?>', '<?mso-application progid="Excel.Sheet"?>', '<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40">', " <Styles>", '  <Style ss:ID="Default" ss:Name="Normal">', "  </Style>", '  <Style ss:ID="vdtHdr" ss:Name="VDT_Headers">', '   <Font ss:Color="#FFFFFF"/>', '   <Interior ss:Color="#808080" ss:Pattern="Solid"/>', "  </Style>", " </Styles>", ' <Worksheet ss:Name="Value Driver Tree Data">', "  <Table>", '   <Column ss:Index="2" ss:Width="200"/>', "   <Row>", '    <Cell ss:StyleID="vdtHdr" ><Data ss:Type="String">'.concat(headers.join('</Data></Cell><Cell ss:StyleID="vdtHdr" ><Data ss:Type="String">'), "</Data></Cell>"), "   </Row>", rows.map(function(d) {
                                return "<Row>".concat(d.map(function(v) {
                                    return '<Cell><Data ss:Type="'.concat(jquery.isNumeric(v) ? "Number" : "String", '">').concat(v, "</Data></Cell>")
                                }).join(""), "</Row>")
                            }).join(""), "  </Table>", "</Worksheet>", "</Workbook>"].join(""), currentScenarioTitle = null, scenarios = this.props.scenarios, i = 0; i < scenarios.length; i++)
                            if (scenarios[i].name === this.props.activeScenario) {
                                currentScenarioTitle = scenarios[i].title;
                                break
                            } core.a.openExcel(xmlXLS, "VALQ_DOWNLOAD_".concat(currentScenarioTitle || "Scenario ".concat(this.props.activeScenario), ".xml"))
                    }
                }]) && scenarioService_defineProperties(Constructor.prototype, protoProps), staticProps && scenarioService_defineProperties(Constructor, staticProps), ScenarioService
            }();
            __webpack_require__(66);

            function NodeSearch_typeof(obj) {
                return (NodeSearch_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
                    return typeof obj
                } : function(obj) {
                    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
                })(obj)
            }

            function NodeSearch_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function NodeSearch_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var NodeSearch = function() {
                function NodeSearch(options) {
                    var _this = this;
                    for (var key in function(instance, Constructor) {
                            if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                        }(this, NodeSearch), NodeSearch_defineProperty(this, "nodeSearchConfig", {
                            selector: 0,
                            source: 0,
                            minChars: 3,
                            delay: 150,
                            offsetLeft: 0,
                            offsetTop: 1,
                            cache: !1,
                            position: "bottom",
                            container: document.getElementById("body"),
                            menuClass: "",
                            renderItem: function(item, search) {
                                search = search.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&");
                                var re = new RegExp("(" + search.split(" ").join("|") + ")", "gi");
                                return ["<div data-val='".concat(item.name, "'  data-title='").concat(item.title, "' class='nodeSearchSuggestion'>"), "<p class='searchNodeText' title='".concat(item.title, "'>").concat(item.title.replace(re, "<b>$1</b>"), "</p>"), "<p class='searchResultItemParent'>".concat(item.path.join(" > "), "</p>"), "</div>"].join("")
                            },
                            onSelect: function(e, term, item) {}
                        }), NodeSearch_defineProperty(this, "autoCompleteContainer", void 0), NodeSearch_defineProperty(this, "destroy", function() {
                            for (var i = 0; i < _this.autoCompleteContainer.length; i++) {
                                var self = _this.autoCompleteContainer[i];
                                NodeSearch.removeEvent(window, "resize", self.updateSuggestionsContainer), NodeSearch.removeEvent(self, "blur", self.blurHandler), NodeSearch.removeEvent(self, "focus", self.focusHandler), NodeSearch.removeEvent(self, "keydown", self.keydownHandler), NodeSearch.removeEvent(self, "keyup", self.keyupHandler), self.autocompleteAttr ? self.setAttribute("autocomplete", self.autocompleteAttr) : self.removeAttribute("autocomplete"), _this.nodeSearchConfig.container.removeChild(self.suggestionsContainer), self = null
                            }
                        }), options) options.hasOwnProperty(key) && (this.nodeSearchConfig[key] = options[key]);
                    document.querySelector && this.init()
                }
                var Constructor, protoProps, staticProps;
                return Constructor = NodeSearch, staticProps = [{
                    key: "hasClass",
                    value: function(el, className) {
                        return el.classList ? el.classList.contains(className) : new RegExp("\\b" + className + "\\b").test(el.className)
                    }
                }, {
                    key: "addEvent",
                    value: function(el, type, handler) {
                        el.attachEvent ? el.attachEvent("on" + type, handler) : el.addEventListener(type, handler)
                    }
                }, {
                    key: "removeEvent",
                    value: function(el, type, handler) {
                        el.detachEvent ? el.detachEvent("on" + type, handler) : el.removeEventListener(type, handler)
                    }
                }, {
                    key: "live",
                    value: function(elClass, event, cb, context) {
                        NodeSearch.addEvent(context || document, event, function(e) {
                            for (var found, el = e.target || e.srcElement; el && !(found = NodeSearch.hasClass(el, elClass));) el = el.parentElement;
                            found && cb.call(el, e)
                        })
                    }
                }], (protoProps = [{
                    key: "init",
                    value: function() {
                        var _this2 = this;
                        this.autoCompleteContainer = "object" == NodeSearch_typeof(this.nodeSearchConfig.selector) ? [this.nodeSearchConfig.selector] : document.querySelectorAll(this.nodeSearchConfig.selector);
                        for (var _loop = function(i) {
                                var self = _this2.autoCompleteContainer[i];
                                self.suggestionsContainer = document.createElement("div"), self.suggestionsContainer.className = "nodeSearchSuggestions " + _this2.nodeSearchConfig.menuClass, self.autocompleteAttr = self.getAttribute("autocomplete"), self.setAttribute("autocomplete", "off"), self.cache = {}, self.last_val = "", self.updateSuggestionsContainer = function(resize, next) {
                                    var treeDimensions = _this2.nodeSearchConfig.container.getBoundingClientRect(),
                                        dimensions = (self.parentElement || self.inputElement).getBoundingClientRect(),
                                        position = "top" === _this2.nodeSearchConfig.position ? "".concat(dimensions.top + dimensions.height, "px") : "".concat(dimensions.height, "px");
                                    self.suggestionsContainer.style[_this2.nodeSearchConfig.position] = position, self.suggestionsContainer.style.left = "".concat(dimensions.left - treeDimensions.left, "px");
                                    var rect = self.getBoundingClientRect();
                                    if (self.suggestionsContainer.style.width = Math.round(rect.right - rect.left) + "px", !resize && (self.suggestionsContainer.style.display = "block", self.suggestionsContainer.maxHeight || (self.suggestionsContainer.maxHeight = parseInt((window.getComputedStyle ? getComputedStyle(self.suggestionsContainer, null) : self.suggestionsContainer.currentStyle).maxHeight)), self.suggestionsContainer.suggestionHeight || (self.suggestionsContainer.suggestionHeight = self.suggestionsContainer.querySelector(".nodeSearchSuggestion").offsetHeight), self.suggestionsContainer.suggestionHeight))
                                        if (next) {
                                            var scrTop = self.suggestionsContainer.scrollTop,
                                                selTop = next.getBoundingClientRect().top - self.suggestionsContainer.getBoundingClientRect().top;
                                            selTop + self.suggestionsContainer.suggestionHeight - self.suggestionsContainer.maxHeight > 0 ? self.suggestionsContainer.scrollTop = selTop + self.suggestionsContainer.suggestionHeight + scrTop - self.suggestionsContainer.maxHeight : selTop < 0 && (self.suggestionsContainer.scrollTop = selTop + scrTop)
                                        } else self.suggestionsContainer.scrollTop = 0
                                }, NodeSearch.addEvent(window, "resize", self.updateSuggestionsContainer), _this2.nodeSearchConfig.container.appendChild(self.suggestionsContainer);
                                var callBack = _this2.nodeSearchConfig.onSelect;
                                NodeSearch.live("nodeSearchSuggestion", "mouseleave", function(e) {
                                    var sel = self.suggestionsContainer.querySelector(".nodeSearchSuggestion.selected");
                                    sel && setTimeout(function() {
                                        sel.className = sel.className.replace("selected", "")
                                    }, 20)
                                }, self.suggestionsContainer), NodeSearch.live("nodeSearchSuggestion", "mouseover", function(e) {
                                    var sel = self.suggestionsContainer.querySelector(".nodeSearchSuggestion.selected");
                                    sel && (sel.className = sel.className.replace("selected", "")), this.className += " selected"
                                }, self.suggestionsContainer), NodeSearch.live("nodeSearchSuggestion", "mousedown", function(e) {
                                    if (NodeSearch.hasClass(this, "nodeSearchSuggestion")) {
                                        var v = this.getAttribute("data-val");
                                        self.value = v, callBack(e, v, this), self.suggestionsContainer.style.display = "none"
                                    }
                                }, self.suggestionsContainer), self.blurHandler = function() {
                                    var over_sb;
                                    try {
                                        over_sb = document.querySelector(".nodeSearchSuggestions :hover")
                                    } catch (e) {
                                        over_sb = 0
                                    }
                                    over_sb ? self !== document.activeElement && setTimeout(function() {
                                        self.focus()
                                    }, 20) : (self.last_val = self.value, self.suggestionsContainer.style.display = "none", setTimeout(function() {
                                        self.suggestionsContainer.style.display = "none"
                                    }, 350))
                                }, NodeSearch.addEvent(self, "blur", self.blurHandler);
                                var suggest = function(data) {
                                    var val = self.value;
                                    if (self.cache[val] = data, data.length && val.length >= _this2.nodeSearchConfig.minChars) {
                                        for (var s = "", _i = 0; _i < data.length; _i++) s += _this2.nodeSearchConfig.renderItem(data[_i], val);
                                        self.suggestionsContainer.innerHTML = s, self.updateSuggestionsContainer(0)
                                    } else self.suggestionsContainer.style.display = "none"
                                };
                                self.keydownHandler = function(e) {
                                    var key = window.event ? e.keyCode : e.which;
                                    if ((40 == key || 38 == key) && self.suggestionsContainer.innerHTML) {
                                        var next, sel = self.suggestionsContainer.querySelector(".nodeSearchSuggestion.selected");
                                        return sel ? (next = 40 == key ? sel.nextSibling : sel.previousSibling) ? (sel.className = sel.className.replace("selected", ""), next.className += " selected") : (sel.className = sel.className.replace("selected", ""), self.value = self.last_val, next = 0) : (next = 40 == key ? self.suggestionsContainer.querySelector(".nodeSearchSuggestion") : self.suggestionsContainer.childNodes[self.suggestionsContainer.childNodes.length - 1]).className += " selected", self.updateSuggestionsContainer(0, next), !1
                                    }
                                    if (27 == key) self.value = self.last_val, self.suggestionsContainer.style.display = "none";
                                    else if (13 == key || 9 == key) {
                                        var _sel = self.suggestionsContainer.querySelector(".nodeSearchSuggestion.selected");
                                        _sel && "none" != self.suggestionsContainer.style.display && (_this2.nodeSearchConfig.onSelect(e, _sel.getAttribute("data-val"), _sel), setTimeout(function() {
                                            self.suggestionsContainer.style.display = "none"
                                        }, 20))
                                    }
                                }, NodeSearch.addEvent(self, "keydown", self.keydownHandler), self.keyupHandler = function(e) {
                                    var key = window.event ? e.keyCode : e.which;
                                    if (!key || (key < 35 || key > 40) && 13 != key && 27 != key) {
                                        var val = self.value;
                                        if (val.length >= _this2.nodeSearchConfig.minChars) {
                                            if (val != self.last_val) {
                                                if (self.last_val = val, clearTimeout(self.timer), _this2.nodeSearchConfig.cache) {
                                                    if (val in self.cache) return void suggest(self.cache[val]);
                                                    for (var _i2 = 1; _i2 < val.length - _this2.nodeSearchConfig.minChars; _i2++) {
                                                        var part = val.slice(0, val.length - _i2);
                                                        if (part in self.cache && !self.cache[part].length) return void suggest([])
                                                    }
                                                }
                                                self.timer = setTimeout(function() {
                                                    _this2.nodeSearchConfig.source(val, suggest), self.last_val = ""
                                                }, _this2.nodeSearchConfig.delay)
                                            }
                                        } else self.last_val = val, self.suggestionsContainer.style.display = "none"
                                    }
                                }, NodeSearch.addEvent(self, "keyup", self.keyupHandler), self.focusHandler = function(e) {
                                    self.last_val = "\n", self.keyupHandler(e)
                                }, _this2.nodeSearchConfig.minChars || NodeSearch.addEvent(self, "focus", self.focusHandler)
                            }, i = 0; i < this.autoCompleteContainer.length; i++) _loop(i)
                    }
                }]) && NodeSearch_defineProperties(Constructor.prototype, protoProps), staticProps && NodeSearch_defineProperties(Constructor, staticProps), NodeSearch
            }();

            function rendererService_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function rendererService_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var rendererService_RendererService = function() {
                function RendererService(TreeRef) {
                    var _this = this;
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, RendererService), rendererService_defineProperty(this, "TreeRef", void 0), rendererService_defineProperty(this, "props", void 0), rendererService_defineProperty(this, "nodeIndex", 0), rendererService_defineProperty(this, "treeWidth", void 0), rendererService_defineProperty(this, "treeHeight", void 0), rendererService_defineProperty(this, "viewerWidth", void 0), rendererService_defineProperty(this, "viewerHeight", void 0), rendererService_defineProperty(this, "zoomSliderScale", void 0), rendererService_defineProperty(this, "svgZoom", void 0), rendererService_defineProperty(this, "nodeSearchDiv", void 0), rendererService_defineProperty(this, "sliderDiv", void 0), rendererService_defineProperty(this, "slideActive", void 0), rendererService_defineProperty(this, "animActive", void 0), rendererService_defineProperty(this, "levelWidth", void 0), rendererService_defineProperty(this, "sparklineYScale", void 0), rendererService_defineProperty(this, "diagonal", void 0), rendererService_defineProperty(this, "hoverActive", void 0), rendererService_defineProperty(this, "tree", void 0), rendererService_defineProperty(this, "nodeSearchInstance", void 0), rendererService_defineProperty(this, "svg", void 0), rendererService_defineProperty(this, "treeDiv", void 0), rendererService_defineProperty(this, "toolDiv", void 0), rendererService_defineProperty(this, "isCanvasStyled", !1), rendererService_defineProperty(this, "getPath", function(d) {
                        var path = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [],
                            parent = d.parent;
                        return parent ? (path.push(parent.name), _this.getPath(parent, path)) : path
                    }), rendererService_defineProperty(this, "nodeToggle", function(d) {
                        return d3.event && d3.event.stopPropagation(), !d.linkNode || d.children || d._children ? (d.children ? (d._children = d.children, d.children = null) : (d.children = d._children, d._children = null), _this.renderValueDriverTree(d), _this.nodeCenter(d), !1) : (_this.showNode(d.linkNode), !1)
                    }), rendererService_defineProperty(this, "nodeCollapse", function(d) {
                        d.children && (d._children = d.children, d.children = null), d._children && d._children.forEach(_this.nodeCollapse)
                    }), rendererService_defineProperty(this, "nodeCollapseAll", function() {
                        jquery.each(_this.props.nodes, function(k, v) {
                            _this.nodeCollapse(v)
                        }), _this.nodeToggle(_this.props.root)
                    }), rendererService_defineProperty(this, "nodeClick", function(d) {
                        d3.event.stopPropagation(), _this.slideActive || _this.animActive || !d.locked && !_this.hoverActive || ("E" == _this.props.onClickDefault || "CUSTOM_DEFAULT" == _this.props.onClickDefault ? _this.TreeRef.detailPageService.renderDetail(d) : _this.props.onClickDefault, _this.props.selectedNode = {
                            name: d.name.substr(1),
                            title: d.title
                        }, _this.TreeRef.eventService.publish("selectedNode", _this.props.selectedNode), _this.TreeRef.fireEvent("onNodeClick"))
                    }), rendererService_defineProperty(this, "nodeHover", function(d) {
                        if (d3.event.stopPropagation(), !(_this.slideActive || _this.animActive || (_this.props.activeNode && _this.props.activeNode.name != d.name && (_this.hoverActive = null, _this.nodeHoverEnd()), d.locked || _this.hoverActive))) {
                            var simName = d.simName,
                                simNode = _this.props.nodes[simName],
                                manual = "M" == (_this.props.simMeth[simName] || simNode.sMeth),
                                slider = d3.select(d3.event.currentTarget).select(".slider");
                            !d.enableEnumList && slider.selectAll("circle, line").style("display", manual ? "none" : "block"), d.enableEnumList && slider.selectAll(".svg-dropdown").style("display", manual ? "none" : "block"), slider.selectAll(".d2VDTManual").style("display", manual ? "block" : "none"), slider.style("display", "block"), _this.props.activeNode = d, setTimeout(function() {
                                _this.hoverActive = !0
                            }, 100)
                        }
                    }), rendererService_defineProperty(this, "nodeHoverEnd", function() {
                        _this.slideActive || (_this.svg && _this.svg.selectAll(".slider").style("display", "none"), _this.hoverActive = null, _this.props.tooltip.style("visibility", "hidden").html(""))
                    }), rendererService_defineProperty(this, "showLevel", function(d) {
                        d.level < _this.props.root.level + _this.TreeRef.props.dispLevels - 1 && (d._children && (d.children = d._children, d._children = null), d.children && d.children.forEach(_this.showLevel))
                    }), rendererService_defineProperty(this, "zoom", function() {
                        var evt = d3.event,
                            t = evt.translate,
                            scale = evt.scale,
                            x = d3.max([d3.min([t[0], 0]), -d3.max([(_this.treeWidth + _this.props.margin.left + _this.props.margin.right) * scale - _this.viewerWidth, 0])]),
                            y = d3.max([d3.min([t[1], 0]), -d3.max([(_this.treeHeight + _this.props.margin.top + _this.props.margin.bottom) * scale - _this.viewerHeight, 0])]);
                        _this.zoomListener.translate([x, y]), _this.zoomSliderUpdate(), _this.svg.attr("transform", "translate(".concat([x, y], ")scale(").concat(evt.scale, ")"))
                    }), rendererService_defineProperty(this, "zoomListener", d3.behavior.zoom().scaleExtent([.1, 3]).on("zoom", this.zoom)), rendererService_defineProperty(this, "addSearchElement", function() {
                        var toolDiv = d3.select(_this.toolDiv);
                        if (toolDiv.select(".d2VDTSearch").remove(), _this.props.enableNodeSearch) {
                            _this.nodeSearchDiv = null;
                            var collapseDiv = document.getElementsByClassName("d2VDTZoom")[0];
                            if (collapseDiv) {
                                var searchDiv = document.createElement("div");
                                collapseDiv.parentNode.insertBefore(searchDiv, collapseDiv), _this.nodeSearchDiv = d3.select(searchDiv)
                            } else _this.nodeSearchDiv = toolDiv.append("div");
                            _this.nodeSearchDiv.attr("class", "d2VDTToolItem d2VDTSearch"), _this.nodeSearchDiv.append("span").attr("class", "searchInputIcon"), _this.nodeSearchDiv.append("input").attr("id", "nodeSearch").attr("type", "text").attr("class", "searchInputBox").attr("placeholder", "Search").attr("autocomplete", "off")
                        }
                    }), rendererService_defineProperty(this, "createSearchInstance", function() {
                        if (_this.nodeSearchInstance && (_this.nodeSearchInstance.destroy(), _this.nodeSearchInstance = null), _this.props.enableNodeSearch) {
                            var self = _this;
                            _this.nodeSearchInstance = new NodeSearch({
                                selector: document.getElementById("nodeSearch"),
                                minChars: 1,
                                container: _this.props.container[0],
                                menuClass: "searchResultsContainer",
                                position: "Table" === self.props.visualization ? "top" : "bottom",
                                source: function(term, suggest) {
                                    term = term.toLowerCase();
                                    for (var choices = self.props.derivedTreeConfig, matches = [], i = 0; i < choices.length; i++)
                                        if ("H" !== choices[i].style && (~choices[i].title.toLowerCase().indexOf(term) || ~choices[i].name.toLowerCase().indexOf(term))) {
                                            var parentNode = [],
                                                currentNode = choices[i];
                                            RendererService.findParentNodes(currentNode, parentNode);
                                            var nodeDetail = "".concat(choices[i].tPrefix || "", " ").concat(choices[i].title);
                                            matches.push({
                                                title: nodeDetail,
                                                name: choices[i].name,
                                                path: parentNode
                                            })
                                        } suggest(matches)
                                },
                                onSelect: function(e, term, item) {
                                    self.searchFocusNode(term), document.getElementById("nodeSearch").value = ""
                                }
                            })
                        }
                    }), rendererService_defineProperty(this, "updateToolBar", function() {
                        var zoomWidth = _this.props.zoomSlider.w,
                            zoomHeight = _this.props.zoomSlider.h,
                            toolDiv = d3.select(_this.toolDiv);
                        toolDiv.selectAll("*").remove(), _this.addSearchElement(), _this.createSearchInstance(), _this.zoomSliderScale = d3.scale.linear().domain(_this.zoomListener.scaleExtent()).range([zoomHeight / 2, zoomWidth - zoomHeight / 2]).clamp(!0), _this.sliderDiv = null, _this.sliderDiv = toolDiv.append("div").attr("class", "d2VDTToolItem d2VDTZoom"), _this.svgZoom = _this.sliderDiv.append("div").style("padding", "0").append("svg").attr("width", zoomWidth).attr("height", zoomHeight).append("g"), _this.svgZoom.append("line").attr("x1", zoomHeight / 2).attr("y1", zoomHeight / 2).attr("x2", zoomWidth - zoomHeight / 2).attr("y2", zoomHeight / 2).attr("stroke-width", "1px"), _this.svgZoom.append("circle").attr("r", 6).attr("cy", zoomHeight / 2).attr("class", "d2VDTSim handle").attr("fill", "#cccccc"), _this.svgZoom.append("circle").attr("r", zoomHeight / 2).attr("cy", zoomHeight / 2).style("fill", "transparent").style("stroke", "transparent").attr("class", "handle").call(_this.getZoomDrag()), toolDiv.append("div").on("click", _this.nodeCollapseAll).attr("class", "d2VDTToolItem d2VDTCollapseNode").append("span").text("Collapse"), _this.zoomSliderUpdate()
                    }), this.TreeRef = TreeRef, this.props = TreeRef.props, this.init()
                }
                var Constructor, protoProps, staticProps;
                return Constructor = RendererService, staticProps = [{
                    key: "findParentNodes",
                    value: function(currentNode, parentNodes) {
                        if (!(currentNode.parent && parentNodes.length < 2)) return !1;
                        var nodeDetail = "".concat(currentNode.parent.tPrefix || "", " ").concat(currentNode.parent.title);
                        parentNodes.unshift(nodeDetail), currentNode = currentNode.parent, this.findParentNodes(currentNode, parentNodes)
                    }
                }], (protoProps = [{
                    key: "init",
                    value: function() {
                        this.treeDiv = document.createElement("div"), jquery(this.treeDiv).addClass("d2VDTCtr").appendTo(this.props.container), this.toolDiv = document.createElement("DIV"), jquery(this.toolDiv).addClass("d2VDTToolCtr").appendTo(this.props.container)
                    }
                }, {
                    key: "clearCanvas",
                    value: function() {
                        this.svg && (d3.select(this.treeDiv).select("svg").remove(), this.svg = null, this.TreeRef.simulationService.simTooltip = null, this.TreeRef.simulationService.simDiv = null), this.toolDiv && d3.select(this.toolDiv).selectAll("*").remove()
                    }
                }, {
                    key: "buildValueDriverTree",
                    value: function() {
                        var _this2 = this;
                        setTimeout(function() {
                            if (_this2.props.root && _this2.props.activeTopNode === _this2.props.root.name.substr(1)) {
                                if ("Table" === _this2.props.visualization) return _this2.clearCanvas(), jquery(_this2.treeDiv).hide(), jquery(_this2.toolDiv).hide(), _this2.TreeRef.tableService.animateTable(), void _this2.TreeRef.tableService.renderTable();
                                if (!_this2.svg) return jquery(_this2.treeDiv).show(), jquery(_this2.toolDiv).show(), void _this2.updateValueDriverTree();
                                _this2.svg.selectAll("*").remove(), _this2.renderValueDriverTree(_this2.props.root)
                            } else _this2.updateValueDriverTree()
                        }, 1)
                    }
                }, {
                    key: "updateValueDriverTree",
                    value: function() {
                        var width = this.viewerWidth = this.props.container.innerWidth(),
                            height = this.viewerHeight = this.props.container.innerHeight();
                        if (this.props.activeTopNode = this.props.activeTopNode || this.props.treeData.name.substr(1), !this.props.root || this.props.activeTopNode != this.props.root.name.substr(1)) {
                            this.props.activeTopNode && (this.props.root = this.props.nodes["N".concat(this.props.activeTopNode)]), this.props.root || (this.props.root = this.props.treeData), this.props.root.x0 = height / 2, this.props.root.y0 = this.props.nodeWidth, this.nodeCollapse(this.props.root), this.showLevel(this.props.root);
                            var maxLabelLength = 0;
                            ! function visit(parent, visitFn, childrenFn) {
                                if (parent) {
                                    visitFn(parent);
                                    var children = childrenFn(parent);
                                    if (children)
                                        for (var count = children.length, i = 0; i < count; i++) visit(children[i], visitFn, childrenFn)
                                }
                            }(this.props.root, function(_ref) {
                                var title = _ref.title;
                                maxLabelLength = Math.max(title.length, maxLabelLength)
                            }, function(_ref2) {
                                var children = _ref2.children;
                                return children && children.length > 0 ? children : null
                            })
                        }
                        if ("Table" === this.props.visualization) return this.svg && this.svg.html(""), jquery(this.treeDiv).hide(), jquery(this.toolDiv).hide(), void this.TreeRef.tableService.renderTable();
                        this.TreeRef.tableService.destroy(), jquery(this.toolDiv).show(), jquery(this.treeDiv).show(), this.tree = d3.layout.tree().size([height, width]), this.svg && (d3.select(this.treeDiv).select("svg").remove(), this.svg = null), this.zoomListener.scale(this.props.zoom / 100), this.svg = d3.select(this.treeDiv).append("svg").attr("width", width).attr("height", height).call(this.zoomListener).on("mouseover", this.nodeHoverEnd).append("g").attr("transform", "translate(".concat(0, ",", 0, ")scale(", this.zoomListener.scale(), ")")), this.updateToolBar(), this.renderValueDriverTree(this.props.root), this.checkWarnings()
                    }
                }, {
                    key: "renderValueDriverTree",
                    value: function(source) {
                        var _this3 = this,
                            container = this.props.container;
                        if (!1 !== container.is(":visible"))
                            if (this.viewerHeight === container.innerHeight() && this.viewerWidth === container.innerWidth()) {
                                this.animActive = !0, setTimeout(function() {
                                    _this3.animActive = !1
                                }, this.props.duration), this.TreeRef.simulationService.simTooltip && this.TreeRef.simulationService.simTooltip.style("display", "none");
                                var nodeWidth = this.props.nodeWidth,
                                    nodeHeight = this.props.nodeHeight + ("M" == this.props.nodeStyle ? -18 : "F" == this.props.nodeStyle ? 12 : 0),
                                    detailLabelX = this.props.nodeTrend ? -nodeWidth / 2 - 10 : 10 - nodeWidth,
                                    detailPctX = this.props.nodeTrend ? detailLabelX + 65 : -65,
                                    nodeVarY = -nodeHeight / 2 + 35 + ("F" == this.props.nodeStyle ? 10 : 0),
                                    nodeSecValY = nodeHeight / 2 - 17,
                                    nodeSecVarY = nodeSecValY + 12,
                                    nodeTrendY = nodeSecVarY,
                                    nodeCornerRad = Math.max(this.props.nodeCornerRad, 1),
                                    nodeCollapseRad = Math.max(this.props.nodeCollapseRad, 5),
                                    nodeStatusBarWidth = Math.max(this.props.nodeStatusBarWidth, Math.max(this.props.nodeCornerRad, 1) + 1),
                                    periodWidth = (this.props.nodeSecVal ? this.props.nodeWidth / 2 - 20 : this.props.nodeWidth) / this.props.periods,
                                    labelType = this.props.nodeTrend ? "short" : "long",
                                    sizes = {
                                        "{C}": nodeCornerRad,
                                        "{N}": nodeCollapseRad,
                                        "{W}": nodeWidth,
                                        "{W1}": nodeWidth - 2 * nodeCornerRad,
                                        "{H}": nodeHeight - 2 * nodeCornerRad,
                                        "{H1}": nodeHeight / 2,
                                        "{H2}": nodeHeight / 2 - nodeCornerRad - nodeCollapseRad,
                                        "{H3}": ("S" == this.props.nodeStyle ? 26 : "F" == this.props.nodeStyle ? 28 : 22) - nodeCornerRad,
                                        "{B}": nodeWidth - nodeStatusBarWidth,
                                        "{BW}": nodeStatusBarWidth - nodeCornerRad
                                    },
                                    pathBg = "m 0 {N}   v {H2}   c 0 {C}, -{C} {C}, -{C} {C}   h -{W1}   c -{C} 0, -{C} -{C}, -{C} -{C}   v -{H}   c 0 -{C}, {C} -{C}, {C} -{C}   h {W1}   c {C} 0, {C} {C}, {C} {C}   v {H2}",
                                    pathBgChildren = "".concat(pathBg, "c {N} 0  {N} {N}  {N} {N}  c 0 {N}  -{N} {N}  -{N} {N} Z"),
                                    pathStatusBar = "m -{B} {H1}   h -{BW}   c -{C} 0, -{C} -{C}, -{C} -{C}   v -{H}   c 0 -{C}, {C} -{C}, {C} -{C}   h {BW}",
                                    pathDerived = "m -{W} 0 m -5 -5 l 5 5 l -5 5",
                                    pathSimBg = "m 0 {N} m 0 {H2}  c 0 {C}, -{C} {C}, -{C} {C}   h -{W1}   c -{C} 0, -{C} -{C}, -{C} -{C}   v -{H3} h {W} Z";
                                pathBg = "".concat(pathBg, "Z"), pathSimBg = pathSimBg.replace(/{\w+}/g, function(all) {
                                    return sizes[all] || all
                                }), pathBg = pathBg.replace(/{\w+}/g, function(all) {
                                    return sizes[all] || all
                                }), pathBgChildren = pathBgChildren.replace(/{\w+}/g, function(all) {
                                    return sizes[all] || all
                                }), pathStatusBar = pathStatusBar.replace(/{\w+}/g, function(all) {
                                    return sizes[all] || all
                                }), pathDerived = pathDerived.replace(/{\w+}/g, function(all) {
                                    return sizes[all] || all
                                }), this.levelWidth = [1];
                                ! function childCount(level, _ref3) {
                                    var children = _ref3.children;
                                    children && children.length > 0 && (_this3.levelWidth.length <= level + 1 && _this3.levelWidth.push(0), _this3.levelWidth[level + 1] += children.length, children.forEach(function(d) {
                                        childCount(level + 1, d)
                                    }))
                                }(0, this.props.root), this.treeHeight = d3.max(this.levelWidth) * nodeHeight + 10 + d3.max([this.levelWidth.length - 1, 0]) * (2.7 * nodeHeight), this.treeWidth = this.levelWidth.length * (nodeWidth + 50) + this.props.simTooltipWidth, this.zoomListener.scaleExtent([d3.min([this.viewerWidth / this.treeWidth, this.viewerHeight / this.treeHeight, 1]), 3]), this.zoomSliderUpdate(), this.tree = this.tree.size([this.treeHeight, this.treeWidth]);
                                var nodes = this.tree.nodes(this.props.root).reverse(),
                                    links = this.tree.links(nodes);
                                nodes.forEach(function(d) {
                                    d.y = nodeWidth + d.depth * (nodeWidth + 50) + _this3.props.margin.left, d.x = d.x + _this3.props.margin.top
                                }), this.svg.append("style").text(this.getSvgCSS());
                                var node = this.svg.selectAll("g.node").data(nodes, function(d) {
                                        return d.id || (d.id = ++_this3.nodeIndex)
                                    }),
                                    nodeEnter = node.enter().append("g").attr("class", function(_ref4) {
                                        var name = _ref4.name,
                                            style = _ref4.style,
                                            _isDynamic = _ref4._isDynamic;
                                        return "node d2VDTStatus".concat((_this3.props.nodes[name][_this3.props.valueDisp.primary.key] || {})["I" === _this3.props.nodeStatus ? "simChangeStatus" : "status"]).concat("D" == style ? " d2VDTDerived" : "").concat(_isDynamic ? " d2VDTDynamic" : "")
                                    }).attr("transform", function() {
                                        return "translate(".concat(source.y0 + nodeWidth, ",").concat(source.x0, ")")
                                    }).attr("id", function(_ref5) {
                                        return _ref5.name
                                    }).on("click", this.nodeClick).on("dblclick", function() {
                                        console.log("contextmenu"), d3.event.stopPropagation()
                                    }).on("mouseover", this.nodeHover);
                                nodeEnter.append("path").attr("d", function(_ref6) {
                                    var children = _ref6.children,
                                        _children = _ref6._children,
                                        linkNode = _ref6.linkNode;
                                    return children || _children || linkNode ? pathBgChildren : pathBg
                                }).attr("class", "d2VDTFocus"), nodeEnter.append("path").attr("d", function(_ref7) {
                                    var children = _ref7.children,
                                        _children = _ref7._children,
                                        linkNode = _ref7.linkNode;
                                    return children || _children || linkNode ? pathBgChildren : pathBg
                                }).attr("class", "d2VDTBackground"), nodeEnter.append("path").attr("d", function(_ref8) {
                                    return "D" == _ref8.style ? pathDerived : ""
                                }).attr("class", "d2VDTOperator"), this.renderVarianceTexts([nodeEnter], detailLabelX, detailPctX, -10, nodeVarY, nodeSecValY, nodeSecVarY, labelType), this.renderSimulationVariation([nodeEnter], nodeWidth, nodeHeight), this.renderSparkline([nodeEnter], nodeWidth, nodeTrendY, periodWidth), this.renderOperator([nodeEnter], nodeWidth), this.renderToggle([nodeEnter], nodeHeight), this.renderTitle([nodeEnter], nodeWidth, nodeHeight), this.renderPrimaryValue([nodeEnter], nodeHeight), this.renderSlider([nodeEnter], nodeWidth, nodeHeight, pathSimBg), "H" !== this.props.nodeStatus && nodeEnter.append("path").attr("d", pathStatusBar).attr("class", "d2VDTStatus").style("stroke", "none");
                                var nodeUpdate = node.transition().duration(this.props.duration).attr("transform", function(_ref9) {
                                    var y = _ref9.y,
                                        x = _ref9.x;
                                    return "translate(".concat(y, ",").concat(x, ")")
                                });
                                nodeUpdate.selectAll("*:not(.d2VDTFocus):not(.em-drag-control-handle-ghost)").style("fill-opacity", 1).style("stroke-opacity", 1), nodeUpdate.select(".d2VDTToggle").attr("d", function(_ref10) {
                                    var children = _ref10.children,
                                        _children = _ref10._children;
                                    return children ? "m 2 -4 l -3 4 l 3 4" : _children ? "m -1 -4 l 3 4 l -3 4" : ""
                                }), nodeUpdate.selectAll(".d2VDTChildCount").style("display", function(_ref11) {
                                    return _ref11._children ? "block" : "none"
                                }), node.exit().transition().duration(this.props.duration).attr("transform", function() {
                                    return "translate(".concat(source.y + nodeWidth, ",").concat(source.x, ")")
                                }).remove().selectAll("*").style("fill-opacity", 1e-6).style("stroke-opacity", 1e-6), this.diagonal = d3.svg.diagonal().projection(function(_ref12) {
                                    return [_ref12.y, _ref12.x]
                                });
                                var link = this.svg.selectAll("path.link").data(links, function(_ref13) {
                                    return _ref13.target.id
                                });
                                link.enter().insert("path", "g").attr("class", function(_ref14) {
                                    var target = _ref14.target;
                                    return "link".concat("INCREASE" == target.trend.toUpperCase() ? " d2VDTIncrease" : "".concat("D" == target.style ? " d2VDTDerived" : ""))
                                }).attr("d", function() {
                                    var o = {
                                        x: source.x0 || source.x,
                                        y: source.y0 || source.y
                                    };
                                    return _this3.diagonal({
                                        source: o,
                                        target: o
                                    })
                                }).style("stroke-dasharray", function(_ref15) {
                                    var target = _ref15.target;
                                    return "".concat(nodeCollapseRad, " ").concat(nodeCollapseRad).concat("D" == target.style ? "" : " 10000")
                                }).style("stroke-dashoffset", nodeCollapseRad), link.transition().duration(this.props.duration).attr("d", function(d) {
                                    return _this3.diagonal({
                                        source: {
                                            x: d.source.x,
                                            y: d.source.y
                                        },
                                        target: {
                                            x: d.target.x,
                                            y: d.target.y - nodeWidth - 12
                                        }
                                    })
                                }), link.exit().transition().duration(this.props.duration).attr("d", function() {
                                    var o = {
                                        x: source.x,
                                        y: source.y
                                    };
                                    return _this3.diagonal({
                                        source: o,
                                        target: o
                                    })
                                }).remove(), nodes.forEach(function(d) {
                                    d.x0 = d.x, d.y0 = d.y
                                }), this.TreeRef.simulationService.addSimDetails(), setTimeout(function() {
                                    _this3.TreeRef.eventService.publish("treeRendered", null)
                                }, this.props.duration)
                            } else this.updateValueDriverTree()
                    }
                }, {
                    key: "renderVarianceTexts",
                    value: function(treeNodes, detailLabelX, detailPctX, detailValX, nodeVarY, nodeSecValY, nodeSecVarY, labelType) {
                        var _this4 = this;
                        treeNodes.forEach(function(treeNode) {
                            _this4.props.nodeVar && _this4.props.withComparison && (treeNode.append("text").attr("x", detailLabelX).attr("dy", nodeVarY).attr("class", "d2VDTInfo varLabel").style("display", function(_ref16) {
                                var name = _ref16.name;
                                return _this4.props.nodes[name][_this4.props.valueDisp.primary.key].varAbs ? "inherit" : "none"
                            }).text(function() {
                                return "".concat(_this4.props.valueDisp.primary[labelType], " Var:")
                            }), treeNode.append("text").attr("x", detailPctX).attr("dy", nodeVarY).attr("class", "d2VDTInfo varPct").attr("text-anchor", "end").style("display", function(_ref17) {
                                var name = _ref17.name;
                                return _this4.props.nodes[name][_this4.props.valueDisp.primary.key].varAbs ? "inherit" : "none"
                            }).text(function(_ref18) {
                                var name = _ref18.name,
                                    v = _this4.props.nodes[name][_this4.props.valueDisp.primary.key];
                                return v.varAbs ? core.a.formatPct(v.varPct, _this4.props.negativeDisplay, _this4.props.thousandSeparator, _this4.props.decimalSeparator) : ""
                            }), treeNode.append("text").attr("x", detailValX).attr("dy", nodeVarY).attr("class", "d2VDTInfo varVal").attr("text-anchor", "end").style("display", function(_ref19) {
                                var name = _ref19.name;
                                return _this4.props.nodes[name][_this4.props.valueDisp.primary.key].varAbs ? "inherit" : "none"
                            }).text(function(d) {
                                var v = _this4.props.nodes[d.name][_this4.props.valueDisp.primary.key];
                                return v.varAbs ? core.a.formatVal(v.varAbs, d, _this4.props.scales[d.scale], "", "", _this4.props.negativeDisplay, _this4.props.zeroDisplay, _this4.props.thousandSeparator, _this4.props.decimalSeparator) : ""
                            })), _this4.props.nodeSecVal && _this4.props.periods > 1 && "M" !== _this4.props.nodeStyle && (treeNode.append("text").attr("x", detailLabelX).attr("dy", nodeSecValY).attr("class", "d2VDTInfo secLabel").style("display", function(_ref20) {
                                var name = _ref20.name;
                                return _this4.props.nodes[name][_this4.props.valueDisp.secondary.key].act ? "inherit" : "none"
                            }).text(function() {
                                return _this4.props.valueDisp.secondary[labelType]
                            }), treeNode.append("text").attr("x", detailValX).attr("dy", nodeSecValY).attr("class", "d2VDTInfo").attr("text-anchor", "end").style("display", function(_ref21) {
                                var name = _ref21.name;
                                return _this4.props.nodes[name][_this4.props.valueDisp.secondary.key].act ? "inherit" : "none"
                            }).text(function(d) {
                                var v = _this4.props.nodes[d.name][_this4.props.valueDisp.secondary.key];
                                return v.act ? core.a.formatVal(v.act, d, _this4.props.scales[d.scale], "", "", _this4.props.negativeDisplay, _this4.props.zeroDisplay, _this4.props.thousandSeparator, _this4.props.decimalSeparator) : ""
                            }), _this4.props.nodeVar && _this4.props.withComparison && (treeNode.append("text").attr("x", detailLabelX).attr("dy", nodeSecVarY).attr("class", "d2VDTInfo secVarLabel").style("display", function(_ref22) {
                                var name = _ref22.name;
                                return _this4.props.nodes[name][_this4.props.valueDisp.secondary.key].varAbs ? "inherit" : "none"
                            }).text(function() {
                                return "".concat(_this4.props.valueDisp.secondary[labelType], " Var:")
                            }), treeNode.append("text").attr("x", detailPctX).attr("dy", nodeSecVarY).attr("class", "d2VDTInfo").attr("text-anchor", "end").style("display", function(_ref23) {
                                var name = _ref23.name;
                                return _this4.props.nodes[name][_this4.props.valueDisp.secondary.key].varAbs ? "inherit" : "none"
                            }).text(function(_ref24) {
                                var name = _ref24.name,
                                    v = _this4.props.nodes[name][_this4.props.valueDisp.secondary.key];
                                return v.varAbs ? core.a.formatPct(v.varPct, _this4.props.negativeDisplay, _this4.props.thousandSeparator, _this4.props.decimalSeparator) : ""
                            }), treeNode.append("text").attr("x", detailValX).attr("dy", nodeSecVarY).attr("class", "d2VDTInfo").attr("text-anchor", "end").style("display", function(_ref25) {
                                var name = _ref25.name;
                                return _this4.props.nodes[name][_this4.props.valueDisp.secondary.key].varAbs ? "inherit" : "none"
                            }).text(function(d) {
                                var v = _this4.props.nodes[d.name][_this4.props.valueDisp.secondary.key];
                                return v.varAbs ? core.a.formatVal(v.varAbs, d, _this4.props.scales[d.scale], "", "", _this4.props.negativeDisplay, _this4.props.zeroDisplay, _this4.props.thousandSeparator, _this4.props.decimalSeparator) : ""
                            })))
                        })
                    }
                }, {
                    key: "renderSimulationVariation",
                    value: function(treeNodes, nodeWidth, nodeHeight) {
                        var _this5 = this;
                        treeNodes.forEach(function(treeNode) {
                            var simValText = treeNode.append("text").attr("x", -nodeWidth / 2 - 25).attr("text-anchor", "middle").attr("class", "d2VDTSim").style("display", function(_ref26) {
                                var simName = _ref26.simName,
                                    locked = _ref26.locked;
                                return _this5.props.simVar[simName] || !locked ? "inherit" : "none"
                            });
                            simValText.append("tspan").attr("dy", -nodeHeight / 2 + 11).attr("class", "d2VDTIcon").style("fill", function(_ref27) {
                                var simName = _ref27.simName;
                                return _this5.props.simVar[simName] ? "inherit" : "#CCCCCC"
                            }).text("î¸"), simValText.append("tspan").attr("class", "d2VDTSimPct").text(function(_ref28) {
                                var simName = _ref28.simName;
                                return (_this5.props.simDisp[simName] || {}).text || ""
                            }), treeNode.append("text").attr("x", 10 - nodeWidth).attr("dy", -nodeHeight / 2 + 11).attr("class", function(_ref29) {
                                var name = _ref29.name;
                                return "d2VDTChange ".concat(_this5.props.nodes[name][_this5.props.valueDisp.primary.key].simChangeText)
                            }).style("display", function(_ref30) {
                                var name = _ref30.name;
                                return 0 != _this5.props.nodes[name][_this5.props.valueDisp.primary.key].simChangeText ? "block" : "none"
                            }).text(function(_ref31) {
                                var name = _ref31.name;
                                if (_ref31.enableEnumList) return "";
                                var v = _this5.props.nodes[name][_this5.props.valueDisp.primary.key];
                                return "".concat(v.simChangePct * (v.simChangePct < 0 ? -1 : 1), "% ").concat(v.simChangeText)
                            })
                        })
                    }
                }, {
                    key: "renderSparkline",
                    value: function(treeNodes, nodeWidth, nodeTrendY, periodWidth) {
                        var _this6 = this;
                        if (this.props.nodeTrend && this.props.periods > 1 && "M" !== this.props.nodeStyle) {
                            var sparklineBase = d3.svg.line().interpolate("monotone").x(function(d, i) {
                                    return 10 - nodeWidth + (i + d3.max([_this6.props.PeriodColumn - 2, 0])) * periodWidth
                                }).y(function(d) {
                                    return nodeTrendY - _this6.sparklineYScale(d.base)
                                }),
                                sparklineAct = d3.svg.line().interpolate("monotone").x(function(d, i) {
                                    return 10 - nodeWidth + i * periodWidth
                                }).y(function(d) {
                                    return nodeTrendY - _this6.sparklineYScale(d.act)
                                });
                            treeNodes.forEach(function(treeNode) {
                                treeNode.append("svg:path").attr("class", "line").attr("stroke-dasharray", "2,2,2").attr("stroke-opacity", 1e-6).style("display", function(_ref32) {
                                    var name = _ref32.name,
                                        v = _this6.props.nodes[name].results[_this6.props.periods];
                                    return v.act != v.base ? "inherit" : "none"
                                }).attr("d", function(_ref33) {
                                    var name = _ref33.name,
                                        min = _this6.props.nodes[name].results[0].min,
                                        max = _this6.props.nodes[name].results[0].max;
                                    if (min < max) return _this6.sparklineYScale = d3.scale.linear().domain([min, max]).range([0, 20]), sparklineBase(_this6.props.nodes[name].results.slice(d3.max([_this6.props.PeriodColumn - 2, 0]), _this6.props.periods))
                                }), treeNode.append("svg:path").attr("class", "line").style("stroke", function(_ref34) {
                                    var name = _ref34.name,
                                        v = _this6.props.nodes[name].results[_this6.props.periods];
                                    return v.act != v.base ? _this6.props.colorSim : _this6.props.colorNodeSecondaryFont
                                }).attr("d", function(_ref35) {
                                    var name = _ref35.name,
                                        min = _this6.props.nodes[name].results[0].min,
                                        max = _this6.props.nodes[name].results[0].max;
                                    if (min < max) return _this6.sparklineYScale = d3.scale.linear().domain([min, max]).range([0, 20]), sparklineAct(_this6.props.nodes[name].results.slice(0, _this6.props.periods))
                                })
                            })
                        }
                    }
                }, {
                    key: "renderOperator",
                    value: function(treeNodes, nodeWidth) {
                        var _this7 = this;
                        treeNodes.forEach(function(treeNode) {
                            _this7.props.nodeOperand ? (treeNode.append("path").attr("d", function(_ref36) {
                                var parent = _ref36.parent,
                                    name = _ref36.name;
                                return parent ? "m ".concat(-nodeWidth, " 0 ").concat(parent.calcOps[name] ? " m -2 0 a -5 -5 0 1 0 -10 0 a -5 -5 0 1 0 10 0 h2" : "h-12") : ""
                            }).attr("class", function(_ref37) {
                                var trend = _ref37.trend;
                                return "d2VDTOperator".concat("INCREASE" == trend.toUpperCase() ? " d2VDTIncrease" : "")
                            }), treeNode.append("path").attr("d", function(_ref38) {
                                var parent = _ref38.parent,
                                    name = _ref38.name;
                                if (parent) return _this7.props.ops[parent.calcOps[name]] ? "m ".concat(-nodeWidth - 10, " 0 ").concat(_this7.props.ops[parent.calcOps[name]].d) : ""
                            }).attr("class", function(_ref39) {
                                var trend = _ref39.trend;
                                return "d2VDTOperator".concat("INCREASE" == trend.toUpperCase() ? " d2VDTIncrease" : "")
                            }).style("stroke-width", "1px")) : treeNode.append("path").attr("d", function(_ref40) {
                                var parent = _ref40.parent;
                                _ref40.name;
                                return parent ? "m ".concat(-nodeWidth, " 0 h-12") : ""
                            }).attr("class", function(_ref41) {
                                var trend = _ref41.trend;
                                return "d2VDTOperator".concat("INCREASE" == trend.toUpperCase() ? " d2VDTIncrease" : "")
                            })
                        })
                    }
                }, {
                    key: "renderToggle",
                    value: function(treeNodes, nodeHeight) {
                        var _this8 = this,
                            self = this;
                        treeNodes.forEach(function(treeNode) {
                            var nodeToggle = treeNode.append("g").attr("class", "d2VDTNodeToggle").on("click", self.nodeToggle).on("mouseover", function() {
                                d3.event.stopPropagation()
                            });
                            nodeToggle.append("text").attr("dy", 4.5).attr("dx", -4).attr("class", "d2VDTIcon").style("display", function(_ref42) {
                                var linkNode = _ref42.linkNode,
                                    children = _ref42.children,
                                    _children = _ref42._children;
                                return !linkNode || children || _children ? "none" : "block"
                            }).text("î"), _this8.TreeRef.props.dispChildCount && (nodeToggle.append("rect").attr("x", 4.5).attr("y", -32).attr("rx", 3).attr("ry", 3).attr("height", 18).attr("width", function(_ref43) {
                                return 16 + 4 * _ref43.childCount.toString().length
                            }).attr("class", "d2VDTChildCount").style("display", function(_ref44) {
                                return _ref44._children ? "block" : "none"
                            }).style("stroke", "#CCCCCC").style("stroke-width", 1).attr("fill", "#EAEAEA"), nodeToggle.append("text").attr("dy", -20).attr("dx", function(_ref45) {
                                return 13 - _ref45.childCount.toString().length
                            }).attr("class", "d2VDTChildCount").style("display", function(_ref46) {
                                return _ref46._children ? "block" : "none"
                            }).style("fill", "#A6A6A6").text(function(_ref47) {
                                return _ref47.childCount
                            })), nodeToggle.append("rect").attr("x", -30).attr("y", -nodeHeight / 2 + 1).attr("width", 60).attr("height", nodeHeight - 2).style("stroke", "none").style("fill", "transparent"), nodeToggle.append("path").attr("class", "d2VDTToggle")
                        })
                    }
                }, {
                    key: "renderTitle",
                    value: function(treeNodes, nodeWidth, nodeHeight) {
                        var _this9 = this;
                        treeNodes.forEach(function(treeNode) {
                            var TitleText = treeNode.append("text").attr("x", 10 - nodeWidth).style("fill-opacity", 1e-6);
                            TitleText.append("tspan").attr("dy", -nodeHeight / 2 + 23).text(function(_ref48) {
                                var title = _ref48.title;
                                return core.a.splitString(title, 14, 1)
                            }), TitleText.append("tspan").attr("dy", "+12px").attr("x", 10 - nodeWidth).text(function(_ref49) {
                                var title = _ref49.title;
                                return core.a.splitString(title, 14, 2)
                            }), "F" === _this9.props.nodeStyle && TitleText.append("tspan").attr("dy", "+12px").attr("x", 10 - nodeWidth).text(function(_ref50) {
                                var title = _ref50.title;
                                return core.a.splitString(title, 14, 3)
                            })
                        })
                    }
                }, {
                    key: "renderPrimaryValue",
                    value: function(treeNodes, nodeHeight) {
                        var _this10 = this;
                        treeNodes.forEach(function(treeNode) {
                            var negPrefix = "(0)" === _this10.props.negativeDisplay ? "(" : "-0" == _this10.props.negativeDisplay ? "-" : "",
                                ValueText = treeNode.append("text").attr("x", -10).attr("y", "F" == _this10.props.nodeStyle ? 10 : 0).attr("class", "d2VDTValue").attr("text-anchor", "end").style("fill-opacity", 1e-6);
                            ValueText.append("tspan").attr("dy", -nodeHeight / 2 + 19).attr("class", "d2VDTNeg").text(function(_ref51) {
                                var name = _ref51.name;
                                return Number(_this10.props.nodes[name][_this10.props.valueDisp.primary.key].act) < 0 ? negPrefix : ""
                            }), ValueText.append("tspan").attr("dy", function(_ref52) {
                                var name = _ref52.name;
                                return Number(_this10.props.nodes[name][_this10.props.valueDisp.primary.key].act) < 0 && negPrefix ? -5 : -nodeHeight / 2 + 14
                            }).attr("class", "d2VDTPrefix").text(function(_ref53) {
                                var name = _ref53.name,
                                    aMeth = _ref53.aMeth,
                                    prefix = _ref53.prefix;
                                return (Number(_this10.props.nodes[name][_this10.props.valueDisp.primary.key].act) && "A" == aMeth && "per" != _this10.props.primaryDisplayValue ? "Avg".concat(prefix ? " " : "") : "") + (prefix || "")
                            }), ValueText.append("tspan").attr("dy", function(_ref54) {
                                var prefix = _ref54.prefix,
                                    aMeth = _ref54.aMeth,
                                    name = _ref54.name;
                                return prefix || "A" == aMeth && "per" != _this10.props.primaryDisplayValue ? 6 : Number(_this10.props.nodes[name][_this10.props.valueDisp.primary.key].act) < 0 && negPrefix ? 1 : -nodeHeight / 2 + 20
                            }).attr("class", "d2VDTValue").text(function(d) {
                                return core.a.formatVal(_this10.props.nodes[d.name][_this10.props.valueDisp.primary.key].act, d, _this10.props.scales[d.scale], "", "", "", _this10.props.zeroDisplay, _this10.props.thousandSeparator, _this10.props.decimalSeparator)
                            }), ValueText.append("tspan").attr("dy", "0px").attr("class", "d2VDTSuffix").text(function(_ref55) {
                                var name = _ref55.name,
                                    scale = _ref55.scale,
                                    suffix = _ref55.suffix;
                                return Number(_this10.props.nodes[name][_this10.props.valueDisp.primary.key].act) ? scale ? _this10.props.scales[scale].suffix + suffix : suffix : ""
                            }), ValueText.append("tspan").attr("dy", function() {
                                return -2
                            }).attr("class", "d2VDTNeg").text(function(_ref56) {
                                var name = _ref56.name;
                                return Number(_this10.props.nodes[name][_this10.props.valueDisp.primary.key].act) < 0 ? "(0)" === _this10.props.negativeDisplay ? ")" : "0-" == _this10.props.negativeDisplay ? "-" : "" : ""
                            })
                        })
                    }
                }, {
                    key: "renderSimulationWidget",
                    value: function(treeNode, nodeWidth, nodeHeight, pathSimBg) {
                        var _this11 = this,
                            simNodeGroup = treeNode.append("g").attr("class", "slider").style("display", "none").on("click", function(d) {
                                var evt = d3.event;
                                evt.stopPropagation();
                                var simTooltip = _this11.TreeRef.simulationService.simTooltip,
                                    hideSimToolTip = _this11.TreeRef.simulationService.hideSimToolTip,
                                    isSimTooltipHidden = _this11.TreeRef.simulationService.isSimTooltipHidden;
                                switch (d3.select(evt.target).attr("class")) {
                                    case "d2VDTReset":
                                        simTooltip && hideSimToolTip(), _this11.TreeRef.simulationService.nodeReset(d.name);
                                        break;
                                    case "d2VDTshowSim":
                                        !simTooltip || isSimTooltipHidden() ? _this11.TreeRef.simulationService.showSimTooltip(d) : hideSimToolTip();
                                        break;
                                    case "d2VDTManual":
                                        simTooltip && hideSimToolTip(), _this11.TreeRef.simulationService.renderEditInputs([d.name.substr(1)])
                                }
                            });
                        simNodeGroup.append("path").attr("d", pathSimBg).attr("class", "d2VDTBackground"), simNodeGroup.append("text").attr("x", 15 - nodeWidth).attr("dy", nodeHeight / 2 - 10).attr("class", "d2VDTReset").text("î½").style("display", function(_ref57) {
                            var simName = _ref57.simName;
                            return 0 != _this11.props.simVar[simName] ? "inherit" : "none"
                        }), simNodeGroup.append("rect").attr("y", nodeHeight / 2 - 30).attr("class", "d2VDTReset").attr("height", 30).attr("x", -nodeWidth).attr("width", 30).style("fill", "transparent").style("display", function(_ref58) {
                            var simName = _ref58.simName;
                            return 0 != _this11.props.simVar[simName] ? "inherit" : "none"
                        }), simNodeGroup.append("text").attr("x", -25).attr("dy", nodeHeight / 2 - 10).attr("class", "d2VDTshowSim").text("î"), simNodeGroup.append("rect").attr("y", nodeHeight / 2 - 30).attr("class", "d2VDTshowSim").attr("height", 30).attr("x", -40).attr("width", 30).style("fill", "transparent");
                        var directInput = simNodeGroup.append("g").attr("class", "d2VDTManual").style("display", "none");
                        return directInput.append("text").attr("x", -nodeWidth / 2 - 25).attr("dy", nodeHeight / 2 - 10).attr("class", "d2VDTManual").text("î"), directInput.append("text").attr("x", -nodeWidth / 2 - 10).attr("dy", nodeHeight / 2 - 10).text("Edit"), directInput.append("rect").attr("y", nodeHeight / 2 - 30).attr("class", "d2VDTManual").attr("height", 30).attr("x", 50 - nodeWidth).attr("width", nodeWidth - 100).style("fill", "transparent"), simNodeGroup
                    }
                }, {
                    key: "renderSlider",
                    value: function(treeNodes, nodeWidth, nodeHeight, pathSimBg) {
                        var _this12 = this;
                        treeNodes.forEach(function(treeNode) {
                            var slider = _this12.renderSimulationWidget(treeNode, nodeWidth, nodeHeight, pathSimBg);
                            slider.append("line").attr("x1", 40 - nodeWidth).attr("y1", nodeHeight / 2 - 15).attr("x2", -40).attr("y2", nodeHeight / 2 - 15).attr("stroke-width", "1px").attr("stroke", _this12.props.colorNodeSecondaryFont);
                            var linkText = slider.append("text").attr("x", -20).attr("text-anchor", "end").attr("class", "d2VDTlinkNode").style("display", function(_ref59) {
                                var linkNode = _ref59.linkNode,
                                    lSimNode = _ref59.lSimNode;
                                return linkNode || lSimNode ? "block" : "none"
                            });
                            linkText.append("tspan").attr("dy", nodeHeight / 2 - 3).attr("class", "d2VDTIcon").text("î"), linkText.append("tspan").text(function(_ref60) {
                                return _ref60.linkNode ? " Linked node" : " Linked sim."
                            }), slider.append("line").attr("x1", -nodeWidth / 2).attr("y1", nodeHeight / 2 - 20).attr("x2", -nodeWidth / 2).attr("y2", nodeHeight / 2 - 10).attr("stroke-width", "1px").attr("stroke", _this12.props.colorNodeSecondaryFont), slider.append("circle").attr("r", 8).attr("cx", function(d) {
                                d.sliderScale = d3.scale.linear().domain([-100, 100]).range([40 - nodeWidth, -40]).clamp(!0);
                                var simName = d.simName;
                                return d.sliderScale(_this12.props.simVar[simName] ? "C" == _this12.props.simMeth[simName] ? 100 * (_this12.props.simVar[simName] / d.per.base - 1) : _this12.props.simVar[simName] : 0)
                            }).attr("cy", nodeHeight / 2 - 15).attr("class", "d2VDTSim handle"), slider.append("circle").attr("r", 20).attr("cx", function(d) {
                                var simName = d.simName;
                                return d.sliderScale(_this12.props.simVar[simName] ? "C" == _this12.props.simMeth[simName] ? 100 * (_this12.props.simVar[simName] / d.per.base - 1) : _this12.props.simVar[simName] : 0)
                            }).attr("cy", nodeHeight / 2 - 15).style("fill", "transparent").style("stroke", "transparent").attr("class", "handle").call(_this12.getSliderDrag())
                        })
                    }
                }, {
                    key: "getSliderDrag",
                    value: function() {
                        var self = this;
                        return d3.behavior.drag().origin(Object).on("dragstart", function() {
                            var evt = d3.event;
                            evt.sourceEvent.stopPropagation(), evt.sourceEvent.preventDefault()
                        }).on("drag", function(d) {
                            var evt = d3.event;
                            evt.sourceEvent.stopPropagation(), evt.sourceEvent.preventDefault(), self.slideActive = !0;
                            var simName = d.linkNode ? d.name : d.simName;
                            self.props.simMeth[simName] = self.props.simMeth[simName] || d.sMeth, self.props.simVar[simName] = self.props.simVar[simName] || ("C" == self.props.simMeth[simName] ? d.per.base : 0);
                            var pctMeth = "C" != self.props.simMeth[simName],
                                varPct = pctMeth ? self.props.simVar[simName] : (self.props.simVar[simName] / d.per.base - 1 || 0) * (d.per.base < 0 ? -100 : 100);
                            varPct = d.sliderScale.invert(d.sliderScale(varPct) + evt.dx), self.props.simVar[simName] = pctMeth ? varPct.toFixed(2) : (d.per.base + d.per.base * varPct / (d.per.base < 0 ? -100 : 100)).toFixed(d.dec);
                            var sim = core.a.calculateNode(d, self.TreeRef),
                                v = sim[self.props.valDisp[self.props.valueDisp.primary.key]],
                                node = d3.select(this.parentNode.parentNode),
                                nodeHeight = self.props.nodeHeight + ("M" == self.props.nodeStyle ? -18 : "F" == self.props.nodeStyle ? 12 : 0),
                                negDisp = self.props.negativeDisplay,
                                zeroDisp = self.props.zeroDisplay,
                                thouSep = self.props.thousandSeparator,
                                decSep = self.props.decimalSeparator;
                            node.selectAll(".handle").attr("opacity", .8).attr("cx", d.sliderScale(varPct)).attr("cy", nodeHeight / 2 - 15).style("display", "inherit"), d3.select(this).style("fill", "black").attr("opacity", .1), node.select(".d2VDTSim").style("display", "inherit"), node.select(".d2VDTSimPct").text(pctMeth ? core.a.formatPct(self.props.simVar[simName], negDisp, thouSep, decSep) + ("G" == self.props.simMeth[simName] ? "â" : "") : core.a.formatVal(self.props.simVar[simName], d, self.props.scales[d.scale], "", "", negDisp, zeroDisp, thouSep, decSep)), node.select(".d2VDTChange").attr("class", "d2VDTChange ".concat(v.simChangeText)).style("display", 0 != v.simChangeText ? "block" : "none").text("".concat(v.simChangePct * (v.simChangePct < 0 ? -1 : 1), "% ").concat(v.simChangeText)), node.attr("class", "node d2VDTStatus".concat(v["I" === self.props.nodeStatus ? "simChangeStatus" : "status"])), node.select(".d2VDTValue .d2VDTValue").text(core.a.formatVal(v.act, d, self.props.scales[d.scale], "", "", negDisp, zeroDisp, thouSep, decSep)), node.select(".d2VDTDetail").style("display", v.varAbs ? "inherit" : "none"), node.select(".varVal").text(v.varAbs ? core.a.formatVal(v.varAbs, d, self.props.scales[d.scale], "", "", negDisp, zeroDisp, thouSep, decSep) : ""), node.select(".varPct").text(v.varAbs ? core.a.formatPct(v.varPct, negDisp, thouSep, decSep) : ""), self.TreeRef.simulationService.showSimTooltip(d, this.svg, sim)
                        }).on("dragend", function(d) {
                            var evt = d3.event;
                            evt.sourceEvent.stopPropagation(), evt.sourceEvent.preventDefault(), d.linkNode && (self.props.simVar[d.simName] = self.props.simVar[d.name], self.props.simMeth[d.simName] = self.props.simMeth[d.name], delete self.props.simVar[d.name], delete self.props.simMeth[d.name]), self.slideActive = null, d3.select(this).attr("opacity", 0), self.nodeHoverEnd(), self.props.selectedNode = {
                                name: d.name,
                                title: d.title
                            }, self.TreeRef.simulationService.syncSimulation(), self.TreeRef.simulationService.simTooltip.remove()
                        })
                    }
                }, {
                    key: "showNode",
                    value: function(name) {
                        var _this13 = this,
                            evt = d3.event;
                        evt && evt.stopPropagation && evt.stopPropagation();
                        var path = this.getPath(this.props.nodes[name]),
                            delay = 100;
                        if (!path.includes(this.props.root.name) && name != this.props.root.name) {
                            var topNodePath = this.getPath(this.props.nodes["N".concat(this.props.activeTopNode)]);
                            jquery.each(path, function(i, v) {
                                if (topNodePath.includes(v)) return _this13.props.root = _this13.props.nodes[v], _this13.props.activeTopNode = v.substr(1), _this13.TreeRef.firePropertiesChanged(["activeTopNode"]), delay = 1e3, !1
                            })
                        }
                        this.props.focusNode && (this.props.focusNode = "");
                        var focusNode = null;
                        if (function expandPath(node) {
                                path.includes(node.name) ? (node._children && (node.children = node._children, node._children = null), node.children && node.children.forEach(function(d) {
                                    expandPath(d)
                                })) : node.name == name && (focusNode = node)
                            }(this.props.root), "Table" === this.props.visualization) return this.TreeRef.tableService.renderTable(), void this.TreeRef.tableService.highlightNode(name);
                        this.renderValueDriverTree(this.props.root), this.nodeCenter(focusNode), setTimeout(function() {
                            _this13.svg.select("#".concat(name)).selectAll(".d2VDTFocus").transition().duration(750).ease("quad").style("stroke-opacity", 1).transition().delay(4e3).duration(750).ease("quad").style("stroke-opacity", 0)
                        }, delay)
                    }
                }, {
                    key: "nodeCenter",
                    value: function(d) {
                        var x0 = d.x0,
                            y0 = d.y0,
                            scale = this.zoomListener.scale(),
                            x = -y0 * scale + this.viewerWidth / 2,
                            y = -x0 * scale + this.viewerHeight / 2;
                        x = d3.max([d3.min([x, 0]), -d3.max([this.treeWidth * scale - this.viewerWidth - this.props.simTooltipWidth, 0])]), y = d3.max([d3.min([y, 0]), -d3.max([this.treeHeight * scale - this.viewerHeight, 0])]), d3.select("g").transition().duration(this.props.duration).attr("transform", "translate(".concat(x, ",").concat(y, ")scale(").concat(scale, ")")), this.zoomListener.scale(scale), this.zoomListener.translate([x, y])
                    }
                }, {
                    key: "updateZoom",
                    value: function() {
                        this.zoomListener = d3.behavior.zoom().scaleExtent([.1, 3]).on("zoom", this.zoom)
                    }
                }, {
                    key: "zoomSliderUpdate",
                    value: function() {
                        this.zoomSliderScale.domain(this.zoomListener.scaleExtent()), this.svgZoom.selectAll(".handle").attr("cx", this.zoomSliderScale(this.zoomListener.scale()))
                    }
                }, {
                    key: "searchFocusNode",
                    value: function(nodeName) {
                        nodeName && (this.props.focusNode = nodeName, this.TreeRef.firePropertiesChanged(["focusNode"]))
                    }
                }, {
                    key: "getZoomDrag",
                    value: function() {
                        var self = this;
                        return d3.behavior.drag().origin(Object).on("dragstart", function() {
                            var evt = d3.event;
                            evt.sourceEvent.stopPropagation(), evt.sourceEvent.preventDefault()
                        }).on("drag", function() {
                            var evt = d3.event;
                            evt.sourceEvent.stopPropagation(), evt.sourceEvent.preventDefault(), self.slideActive = !0, self.zoomListener.scale(self.zoomSliderScale.invert(self.zoomSliderScale(self.zoomListener.scale()) + evt.dx).toFixed(2)), self.svgZoom.selectAll(".handle").attr("opacity", .8).style("display", "inherit"), d3.select(this).style("fill", "black").attr("opacity", .1), self.zoomListener.event(self.svg)
                        }).on("dragend", function() {
                            var evt = d3.event;
                            evt.sourceEvent.stopPropagation(), evt.sourceEvent.preventDefault(), self.slideActive = null, d3.select(this).attr("opacity", 0)
                        })
                    }
                }, {
                    key: "processCanvasStyle",
                    value: function() {
                        this.isCanvasStyled = !0;
                        var style = ["background-color:".concat(this.props.colorCanvasBase, ";")].join("");
                        jquery(this.treeDiv).attr("style", style)
                    }
                }, {
                    key: "getSvgCSS",
                    value: function() {
                        return [".node {", "\tcursor: pointer;", "\tfill-opacity: 0;", "\tstroke-opacity:0;", "    fill:".concat(this.props.colorNodePrimaryFont, ";"), "}\t", ".node .d2VDTBackground{", "    fill:".concat(this.props.colorNodeBg, ";"), "    fill:".concat(core.a.hexToRgbA(this.props.colorNodeBg, this.props.opacityNodeBg), ";"), "    stroke:".concat(this.props.colorNodeBorder, ";"), "    stroke:".concat(core.a.hexToRgbA(this.props.colorNodeBorder, this.props.opacityNodeBorder), ";"), "\tstroke-width: .5px;", "}", ".node.d2VDTDerived .d2VDTBackground{", "    fill:".concat(this.props.colorNodeBgDerived, ";"), "    fill:".concat(core.a.hexToRgbA(this.props.colorNodeBgDerived, this.props.opacityNodeBgDerived), ";"), "\tstroke:none;", "}", ".node .d2VDTFocus{", "    stroke:".concat(this.props.colorNodeBorderFocus, ";"), "    stroke:".concat(core.a.hexToRgbA(this.props.colorNodeBorderFocus, "0.7"), ";"), "\tstroke-width:3px;", "}", ".node .d2VDTToggle{", "\tfill: none;", "    stroke:".concat(this.props.colorNodeSecondaryFont, ";"), "}", ".node .d2VDTHidden{", "\tfill: none;", "\tstroke: none;", "}", ".node .d2VDTIcon{", "\t\tfont-family: SAP-icons;", "\t\tfont-size:10px;", "}", ".node .d2VDTlinkNode{", "\t\tfont-size:10px;", "        fill:".concat(this.props.colorNodeSecondaryFont, ";"), "}", ".node .d2VDTSim{", "    fill:".concat(this.props.colorSim, ";"), "}", ".node .d2VDTSimPct{", "\tfont-size:10px;", "}", ".node .d2VDTChange{", "\tfont-size:10px;", "    fill:".concat(this.props.colorSim, ";"), "}", ".node .d2VDTChange.better{", "\tfill:green;\t", "}", ".node .d2VDTChange.worse{", "\tfill:red;\t", "}", ".node text {", "\tfont-size: 12px;", "\tfont-family: HelveticaNeue, Arial, Helvetica, sans-serif;", "}", ".node .d2VDTReset, .node .d2VDTshowSim, .node .d2VDTManual {", "\tfont-size:12px;", "    fill:".concat(this.props.colorSim, ";"), "\tfont-family: SAP-icons; ", "}", ".node .d2VDTValue {", "\tline-height:25px;", "\tfont-size: 21px;", "\theight:25px;", "\tfont-family: HelveticaNeue-Light, Arial, Helvetica, sans-serif;", "}", ".node .d2VDTNeg {", "\tline-height:20px;", "\tfont-size: 20px;", "\theight:20px;", "}", ".node .d2VDTInfo {", "\tfont-family: AvenirNextCondensed-Regular, Arial Narrow, Arial, Helvetica, sans-serif;   ", "\tfont-weight:100;", "\tfont-size:11px;", "    fill:".concat(this.props.colorNodeSecondaryFont, ";"), "\t-webkit-font-smoothing:antialiased;", "\ttext-overflow: ellipsis;", "\twhite-space: pre;", "\toverflow:hidden;", "\tline-height:11px;", "\ttext-align: right;", "\ttop:65px;", "\tright:50px;", "\theight:20px;", "}", ".node .d2VDTPrefix, .node .d2VDTSuffix{", "\tfont-family: HelveticaNeue-Light, Arial Narrow, Arial, Helvetica, sans-serif;   ", "\tfont-size:12px;\t", "} ", ".node .slider circle {", "\tfill: #fff;", "\tstroke: #bbb;", "\tstroke-width: 1px;", "}", ".node .slider circle{", "    fill:".concat(this.props.colorSim, ";"), "\tfill-opacity:.8;", "\tstroke:#fff;", "}", ".node.d2VDTStatusRed .d2VDTStatus{", "\tfill: rgba(255,0,0,.7);", "}", ".node.d2VDTStatusGreen .d2VDTStatus{", "\tfill: rgba(0,176,80,.7);", "}", ".node.d2VDTStatusAmber .d2VDTStatus{", "\tfill: rgba(255,192,0,.7);", "}", ".node.d2VDTStatusNeutral .d2VDTStatus{", "\tfill: none;", "}", ".node .d2VDTOperator{", "\tfill: none;", "    stroke:".concat(this.props.colorLinks, ";"), "\tstroke-width:.5px;\t", "}", ".link {", "\tfill: none;", "    stroke:".concat(this.props.colorLinks, ";"), "\tstroke-width: .5px;", "}", ".line {", "  fill: none;", "  stroke:".concat(this.props.colorSim, ";"), "  stroke-width: 1px;", '  stroke-linecap: "round";', "}", ".node .d2VDTEnumValue {\n                font-size: 15px;\n            }"].join("")
                    }
                }, {
                    key: "checkWarnings",
                    value: function() {
                        var warnType = this.props.hasExceededMaxNodeLimit ? "globalMaxExceeded" : Object.keys(this.props.nodesExceededMaxChild).length ? "maxChildExceeded" : "";
                        warnType ? this.renderWarningMsg(warnType) : this.clearMaxChildMsg()
                    }
                }, {
                    key: "renderWarningMsg",
                    value: function(msgType) {
                        var _this14 = this,
                            errorMsgMap = {
                                maxChildExceeded: ["Your data source is causing the dynamic model to have too many child nodes under one or more of its nodes. A node can only contain up to ".concat(this.props.maxChild, " immediate child nodes."), "The dynamic model has been generated but it will only include the first ".concat(this.props.maxChild, " child nodes in each of the nodes that exceeds this limit. Therefore, the model will not be exactly the same as the hierarchy in your datasource.")],
                                globalMaxExceeded: ["Your ValQ model has exceeded the maximum limit of ".concat(this.props.globalMaxNodeLimit, " driver nodes. If you require more than ").concat(this.props.globalMaxNodeLimit, " nodes in a single model, please email us at support@valq.com and we can provide a custom version for your organization")]
                            },
                            warnInfoDiv = jquery(this.treeDiv).find("#vdtWarningDiv"),
                            msg = errorMsgMap[msgType].map(function(msg) {
                                return "<p>".concat(msg, "</p>")
                            }).join("");
                        if (warnInfoDiv.length <= 0) {
                            var html = '\n                <div id="vdtWarningDiv" class="vdt-warning-info">\n                    <div class="vdt-warning-header">\n                        <span class="vdt-warning-header-text">Warning</span>\n                        <span class="vdt-warning-info-close"></span>\n                    </div>\n                    <div class="warn-content">\n                        '.concat(msg, "\n                    </div>\n                </div>            \n            ");
                            jquery(this.treeDiv).append(html), jquery("#vdtWarningDiv").find(".vdt-warning-info-close").click(function() {
                                return _this14.clearMaxChildMsg()
                            })
                        } else warnInfoDiv.find(".warn-content").html(msg)
                    }
                }, {
                    key: "clearMaxChildMsg",
                    value: function() {
                        jquery(this.treeDiv).find("#vdtWarningDiv").remove()
                    }
                }]) && rendererService_defineProperties(Constructor.prototype, protoProps), staticProps && rendererService_defineProperties(Constructor, staticProps), RendererService
            }();

            function detailPageService_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function detailPageService_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var detailPageService_DetailPageService = function() {
                function DetailPageService(TreeRef) {
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, DetailPageService), detailPageService_defineProperty(this, "TreeRef", void 0), detailPageService_defineProperty(this, "props", void 0), detailPageService_defineProperty(this, "detailDiv", void 0), detailPageService_defineProperty(this, "detailBgDiv", void 0), detailPageService_defineProperty(this, "detailChartDiv", void 0), detailPageService_defineProperty(this, "detailAnalysisDiv", void 0), detailPageService_defineProperty(this, "detailHeaderDiv", void 0), detailPageService_defineProperty(this, "detailTitleDiv", void 0), detailPageService_defineProperty(this, "detailDescrDiv", void 0), detailPageService_defineProperty(this, "detailFooterDiv", void 0), detailPageService_defineProperty(this, "detailTableDiv", void 0), detailPageService_defineProperty(this, "detailCloseDiv", void 0), detailPageService_defineProperty(this, "detailScrollCtr", void 0), detailPageService_defineProperty(this, "detailStatusBgDiv", void 0), detailPageService_defineProperty(this, "detailStatusDiv", void 0), detailPageService_defineProperty(this, "dpState", void 0), detailPageService_defineProperty(this, "dpTrendAnalysisOptions", {
                        nodeValue: "Trend",
                        children: "Trend of Children",
                        calcComps: "Trend of Calculation Components"
                    }), detailPageService_defineProperty(this, "dpImpactAnalysisOptions", {
                        varianceBreakdown: "Variance Breakdown",
                        simulationImpact: "Simulation Impact"
                    }), detailPageService_defineProperty(this, "sep", '<span class="d2VDTSep"></span>'), this.TreeRef = TreeRef, this.props = TreeRef.props, this.init()
                }
                var Constructor, protoProps, staticProps;
                return Constructor = DetailPageService, (protoProps = [{
                    key: "init",
                    value: function() {
                        var _this = this;
                        this.detailBgDiv = document.createElement("DIV"), jquery(this.detailBgDiv).addClass("d2VDTDetailBg"), this.detailScrollCtr = document.createElement("DIV"), jquery(this.detailScrollCtr).addClass("d2Scroll").appendTo(this.detailBgDiv), core.a.attachScroll(jquery(this.detailScrollCtr)), this.detailDiv = document.createElement("DIV"), jquery(this.detailDiv).addClass("d2VDTDetail").appendTo(this.detailScrollCtr), this.detailHeaderDiv = document.createElement("DIV"), jquery(this.detailHeaderDiv).addClass("d2VDTHeader").appendTo(this.detailDiv), this.detailTitleDiv = document.createElement("DIV"), jquery(this.detailTitleDiv).addClass("d2VDTTitle").appendTo(this.detailDiv), this.detailTableDiv = document.createElement("DIV"), jquery(this.detailTableDiv).addClass("d2VDTTable").appendTo(this.detailDiv), this.detailChartDiv = document.createElement("DIV"), jquery(this.detailChartDiv).addClass("d2VDTChart").appendTo(this.detailDiv), this.detailDescrDiv = document.createElement("DIV"), jquery(this.detailDescrDiv).addClass("d2VDTDescr").appendTo(this.detailDiv), this.detailAnalysisDiv = document.createElement("DIV"), jquery(this.detailAnalysisDiv).addClass("d2VDTAnalysisChart").appendTo(this.detailDiv), this.detailFooterDiv = document.createElement("DIV"), jquery(this.detailFooterDiv).addClass("d2VDTFooter").appendTo(this.detailDiv), this.detailStatusBgDiv = document.createElement("DIV"), jquery(this.detailStatusBgDiv).addClass("d2VDTStatusBg").appendTo(this.detailBgDiv), this.detailStatusDiv = document.createElement("DIV"), jquery(this.detailStatusDiv).addClass("d2VDTStatus").appendTo(this.detailBgDiv), this.detailCloseDiv = document.createElement("DIV"), jquery(this.detailCloseDiv).addClass("d2VDTClose").appendTo(this.detailBgDiv), jquery(this.detailCloseDiv).click(function(e) {
                            e.stopPropagation(), _this.props.tooltip.style("visibility", "hidden"), _this.detailDiv && (jquery(_this.detailDiv).fadeOut("slow"), jquery(_this.props.popUpBgDiv).fadeOut(), jquery(_this.detailBgDiv).detach()), _this.TreeRef.eventService.publish("closedDetailPopup", {})
                        }), window.addEventListener("resize", function() {
                            _this.resizeDetailPage()
                        })
                    }
                }, {
                    key: "renderDetail",
                    value: function(d) {
                        d = this.props.nodes[d.name], this.props.activeNode = d, d.noDetail || ("NODE_SPECIFIC" === d.detailPageType || "CUSTOM_DEFAULT" === this.props.onClickDefault ? this.renderCustomDetail(d) : this.renderDefaultDetail(d))
                    }
                }, {
                    key: "renderDefaultDetail",
                    value: function(d) {
                        if (!this.isDetailPageVisible()) {
                            var dpState = this.dpState = {
                                currentNode: d,
                                trendAnalysis: detailPageService_defineProperty({}, d.name, "nodeValue"),
                                impactAnalysis: detailPageService_defineProperty({}, d.name, "simulationImpact"),
                                trendAnalysisDiv: jquery(this.detailChartDiv).empty(),
                                trendAnalysisDivHeight: "300px",
                                impactAnalysisDiv: jquery(this.detailAnalysisDiv).empty()
                            };
                            jquery(this.detailBgDiv).appendTo(this.props.popUpBgDiv), jquery(this.props.popUpBgDiv).fadeIn(), jquery(this.detailBgDiv).toggleClass("wide", jquery(this.detailBgDiv).innerWidth() > 1e3), this.adjustChartHeight(), this.props.tooltip.style("visibility", "hidden"), this.updateSections(d, dpState, !1)
                        }
                    }
                }, {
                    key: "renderCustomDetail",
                    value: function(d) {}
                }, {
                    key: "updateSections",
                    value: function(d, dpState, isVisible) {
                        var _this2 = this;
                        this.updateheader(d), this.updateTitleText(d), this.updateDescrText(d), this.updatefooter(d), this.updateStatusText(d), this.updateTableText(d), isVisible ? (this.initChartRender(dpState, "trendAnalysis"), this.initChartRender(dpState, "impactAnalysis")) : jquery(this.detailDiv).fadeIn("slow", function() {
                            _this2.initChartRender(dpState, "trendAnalysis"), _this2.initChartRender(dpState, "impactAnalysis")
                        })
                    }
                }, {
                    key: "updateDetailPage",
                    value: function() {
                        this.dpState && this.props.nodes[this.dpState.currentNode.name] ? (this.dpState.currentNode = this.props.nodes[this.dpState.currentNode.name], this.updateSections(this.dpState.currentNode, this.dpState, !0)) : jquery(this.detailCloseDiv).trigger("click")
                    }
                }, {
                    key: "isDetailPageVisible",
                    value: function() {
                        return jquery(this.detailDiv).is(":visible")
                    }
                }, {
                    key: "adjustChartHeight",
                    value: function() {
                        jquery(this.detailBgDiv).hasClass("wide") ? (this.dpState.layout = "normal", this.dpState.trendAnalysisDivHeight = "48%") : (this.dpState.layout = "flow", this.dpState.trendAnalysisDivHeight = "300px")
                    }
                }, {
                    key: "updateheader",
                    value: function(d, headerDiv) {
                        var header = d.header,
                            parent = d.parent,
                            htmlText = core.a.escapeHtml(header) || (parent ? (parent.parent ? parent.parent.title + this.sep : "") + parent.title + this.sep : ""),
                            titleText = header || (parent ? "".concat((parent.parent ? "".concat(parent.parent.name, ": ").concat(parent.parent.title, " > ") : "") + parent.name, ": ").concat(parent.title) : "");
                        headerDiv = headerDiv || this.detailHeaderDiv, htmlText && "" !== htmlText ? (jquery(headerDiv).html(htmlText), jquery(headerDiv).attr("title", decodeURI(titleText))) : jquery(headerDiv).html("&nbsp;")
                    }
                }, {
                    key: "updateTitleText",
                    value: function(d, titleDiv) {
                        var title = d.title,
                            name = d.name;
                        titleDiv = titleDiv || this.detailTitleDiv, jquery(titleDiv).html(core.a.escapeHtml(title)), jquery(titleDiv).attr("title", core.a.escapeHtml("".concat(name, ": ").concat(title)))
                    }
                }, {
                    key: "updateDescrText",
                    value: function(d, descrDiv) {
                        var descr = d.descr,
                            formula = d.formula,
                            calcComps = d.calcComps;
                        descrDiv = descrDiv || this.detailDescrDiv;
                        var html = "";
                        if (html += descr ? "<h3>Definition:</h3><p>".concat(core.a.escapeHtml(descr), "</p>") : "", formula) {
                            for (var formulaText = formula, i = 0; i < calcComps.length; i++) formulaText = formulaText.split("[".concat(calcComps[i], "]")).join('<span style="color:#3399cc" title ="'.concat(this.props.nodes[calcComps[i]].name, ": ").concat(this.props.nodes[calcComps[i]].title, '">').concat(this.props.nodes[calcComps[i]].title, "</span>"));
                            html += "<h3>Calculation:</h3><p>".concat(formulaText, "</p>")
                        }
                        jquery(descrDiv).html(html)
                    }
                }, {
                    key: "updatefooter",
                    value: function(d, footerDiv) {
                        var name = d.name,
                            footer = d.footer,
                            simText = this.props.nodes[name].results[this.props.PeriodColumn - 1].simChangeAbs ? "Simulation variations applied from selected period ".concat(this.props.PeriodColumn, " to end of total.") : "",
                            htmlText = (footer || "") + (footer && simText ? " | " : "") + simText,
                            titleText = htmlText;
                        footerDiv = footerDiv || this.detailFooterDiv, htmlText && "" !== htmlText ? (jquery(footerDiv).html(core.a.escapeHtml(htmlText)), jquery(footerDiv).attr("title", decodeURI(titleText))) : jquery(footerDiv).html("&nbsp;")
                    }
                }, {
                    key: "updateStatusText",
                    value: function(d, detailBgDiv) {
                        var name = d.name;
                        detailBgDiv = detailBgDiv || this.detailBgDiv, jquery(detailBgDiv).removeClass("d2VDTStatusRed d2VDTStatusAmber d2VDTStatusNeutral d2VDTStatusGreen").addClass("d2VDTStatus".concat(this.props.nodes[name][this.props.valueDisp.primary.key].status))
                    }
                }, {
                    key: "updateTableText",
                    value: function(d, tableDiv) {
                        var html, self = this,
                            valueDisp = this.props.valueDisp,
                            primary = "total" == valueDisp.primary.key ? valueDisp.secondary.key : valueDisp.primary.key,
                            secondary = "total" == valueDisp.primary.key ? valueDisp.primary.key : valueDisp.secondary.key,
                            primaryVal = d[primary],
                            secondaryVal = d[secondary],
                            hasSim = primaryVal.act != primaryVal.base || secondaryVal.act != secondaryVal.base,
                            simTitle = (hasSim ? "Simulated " : "") + this.props.pVerTitle,
                            hasConstraints = null != d.max || null != d.minCap,
                            perText = this.props.displayValueText.per.short,
                            avgText = "A" == d.aMeth ? d.wAvgNode ? "Weght. Avg. " : "Avg. " : "";
                        tableDiv = tableDiv || this.detailTableDiv;
                        var scales = self.props.scales,
                            negDisp = self.props.negativeDisplay,
                            zeroDisp = self.props.zeroDisplay,
                            thouSep = self.props.thousandSeparator,
                            decSep = self.props.decimalSeparator,
                            withComparison = self.props.withComparison,
                            getFormattedLargeValue = function(value, d) {
                                return d.enableEnumList ? '<div class="d2VDTValue enumvalue"> '.concat(core.a.formatEnumVal(value, d).map(function(val) {
                                    return '<span class="detail-d2VDTEnumValue">'.concat(val, "</span>")
                                }).join(""), " </div>") : '<div class="d2VDTValue">'.concat(core.a.formatLargeValue(value, d, scales[d.scale], negDisp, zeroDisp, thouSep, decSep), "</div>")
                            },
                            getFormattedValue = function(value, d) {
                                return d.enableEnumList ? "".concat(core.a.formatEnumVal(value, d).map(function(val) {
                                    return '<span class="detail-d2VDTEnumValue">'.concat(val, "</span>")
                                }).join(""), " ") : core.a.formatVal(value, d, scales[d.scale], null, null, negDisp, zeroDisp, thouSep, decSep)
                            };
                        html = ['<table style="text-align:left">', '\n                <tr>\n                    <td/>\n                    <td class="header">'.concat("per" == primaryVal.key ? "" : avgText).concat(primaryVal.text, '</td>\n                    <td/>\n                    <td class="header">').concat("per" == secondaryVal.key ? "" : avgText).concat(secondaryVal.text, "</td>\n                </tr>\n            "), function() {
                            var row = "";
                            0 == primaryVal.act && 0 == secondaryVal.act || (row = '\n                    <tr>\n                        <td class="label">'.concat(simTitle, '</td>\n                        <td align="right">\n                            ').concat(getFormattedLargeValue(primaryVal.act, d), '\n                        </td>\n                        <td/><td align="right">\n                            ').concat(getFormattedLargeValue(secondaryVal.act, d), "\n                        </td>\n                    </tr>\n                "));
                            return row
                        }(), function() {
                            var row = [];
                            !withComparison || 0 == primaryVal.tgt && 0 == secondaryVal.tgt || (row.push('\n                    <tr>\n                        <td colspan ="4"><h3>'.concat(simTitle, " compared to ").concat(self.props.cVerTitle, ':</h3></td>\n                    </tr>\n                    <tr>\n                        <td class="label">').concat(self.props.cVerTitle, "</td>\n                        <td >").concat(getFormattedValue(primaryVal.tgt, d), "</td>\n                        ").concat(d.aMeth ? "<td/><td>".concat(getFormattedValue(secondaryVal.tgt, d), "</td>") : "", "\n                    </tr>")), d.enableEnumList || row.push('\n                        <tr>\n                            <td class="label">Variance</td>\n                            <td class="variance">\n                                '.concat(getFormattedValue(primaryVal.varAbs, d)).concat(null != primaryVal.varPct ? "<br/><span>".concat(core.a.formatPct(primaryVal.varPct, self.props.negativeDisplay, self.props.thousandSeparator, self.props.decimalSeparator), "</span>") : "", "\n                            </td>\n                            ").concat(d.aMeth ? '<td/><td class="variance">'.concat(getFormattedValue(secondaryVal.varAbs, d)).concat(null != secondaryVal.varPct ? "<br/><span>".concat(core.a.formatPct(secondaryVal.varPct, self.props.negativeDisplay, self.props.thousandSeparator, self.props.decimalSeparator), "</span>") : "", "</td>") : "", "\n                        </tr>                        \n                    ")));
                            return row.join("")
                        }(), function() {
                            var row = "";
                            d.enableEnumList || !hasSim || 0 == primaryVal.simChangeAbs && 0 == secondaryVal.simChangeAbs || (row = "\n                    ".concat(withComparison ? "" : '<tr><td colspan="4"><h3></h3></td></tr>', '\n                    <tr>\n                        <td class="label">Simulation Impact</td>\n                        \n                        <td class="variance">').concat(getFormattedValue(primaryVal.simChangeAbs, d)).concat(null != primaryVal.simChangePct ? "<br/><span>".concat(core.a.formatPct(primaryVal.simChangePct, self.props.negativeDisplay, self.props.thousandSeparator, self.props.decimalSeparator), " ").concat(primaryVal.simChangeText, "</span>") : "", "</td>\n                        \n                        ").concat(d.aMeth ? '<td/><td class="variance">'.concat(getFormattedValue(secondaryVal.simChangeAbs, d), "<br/><span>").concat(null != secondaryVal.simChangePct ? "".concat(core.a.formatPct(secondaryVal.simChangePct, self.props.negativeDisplay, self.props.thousandSeparator, self.props.decimalSeparator), " ").concat(secondaryVal.simChangeText, "</span>") : "", "</td>") : "", "\n                    </tr>\n                "));
                            return row
                        }(), function() {
                            if (!hasSim) return "";
                            var row = ['\n                <tr>\n                    <td colspan ="4"><h3>Original '.concat(self.props.pVerTitle, " ").concat(withComparison ? "compared to ".concat(self.props.cVerTitle) : "", " :</h3></td>\n                </tr>\n            ")];
                            0 == primaryVal.base && 0 == secondaryVal.base || row.push('\n                    <tr>\n                        <td class="label">Original '.concat(self.props.pVerTitle, "</td>\n                        <td>").concat(getFormattedValue(primaryVal.base, d), "</td>\n                        ").concat(d.aMeth ? "<td/><td>".concat(getFormattedValue(secondaryVal.base, d), "</td>") : "", "\n                    </tr>\t\t\n                "));
                            d.enableEnumList || !withComparison || 0 == primaryVal.origVarAbs && !secondaryVal.origVarAbs || row.push('\n                     <tr>\n                        <td class="label">Variance</td>\n                        <td class="variance">'.concat(getFormattedValue(primaryVal.origVarAbs, d)).concat(null != primaryVal.origVarPct ? "</br><span>".concat(core.a.formatPct(primaryVal.origVarPct, self.props.negativeDisplay, self.props.thousandSeparator, self.props.decimalSeparator), "</span>") : "", "</td>\n                        ").concat(d.aMeth ? '<td/><td class="variance">'.concat(getFormattedValue(secondaryVal.origVarAbs, d), "<br/><span>").concat(null != secondaryVal.origVarPct ? "".concat(core.a.formatPct(secondaryVal.origVarPct, self.props.negativeDisplay, self.props.thousandSeparator, self.props.decimalSeparator), "</span>") : "", "</td>") : "", "\n                    </tr>\n                "));
                            return row.join("")
                        }(), function() {
                            var row = [];
                            !d.enableEnumList && hasConstraints && (row.push('\n                    <tr>\n                        <td colspan ="4"><h3>Capacity & Utilisation:</h3></td>\n                    </tr>\n                '), null != primaryVal.capacity && row.push('\n                        <tr>\n                            <td class="label">Max:('.concat(perText, ")</td>\n                            <td>").concat(getFormattedValue(primaryVal.capacity, d), "</td>\n                            ").concat(d.aMeth ? "<td/><td>".concat(getFormattedValue(secondaryVal.capacity, d), "</td>") : "", "\n                        </tr>\n                    ")), null != primaryVal.minCap && row.push('\n                        <tr>\n                            <td class="label">Min:('.concat(perText, ")</td>\n                            <td>").concat(core.a.formatVal(d.minCap, d, scales[d.scale], null, null, negDisp, "0", thouSep, decSep), "</td>\n                            ").concat(d.aMeth ? "<td/><td>".concat(core.a.formatVal(d.minCap, d, scales[d.scale], null, null, negDisp, "0", thouSep, decSep), "</td>") : "", "\n                        </tr>\t\t\t\t\n                    ")), primaryVal.util && 0 != primaryVal.util && row.push('\n                        <tr>\n                            <td class="label">Utilisation</td>\n                            <td class="variance">'.concat(core.a.formatPct(primaryVal.util, self.props.negativeDisplay, self.props.thousandSeparator, self.props.decimalSeparator, 999), "</td>\n                            ").concat(d.aMeth ? '<td/><td class="variance">'.concat(core.a.formatPct(secondaryVal.util, self.props.negativeDisplay, self.props.thousandSeparator, self.props.decimalSeparator, 999), "</td>") : "", "\n                        </tr>\n                    ")));
                            return row.join("")
                        }(), "</table>"].join(""), jquery(tableDiv).html(html)
                    }
                }, {
                    key: "initChartRender",
                    value: function(dpState, widgetType) {
                        var self = this,
                            options = {},
                            containerDiv = null;
                        "trendAnalysis" === widgetType ? (options = this.dpTrendAnalysisOptions, containerDiv = dpState.trendAnalysisDiv) : (options = this.dpImpactAnalysisOptions, containerDiv = dpState.impactAnalysisDiv);
                        var optionsArray = Object.keys(options),
                            chartArea = jquery(document.createElement("div")).addClass("analysis-chart-area"),
                            analysisMenu = jquery(document.createElement("div")).addClass("analysis-chart-switch");
                        chartArea.append('\n            <div class="chart-title"></div>\n            <div class="chart-area"></div>\n        '), analysisMenu.html('\n            <span class="analysis-chart-menu">&#9776;</span>\n            <ul class="analysis-chart-options" data-widget-type="'.concat(widgetType, '">\n                ').concat(optionsArray.map(function(key) {
                            return '<li data-analysis-option="'.concat(key, '" class="analysis-option-').concat(key, '"> ').concat(options[key], " </li>")
                        }).join(" "), "\n            </ul>\n        ")), analysisMenu.on("click", ".analysis-chart-menu", function(e) {
                            e.stopPropagation(), jquery(this).siblings(".analysis-chart-options").slideToggle()
                        }), analysisMenu.on("click", ".analysis-chart-options>li", function(e) {
                            e.stopPropagation();
                            var $el = jquery(this);
                            if (!$el.hasClass("dp-disabled") && !$el.hasClass("dp-selected")) {
                                setTimeout(function() {
                                    $el.parent().slideUp()
                                }, 500);
                                var _widgetType = $el.parent().data("widgetType"),
                                    analysisOption = $el.data("analysisOption"),
                                    detailPage = $el.closest(".analysis-chart-switch").parent().data("detailPage");
                                $el.addClass("dp-selected").siblings().removeClass("dp-selected"), self.updateDetailPageChart(null, _widgetType, analysisOption, detailPage)
                            }
                        }), containerDiv && containerDiv.empty().append([chartArea, analysisMenu]), this.updateDetailPageChart(dpState, widgetType)
                    }
                }, {
                    key: "updateDetailPageChart",
                    value: function(dpState, widgetType, analysisOption, detailPage) {
                        if (!dpState) {
                            if (!(dpState = this ? this.dpState : null)) return void console.error(new Error("State of the Detail Page ".concat(detailPage || "Standard Popup", " not found")));
                            dpState[widgetType][dpState.currentNode.name] = analysisOption
                        }
                        switch (widgetType) {
                            case "trendAnalysis":
                                this.updateTrendAnalysis(dpState);
                                break;
                            case "impactAnalysis":
                                this.updateImpactAnalysis(dpState)
                        }
                    }
                }, {
                    key: "updateTrendAnalysis",
                    value: function(dpState) {
                        var _this3 = this;
                        if (dpState) {
                            var d = dpState.currentNode,
                                containerDiv = dpState.trendAnalysisDiv,
                                analysisStore = dpState.trendAnalysis,
                                chartArea = containerDiv.find(".analysis-chart-area"),
                                analysisType = analysisStore[d.name];
                            if (d.enableEnumList || 1 === this.props.periods) containerDiv.addClass("no-data");
                            else {
                                if (containerDiv.removeClass("no-data").find(".analysis-chart-options").hide(), dpState.trendAnalysisDivHeight && containerDiv.css("height", dpState.trendAnalysisDivHeight), containerDiv.find(".analysis-chart-options>li").removeClass("dp-disabled dp-selected"), d.children && d.children.length > 0 || d._children && d._children.length > 0 || (containerDiv.find(".analysis-option-children").addClass("dp-disabled"), analysisType = "children" === analysisType ? "nodeValue" : analysisType), d.calcComps && 0 !== d.calcComps.length || (containerDiv.find(".analysis-option-calcComps").addClass("dp-disabled"), analysisType = "calcComps" === analysisType ? "nodeValue" : analysisType), analysisStore[d.name] = analysisType, chartArea.find(".chart-title").html(this.dpTrendAnalysisOptions[analysisType]), "nodeValue" === analysisType) chartArea.find(".chart-area").first().removeClass("analysis-trellis-container").empty(), this.updateChart(d, chartArea, dpState.tooltipUtil);
                                else {
                                    var mainDiv = chartArea.find(".chart-area").first().empty().addClass("analysis-trellis-container"),
                                        trellisCells = [],
                                        width = chartArea.innerWidth(),
                                        height = chartArea.innerHeight() - 40,
                                        children = "children" === analysisType ? d.children || d._children || [] : d[analysisType] || [],
                                        trellisWidth = width,
                                        trellisHeight = height - 5;
                                    children.length > 1 && (trellisWidth = width >= 600 ? width / 2 - 10 : width - 20, trellisHeight = height >= 300 ? height / 2 - 5 : height - 5, "flow" === dpState.layout && containerDiv.css({
                                        height: "auto"
                                    })), "calcComps" === analysisType && (children = children.map(function(c) {
                                        return _this3.props.nodes[c]
                                    })), children.forEach(function(node, i) {
                                        trellisCells.push(jquery('\n                        <div class="analysis-trellis-cell" data-node="'.concat(node.name, '" style="width: ').concat(trellisWidth, "px; height: ").concat(trellisHeight, 'px;">\n                                <div class="chart-title">').concat(node.title, '</div>\n                                <div class="chart-area"></div>\n                        </div>\n                    ')))
                                    }), mainDiv.append(trellisCells), setTimeout(function() {
                                        children.forEach(function(node, i) {
                                            _this3.updateChart(node, jquery(trellisCells[i]), dpState.tooltipUtil)
                                        })
                                    }, 0)
                                }
                                containerDiv.find(".analysis-option-".concat(analysisType)).addClass("dp-selected")
                            }
                        }
                    }
                }, {
                    key: "updateChart",
                    value: function(d, chartDiv, tooltipUtil) {
                        var chartAreaDiv = chartDiv.find(".chart-area")[0];
                        this.renderTrendChart(this.props.nodes[d.name], chartAreaDiv, tooltipUtil)
                    }
                }, {
                    key: "renderTrendChart",
                    value: function(node, div, tooltipUtil) {
                        var _this4 = this,
                            self = this,
                            ChartDiv = d3.select(div),
                            w = parseInt(ChartDiv.style("width")) - 20,
                            h = parseInt(ChartDiv.style("height")) - 20,
                            periods = this.props.periods,
                            data = node.results.slice(0, periods),
                            totalData = node.results[periods],
                            n = data.length;
                        if (tooltipUtil = tooltipUtil || {
                                div: this.props.tooltip,
                                getTooltipPosition: this.getTooltipPosition.bind(null, this.props.popUpBgDiv)
                            }, ChartDiv.select("svg").remove(), !(periods < 2) && Math.min(w, h) > 20 && 0 != n) {
                            var actMax = d3.max(data, function(_ref) {
                                    return _ref.act
                                }),
                                actMin = d3.min(data, function(_ref2) {
                                    return _ref2.act
                                }),
                                tgtMax = d3.max(data, function(_ref3) {
                                    return _ref3.tgt
                                }),
                                tgtMin = d3.min(data, function(_ref4) {
                                    return _ref4.tgt
                                }),
                                baseMax = d3.max(data, function(_ref5) {
                                    return _ref5.base
                                }),
                                baseMin = d3.min(data, function(_ref6) {
                                    return _ref6.base
                                });
                            if (0 == actMax && 0 == actMin) return void jquery(".d2VDTChart").addClass("no-data");
                            var svg = ChartDiv.append("svg").attr("width", w).attr("height", h),
                                max = d3.max([actMax, tgtMax, baseMax]),
                                min = d3.min([actMin, tgtMin, baseMin, node.min]);
                            min > 0 && (min = Math.max(0, min - .1 * (max - min))), min < 0 && (max = Math.max(max, 0)), node.max && (max = Math.max(max, 0)), node.min && (min = Math.min(min, node.min)), min === max && (min *= .5, max *= 2);
                            var barWidth = w / n,
                                y = d3.scale.linear().domain([min, max]).range([0, h]),
                                x = d3.scale.ordinal().domain(d3.range(n).map(function(num) {
                                    return "" + num
                                })).rangeBands([0, w], .2),
                                Tgtline = d3.svg.line().interpolate("cardinal").x(function(d, i) {
                                    return x("" + i) + barWidth / 2
                                }).y(function(d) {
                                    return h - y(d.tgt) + 10
                                }),
                                tooltipText = function(node, d) {
                                    var hasSim = d.act != d.base,
                                        simTitle = (hasSim ? "Simulated " : "") + self.props.pVerTitle,
                                        scales = self.props.scales,
                                        negDisp = self.props.negativeDisplay,
                                        zeroDisp = self.props.zeroDisplay,
                                        thouSep = self.props.thousandSeparator,
                                        decSep = self.props.decimalSeparator,
                                        withComparison = self.props.withComparison;
                                    return "\n                \n                <table>\n                    <tr>\n                        <td><b>Period</b></td>\n                        <td><b>".concat(d.text, "</b></td>\n                    </tr>\n                    \n                    ").concat(null != d.status ? '\n                        <tr>\n                            <td>Status:</td>\n                            <td colspan=2><span class="d2VDTStatusTooltip d2VDTStatusTooltip'.concat(d.status, '"></span></td>\n                        </tr>') : "", "\n                    ").concat(0 != d.act ? "\n                        <tr>\n                            <td>".concat(simTitle, ':</td>\n                            <td/><td align="right">').concat(core.a.formatVal(d.act, node, scales[node.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                        </tr>") : "", "\n                    ").concat(withComparison && 0 != d.tgt ? "\n                        <tr>\n                            <td>".concat(self.props.cVerTitle, ':</td>\n                            <td/><td align="right">').concat(core.a.formatVal(d.tgt, node, scales[node.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                        </tr>") : "", "\n                    ").concat(withComparison && 0 != d.varAbs ? "\n                        <tr>\n                            <td>Variance:</td>\n                            <td>".concat(null != d.varPct ? core.a.formatPct(d.varPct, negDisp, thouSep, decSep) : "", '</td>\n                            <td align="right">').concat(core.a.formatVal(d.varAbs, node, scales[node.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                        </tr>") : "", "\n                    ").concat(0 != d.simChangeAbs ? "\n                        <tr>\n                            <td>Simulation Impact:</td>\n                            <td>".concat(null != d.simChangePct ? core.a.formatPct(d.simChangePct, negDisp, thouSep, decSep) : "", " ").concat(d.simChangeText, '</td>\n                            <td align="right">').concat(core.a.formatVal(d.simChangeAbs, node, scales[node.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                        </tr>") : "", "\n                    ").concat(hasSim && 0 != d.base ? "\n                        <tr>\n                            <td>Original ".concat(self.props.pVerTitle, ':</td>\n                            <td/><td align="right">').concat(core.a.formatVal(d.base, node, scales[node.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                        </tr>") : "", "\n                    ").concat(hasSim && withComparison && 0 != d.origVarAbs ? "\n                        <tr>\n                            <td>Original Var.:</td>\n                            <td>".concat(null != d.origVarPct ? core.a.formatPct(d.origVarPct, negDisp, thouSep, decSep) : "", '</td>\n                            <td align="right">').concat(core.a.formatVal(d.origVarAbs, node, scales[node.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                        </tr>") : "", "\n                    \n                </table>")
                                }.bind(null, node),
                                bar = svg.selectAll("rect.bar").data(data).enter().append("g").on("mouseover", function(d, i) {
                                    tooltipUtil.div.style("visibility", "hidden").html(tooltipText(d, i));
                                    var dim = tooltipUtil.div.node().getBoundingClientRect(),
                                        pos = tooltipUtil.getTooltipPosition(d3.event, dim);
                                    return tooltipUtil.div.style("top", pos.top).style("left", pos.left), this.style["fill-opacity"] = .95, tooltipUtil.div.style("visibility", "visible")
                                }).on("mousemove", function() {
                                    var dim = tooltipUtil.div.node().getBoundingClientRect(),
                                        pos = tooltipUtil.getTooltipPosition(d3.event, dim);
                                    return tooltipUtil.div.style("top", pos.top).style("left", pos.left)
                                }).on("mouseout", function() {
                                    return this.style["fill-opacity"] = .75, tooltipUtil.div.style("visibility", "hidden")
                                }).on("click", function(d) {
                                    _this4.detailDiv && jquery(_this4.detailDiv).is(":visible") && (d3.event.stopPropagation(), tooltipUtil.div.style("visibility", "hidden"), self.props.clickedPeriod = {
                                        name: d.key,
                                        title: d.text
                                    }, _this4.TreeRef.fireEvent("onPeriodColumnClick"))
                                });
                            bar.append("svg:rect").attr("class", function(d, i) {
                                return i == self.props.PeriodColumn - 1 ? "bar current" : i >= self.props.PeriodColumn ? "bar future" : "bar"
                            }).attr("x", function(d, i) {
                                return i * barWidth + 10 + 2
                            }).attr("y", h - y(Math.max(0, min)) + 10).attr("width", barWidth - 3).attr("height", 0).transition().delay(function(d, i) {
                                return 50 * i
                            }).duration(250).ease("quad").attr("y", function(_ref7) {
                                var base = _ref7.base;
                                return h - y(Math.max(base, 0)) + 10
                            }).attr("height", function(_ref8) {
                                var base = _ref8.base;
                                return min < 0 ? Math.abs(y(base) - y(0)) : y(base)
                            }).transition().delay(function(d, i) {
                                return 900 + 50 * i
                            }).duration(250).ease("quad").attr("y", function(_ref9) {
                                var act = _ref9.act;
                                return h - y(Math.max(act, 0)) + 10
                            }).attr("height", function(_ref10) {
                                var act = _ref10.act;
                                return min < 0 ? Math.abs(y(act) - y(0)) : y(act)
                            }), totalData.simChangeAbs && bar.append("svg:path").attr("class", function(d, i) {
                                return i == self.props.PeriodColumn - 1 ? "baseBar current" : i >= self.props.PeriodColumn ? "baseBar future" : "baseBar"
                            }).attr("d", function(_ref11, i) {
                                var simChangeAbs = _ref11.simChangeAbs,
                                    base = _ref11.base,
                                    act = _ref11.act;
                                if (simChangeAbs) {
                                    if (simChangeAbs > 0) return "M ".concat(i * barWidth + 10 + 3, " ").concat(h - y(base) + 10, "h").concat(barWidth - 4);
                                    var diff = h - y(act) + 10 - (h - y(base) + 10);
                                    return "M ".concat(i * barWidth + 10 + 3, " ").concat(h - y(act) + 10, "v-").concat(diff, "h").concat(barWidth - 4, "v").concat(diff)
                                }
                                return null
                            }).style("stroke-opacity", 0).transition().delay(function(d, i) {
                                return 700 + 50 * i
                            }).duration(250).ease("quad").style("stroke-opacity", 1), 0 == tgtMin && 0 == tgtMax || svg.append("svg:path").attr("class", "line").attr("stroke-opacity", 0).transition().duration(1500).attr("d", Tgtline(data)).attr("stroke-opacity", .9), min < 0 && svg.append("svg:line").attr("x1", 10).attr("y1", h - y(0) + 10).attr("x2", w + 10).attr("y2", h - y(0) + 10).style("stroke", "#555")
                        }
                    }
                }, {
                    key: "updateAnalysisChart",
                    value: function(d, chartDiv, tooltipUtil, analysisType) {
                        var chartTitleDiv = chartDiv.find(".chart-title"),
                            chartAreaDiv = chartDiv.find(".chart-area")[0],
                            primaryDisplayValue = this.props.primaryDisplayValue;
                        if (jquery(chartTitleDiv).html(""), jquery(chartAreaDiv).html(""), analysisType || this.TreeRef.simulationService.hasSim(d)) {
                            var chartTitle = "varianceBreakdown" === analysisType ? "<span>Breakdown of ".concat(this.props.displayValueText[primaryDisplayValue].long, " variance by calculation components:<span>") : "<span>Breakdown of simulated changes impacts on ".concat(this.props.displayValueText[primaryDisplayValue].long, ":</span>");
                            jquery(chartTitleDiv).html(chartTitle), this.renderWaterFallChart(this.props.nodes[d.name], chartAreaDiv, primaryDisplayValue, this.props.simBaseVal, null, null, tooltipUtil, analysisType)
                        } else jquery(".d2VDTAnalysisChart").addClass("no-data")
                    }
                }, {
                    key: "updateImpactAnalysis",
                    value: function(dpState) {
                        var _this5 = this,
                            d = dpState.currentNode,
                            containerDiv = dpState.impactAnalysisDiv,
                            analysisStore = dpState.impactAnalysis,
                            chartArea = containerDiv.find(".analysis-chart-area"),
                            analysisType = analysisStore[d.name],
                            withComparison = this.props.withComparison;
                        d.enableEnumList ? containerDiv.addClass("no-data") : (containerDiv.removeClass("no-data").find(".analysis-chart-options").hide(), containerDiv.find(".analysis-chart-options>li").removeClass("dp-disabled dp-selected"), this.TreeRef.simulationService.hasSim(d) ? analysisType = analysisType || "simulationImpact" : (analysisType = "varianceBreakdown", containerDiv.find(".analysis-option-simulationImpact").addClass("dp-disabled")), d.calcComps && 0 !== d.calcComps.length && withComparison || (containerDiv.find(".analysis-option-varianceBreakdown").addClass("dp-disabled"), analysisType = "varianceBreakdown" === analysisType ? null : analysisType), analysisType ? (containerDiv.find(".analysis-option-".concat(analysisType)).addClass("dp-selected"), setTimeout(function() {
                            _this5.updateAnalysisChart(d, chartArea, dpState.tooltipUtil, analysisType)
                        }, 0)) : jquery(".d2VDTAnalysisChart").addClass("no-data"))
                    }
                }, {
                    key: "renderWaterFallChart",
                    value: function(node, div, field, simBaseVal, margin, currentSimVar, tooltipUtil, analysisType) {
                        var _this6 = this,
                            self = this;
                        margin = margin || 20;
                        var horizontal = "H" === this.props.waterFallType,
                            margins = 2 * margin,
                            marginBottom = margin + 10,
                            ChartDiv = d3.select(div),
                            w = parseInt(ChartDiv.style("width")) - margins,
                            h = parseInt(ChartDiv.style("height")) - margin - marginBottom,
                            categoryRange = w,
                            measureRange = h;
                        if (horizontal && (categoryRange = h, measureRange = w - 50 - 30), currentSimVar = currentSimVar || this.props.simVar, tooltipUtil = tooltipUtil || {
                                div: this.props.tooltip,
                                getTooltipPosition: this.getTooltipPosition.bind(null, this.props.popUpBgDiv)
                            }, ChartDiv.select("svg").remove(), analysisType || !core.a.isEmptyObject(simBaseVal)) {
                            var data = this.getWaterfallData(node, field, simBaseVal, analysisType),
                                n = data.length;
                            if (Math.min(categoryRange, measureRange) > 60)
                                if (2 == n) jquery(ChartDiv).html("No Active Simulations / Variance Analysis");
                                else {
                                    var max = d3.max(data, function(_ref12) {
                                            var totalBefore = _ref12.totalBefore,
                                                totalAfter = _ref12.totalAfter;
                                            return Math.max(totalBefore, totalAfter)
                                        }),
                                        min = d3.min(data, function(_ref13) {
                                            var totalBefore = _ref13.totalBefore,
                                                totalAfter = _ref13.totalAfter;
                                            return Math.min(totalBefore, totalAfter)
                                        });
                                    if (0 == max && 0 == min) return !1;
                                    min > 0 && (min = Math.max(0, min - .1 * (max - min))), min < 0 && (max = Math.max(max, 0));
                                    var svg = ChartDiv.append("svg").attr("width", w + margins).attr("height", h + margins + marginBottom),
                                        barWidth = categoryRange / n,
                                        barSpacing = Math.max(barWidth - 2 * margin, 4),
                                        measureScale = d3.scale.linear().domain([min, max]).range([0, measureRange]),
                                        categoryScale = d3.scale.ordinal().domain(d3.range(n).map(function(num) {
                                            return "" + num
                                        })).rangeBands([0, categoryRange], 0),
                                        categoryAxis = "x",
                                        measureAxis = "y",
                                        barDimensionX = "width",
                                        barDimensionY = "height",
                                        dataLabelTextAnchor = "middle",
                                        dataLabelTextVerticalAlign = 0,
                                        axisLineX1 = margin + barSpacing / 2,
                                        axisLineY1 = measureRange - measureScale(0) + margin,
                                        axisLineX2 = categoryRange + margin - barSpacing / 2,
                                        axisLineY2 = measureRange - measureScale(0) + margin,
                                        categoryAxisOrient = "bottom",
                                        axisLabelRotation = 20,
                                        categoryAxisTranslateX = margin,
                                        categoryAxisTranslateY = margin + h,
                                        measureAxisRectPosition = function(totalAfter, totalBefore, val) {
                                            return measureRange - measureScale(val < 0 ? totalBefore : totalAfter) + margin
                                        },
                                        measureAxisTextPosition = function(totalAfter, totalBefore, val) {
                                            return measureRange - measureScale(val < 0 ? totalBefore : totalAfter) - 4 + margin
                                        },
                                        dataLabelWidth = function(totalAfter, totalBefore, val) {
                                            return barWidth
                                        };
                                    horizontal && (categoryAxis = "y", measureAxis = "x", barDimensionX = "height", barDimensionY = "width", dataLabelTextAnchor = "start", dataLabelTextVerticalAlign = barSpacing, axisLineX1 = measureScale(0) + 50 + margin, axisLineY1 = n * barWidth + margin, axisLineX2 = measureScale(0) + 50 + margin, axisLineY2 = margin, categoryAxisOrient = "left", axisLabelRotation = -20, categoryAxisTranslateY = margin - barSpacing, categoryAxisTranslateX = margin + 50, measureAxisRectPosition = function(totalAfter, totalBefore, val) {
                                        return measureScale(val > 0 ? totalBefore : totalAfter) + 50 + margin
                                    }, measureAxisTextPosition = function(totalAfter, totalBefore, val) {
                                        return measureScale((val > 0 ? totalBefore : totalAfter) + Math.abs(val)) + 50 + 3 + margin
                                    }, dataLabelWidth = function(totalAfter, totalBefore, val) {
                                        return w - (measureScale((val > 0 ? totalBefore : totalAfter) + Math.abs(val)) + 50 + 3 - margin)
                                    });
                                    var tooltipText = "varianceBreakdown" === analysisType ? function(d) {
                                            var node = d.node,
                                                scales = self.props.scales,
                                                negDisp = self.props.negativeDisplay,
                                                zeroDisp = self.props.zeroDisplay,
                                                thouSep = self.props.thousandSeparator,
                                                decSep = self.props.decimalSeparator;
                                            return '<table>\n                                    <tr>\n                                        <td colspan="2"><b>'.concat(d.text, "</b></td>\n                                    </tr>\n                        ").concat(d.total ? "" : "<tr>\n                                        <td>Variance impact on ".concat(node.title, ':</td>\n                                        <td/><td align="right">').concat(core.a.formatVal(d.val, node, scales[node.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                                    </tr>"), "\n                        ").concat(d.calcCompNode ? "<tr>\n                                        <td>".concat(d.isSimulated ? "Simulated" : self.props.pVerTitle, ' value:</td>\n                                        <td/><td align="right">').concat(core.a.formatVal(d.calcCompNode[field].act, d.calcCompNode, scales[d.calcCompNode.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                                    </tr>") : "", "\n                        ").concat(d.calcCompNode ? "<tr>\n                                        <td>".concat(self.props.cVerTitle, ' value:</td>\n                                        <td/><td align="right">').concat(core.a.formatVal(d.calcCompNode[field].tgt, d.calcCompNode, scales[d.calcCompNode.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                                    </tr>") : "", "\n                        ").concat(d.descr ? '<tr>\n                                        <td colspan="2">'.concat(d.descr, "</td>\n                                    </tr>") : "", "\n                                </table>")
                                        } : function(d) {
                                            var node = _this6.props.activeNode,
                                                scales = self.props.scales,
                                                negDisp = self.props.negativeDisplay,
                                                zeroDisp = self.props.zeroDisplay,
                                                thouSep = self.props.thousandSeparator,
                                                decSep = self.props.decimalSeparator;
                                            return '<table>\n                                    <tr>\n                                        <td colspan="2"><b>'.concat(d.text, "</b></td>\n                                    </tr>\n                        ").concat(d.total ? "" : "<tr>\n                                        <td>Simulation impact on ".concat(node.title, ':</td>\n                                        <td/><td align="right">').concat(core.a.formatVal(d.val, node, scales[node.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                                    </tr>"), "\n                        ").concat(d.total ? "" : '<tr>\n                                        <td>Simulated variation Pct:</td>\n                                        <td/><td align="right">'.concat(core.a.formatPct(currentSimVar[d.node.name], negDisp, thouSep, decSep), "</td>\n                                    </tr>"), "\n                        ").concat(d.total ? "" : '<tr>\n                                        <td>Simulated value:</td>\n                                        <td/><td align="right">'.concat(core.a.formatVal(d.node[field].act, d.node, scales[d.node.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                                    </tr>"), "\n                        ").concat(d.total ? "" : "<tr>\n                                        <td>".concat(self.props.pVerTitle, ' value:</td>\n                                        <td/><td align="right">').concat(core.a.formatVal(d.node[field].base, d.node, scales[d.node.scale], null, null, negDisp, zeroDisp, thouSep, decSep), "</td>\n                                    </tr>"), "\n                        ").concat(d.descr ? '<tr>\n                                        <td colspan="2">'.concat(d.descr, "</td>\n                                    </tr>") : "", "\n                                </table>")
                                        },
                                        barEnter = svg.selectAll("rect.bar").data(data).enter();
                                    barEnter.append("g").on("mouseover", function(d, i) {
                                        tooltipUtil.div.style("visibility", "hidden").html(tooltipText(d));
                                        var dim = tooltipUtil.div.node().getBoundingClientRect(),
                                            pos = tooltipUtil.getTooltipPosition(d3.event, dim);
                                        return tooltipUtil.div.style("top", pos.top).style("left", pos.left), this.style["fill-opacity"] = .95, tooltipUtil.div.style("visibility", "visible")
                                    }).on("mousemove", function() {
                                        var dim = tooltipUtil.div.node().getBoundingClientRect(),
                                            pos = tooltipUtil.getTooltipPosition(d3.event, dim);
                                        return tooltipUtil.div.style("top", pos.top).style("left", pos.left)
                                    }).on("mouseout", function() {
                                        return this.style["fill-opacity"] = .75, tooltipUtil.div.style("visibility", "hidden")
                                    }).append("svg:rect").attr("class", function(_ref14, i) {
                                        var val = _ref14.val;
                                        return 0 == i ? "bar" : i == n - 1 ? "bar current" : node.trend ? val > 0 ? "bar pos" : "bar neg" : val > 0 ? "bar neg" : "bar pos"
                                    }).attr(categoryAxis, function(d, i) {
                                        return i * barWidth + margin + barSpacing / 2
                                    }).attr(barDimensionX, barWidth - barSpacing).transition().delay(function(d, i) {
                                        return 50 * i
                                    }).duration(250).ease("quad").attr(measureAxis, function(_ref15) {
                                        var totalAfter = _ref15.totalAfter,
                                            totalBefore = _ref15.totalBefore,
                                            val = _ref15.val;
                                        return measureAxisRectPosition(totalAfter, totalBefore, val)
                                    }).attr(barDimensionY, function(_ref16) {
                                        var val = _ref16.val;
                                        return min < 0 ? Math.abs(measureScale(val) - measureScale(0)) : Math.abs(measureScale(val))
                                    }), barEnter.append("text").attr(categoryAxis, function(d, i) {
                                        return i * barWidth + barWidth / 2 + margin + dataLabelTextVerticalAlign
                                    }).attr(measureAxis, function(_ref17) {
                                        var totalAfter = _ref17.totalAfter,
                                            totalBefore = _ref17.totalBefore,
                                            val = _ref17.val;
                                        return measureAxisTextPosition(totalAfter, totalBefore, val)
                                    }).attr("text-anchor", dataLabelTextAnchor).attr("class", "barLabel").text(function(_ref18) {
                                        var val = _ref18.val;
                                        return core.a.formatVal(val, node, self.props.scales[node.scale], null, null, self.props.negativeDisplay, self.props.zeroDisplay, self.props.thousandSeparator, self.props.decimalSeparator)
                                    }).each(function(_ref19) {
                                        var val = _ref19.val,
                                            totalAfter = _ref19.totalAfter,
                                            totalBefore = _ref19.totalBefore;
                                        core.a.overflowText(d3.select(this), dataLabelWidth(totalAfter, totalBefore, val))
                                    }), min < 0 && svg.append("svg:line").attr("x1", axisLineX1).attr("y1", axisLineY1).attr("x2", axisLineX2).attr("y2", axisLineY2).style("stroke", "#555");
                                    var xAxis = d3.svg.axis().scale(categoryScale).orient(categoryAxisOrient);
                                    categoryScale.domain(data.map(function(d) {
                                        return d.text
                                    })), svg.append("g").attr("class", "x axis").attr("transform", "translate(".concat(categoryAxisTranslateX, ",").concat(categoryAxisTranslateY, ")")).call(xAxis).selectAll("text").attr("transform", "rotate(".concat(axisLabelRotation, ")")).each(function() {
                                        core.a.overflowText(d3.select(this), 50)
                                    })
                                }
                        }
                    }
                }, {
                    key: "getWaterfallData",
                    value: function(node, field, simBaseVal, analysisType) {
                        var _this7 = this,
                            data = [],
                            v = node[field],
                            nodeDec = v.dec || 0;
                        if ("varianceBreakdown" === analysisType) {
                            var calcComps = node.calcComps || [],
                                total = v.tgt,
                                contribution = 0,
                                isSimulated = !1;
                            if (calcComps.length) {
                                var calcCompResult = [];
                                calcComps.forEach(function(d) {
                                    var calcNode = _this7.props.nodes[d],
                                        dec = calcNode.dec || 0;
                                    if (null != calcNode[field].tgt && calcNode[field].tgt.toFixed(dec) !== calcNode[field].act.toFixed(dec)) {
                                        calcNode.results.forEach(function(periodData) {
                                            periodData.__tgt = periodData.tgt, periodData.tgt = periodData.act
                                        });
                                        var tgtVal = core.a.calculateNode(node, _this7.TreeRef)[_this7.props.valDisp[field]];
                                        calcCompResult.push({
                                            name: d,
                                            variance: tgtVal.tgt - v.tgt,
                                            isSimulated: calcNode[field].base.toFixed(dec) !== calcNode[field].act.toFixed(dec)
                                        }), calcNode.results.forEach(function(periodData) {
                                            periodData.tgt = periodData.__tgt, delete periodData.__tgt
                                        })
                                    }
                                }), node = this.props.nodes[node.name], v = node[field], data.push({
                                    node: node,
                                    text: this.props.cVerTitle,
                                    val: v.tgt,
                                    totalBefore: 0,
                                    totalAfter: v.tgt,
                                    total: !0
                                }), calcCompResult.forEach(function(calcVar) {
                                    var calcNode = _this7.props.nodes[calcVar.name];
                                    0 !== (contribution = calcVar.variance) && (data.push({
                                        node: node,
                                        text: calcNode.title,
                                        val: contribution,
                                        totalBefore: total,
                                        totalAfter: total + contribution,
                                        calcCompNode: calcNode,
                                        isSimulated: calcVar.isSimulated
                                    }), total += +contribution)
                                }), v.base.toFixed(nodeDec) != v.act.toFixed(nodeDec) && (isSimulated = !0, simBaseVal[node.name] && (contribution = simBaseVal[node.name][node.name][field].simChangeAbs, data.push({
                                    node: node,
                                    text: "".concat(node.title, " Simulation"),
                                    val: contribution,
                                    totalBefore: total,
                                    totalAfter: total + contribution
                                }), total += +contribution)), total != v.act && 0 !== (contribution = parseFloat((v.act - total).toFixed(nodeDec))) && data.push({
                                    node: node,
                                    text: "Compounded Impact",
                                    descr: "Active simulations impacts <br/>multiplications or divisions simultaniously<br/>(i.e. rate * quantity).<br/>This results in additional compounded impacts.",
                                    val: contribution,
                                    totalBefore: total,
                                    totalAfter: total + contribution,
                                    total: !0
                                }), data.push({
                                    node: node,
                                    text: isSimulated ? "Simulation" : this.props.pVerTitle,
                                    val: v.act,
                                    totalBefore: 0,
                                    totalAfter: v.act,
                                    total: !0
                                })
                            }
                        } else {
                            var _total = v.base,
                                _contribution = 0;
                            data.push({
                                node: node,
                                text: this.props.pVerTitle,
                                val: v.base,
                                totalBefore: 0,
                                totalAfter: v.base,
                                total: !0
                            }), jquery.each(simBaseVal, function(k, sim) {
                                sim[node.name] && (_contribution = sim[node.name][field].act - v.base, data.push({
                                    node: sim[k],
                                    text: sim[k].title,
                                    val: _contribution,
                                    totalBefore: _total,
                                    totalAfter: _total + _contribution
                                }), _total += +_contribution)
                            }), _total != v.act && 0 !== (_contribution = parseFloat((v.act - _total).toFixed(nodeDec))) && data.push({
                                node: node,
                                text: "Compounded Impact",
                                descr: "Active simulations impacts <br/>multiplications or divisions simultaniously<br/>(i.e. rate * quantity).<br/>This results in additional compounded impacts.",
                                val: _contribution,
                                totalBefore: _total,
                                totalAfter: _total + _contribution,
                                total: !0
                            }), data.push({
                                node: node,
                                text: "Simulation",
                                val: v.act,
                                totalBefore: 0,
                                totalAfter: v.act,
                                total: !0
                            })
                        }
                        return data
                    }
                }, {
                    key: "getTooltipPosition",
                    value: function(parent, event, dim) {
                        var componentPos = parent.getBoundingClientRect(),
                            top = event.pageY - componentPos.top,
                            left = event.pageX - componentPos.left;
                        return {
                            top: top = "".concat(top - 10 < window.innerHeight - componentPos.top - dim.height ? top - 15 : top - dim.height + 5, "px"),
                            left: left = "".concat(left + 10 < window.innerWidth - componentPos.left - dim.width ? left + 5 : left - dim.width - 10, "px")
                        }
                    }
                }, {
                    key: "resizeDetailPage",
                    value: function() {
                        this.detailDiv && jquery(this.detailDiv).is(":visible") && (jquery(this.detailBgDiv).toggleClass("wide", jquery(this.detailBgDiv).innerWidth() > 1e3), this.props.tooltip.style("visibility", "hidden").style("top", 0).style("left", 0), this.dpState && (this.adjustChartHeight(), this.updateTrendAnalysis(this.dpState), this.updateImpactAnalysis(this.dpState)))
                    }
                }]) && detailPageService_defineProperties(Constructor.prototype, protoProps), staticProps && detailPageService_defineProperties(Constructor, staticProps), DetailPageService
            }();

            function _toConsumableArray(arr) {
                return function(arr) {
                    if (Array.isArray(arr)) {
                        for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];
                        return arr2
                    }
                }(arr) || function(iter) {
                    if (Symbol.iterator in Object(iter) || "[object Arguments]" === Object.prototype.toString.call(iter)) return Array.from(iter)
                }(arr) || function() {
                    throw new TypeError("Invalid attempt to spread non-iterable instance")
                }()
            }

            function simulationService_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function simulationService_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var simulationService_SimulationService = function() {
                function SimulationService(TreeRef) {
                    var _this = this;
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, SimulationService), simulationService_defineProperty(this, "TreeRef", void 0), simulationService_defineProperty(this, "props", void 0), simulationService_defineProperty(this, "inputBgDiv", void 0), simulationService_defineProperty(this, "inputDiv", void 0), simulationService_defineProperty(this, "inputHeaderDiv", void 0), simulationService_defineProperty(this, "inputTitleDiv", void 0), simulationService_defineProperty(this, "inputTableDiv", void 0), simulationService_defineProperty(this, "inputFooterDiv", void 0), simulationService_defineProperty(this, "inputCloseDiv", void 0), simulationService_defineProperty(this, "simToolTipMethodDetail", void 0), simulationService_defineProperty(this, "simDiv", void 0), simulationService_defineProperty(this, "inputChanged", void 0), simulationService_defineProperty(this, "simTooltip", void 0), simulationService_defineProperty(this, "isSimTooltipHidden", function() {
                        return "none" === ("Tree" === _this.props.visualization ? _this.simTooltip : _this.TreeRef.tableService.tooltipSvg).attr("display")
                    }), simulationService_defineProperty(this, "hideSimToolTip", function() {
                        "Tree" === _this.props.visualization ? _this.simTooltip.attr("display", "none") : _this.TreeRef.tableService.tooltipSvg.attr("display", "none")
                    }), this.TreeRef = TreeRef, this.props = TreeRef.props, this.init()
                }
                var Constructor, protoProps, staticProps;
                return Constructor = SimulationService, (protoProps = [{
                    key: "init",
                    value: function() {
                        var _this2 = this;
                        this.inputBgDiv = document.createElement("DIV"), jquery(this.inputBgDiv).addClass("d2VDTInputBg"), this.inputDiv = document.createElement("DIV"), jquery(this.inputDiv).addClass("d2VDTInput").appendTo(this.inputBgDiv), this.inputHeaderDiv = document.createElement("DIV"), jquery(this.inputHeaderDiv).addClass("d2VDTHeader").appendTo(this.inputDiv), this.inputTitleDiv = document.createElement("DIV"), jquery(this.inputTitleDiv).addClass("d2VDTTitle").appendTo(this.inputDiv), this.inputTableDiv = document.createElement("DIV"), jquery(this.inputTableDiv).addClass("d2VDTInputTable d2FixedTable").appendTo(this.inputDiv), this.inputFooterDiv = document.createElement("DIV"), jquery(this.inputFooterDiv).addClass("d2VDTFooter").appendTo(this.inputDiv), this.inputCloseDiv = document.createElement("DIV"), jquery(this.inputCloseDiv).addClass("d2VDTClose").appendTo(this.inputBgDiv), jquery(this.inputCloseDiv).click(function(e) {
                            e.stopPropagation(), _this2.TreeRef.props.tooltip.style("visibility", "hidden"), _this2.inputDiv && (jquery(_this2.TreeRef.props.popUpBgDiv).fadeOut(), jquery(_this2.inputBgDiv).detach()), _this2.inputChanged && (_this2.syncSimulation(), _this2.TreeRef.calculationService.calculate(), _this2.inputChanged = null)
                        })
                    }
                }, {
                    key: "clearCanvas",
                    value: function() {
                        this.simDiv && d3.select(this.simDiv).selectAll("*").remove()
                    }
                }, {
                    key: "syncSimulation",
                    value: function(simData, simDesc) {
                        var _this3 = this;
                        this.props.simMan = simData || this.props.simMan || {}, simData && Object.keys(simData).forEach(function(val) {
                            _this3.props.simVar[val] = _this3.props.simVar[val] || null
                        }), this.props.simVarInfo = [];
                        var defaultDescr = [];
                        jquery.each(this.props.simVar, function(key, d) {
                            var simVar = {
                                name: key,
                                value: d,
                                sMeth: _this3.props.simMeth[key] || "P",
                                manSim: _this3.props.simMan[key] || []
                            };
                            _this3.props.simVarInfo.push(simVar), _this3.addSimulationDescription(simVar, defaultDescr)
                        }), this.props.scenarios.forEach(function(scenario) {
                            scenario.name == _this3.props.activeScenario && (scenario.simVar = _this3.props.simVarInfo.slice(0), simDesc && defaultDescr.push(simDesc), scenario.defaultDescr = defaultDescr.join("\n"))
                        }), this.TreeRef.firePropertiesChanged(["scenarios", "selectedNode"]), this.TreeRef.fireEvent("onSimulation")
                    }
                }, {
                    key: "addSimulationDescription",
                    value: function(simVar, defaultDescr) {
                        var _this4 = this,
                            node = this.props.nodes[simVar.name] || {};
                        if (simVar.value) {
                            var value = node.enableEnumList ? node.enumList[simVar.value] : "P" === simVar.sMeth || "G" === simVar.sMeth ? core.a.formatPct(simVar.value, this.props.negativeDisplay, this.props.thousandSeparator, this.props.decimalSeparator) : core.a.formatVal(simVar.value, node, this.props.scales[node.scale], null, null, this.props.negativeDisplay, this.props.zeroDisplay, this.props.thousandSeparator, this.props.decimalSeparator);
                            defaultDescr.push("".concat(node.tPrefix + node.title, ": ").concat(value))
                        }
                        simVar.manSim.forEach(function(manVal, index) {
                            null != manVal && defaultDescr.push("".concat(node.tPrefix + node.title + "-" + node.results[index].text, ": ").concat(node.enableEnumList ? node.enumList[manVal] : core.a.formatVal(manVal, node, _this4.props.scales[node.scale], null, null, _this4.props.negativeDisplay, _this4.props.zeroDisplay, _this4.props.thousandSeparator, _this4.props.decimalSeparator)))
                        })
                    }
                }, {
                    key: "isSimSyncRequired",
                    value: function() {
                        var _this5 = this,
                            simSyncRequired = !1;
                        return jquery.each(["simVar", "simMan", "simMeth", "simDisp"], function(i, prop) {
                            jquery.each(_this5.props[prop] || {}, function(k, d) {
                                _this5.props.nodes[k] || (delete _this5.props[prop][k], simSyncRequired = !0)
                            })
                        }), simSyncRequired
                    }
                }, {
                    key: "getDepNodes",
                    value: function(k) {
                        var _this6 = this,
                            includeKey = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                            asObjects = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
                            d = this.props.nodes[k],
                            depNodes = [k];
                        if (!this.props.depNodes[k]) {
                            var calcLevel = d.calcLevel;
                            this.props.simLinkNodes[k] && (calcLevel = d3.min([d.calcLevel, d3.min(this.props.simLinkNodes[k], function(v) {
                                return _this6.props.nodes[v].calcLevel
                            })]), depNodes = depNodes.concat(this.props.simLinkNodes[k]));
                            for (var _loop = function(level) {
                                    jquery.each(_this6.props.nodes, function(key, d) {
                                        d.calcLevel == level && d.calcComps && !depNodes.includes(d.name) && d.calcComps.some(function(v) {
                                            return depNodes.includes(v)
                                        }) && depNodes.push(d.name)
                                    })
                                }, level = calcLevel; level <= this.props.calcLevel; level++) _loop(level);
                            depNodes.shift(), this.props.depNodes[k] = depNodes
                        }
                        return depNodes = (includeKey ? [k] : []).concat(this.props.depNodes[k] || []), asObjects ? depNodes.map(function(k) {
                            return _this6.props.nodes[k]
                        }) : depNodes
                    }
                }, {
                    key: "analyseSimulations",
                    value: function() {
                        var _this7 = this;
                        if (this.props.simBaseVal = {}, this.props.simVar) {
                            var depNodesAll = [];
                            jquery.each(this.props.simVar, function(k) {
                                depNodesAll = depNodesAll.concat(_this7.getDepNodes(k, !0))
                            });
                            var simValuesAll = {};
                            jquery.each(depNodesAll, function(k, d) {
                                if (!simValuesAll[d]) {
                                    simValuesAll[d] = _this7.props.nodes[d].results;
                                    var results = _this7.props.nodes[d].results = [];
                                    simValuesAll[d].forEach(function(pVal) {
                                        results.push({
                                            text: pVal.text,
                                            act: pVal.act,
                                            base: pVal.base,
                                            tgt: pVal.tgt
                                        })
                                    })
                                }
                            });
                            var currentSimMeth = core.a.clone(this.props.simMeth);
                            jquery.each(this.props.simMeth, function(k) {
                                _this7.props.simMeth[k] = "L"
                            });
                            var currentSimMan = core.a.clone(this.props.simMan);
                            this.props.simMan = {}, this.TreeRef.calculationService.calculate(depNodesAll);
                            var baseValuesAll = {};
                            jquery.each(depNodesAll, function(k, d) {
                                baseValuesAll[d] = core.a.clone(_this7.props.nodes[d])
                            }), jquery.each(this.props.simVar, function(k) {
                                var depNodes = [];
                                depNodes.push(k), _this7.props.depNodes[k] && depNodes.push.apply(depNodes, _toConsumableArray(_this7.props.depNodes[k])), _this7.props.simMeth[k] = currentSimMeth[k], currentSimMan[k] && (_this7.props.simMan[k] = currentSimMan[k].slice()), _this7.TreeRef.calculationService.calculate(depNodes);
                                var simBaseVal = _this7.props.simBaseVal[k] = {};
                                jquery.each(depNodes, function(i, d) {
                                    simBaseVal[d] = core.a.clone(_this7.props.nodes[d])
                                }), _this7.props.simMeth[k] = "L", _this7.props.simMan = {}, jquery.each(depNodes, function(i, d) {
                                    _this7.props.nodes[d].results = baseValuesAll[d].results
                                })
                            });
                            var valDisp = this.props.valDisp;
                            jquery.each(depNodesAll, function(i, d) {
                                var node = _this7.props.nodes[d];
                                node.results = simValuesAll[d], node.per = node.results[valDisp.per] || {}, node.total = node.results[valDisp.total] || {}, node.ptd = node.results[valDisp.ptd] || {}, node.sel = node.results[valDisp.sel] || {}
                            }), simValuesAll = null, this.props.simMeth = core.a.clone(currentSimMeth), this.props.simMan = core.a.clone(currentSimMan)
                        }
                    }
                }, {
                    key: "hasSim",
                    value: function(_ref) {
                        var name = _ref.name,
                            hasSim = !1;
                        return this.props.simBaseVal && jquery.each(this.props.simBaseVal, function(k, v) {
                            if (v[name]) return hasSim = !0
                        }), hasSim
                    }
                }, {
                    key: "nodeReset",
                    value: function(nodeName, leaveMeth, silent) {
                        var d = this.props.nodes[nodeName],
                            simName = d.simName;
                        (this.props.simVar[simName] || this.props.simMan[simName] || this.props.simMeth[simName]) && (this.TreeRef.rendererService.nodeHoverEnd(), delete this.props.simVar[simName], delete this.props.simMan[simName], delete this.props.simDisp[simName], leaveMeth ? this.props.simVar[simName] = null : delete this.props.simMeth[simName], silent || (this.props.selectedNode = {
                            name: d.name,
                            title: d.title
                        }, this.syncSimulation()))
                    }
                }, {
                    key: "addSimDetails",
                    value: function(container, tooltipContainer) {
                        var _this8 = this;
                        container = container || this.TreeRef.rendererService.treeDiv, tooltipContainer = tooltipContainer || this.TreeRef.rendererService.svg;
                        var self = this;
                        this.simTooltip = tooltipContainer.append("g").attr("class", "d2VDTTooltip").attr("display", "none"), this.simDiv || (this.simDiv = document.createElement("DIV"), jquery(this.simDiv).addClass("d2VDTSimCtr").css("order", "1").appendTo(container));
                        var simDiv = d3.select(this.simDiv);
                        simDiv.selectAll("*").remove();
                        var simEntries = d3.entries(this.props.simVar),
                            simEnter = simDiv.selectAll("div").data(simEntries).enter().append("div").attr("class", "d2VDTsimItem Active");
                        if (simEnter.append("div").html(function(_ref2) {
                                var key = _ref2.key,
                                    node = _this8.props.nodes[key] || {},
                                    primaryDisplayValue = _this8.props.primaryDisplayValue,
                                    value = node ? node[primaryDisplayValue].act : 0,
                                    prefix = "A" == node.aMeth && "per" != primaryDisplayValue ? "Avg. " : "",
                                    edit = _this8.props.simDisp[key].text;
                                return node ? "".concat(node.tPrefix + node.title, ": ").concat(value ? prefix + (node.enableEnumList ? function(value, node) {
                                    var enumValue = core.a.formatEnumVal(value, node);
                                    return enumValue.length > 3 && (enumValue[3] = enumValue[3].split("x")[0] + "x...", enumValue.length = 4), enumValue.join(", ") + " "
                                }(value, node) : core.a.formatVal(value, node, _this8.props.scales[node.scale], null, null, _this8.props.negativeDisplay, _this8.props.zeroDisplay, _this8.props.thousandSeparator, _this8.props.decimalSeparator)) : "").concat(edit ? '<span class="d2VDTEdit">'.concat(edit, "</span>   ") : "") : ""
                            }).on("click", function(_ref3) {
                                var key = _ref3.key;
                                d3.event.stopPropagation(), _this8.TreeRef.rendererService.showNode(key)
                            }), simEnter.append("div").attr("class", "d2VDTClose").attr("class", "delete").on("click", function(_ref4) {
                                var key = _ref4.key;
                                jquery(this).fadeOut(200, function() {
                                    self.nodeReset(key)
                                })
                            }), this.props.simVarInfo.length) {
                            simDiv.append("div").on("click", function() {
                                d3.event.stopPropagation(), _this8.renderEditInputs(d3.keys(_this8.props.simVar).map(function(k) {
                                    return k.substr(1)
                                }))
                            }).attr("class", "d2VDTsimItem").append("div").attr("class", "editInputs").text(" Edit "), this.props.simVarInfo.length > 1 && simDiv.append("div").on("click", function() {
                                jquery(this).fadeOut(200, function() {
                                    self.props.simVar = {}, self.props.simMan = {}, self.props.simMeth = {}, self.props.simDisp = {}, self.props.selectedNode = {}, self.syncSimulation()
                                })
                            }).attr("class", "d2VDTsimItem").append("div").attr("class", "delete").text(" Reset all ");
                            var simNotification = "";
                            jquery.each(this.props.simVarInfo, function(i, _ref5) {
                                var name = _ref5.name;
                                jquery.each((_this8.props.nodes[name] || {}).calcComps, function(i, d) {
                                    var c = _this8.props.nodes[d] || {};
                                    c.locked || "H" == c.style || (simNotification = "Simulation on calculated values. Change not transfered to lower levels.")
                                })
                            }), simNotification && simDiv.append("div").text(simNotification).attr("class", "d2VDTHint")
                        } else simDiv.append("div").text(this.props.hint).attr("class", "d2VDTHint")
                    }
                }, {
                    key: "showSimTooltip",
                    value: function(d, container, sim) {
                        var _this9 = this;
                        container = container || this.TreeRef.rendererService.svg;
                        var h = 15 * this.props.periodsMetadata.length + 60,
                            simTooltipWidth = this.props.simTooltipWidth;
                        this.simTooltip.selectAll("*").remove(), this.simTooltip.attr("display", "inherit"), "Tree" === this.props.visualization && this.simTooltip.attr("transform", "translate(".concat(d.y + 10, ",").concat(d.x - h / 2 + 20, ")")), this.simTooltip.append("rect").attr("width", simTooltipWidth).attr("height", h).style("stroke", "none").style("fill", "rgba(0,0,0,.5)"), this.simTooltip.append("text").attr("x", 5).attr("y", 22).attr("class", "d2VDTIcon").text("î"), this.simTooltip.append("rect").attr("x", 0).attr("y", 0).attr("width", 40).attr("height", 40).style("stroke", "none").style("fill", "transparent").style("cursor", "pointer").on("click", function() {
                            d3.event.stopPropagation(), _this9.renderEditInputs([d.name.substr(1)])
                        }), this.simTooltip.append("text").attr("x", simTooltipWidth - 20).attr("y", 22).attr("class", "d2VDTIcon").text("î¾"), this.simTooltip.append("rect").attr("x", simTooltipWidth - 40).attr("y", 5).attr("width", 40).attr("height", 40).style("stroke", "none").style("fill", "transparent").style("cursor", "pointer").on("click", function() {
                            d3.event.stopPropagation(), _this9.hideSimToolTip()
                        });
                        var simToolTipPeriods = this.simTooltip.append("g"),
                            perData = sim || core.a.calculateNode(d, this.TreeRef);
                        d.enableEnumList && (perData = perData.slice(0, this.props.periods));
                        var per = simToolTipPeriods.selectAll(".per").data(this.props.periods > 1 ? perData : [perData[1]]),
                            getEnumValue = function(value, node) {
                                var val = core.a.formatEnumVal(value, node).join(", ");
                                return val.length > 8 ? val.substring(0, 5) + "..." : val
                            },
                            perEnter = per.enter().append("g").attr("class", "per").style("fill", "#fff").style("font-size", "10px");
                        perEnter.append("text").attr("x", 10).attr("y", function(p, i) {
                            return 15 * i + 40
                        }).text(function(p, i) {
                            return _this9.props.periodsMetadata[i].text
                        }).each(function() {
                            core.a.overflowText(d3.select(this), simTooltipWidth - 110)
                        }), perEnter.append("text").attr("x", simTooltipWidth - 60).attr("y", function(d, i) {
                            return 15 * i + 40
                        }).attr("text-anchor", "end").text(function(_ref6) {
                            var base = _ref6.base;
                            return d.enableEnumList ? getEnumValue(base, d) : core.a.formatVal(base, d, _this9.props.scales[d.scale], "", "", _this9.props.negativeDisplay, _this9.props.zeroDisplay, _this9.props.thousandSeparator, _this9.props.decimalSeparator)
                        }).style("text-decoration", function(_ref7) {
                            return _ref7.act != _ref7.base ? "line-through" : "none"
                        }), perEnter.append("text").attr("x", simTooltipWidth - 10).attr("y", function(p, i) {
                            return 15 * i + 40
                        }).attr("text-anchor", "end").attr("class", "d2VDTEdit").append("tspan").attr("class", "d2VDTIcon").style("font-size", "10px").text(function(p, i) {
                            return (_this9.props.simMan[d.simName] || {})[i] ? "î¸" : ""
                        }).select(function() {
                            return this.parentNode
                        }).insert("tspan").text(function(_ref8) {
                            var act = _ref8.act;
                            return act != _ref8.base ? d.enableEnumList ? getEnumValue(act, d) : core.a.formatVal(act, d, _this9.props.scales[d.scale], "", "", _this9.props.negativeDisplay, _this9.props.zeroDisplay, _this9.props.thousandSeparator, _this9.props.decimalSeparator) : ""
                        }), this.simTooltip.append("rect").attr("x", 5).attr("y", h - 25).attr("width", this.props.simTooltipWidth - 10).attr("height", 20).style("stroke", "white").style("fill", "none");
                        var simToolTipMethodButton = this.simTooltip.append("g").style("cursor", "pointer").on("click", function() {
                            d3.event.stopPropagation(), _this9.simToolTipMethodDetail.style("display", "none" == _this9.simToolTipMethodDetail.style("display") ? "inherit" : "none")
                        });
                        simToolTipMethodButton.append("rect").attr("x", 5).attr("y", h - 25).attr("width", this.props.simTooltipWidth - 10).attr("height", 20).style("stroke", "white").style("stroke-width", ".5px").style("fill", "rgba(0,0,0,0)"), simToolTipMethodButton.append("text").attr("x", 10).attr("y", h - 11).attr("height", 20).attr("width", this.props.simTooltipWidth - 30).style("font-size", "11px").style("fill", "#fff").text(this.props.simMethods[this.props.simMeth[d.simName] || this.props.nodes[d.simName].sMeth].label), simToolTipMethodButton.append("path").attr("d", "m ".concat(this.props.simTooltipWidth - 20, " ").concat(h - 17, " l 4 3 l 4 -3")).style("fill", "none").style("stroke", "white").style("stroke-width", "1px").attr("class", "test"), this.simToolTipMethodDetail = this.simTooltip.append("g").style("cursor", "pointer").style("display", "none");
                        var simMethods = d.enableEnumList ? ["C", "M"].reduce(function(methods, key) {
                                return methods[key] = _this9.props.simMethods[key], methods
                            }, {}) : this.props.simMethods,
                            optionHeight = 28 * Object.keys(simMethods).length;
                        this.simToolTipMethodDetail.append("rect").attr("x", 5).attr("y", h - 25 - optionHeight).attr("width", this.props.simTooltipWidth - 10).attr("height", optionHeight).style("stroke", "white").style("stroke-width", ".5px").style("fill", "rgba(0,0,0,1)"), this.simToolTipMethodDetail.selectAll(".options").data(jquery.map(simMethods, function(v, k) {
                            return v.id = k, [v]
                        })).enter().append("g").attr("class", "options").style("fill", "#fff").style("font-size", "11px").attr("title", function(_ref9) {
                            return _ref9.title
                        }).on("click", function(_ref10) {
                            var id = _ref10.id;
                            d3.event.stopPropagation(), _this9.props.simMeth[d.simName] != id && (_this9.props.simMeth[d.simName] = id, _this9.nodeReset(d.name, _this9.props.simMeth[d.simName] != _this9.props.nodes[d.simName].sMeth)), _this9.showSimTooltip(d, container, sim)
                        }).append("text").attr("x", 10).attr("y", function(p, i) {
                            return h - 25 - optionHeight + 28 * i + 14 + 11 / 3
                        }).text(function(_ref11) {
                            return _ref11.label
                        })
                    }
                }, {
                    key: "realignInputDisplay",
                    value: function(simName, itemMap, colList) {
                        var _this10 = this,
                            depNodes = this.getDepNodes(simName, !0, !1),
                            $el = null;
                        this.TreeRef.calculationService.calculate(depNodes), jquery.each(depNodes, function(i, k) {
                            if (itemMap[k]) {
                                var d = _this10.props.nodes[k],
                                    isEnumNode = d.enableEnumList;
                                jquery.each(colList, function(i, _ref12) {
                                    var editable = _ref12.editable,
                                        col = _ref12.col;
                                    if (editable && ($el = jquery(isEnumNode ? 'select[data-col="'.concat(col, '"][data-name="').concat(k, '"]') : 'input[data-col="'.concat(col, '"][data-name="').concat(k, '"]'))).length) {
                                        var cell = _this10.getCellInfo(d, col);
                                        $el.val(cell.rounded), !isEnumNode && $el.next().html(cell.text), $el.parent().toggleClass("changed", cell.changed)
                                    }
                                }), $el = jquery('div.delete[data-name="'.concat(k, '"]')).toggleClass("hidden", !_this10.props.simVar[d.simName] && !(_this10.props.simMan[d.simName] || []).length)
                            }
                        })
                    }
                }, {
                    key: "getCellInfo",
                    value: function(d, col) {
                        if (!d) return {
                            text: ""
                        };
                        var simName = d.simName || "",
                            simMeth = this.props.simMeth[simName] || (this.props.nodes[simName] || {}).sMeth,
                            simVar = this.props.simVar[simName],
                            simMan = this.props.simMan[simName] || {},
                            isModel = "M" == col,
                            v = isModel ? simVar : ((d.results || {})[col] || {}).act || 0;
                        return {
                            val: v,
                            simMeth: simMeth,
                            rounded: d.enableEnumList ? v : core.a.roundValWithFormat(v, isModel && "C" != simMeth ? {
                                dec: 2
                            } : d, this.props.scales[d.scale], "", "", this.props.negativeDisplay, this.props.zeroDisplay, this.props.thousandSeparator, this.props.decimalSeparator),
                            text: d.enableEnumList ? null == d.enumList["N" + v] ? "" : d.enumList["N" + v] : core.a.formatVal(v, isModel && "C" != simMeth ? {
                                dec: 2
                            } : d, this.props.scales[d.scale], null, null, this.props.negativeDisplay, this.props.zeroDisplay, this.props.thousandSeparator, this.props.decimalSeparator),
                            changed: !(isModel && simVar || null == simMan[col])
                        }
                    }
                }, {
                    key: "renderEditInputs",
                    value: function(list) {
                        var _this11 = this;
                        jquery(this.inputBgDiv).appendTo(this.props.popUpBgDiv), this.inputChanged = !1;
                        var itemMap = {},
                            colList = [{
                                title: "Model",
                                col: "MT",
                                editable: !1
                            }, {
                                title: "Variation",
                                col: "M",
                                editable: !0
                            }].concat(this.props.periodsMetadata.slice(0, this.props.periods).map(function(v, i) {
                                return {
                                    title: v.text,
                                    col: i,
                                    editable: i >= _this11.props.PeriodColumn - 1 && i < _this11.props.PeriodToColumn
                                }
                            })),
                            rowList = list.map(function(v) {
                                var d = _this11.props.nodes["N".concat(v)];
                                return d ? (itemMap[d.name] = d, {
                                    type: "valueItem",
                                    d: d
                                }) : {
                                    type: "textItem",
                                    d: {
                                        title: v
                                    }
                                }
                            });
                        jquery(this.inputTitleDiv).html("Maintain inputs for simulation periods");
                        var html = ['<header class="d2FixedTable-header"> <table> <thead> <tr>', colList.map(function(_ref13) {
                            var title = _ref13.title;
                            return '<th><div class ="inputHeader">'.concat(title, "</div></th>")
                        }).join(""), "</tr> </thead> </table> </header>"].join("") + ['<aside class="d2FixedTable-sidebar"> <table> <tbody>', rowList.map(function(_ref14) {
                            var type = _ref14.type,
                                d = _ref14.d,
                                hasSim = "valueItem" == type && (_this11.props.simVar[d.simName] || (_this11.props.simMan[d.simName] || []).length);
                            return '<tr> <td><div class="'.concat(type, '">').concat(d.tPrefix || "").concat(d.title).concat(d.lSimNode ? " (linked sim.)" : "", '<div class="d2VDTIconButton delete').concat(hasSim && "DN" !== d.cMeth ? "" : " hidden", '" data-name="').concat(d.name, '"></div></div></td></tr>')
                        }).join(""), "</tbody> </table> </aside>"].join("") + ['<div class="d2FixedTable-body d2Scroll"> <table> <tbody>', rowList.map(function(r) {
                            var d = r.d || {};
                            return "DN" !== d.cMeth ? "<tr>".concat(colList.map(function(c) {
                                var cell = _this11.getCellInfo(r.d, c.col),
                                    editable = ("M" != c.col || "M" != (_this11.props.simMeth[d.simName] || d.sMeth)) && c.editable;
                                return "MT" == c.col && "valueItem" == r.type ? '<td><div class="'.concat(r.type, '"><span>').concat(_this11.props.simMethods[cell.simMeth].header, "</span></div></td>") : "valueItem" == r.type && editable ? '<td><div class="valueItem editable '.concat(cell.changed ? "changed" : "", '">\n\t\t\t\t\t\t\t\t').concat(d.enableEnumList ? '<select data-name="'.concat(d.name, '" data-col="').concat(c.col, '">\n\t\t\t\t\t\t\t\t\t\t').concat(Object.keys(d.enumList).map(function(key) {
                                    return "<option value=".concat(Number(key.substring(1)), " ").concat(cell.rounded == Number(key.substring(1)) ? "selected" : "", ">").concat(d.enumList[key], "</option>")
                                }).join(" "), "\n\t\t\t\t\t\t\t\t\t</select>") : '<input type="text" data-name="'.concat(d.name, '" data-col="').concat(c.col, '" value="').concat(cell.rounded, '"><span>').concat(cell.text, "</span>"), "                                            \n\t\t\t\t\t\t\t</div></td>") : '<td><div class="'.concat(r.type, '"><span>').concat(cell.text, "</span></div></td>")
                            }).join(""), "</tr>") : "<tr><td colspan=".concat(colList.length, '><div class="valueItem" style="width: auto;"><span>Dimensional node cannot be simulated from here<span></div></td></tr>')
                        }).join(""), "</tbody> </table> </div>"].join("");
                        jquery(this.inputTableDiv).html(html);
                        for (var sel = jquery(this.inputTableDiv).find('select[data-col="M"]'), i = 0, len = sel.length; i < len; i++) {
                            var el = sel[i],
                                k = el.dataset.name,
                                d = this.props.nodes[k],
                                cell = this.getCellInfo(d, "M");
                            el.value = cell.rounded
                        }
                        var self = this;
                        jquery(".d2VDTInputBg .delete").click(function(e) {
                            e.preventDefault();
                            var name = jquery(this).data("name"),
                                d = self.props.nodes[name];
                            self.inputChanged = !0, self.nodeReset(d.name, !1, !0), self.realignInputDisplay(d.simName, itemMap, colList)
                        }), jquery(".d2VDTInputBg select").change(function() {
                            var $el = jquery(this),
                                d = self.props.nodes[$el.data("name")],
                                simName = d.simName,
                                col = $el.data("col"),
                                isModel = "M" == col,
                                oldVal = isModel ? self.props.simVar[simName] : d.results[col].act,
                                v = Number($el.val());
                            oldVal != v && (self.inputChanged = !0, isModel ? self.props.simVar[simName] = v : (null == self.props.simVar[simName] && (self.props.simVar[simName] = null), null == self.props.simMan[simName] && (self.props.simMan[simName] = []), self.props.simMan[simName][col] = v), self.props.simMeth[simName] = "C", self.realignInputDisplay(simName, itemMap, colList))
                        }), jquery(".d2VDTInputBg input").change(function() {
                            var $el = jquery(this),
                                d = self.props.nodes[$el.data("name")],
                                simName = d.simName,
                                simMeth = self.props.simMeth[simName] || self.props.nodes[simName].sMeth || "P",
                                col = $el.data("col"),
                                isModel = "M" == col,
                                oldVal = isModel ? self.props.simVar[simName] : d.results[col].act,
                                originalVal = core.a.removeNumberFormat(this.value);
                            if (isNaN(originalVal)) {
                                var _cell = self.getCellInfo(d, col);
                                $el.val(_cell.rounded)
                            } else {
                                var v = isModel && "C" != simMeth ? originalVal : d.scale ? originalVal * self.props.scales[d.scale].div : originalVal;
                                v != oldVal && (self.inputChanged = !0, isModel ? (self.props.simVar[simName] = v, self.props.simMeth[simName] = simMeth) : (self.props.simVar[simName] || (self.props.simVar[simName] = null), self.props.simMan[simName] || (self.props.simMan[simName] = []), self.props.simMan[simName][col] = v), self.realignInputDisplay(simName, itemMap, colList))
                            }
                        }), core.a.fixedTable(this.inputTableDiv), core.a.attachScroll(jquery(".d2VDTInput .d2Scroll")), jquery(this.props.popUpBgDiv).fadeIn()
                    }
                }]) && simulationService_defineProperties(Constructor.prototype, protoProps), staticProps && simulationService_defineProperties(Constructor, staticProps), SimulationService
            }();

            function calculationService_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function calculationService_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var calculationService_CalculationService = function() {
                function CalculationService(TreeRef) {
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, CalculationService), calculationService_defineProperty(this, "TreeRef", void 0), calculationService_defineProperty(this, "props", void 0), this.TreeRef = TreeRef, this.props = TreeRef.props
                }
                var Constructor, protoProps, staticProps;
                return Constructor = CalculationService, (protoProps = [{
                    key: "calculate",
                    value: function(nodes) {
                        var _this = this,
                            startLevel = 1;
                        if (nodes) startLevel = d3.min(nodes, function(k) {
                            return _this.props.nodes[k].calcLevel
                        }), nodes = nodes.reduce(function(map, k) {
                            return map[k] = _this.props.nodes[k], map
                        }, {});
                        else {
                            nodes = this.props.nodes;
                            for (var i = 0; i < this.props.simVarInfo.length; i++) {
                                var simVarInfo = this.props.simVarInfo[i];
                                this.props.simVar[simVarInfo.name] = simVarInfo.value, this.props.simMeth[simVarInfo.name] = simVarInfo.sMeth
                            }
                        }
                        for (var _loop = function(level) {
                                jquery.each(nodes, function(key, d) {
                                    d.calcLevel == level && (_this.props.nodes[d.name].results = core.a.calculateNode(d, _this.TreeRef), _this.props.nodes[d.name].per = _this.props.nodes[d.name].results[_this.props.valDisp.per] || {}, _this.props.nodes[d.name].total = _this.props.nodes[d.name].results[_this.props.valDisp.total] || {}, _this.props.nodes[d.name].ptd = _this.props.nodes[d.name].results[_this.props.valDisp.ptd] || {}, _this.props.nodes[d.name].sel = _this.props.nodes[d.name].results[_this.props.valDisp.sel] || {})
                                })
                            }, level = startLevel; level <= this.props.calcLevel; level++) _loop(level);
                        jquery.each(this.props.nodes, function(key, d) {
                            (d.wAvgNode && _this.props.nodes[d.wAvgNode] && d.calcLevel <= _this.props.nodes[d.wAvgNode].calcLevel || "F" == d.aMeth) && (_this.props.nodes[d.name].results = core.a.calculateNode(d, _this.TreeRef), _this.props.nodes[d.name].total = _this.props.nodes[d.name].results[_this.props.valDisp.total], _this.props.nodes[d.name].ptd = _this.props.nodes[d.name].results[_this.props.valDisp.ptd], _this.props.nodes[d.name].sel = _this.props.nodes[d.name].results[_this.props.valDisp.sel])
                        }), this.props.simDisp = {};
                        var getEnumText = function(value, n) {
                            var enumVal = core.a.formatEnumVal(value, n);
                            return enumVal.length > 1 ? "Multiple" : enumVal[0] || []
                        };
                        jquery.each(this.props.simVar, function(k) {
                            var n = _this.props.nodes[k];
                            if (n) {
                                var simMan = (_this.props.simMan[k] || []).length,
                                    value = n.enableEnumList ? n.sel.act : simMan ? "S" == n.aMeth ? n.sel.act / (_this.props.PeriodToColumn - _this.props.PeriodColumn + 1) : n.sel.act : _this.props.simVar[k],
                                    method = simMan ? "M" : _this.props.simMeth[k],
                                    text = function() {
                                        switch (method) {
                                            case "C":
                                                return n.enableEnumList ? getEnumText(value, n) : core.a.formatVal(value, n, _this.props.scales[n.scale], "", "", _this.props.negativeDisplay, _this.props.zeroDisplay, _this.props.thousandSeparator, _this.props.decimalSeparator);
                                            case "M":
                                                return n.enableEnumList ? getEnumText(value, n) : "Avg ".concat(core.a.formatVal(value, n, _this.props.scales[n.scale], "", "", _this.props.negativeDisplay, _this.props.zeroDisplay, _this.props.thousandSeparator, _this.props.decimalSeparator));
                                            default:
                                                return "".concat(core.a.formatPct(value, _this.props.negativeDisplay, _this.props.thousandSeparator, _this.props.decimalSeparator)).concat("G" == method ? "â" : "")
                                        }
                                    }();
                                _this.props.simDisp[k] = {
                                    value: value,
                                    method: method,
                                    text: text
                                }
                            }
                        })
                    }
                }]) && calculationService_defineProperties(Constructor.prototype, protoProps), staticProps && calculationService_defineProperties(Constructor, staticProps), CalculationService
            }();

            function tableService_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function tableService_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var tableService_TableService = function() {
                function TableService(TreeRef) {
                    var _this = this;
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, TableService), tableService_defineProperty(this, "TreeRef", void 0), tableService_defineProperty(this, "props", void 0), tableService_defineProperty(this, "tableContainer", void 0), tableService_defineProperty(this, "tableHeaderContainer", void 0), tableService_defineProperty(this, "tableHeader", void 0), tableService_defineProperty(this, "tableHeaderOne", void 0), tableService_defineProperty(this, "tableHeaderTwo", void 0), tableService_defineProperty(this, "tableContent", void 0), tableService_defineProperty(this, "tableContentInner", void 0), tableService_defineProperty(this, "tableTitleCol", void 0), tableService_defineProperty(this, "tableContentCol", void 0), tableService_defineProperty(this, "titleTextContainer", void 0), tableService_defineProperty(this, "searchcontainer", void 0), tableService_defineProperty(this, "searchCell", void 0), tableService_defineProperty(this, "childCount", void 0), tableService_defineProperty(this, "topNodeLevel", void 0), tableService_defineProperty(this, "slideActive", void 0), tableService_defineProperty(this, "tooltipSvg", void 0), tableService_defineProperty(this, "tooltipGroup", void 0), tableService_defineProperty(this, "leftScrollPos", void 0), tableService_defineProperty(this, "topScrollPos", void 0), tableService_defineProperty(this, "collapseTableNode", function(node, isRecursive) {
                        node._children = node.children || node._children, node.children = isRecursive ? node.children : null, node._children.forEach(function(child) {
                            child.children && child.children.length > 0 && _this.collapseTableNode(child, !0)
                        }), _this.renderTable()
                    }), tableService_defineProperty(this, "getFormattedValue", function(value, d) {
                        if (d.enableEnumList) {
                            var val = core.a.formatEnumVal(value, d);
                            return val.length > 1 ? '<span class="detail-d2VDTEnumValue">'.concat(val[0], "...</span>") : '<span class="detail-d2VDTEnumValue">'.concat(val[0], "</span>")
                        }
                        return core.a.formatLargeValue(value, d, _this.props.scales[d.scale], _this.props.negativeDisplay, _this.props.zeroDisplay, _this.props.thousandSeparator, _this.props.decimalSeparator)
                    }), tableService_defineProperty(this, "handleScroll", function() {
                        _this.leftScrollPos = _this.tableContent.node().scrollLeft, _this.topScrollPos = _this.tableContent.node().scrollTop, _this.leftScrollPos >= 0 && (_this.tableHeaderContainer.style("left", "-".concat(_this.leftScrollPos, "px")), _this.tableHeaderContainer.select(".driverTitle").style("left", "".concat(_this.leftScrollPos, "px")), _this.tableContent.selectAll(".nodeTitleCol").style("left", "".concat(_this.leftScrollPos, "px"))), 0 !== _this.leftScrollPos ? (_this.tableHeaderContainer.selectAll(".driverTitle>.tableRow").classed("freezeBorder", !0), _this.tableTitleCol.selectAll(".tableCell").classed("freezeBorder", !0)) : (_this.tableHeaderContainer.selectAll(".driverTitle>.tableRow").classed("freezeBorder", !1), _this.tableTitleCol.selectAll(".tableCell").classed("freezeBorder", !1))
                    }), this.TreeRef = TreeRef, this.props = TreeRef.props, this.init()
                }
                var Constructor, protoProps, staticProps;
                return Constructor = TableService, (protoProps = [{
                    key: "init",
                    value: function() {
                        var _this2 = this;
                        this.tableContainer = d3.select(this.props.container[0]).insert("div", ":first-child"), this.tableContainer.classed("VDTTable", !0).style("display", function() {
                            return "Table" === _this2.props.visualization ? null : "none"
                        }), this.tableHeaderContainer = this.tableContainer.append("div").attr("class", "tableHeader animateTable").append("div").classed("tableRow", !0), this.tableHeader = this.tableHeaderContainer.append("div").classed("tableCell", !0).classed("tableContentHeader", !0);
                        var trendTitle = this.tableHeaderContainer.append("div").classed("tableCell", !0).classed("trendTitle", !0),
                            driverTitleRow = this.tableHeaderContainer.append("div").classed("tableCell", !0).classed("driverTitle", !0).append("div").classed("tableRow", !0);
                        driverTitleRow.append("div").classed("tableCell", !0).classed("compressed", !0).append("div").classed("cellContent", !0), this.titleTextContainer = driverTitleRow.append("div").classed("tableCell", !0).append("div");
                        var trendTitleRow = trendTitle.append("div").classed("tableRow", !0);
                        trendTitleRow.append("div").classed("tableCell", !0).classed("compressed", !0).append("div").classed("cellContent", !0), trendTitleRow.append("div").classed("tableCell", !0).append("div").classed("cellContent", !0).classed("trendTitleText", !0).append("span").text("Trend"), this.tableContent = this.tableContainer.append("div").attr("class", "tableContent animateTable"), this.tableContent.on("scroll", this.handleScroll), this.tooltipSvg = this.tableContainer.append("svg").attr("width", 0).attr("height", 0).classed("tableSimTooltip", !0)
                    }
                }, {
                    key: "renderTable",
                    value: function() {
                        var _this3 = this;
                        this.tableContainer || this.init();
                        var self = this;
                        this.topNodeLevel = this.props.root.level;
                        var tableData = this.transformData(),
                            primary = this.props.valueDisp.primary.key,
                            nodeStatus = this.props.nodeStatus;
                        this.tableContentInner || (this.tableContentInner = this.tableContent.append("div").classed("tableRow", !0), this.tableContentCol = this.tableContentInner.append("div").classed("nodeContentCol", !0).classed("tableCell", !0), this.tableTitleCol = this.tableContentInner.append("div").classed("nodeTitleCol", !0).classed("tableCell", !0)), this.tooltipSvg.selectAll("*").remove();
                        var sel = this.tableTitleCol.selectAll("div.tableRow").data(tableData, function(d) {
                                return d.id || (d.id = ++_this3.TreeRef.rendererService.nodeIndex)
                            }),
                            rowEnterSel = sel.enter().append("div").classed("tableRow", !0);
                        rowEnterSel.on("mouseenter", function() {
                            d3.selectAll('[data-id="'.concat(d3.select(this).attr("data-id"), '"]')).classed("hover", !0)
                        }).on("mouseleave", function() {
                            d3.selectAll('[data-id="'.concat(d3.select(this).attr("data-id"), '"]')).classed("hover", !1)
                        }).on("click", function() {
                            d3.selectAll(".highlight").classed("highlight", !1), d3.selectAll('[data-id="'.concat(d3.select(this).attr("data-id"), '"]')).classed("highlight", !0)
                        });
                        var cellContent = rowEnterSel.append("div").classed("tableCell", !0).classed("nodeTitle", !0).append("div").classed("cellContent", !0).style("margin-left", function(node) {
                            return "".concat(30 * (node.level - _this3.topNodeLevel) + 10, "px")
                        });
                        cellContent.append("div").classed("nodeToggleIcon", !0).on("click", function(d) {
                            return d._children ? _this3.expandTableNode(d) : _this3.collapseTableNode(d)
                        });
                        var title = cellContent.append("div").classed("nodeTitleText", !0);
                        title.append("div").classed("titleText", !0).on("click", this.TreeRef.rendererService.nodeClick).on("mouseover", this.TreeRef.rendererService.nodeHover), title.append("div").filter(function(d) {
                            return d.linkNode
                        }).classed("linkIcon", !0).text("î").on("click", function(d) {
                            return _this3.TreeRef.rendererService.showNode(d.linkNode)
                        }), title.filter(function(d) {
                            return d.children || d._children
                        }).append("div").classed("childCount", !0).text(function(d) {
                            return d.childCount
                        }), sel.selectAll(".titleText").text(function(d) {
                            return d.title
                        }), this.props.dispChildCount && !this.childCount && (sel.selectAll(".childCount").remove(), this.childCount = sel.selectAll(".nodeTitleText").filter(function(d) {
                            return d.children || d._children
                        }).append("div").classed("childCount", !0)), this.props.enableNodeSearch && !this.searchCell && (this.searchCell = this.titleTextContainer.classed("driverTitleText", !1).html("").append("div").classed("cellContent", !0), this.searchcontainer = this.searchCell.append("div").classed("searchContainer", !0), this.searchcontainer.append("input").classed("searchInput", !0).attr("id", "nodeSearch").attr("type", "text").attr("placeholder", "Search")), !this.props.enableNodeSearch && this.searchCell && (this.searchCell.remove(), this.searchCell = null, this.titleTextContainer.classed("driverTitleText", !0).append("div").classed("cellContent", !0).text("Title")), this.childCount = sel.selectAll(".childCount").text(function(d) {
                            return d.childCount
                        }).classed("hidden", function(d) {
                            return !!d.children
                        }), !this.props.dispChildCount && this.childCount && (this.childCount.remove(), this.childCount = null), sel.selectAll(".nodeToggleIcon").classed("vHidden", function(d) {
                            return !(d._children || d.children)
                        }), sel.attr("data-id", function(d) {
                            return d.name
                        }).classed("expanded", function(node) {
                            return !(node.isResult || !node.children)
                        }).classed("derived", function(node) {
                            return "D" === node.style
                        }), sel.selectAll(".nodeTitle .cellContent").style("margin-left", function(node) {
                            return "".concat(30 * (node.level - _this3.topNodeLevel) + 10, "px")
                        }), sel.exit().remove(), sel.order();
                        var contentRowSel = this.tableContentCol.selectAll("div.tableRow").data(tableData, function(d) {
                                return d.name
                            }),
                            contentRowEnterSel = contentRowSel.enter().append("div").classed("tableRow", !0);
                        contentRowEnterSel.on("mouseenter", function() {
                            d3.selectAll('[data-id="'.concat(d3.select(this).attr("data-id"), '"]')).classed("hover", !0)
                        }).on("mouseleave", function() {
                            d3.selectAll('[data-id="'.concat(d3.select(this).attr("data-id"), '"]')).classed("hover", !1)
                        }).on("click", function() {
                            d3.selectAll(".highlight").classed("highlight", !1), d3.selectAll('[data-id="'.concat(d3.select(this).attr("data-id"), '"]')).classed("highlight", !0)
                        });
                        var trendEnterSel = contentRowEnterSel.append("div").classed("tableCell", !0).classed("trend", !0);
                        trendEnterSel.filter(function(node) {
                            return !node.locked
                        }).on("mouseenter", function() {
                            var row = self.getRowElement(this);
                            d3.select(row).select(".chartContainer").style("display", "none"), d3.select(row).select(".sliderContainer").style("display", "flex")
                        }).on("mouseleave", function() {
                            var row = self.getRowElement(this);
                            d3.select(row).select(".chartContainer").style("display", null), d3.select(row).select(".sliderContainer").style("display", null)
                        }), trendEnterSel.append("div").classed("trendStatus", !0), this.renderTrendLine(trendEnterSel, contentRowSel), this.renderSlider(trendEnterSel, contentRowSel), contentRowSel.attr("data-id", function(d) {
                            return d.name
                        }), contentRowSel.select(".trendStatus").classed("Red", function(d) {
                            return "Red" === (d[primary] || {})["I" === nodeStatus ? "simChangeStatus" : "status"]
                        }).classed("Amber", function(d) {
                            return "Amber" === (d[primary] || {})["I" === nodeStatus ? "simChangeStatus" : "status"]
                        }).classed("Green", function(d) {
                            return "Green" === (d[primary] || {})["I" === nodeStatus ? "simChangeStatus" : "status"]
                        }), contentRowSel.exit().remove(), contentRowSel.order();
                        var colSel = contentRowSel.selectAll("div.tableCell:not(.trend)").data(function(d) {
                            return _this3.getRowData(d)
                        });
                        colSel.enter().append("div").classed("tableCell", !0).append("div").classed("cellContent", !0).html(function(d) {
                            return d.value
                        }), colSel.select(".cellContent").html(function(d) {
                            return d.value
                        }), colSel.attr("class", function(d) {
                            var className = this.className;
                            return d.classList.forEach(function(c) {
                                className.includes(c) && (className = className.replace(new RegExp("\\b" + c + "\\b", "g"), ""))
                            }), className = (className = className.replace("primary", "")).replace("secondary", ""), "".concat(className.trim(), " ").concat(d.type, " ").concat(d.class)
                        }), colSel.exit().remove(), colSel.order(), this.TreeRef.simulationService.addSimDetails(this.tableContainer.node(), this.tooltipSvg), this.tooltipSvg.attr("display", "none"), this.updateHeader(), this.alignTable(), this.TreeRef.rendererService.createSearchInstance(), setTimeout(function() {
                            _this3.TreeRef.eventService.publish("treeRendered", null)
                        }, this.props.duration)
                    }
                }, {
                    key: "expandTableNode",
                    value: function(node) {
                        node.children = node.children || node._children, node._children = null, this.renderTable()
                    }
                }, {
                    key: "getRowData",
                    value: function(node) {
                        var _this4 = this,
                            getFormattedValue = this.getFormattedValue,
                            enableSecondary = "F" === this.props.tableStyle && 1 !== this.props.periods,
                            classList = ["act", "tgt", "varAbs", "varPct", "simChangePct", "base", "origVarAbs"],
                            dispValues = ["primary"],
                            data = [];
                        return enableSecondary && dispValues.push("secondary"), dispValues.forEach(function(type) {
                            var typeKey = _this4.props.valueDisp[type].key;
                            classList.forEach(function(c) {
                                if ((_this4.props.nodeVar || !["varPct", "varAbs", "origVarAbs"].includes(c)) && !(0 === Object.keys(_this4.props.simVar).length && ["simChangePct", "base", "origVarAbs"].includes(c) || _this4.props.singleSeriesTable && ["tgt", "varPct", "varAbs", "origVarAbs"].includes(c) || "M" === _this4.props.tableStyle && ["varPct", "varAbs", "origVarAbs"].includes(c))) {
                                    var v = node[typeKey],
                                        value = ["varPct", "simChangePct"].includes(c) ? core.a.formatPct(v[c], _this4.props.negativeDisplay, _this4.props.thousandSeparator, _this4.props.decimalSeparator) : getFormattedValue(v[c], node);
                                    data.push({
                                        type: type,
                                        class: c,
                                        classList: classList,
                                        value: value
                                    })
                                }
                            })
                        }), data
                    }
                }, {
                    key: "transformData",
                    value: function() {
                        var tableData = [];
                        return function recursiveloop(nodes) {
                            nodes && nodes.forEach(function(node) {
                                tableData.push(node), node.children && recursiveloop(node.children)
                            })
                        }([this.props.root]), tableData
                    }
                }, {
                    key: "updateHeader",
                    value: function() {
                        var _this5 = this,
                            primary = this.props.valueDisp.primary.key,
                            secondary = this.props.valueDisp.secondary.key,
                            primaryVal = this.props.root[primary],
                            secondaryVal = this.props.root[secondary],
                            enableSecondary = "F" === this.props.tableStyle && 1 !== this.props.periods,
                            hasSimulation = 0 !== Object.keys(this.props.simVar).length,
                            fields = [{
                                key: "act",
                                text: "".concat(hasSimulation ? "Sim." : "", " ").concat(this.props.pVerTitle)
                            }, {
                                key: "tgt",
                                text: this.props.cVerTitle
                            }, {
                                key: "varAbs",
                                text: "Var"
                            }, {
                                key: "varPct",
                                text: "Var %"
                            }, {
                                key: "simChangePct",
                                text: "Sim. Impact"
                            }, {
                                key: "base",
                                text: "Orig. ".concat(this.props.pVerTitle)
                            }, {
                                key: "origVarAbs",
                                text: "Orig. Var"
                            }],
                            dispValues = ["primary"],
                            headerFields = [];
                        enableSecondary && dispValues.push("secondary"), dispValues.forEach(function(type) {
                            fields.forEach(function(f) {
                                var key = f.key,
                                    text = f.text;
                                !_this5.props.nodeVar && ["varPct", "varAbs", "origVarAbs"].includes(key) || 0 === Object.keys(_this5.props.simVar).length && ["simChangePct", "base", "origVarAbs"].includes(key) || _this5.props.singleSeriesTable && ["tgt", "varPct", "varAbs", "origVarAbs"].includes(key) || "M" === _this5.props.tableStyle && ["varPct", "varAbs", "origVarAbs"].includes(key) || headerFields.push({
                                    type: type,
                                    text: text
                                })
                            })
                        });
                        var headerTitles = [{
                            type: "primary",
                            text: "".concat(primaryVal.text)
                        }];
                        "F" === this.props.tableStyle && headerTitles.push({
                            type: "secondary",
                            text: "".concat(secondaryVal.text)
                        }), this.tableHeaderOne || (this.tableHeaderOne = this.tableHeader.append("div").classed("tableRow", !0).classed("tableHeaderOne", !0));
                        var selOne = this.tableHeaderOne.selectAll("div.tableCell").data(headerTitles, function(d) {
                            return d.text
                        });
                        selOne.enter().append("div").classed("tableCell", !0).classed("compressed", !0).classed("primary", function(d) {
                            return "primary" === d.type
                        }).classed("secondary", function(d) {
                            return "secondary" === d.type
                        }).append("div").classed("cellContent", !0).text(function(d) {
                            return d.text
                        }), selOne.classed("primary", function(d) {
                            return "primary" === d.type
                        }).classed("secondary", function(d) {
                            return "secondary" === d.type
                        }), selOne.selectAll(".cellContent").text(function(d) {
                            return d.text
                        }), selOne.exit().remove(), selOne.order(), this.tableHeaderTwo || (this.tableHeaderTwo = this.tableHeader.append("div").classed("tableRow", !0).classed("tableHeaderTwo", !0));
                        var selTwo = this.tableHeaderTwo.selectAll("div.tableCell").data(headerFields, function(d) {
                            return "".concat(d.type, "_").concat(d.text)
                        });
                        selTwo.enter().append("div").classed("tableCell", !0).classed("primary", function(d) {
                            return "primary" === d.type
                        }).classed("secondary", function(d) {
                            return "secondary" === d.type
                        }).append("div").classed("cellContent", !0).text(function(d) {
                            return d.text
                        }), selTwo.selectAll(".cellContent").text(function(d) {
                            return d.text
                        }), selTwo.exit().remove(), selTwo.order()
                    }
                }, {
                    key: "renderTrendLine",
                    value: function(enterSelection, updateSelection) {
                        var _this6 = this,
                            chartContainer = enterSelection.append("div").classed("chartContainer", !0),
                            getLine = function(d, type) {
                                var v = d.results[_this6.props.periods];
                                if ("act" !== type || v.act != v.base) {
                                    var results = d.results.filter(function(period) {
                                        return _this6.props.periodsLabels.includes(period.text.trim())
                                    });
                                    results = results.map(function(period) {
                                        return period[type]
                                    });
                                    var min = d.results[0].min,
                                        max = d.results[0].max,
                                        x = d3.scale.linear().domain([0, results.length]).range([0, 150]),
                                        y = d3.scale.linear().domain([min, max]).range([25, 5]);
                                    return d3.svg.line().interpolate("monotone").x(function(d, i) {
                                        return x(i)
                                    }).y(function(d) {
                                        return y(d)
                                    })(results)
                                }
                            },
                            setStroke = function(d) {
                                var v = d.results[_this6.props.periods];
                                return v.act != v.base ? "rgb(46, 138, 184)" : "rgb(124, 124, 124)"
                            },
                            setStrokeDash = function(d) {
                                var v = d.results[_this6.props.periods];
                                return v.act != v.base ? "5,5" : null
                            },
                            graph = chartContainer.append("svg:svg").attr("width", "".concat(150, "px")).attr("height", "".concat(25, "px"));
                        graph.append("svg:path").classed("base", !0).attr("d", function(d) {
                            return getLine(d, "base")
                        }).attr("fill", "none").attr("stroke", setStroke).attr("stroke-dasharray", setStrokeDash).attr("stroke-width", "0.5"), updateSelection.selectAll("svg>path.base").attr("d", function(d) {
                            return getLine(d, "base")
                        }).attr("stroke", setStroke).attr("stroke-dasharray", setStrokeDash), graph.append("svg:path").classed("act", !0).attr("d", function(d) {
                            return getLine(d, "act")
                        }).attr("fill", "none").attr("stroke", "rgb(46, 138, 184)").attr("stroke-width", "0.5"), updateSelection.selectAll("svg>path.act").attr("d", function(d) {
                            return getLine(d, "act")
                        })
                    }
                }, {
                    key: "renderSlider",
                    value: function(enterSelection, updateSelection) {
                        var _this7 = this,
                            self = this,
                            negDisp = self.props.negativeDisplay,
                            thouSep = self.props.thousandSeparator,
                            decSep = self.props.decimalSeparator,
                            tableSliderX = d3.scale.linear().domain([-100, 100]).range([-15, 80]).clamp(!0),
                            getsimVar = function(d) {
                                var simMeth = self.props.simMeth[d.simName],
                                    simVal = self.props.simVar[d.simName],
                                    change = simVal ? "C" == simMeth ? 100 * (simVal / d.per.base - 1) : simVal : 0;
                                return 0 === change ? "C" == simMeth ? change : "" : "C" == simMeth ? simVal : core.a.formatPct(change, negDisp, thouSep, decSep)
                            },
                            sliderContainer = enterSelection.filter(function(d) {
                                return !d.locked
                            }).append("div").classed("sliderContainer", !0);
                        sliderContainer.append("div").classed("simDeleteIcon", !0).on("click", function(d) {
                            _this7.TreeRef.simulationService.nodeReset(d.name)
                        });
                        var sliderGroup = sliderContainer.filter(function(d) {
                            var sMeth = d.sMeth;
                            return _this7.props.simMeth[d.name] && (sMeth = _this7.props.simMeth[d.name]), "M" !== sMeth
                        }).append("div").classed("sliderGroup", !0);
                        sliderGroup.append("div").classed("sliderTray", !0);
                        sliderGroup.append("div").classed("sliderMiddle", !0), sliderGroup.append("div").classed("sliderHandleIconWrap", !0).append("div").classed("sliderHandleIcon", !0), sliderGroup.call(d3.behavior.drag().on("dragstart", function() {
                            var evt = d3.event;
                            evt.sourceEvent.stopPropagation(), evt.sourceEvent.preventDefault(), d3.select(this).select(".sliderHandleIconWrap").classed("active", !0)
                        }).on("drag", function(d) {
                            var evt = d3.event;
                            evt.sourceEvent.stopPropagation(), evt.sourceEvent.preventDefault(), self.slideActive = !0;
                            var simName = d.linkNode ? d.name : d.simName;
                            self.props.simMeth[simName] = self.props.simMeth[simName] || d.sMeth, self.props.simVar[simName] = self.props.simVar[simName] || ("C" == self.props.simMeth[simName] ? d.per.base : 0);
                            var pctMeth = "C" != self.props.simMeth[simName],
                                varPct = pctMeth ? self.props.simVar[simName] : (self.props.simVar[simName] / d.per.base - 1) * (d.per.base < 0 ? -100 : 100);
                            varPct = tableSliderX.invert(tableSliderX(varPct) + evt.dx);
                            var constantChange = d.per.base * varPct / (d.per.base < 0 ? -100 : 100);
                            self.props.simVar[simName] = pctMeth ? varPct.toFixed(2) : (d.per.base + constantChange).toFixed(d.dec);
                            var sim = core.a.calculateNode(d, self.TreeRef),
                                v = sim[self.props.valDisp[self.props.valueDisp.primary.key]];
                            d3.select(this).select(".sliderHandleIconWrap").style("left", "".concat(tableSliderX(varPct), "px"));
                            var row = d3.select(self.getRowElement(this));
                            row.select(".simVar").text(getsimVar), row.select(".primary.act .cellContent").html(self.getFormattedValue(v.act, d)), row.select(".primary.actVar .cellContent").html(self.getFormattedValue(v.varAbs, d)), row.select(".primary.varP .cellContent").html(core.a.formatPct(v.varPct, negDisp, thouSep, decSep)), row.select(".primary.impact .cellContent").html("".concat(v.simChangePct * (v.simChangePct < 0 ? -1 : 1), "% <br /> ").concat(v.simChangeText)), self.showSimTooltip(d, row.select(".simTooltipIcon").node(), sim)
                        }).on("dragend", function(d) {
                            d3.select(this).select(".sliderHandleIconWrap").classed("active", !1), d.linkNode && (self.props.simVar[d.simName] = self.props.simVar[d.name], self.props.simMeth[d.simName] = self.props.simMeth[d.name], delete self.props.simVar[d.name], delete self.props.simMeth[d.name]), self.slideActive = null, self.props.selectedNode = {
                                name: d.name,
                                title: d.title
                            }, self.TreeRef.simulationService.syncSimulation()
                        })), updateSelection.selectAll(".sliderHandleIconWrap").style("left", function(d) {
                            var left, simVal = _this7.props.simVar[d.simName],
                                simMeth = _this7.props.simMeth[d.simName];
                            if (simVal) {
                                if ("C" === simMeth) return simVal / d.per.base - 100;
                                left = tableSliderX(simVal)
                            } else left = tableSliderX(0);
                            return "".concat(left, "px")
                        }), sliderContainer.filter(function(d) {
                            var sMeth = d.sMeth;
                            return _this7.props.simMeth[d.name] && (sMeth = _this7.props.simMeth[d.name]), "M" === sMeth
                        }).append("div").classed("manualEdit", !0).text("edit").on("click", function(d) {
                            return _this7.TreeRef.simulationService.renderEditInputs([d.name.substr(1)])
                        }), sliderContainer.append("div").classed("simTooltipIcon", !0).on("click", function(d) {
                            _this7.showSimTooltip(d, event.target)
                        }), enterSelection.filter(function(d) {
                            return !d.locked
                        }).append("div").classed("simVar", !0), updateSelection.selectAll(".simVar").classed("simulated", function(d) {
                            return !!_this7.props.simVar[d.simName]
                        }).text(function(_ref) {
                            var simName = _ref.simName;
                            return (_this7.props.simDisp[simName] || {}).text || ""
                        })
                    }
                }, {
                    key: "showSimTooltip",
                    value: function(d, tooltipIcon, sim) {
                        this.tooltipSvg.attr("display", "inherit"), this.TreeRef.simulationService.showSimTooltip(d, this.tooltipSvg, sim);
                        var _ref2 = tooltipIcon.getBoundingClientRect(),
                            left = _ref2.left,
                            top = _ref2.top,
                            _ref3 = this.tableContainer.node().getBoundingClientRect(),
                            cX = _ref3.left,
                            cY = _ref3.top,
                            cHeight = _ref3.height,
                            dimensions = this.tooltipSvg.node().getBBox(),
                            transformX = left - cX + 70,
                            transformY = top - cY - dimensions.height / 2;
                        dimensions.height + transformY > cHeight && (transformY = cHeight - dimensions.height - 10), this.tooltipSvg.attr("width", dimensions.width).attr("height", dimensions.height).style("transform", "translate(".concat(transformX, "px, ").concat(transformY, "px)"))
                    }
                }, {
                    key: "alignTable",
                    value: function() {
                        this.tableTitleCol.style("width", null);
                        var nodeTitleWidth = this.tableTitleCol.node().clientWidth;
                        this.tableHeaderContainer.select(".driverTitle").style("width", "".concat(nodeTitleWidth + 10, "px")), this.tableContent.select(".nodeTitleCol").style("width", "".concat(nodeTitleWidth + 10, "px")), this.tableContent.node().scrollTop = this.topScrollPos, this.tableContent.node().scrollLeft = this.leftScrollPos
                    }
                }, {
                    key: "highlightNode",
                    value: function(name) {
                        var scrollTop, row = this.tableContent.select('[data-id="'.concat(name, '"]')),
                            titeRow = this.tableTitleCol.select('[data-id="'.concat(name, '"]'));
                        row.empty() || (this.topScrollPos = row.node().offsetTop, this.tableContent.transition().duration(500).tween("scrollTween", (scrollTop = this.topScrollPos, function() {
                            var i = d3.interpolateNumber(this.scrollTop, scrollTop);
                            return function(t) {
                                this.scrollTop = i(t)
                            }
                        }))), d3.selectAll(".highlight").classed("highlight", !1), row.classed("highlight", !0), titeRow.classed("highlight", !0)
                    }
                }, {
                    key: "getRowElement",
                    value: function(element) {
                        for (var parent = element; !parent.className.includes("tableRow");) parent = parent.parentElement;
                        return parent
                    }
                }, {
                    key: "animateTable",
                    value: function() {
                        this.tableContainer && this.tableContainer.selectAll(".animateTable").style("opacity", 0).transition().duration(this.props.duration).ease("linear").style("opacity", 1)
                    }
                }, {
                    key: "destroy",
                    value: function() {
                        this.tableContainer && this.tableContainer.remove(), d3.select(".d2VDTSimCtr").remove(), this.TreeRef.simulationService.simTooltip = null, this.TreeRef.simulationService.simDiv = null, this.tooltipGroup = null, this.tableContainer = null, this.tableHeader = null, this.tableHeaderOne = null, this.tableHeaderTwo = null, this.tableContent = null, this.tableContentInner = null, this.tableTitleCol = null, this.tableContentCol = null, this.searchcontainer = null, this.searchCell = null
                    }
                }]) && tableService_defineProperties(Constructor.prototype, protoProps), staticProps && tableService_defineProperties(Constructor, staticProps), TableService
            }();

            function apiService_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function apiService_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var ApiService = function() {
                    function ApiService(TreeRef) {
                        ! function(instance, Constructor) {
                            if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                        }(this, ApiService), apiService_defineProperty(this, "TreeRef", void 0), apiService_defineProperty(this, "props", void 0), apiService_defineProperty(this, "firePropertiesChanged", void 0), this.TreeRef = TreeRef, this.props = TreeRef.props, this.firePropertiesChanged = TreeRef.firePropertiesChanged
                    }
                    var Constructor, protoProps, staticProps;
                    return Constructor = ApiService, (protoProps = [{
                        key: "setScenario",
                        value: function(name, calculate) {
                            this.TreeRef.scenarioService.setActiveScenario(name, calculate)
                        }
                    }, {
                        key: "deleteScenario",
                        value: function(name) {
                            this.TreeRef.scenarioService.deleteScenario(name)
                        }
                    }, {
                        key: "createScenario",
                        value: function() {
                            this.TreeRef.scenarioService.createScenario()
                        }
                    }, {
                        key: "setTopNode",
                        value: function(nodeName) {
                            this.props.activeTopNode = nodeName, this.firePropertiesChanged(["activeTopNode"])
                        }
                    }, {
                        key: "setPeriodToColumn",
                        value: function(period) {
                            this.props.PeriodToColumn = Number(period), this.firePropertiesChanged(["PeriodToColumn"])
                        }
                    }, {
                        key: "setPeriodColumn",
                        value: function(period) {
                            this.props.PeriodColumn = Number(period), this.firePropertiesChanged(["PeriodColumn"])
                        }
                    }, {
                        key: "setPrimaryDisplayValue",
                        value: function(displayVal) {
                            this.props.primaryDisplayValue = displayVal, this.firePropertiesChanged(["primaryDisplayValue"])
                        }
                    }, {
                        key: "setScale",
                        value: function(scale) {
                            this.props.scale = scale, this.firePropertiesChanged(["scale"])
                        }
                    }, {
                        key: "setVisualization",
                        value: function(style) {
                            this.props.visualization = style, this.firePropertiesChanged(["visualization"])
                        }
                    }, {
                        key: "setTableStyle",
                        value: function(style) {
                            this.props.tableStyle = style, this.firePropertiesChanged(["tableStyle"])
                        }
                    }, {
                        key: "setNodeStyle",
                        value: function(style) {
                            this.props.nodeStyle = style, this.firePropertiesChanged(["nodeStyle"])
                        }
                    }, {
                        key: "setFocusNode",
                        value: function(nodeName) {
                            this.props.focusNode = "N" + nodeName, this.firePropertiesChanged(["focusNode"])
                        }
                    }, {
                        key: "showEditInputs",
                        value: function(nodeList) {
                            this.TreeRef.simulationService.renderEditInputs(nodeList)
                        }
                    }, {
                        key: "showCompareScenarios",
                        value: function(config) {
                            this.TreeRef.scenarioService.renderCompareScenarios(config)
                        }
                    }, {
                        key: "showEditScenarioInfoDialog",
                        value: function(scenario, navDiv, event) {
                            this.TreeRef.scenarioService.showEditScenarioInfoDialog(scenario, navDiv, event)
                        }
                    }]) && apiService_defineProperties(Constructor.prototype, protoProps), staticProps && apiService_defineProperties(Constructor, staticProps), ApiService
                }(),
                lz_string = __webpack_require__(49),
                nacl = __webpack_require__(91);

            function utils_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function utils_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var utils_Utils = function() {
                function Utils() {
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, Utils)
                }
                var Constructor, protoProps, staticProps;
                return Constructor = Utils, staticProps = [{
                    key: "eval",
                    value: function(obj) {
                        return Function('"use strict"; return ('.concat(obj, ")"))()
                    }
                }, {
                    key: "importConfig",
                    value: function(id, type, config, onlyTree) {
                        if (!config) throw new Error('Unable to import the configuration. "config" is missing');
                        if (onlyTree) {
                            var props = {};
                            "[" !== config.charAt(0) && (config = "[".concat(config, "]"));
                            try {
                                props.treeConfig = Utils.eval(config)
                            } catch (e) {
                                console.log("Unable to convert to JSON")
                            }
                            return props
                        }
                        if (!id && !type) throw new Error('Unable to import the configuration. Both "id" and "type" are missing.');
                        if ("string" == typeof config) try {
                            config = ["[", "{"].includes(config.charAt(0)) ? JSON.parse(config) : JSON.parse(Utils.decompress(config))
                        } catch (e) {
                            throw new Error("Unable to parse the given config string")
                        }
                        config = Utils.getPorpsForVisual(id, type, config);
                        var defaultProps = Utils.getDefaultProps(config.type),
                            importedConfig = {
                                type: config.type,
                                id: config.id,
                                properties: {}
                            },
                            params = config.properties || config.params;
                        return defaultProps.forEach(function(prop) {
                            null != params[prop] && (importedConfig.properties[prop] = params[prop])
                        }), importedConfig
                    }
                }, {
                    key: "compress",
                    value: function(str) {
                        return Object(lz_string.compressToBase64)(str)
                    }
                }, {
                    key: "decompress",
                    value: function(str) {
                        return Object(lz_string.decompressFromBase64)(str)
                    }
                }, {
                    key: "decompressFromUnit8Array",
                    value: function(str) {
                        return Object(lz_string.decompressFromUint8Array)(str)
                    }
                }, {
                    key: "open",
                    value: function(msg, pKey) {
                        return nacl.sign.open(msg, pKey)
                    }
                }, {
                    key: "exportConfig",
                    value: function(componentIds) {
                        var compRef, compExport, config = {};
                        return componentIds.map(function(id) {
                            (compRef = registry[id]) && (compExport = compRef.exportConfig(), config[compExport.id] = compExport)
                        }), compRef = null, compExport = null, Utils.compress(JSON.stringify(config))
                    }
                }, {
                    key: "getPorpsForVisual",
                    value: function(id, type, config) {
                        var props;
                        return id || jquery.each(config, function(compId, compProps) {
                            if (Utils.visualTypeMap[compProps.type] === type) return id = compProps.id, !1
                        }), id && config[id] && ((props = config[id]).type = Utils.visualTypeMap[props.type]), props
                    }
                }, {
                    key: "getDefaultProps",
                    value: function(type) {
                        switch (type) {
                            case "tree":
                                return Object.keys(TreeDefault.getConfigurableProps());
                            case "navpanel":
                                return Object.keys(NavPanelDefault.getConfigurableProps())
                        }
                    }
                }], (protoProps = null) && utils_defineProperties(Constructor.prototype, protoProps), staticProps && utils_defineProperties(Constructor, staticProps), Utils
            }();

            function vdtComponent_typeof(obj) {
                return (vdtComponent_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
                    return typeof obj
                } : function(obj) {
                    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
                })(obj)
            }

            function vdtComponent_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function _getPrototypeOf(o) {
                return (_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {
                    return o.__proto__ || Object.getPrototypeOf(o)
                })(o)
            }

            function _setPrototypeOf(o, p) {
                return (_setPrototypeOf = Object.setPrototypeOf || function(o, p) {
                    return o.__proto__ = p, o
                })(o, p)
            }

            function _assertThisInitialized(self) {
                if (void 0 === self) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return self
            }

            function vdtComponent_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            utils_defineProperty(utils_Utils, "descendantNodeCount", function(node) {
                var children = node.children || node._children;
                return node.childCount = children ? children.reduce(function(sum, child) {
                    return sum + utils_Utils.descendantNodeCount(child)
                }, children.length) : 0, node.childCount
            }), utils_defineProperty(utils_Utils, "visualTypeMap", {
                tree: "tree",
                "com.visualbi.vdt.ValueDriverTree": "tree",
                navpanel: "navpanel",
                "com.visualbi.vdt.ValueDriverTreeNavPanel": "navpanel"
            });
            var vdtComponent_Tree = function(_VDTBase) {
                function Tree(config) {
                    var _this, self, call;
                    return function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, Tree), self = this, call = _getPrototypeOf(Tree).call(this, config, Tree.visualCount++), _this = !call || "object" !== vdtComponent_typeof(call) && "function" != typeof call ? _assertThisInitialized(self) : call, vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "props", void 0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "noRefreshRequired", ["selectedNode", "clickedPeriod", "exportToExcel", "focusNode", "showDetail", "listeners", "showCompareScenarios", "showEditInputs", "createScenario", "deleteScenario", "setScenario", "setTopNode", "nodesToExport", "exportedNodeData", "exportMode", "exportUrl"]), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "refreshRequired", !0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "enrichmentRequired", !0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "initRequired", !0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "updateRequired", !0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "licenseBreached", !1), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "scenarioService", void 0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "calculationService", void 0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "tableService", void 0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "rendererService", void 0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "detailPageService", void 0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "simulationService", void 0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "apiService", void 0), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "render", function(propsChanged) {
                        var props = _this.props;
                        if (props.blankCanvas) return props.root = null, props.scenarios.length = 0, !_this.rendererService.isCanvasStyled && _this.rendererService.processCanvasStyle(), _this.rendererService.clearCanvas(), _this.simulationService.clearCanvas(), void _this.tableService.destroy();
                        if (props.scenarios && 0 !== props.scenarios.length || _this.scenarioService.setDefaultScenario(), _this.scenarioService.setActiveScenario(_this.props.activeScenario, !1), props.treeData ? _this.enrichmentRequired && (props.root = null, props.activeTopNode = null, _this.enrichValueDriverTreeConfig()) : (_this.enrichValueDriverTreeConfig(), _this.rendererService.processCanvasStyle()), _this.refreshRequired && (_this.refreshRequired = !1, props.scales.X = props.scales[_this.props.scale], _this.calculationService.calculate(), setTimeout(function() {
                                _this.simulationService.analyseSimulations()
                            }, 100), _this.rendererService.buildValueDriverTree(), _this.eventService.publish("propsChanged", Array.from(propsChanged || []))), props.focusNode && _this.rendererService.showNode(("N" !== props.focusNode.charAt(0) ? "N" : "") + props.focusNode), props.showDetail) {
                            var d = props.nodes[props.showDetail];
                            d ? _this.detailPageService.renderDetail(d) : console.log("Node name ".concat(props.showDetail, " doesn't exist")), props.showDetail = ""
                        } else _this.detailPageService.isDetailPageVisible() && _this.detailPageService.updateDetailPage();
                        props.nodesToExport && props.nodesToExport.length > 0 && "EXPORT_NONE" !== props.nodesToExport[0] && _this.processNodeExport()
                    }), vdtComponent_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "beforeRender", function(propsChanged) {
                        (propsChanged.has("data") || propsChanged.has("periods") || propsChanged.has("nodeMapping") || propsChanged.has("nodeMappingSep")) && (_this.prepareResultSet(), _this.setupPeriod(), _this.refreshRequired = !0, _this.enrichmentRequired = _this.isDynamicNodeUsed()), _this.hasPeriodInfoChanged(propsChanged) && _this.setupPeriod(), propsChanged.has("primaryDisplayValue") && _this.updateValueDisp(), propsChanged.has("enableNodeSearch") && "Tree" === _this.props.visualization && (_this.rendererService.addSearchElement(), _this.rendererService.createSearchInstance()), (propsChanged.has("scaleSuffixB") || propsChanged.has("scaleSuffixM") || propsChanged.has("scaleSuffixK")) && (_this.updateScaleSuffix(), _this.refreshRequired = !0), _this.hasthemeChanged(propsChanged) && _this.rendererService && _this.rendererService.processCanvasStyle(), propsChanged.has("treeConfig") || propsChanged.has("periods") || propsChanged.has("zoom") ? (propsChanged.has("zoom") && _this.rendererService.updateZoom(), _this.enrichmentRequired = !0, _this.refreshRequired = !0) : (propsChanged.has("dispChildCount") && _this.props.dispChildCount && !_this.enrichmentRequired && _this.props.derivedTreeConfig && _this.props.derivedTreeConfig.length && utils_Utils.descendantNodeCount(_this.props.derivedTreeConfig[0]), _this.refreshRequired = _this.refreshRequired || Array.from(propsChanged).some(function(propName) {
                            return !_this.noRefreshRequired.includes(propName)
                        }));
                        try {
                            _this.render(propsChanged)
                        } catch (e) {
                            console.error(e)
                        }
                    }), _this.props = _this.getBaseProps(), _this.propsChangedHandler(_this.beforeRender), _this.initDomAndEventHandlers(config), _this.init(), window.addEventListener("resize", function() {
                        _this.resizeTree()
                    }), _this
                }
                var Constructor, protoProps, staticProps;
                return function(subClass, superClass) {
                    if ("function" != typeof superClass && null !== superClass) throw new TypeError("Super expression must either be null or a function");
                    subClass.prototype = Object.create(superClass && superClass.prototype, {
                        constructor: {
                            value: subClass,
                            writable: !0,
                            configurable: !0
                        }
                    }), superClass && _setPrototypeOf(subClass, superClass)
                }(Tree, vdtBase_VDTBase), Constructor = Tree, (protoProps = [{
                    key: "init",
                    value: function() {
                        this.scenarioService = this.scenarioService || new scenarioService_ScenarioService(this), this.calculationService = this.calculationService || new calculationService_CalculationService(this), this.tableService = this.tableService || new tableService_TableService(this), this.rendererService = this.rendererService || new rendererService_RendererService(this), this.detailPageService = this.detailPageService || new detailPageService_DetailPageService(this), this.simulationService = this.simulationService || new simulationService_SimulationService(this), this.apiService = this.apiService || new ApiService(this), this.refreshAll(), this.updateScaleSuffix(), this.prepareResultSet(), this.setupPeriod(), this.render()
                    }
                }, {
                    key: "hasPeriodInfoChanged",
                    value: function(propsChanged) {
                        return ["periods", "PeriodToColumn", "PeriodColumn", "periodsLabels", "valTextLtotal", "valTextLptd", "valTextLsel", "valTextLper", "valTextStotal", "valTextSptd", "valTextSsel", "valTextSper"].some(function(prop) {
                            return propsChanged.has(prop)
                        })
                    }
                }, {
                    key: "hasthemeChanged",
                    value: function(propsChanged) {
                        return ["colorNodePrimaryFont", "colorNodeSecondaryFont", "colorSim", "colorNodeBg", "opacityNodeBg", "colorNodeBorder", "opacityNodeBorder", "colorNodeBgDerived", "opacityNodeBgDerived", "colorLinks", "colorNodeBorderFocus", "colorCanvasBase", "colorCanvas1", "colorCanvas2", "colorCanvas3"].some(function(prop) {
                            return propsChanged.has(prop)
                        })
                    }
                }, {
                    key: "isDynamicNodeUsed",
                    value: function() {
                        return this.props.treeConfig.some(function(node) {
                            return node.deriveChildren && "" == node.cMeth
                        })
                    }
                }, {
                    key: "exportToExcel",
                    value: function() {
                        this.scenarioService.exportData()
                    }
                }, {
                    key: "exportSeriesToExcel",
                    value: function() {
                        this.scenarioService.exportSeriesData()
                    }
                }, {
                    key: "updateProps",
                    value: function(properties) {
                        this.firePropertiesChanged(properties)
                    }
                }, {
                    key: "hideNode",
                    value: function(name) {
                        var d = this.props.nodes[name];
                        if (d) {
                            var parent = d.parent;
                            parent && (d.style = "H", parent.__children ? parent.__children.push(d) : parent.__children = [d], 1 == parent.children.length && parent.children[0].name == name ? parent.children = null : parent.children = jquery.grep(parent.children, function(d) {
                                return d.name != name
                            }))
                        }
                    }
                }, {
                    key: "processNodeExport",
                    value: function() {}
                }, {
                    key: "importScenarios",
                    value: function(str) {
                        var scenarios, errMsg = "There is some problem with the given scenario string. Unable to import";
                        try {
                            scenarios = JSON.parse(utils_Utils.decompress(str))
                        } catch (e) {
                            return console.error(errMsg), !1
                        }
                        return scenarios && scenarios.length && scenarios[0].name ? (this.updateProps({
                            activeScenario: scenarios[0].name,
                            scenarios: scenarios
                        }), !0) : (console.error(errMsg), !1)
                    }
                }, {
                    key: "exportScenarios",
                    value: function() {
                        return utils_Utils.compress(JSON.stringify(this.props.scenarios))
                    }
                }, {
                    key: "initDomAndEventHandlers",
                    value: function(config) {
                        this.props.container = jquery(document.createElement("div")), this.props.container.attr("id", this.id).addClass("d2VDT"), this.props.popUpBgDiv = document.createElement("div"), jquery(this.props.popUpBgDiv).addClass("d2VDTPopUpBg"), jquery(this.parentContainer).empty().append(this.props.container[0]).on("swipe", function(event) {
                            event.stopPropagation(), event.preventDefault(), console.log("swipe on parent detected and stopped")
                        });
                        var popupContainer = "string" === config.popupContainer ? document.querySelector("#".concat(config.popupContainer)) : config.popupContainer || document.querySelector("body");
                        jquery(popupContainer).append(this.props.popUpBgDiv), this.props.tooltip = d3.select(this.props.popUpBgDiv).append("div").attr("class", "d2VDTToolTip").style("position", "absolute").style("top", 0).style("left", 0).style("z-index", "10").style("visibility", "hidden")
                    }
                }, {
                    key: "updateScaleSuffix",
                    value: function() {
                        var props = this.props,
                            scales = this.props.scales;
                        jquery.each(scales, function(scale, scaleValue) {
                            var selectedScale = scale.slice(-1);
                            "b" === selectedScale ? (scaleValue.suffix = props.scaleSuffixB, scaleValue.caption = scale.slice(0, -1) + props.scaleSuffixB) : "m" === selectedScale || "M" === selectedScale ? (scaleValue.suffix = props.scaleSuffixM, scaleValue.caption = scale.slice(0, -1) + props.scaleSuffixM) : "k" === selectedScale || "K" === selectedScale ? (scaleValue.suffix = props.scaleSuffixK, scaleValue.caption = scale.slice(0, -1) + props.scaleSuffixK) : "t" === selectedScale && (scaleValue.suffix = props.scaleSuffixT, scaleValue.caption = scale.slice(0, -1) + props.scaleSuffixT)
                        })
                    }
                }, {
                    key: "enrichValueDriverTreeConfig",
                    value: function() {
                        var _this2 = this,
                            props = this.props,
                            treeConfig = props.derivedTreeConfig = props.treeConfig.map(function(item) {
                                return Object.assign({}, item)
                            }),
                            parent = [],
                            hiddenNodes = [];
                        props.calcLevel = 1, props.nodes = {}, props.constraints = [], props.nodesExceededMaxChild = {}, props.deriveTreeFromSource = !1, props.hasExceededMaxNodeLimit = !1, this.getDataSourceNodes(), this.getTemplatedNodes(), this.props.derivedTreeConfig.length > this.props.globalMaxNodeLimit && (this.props.derivedTreeConfig.length = this.props.globalMaxNodeLimit, props.hasExceededMaxNodeLimit = !0);
                        for (var i = 0; i < treeConfig.length; i++) {
                            var d = treeConfig[i];
                            d.tPrefix = d.tPrefix ? "".concat(d.tPrefix, " ") : "", d.suffix = d.enableEnumList ? "" : d.suffix || "", d.prefix = d.enableEnumList ? "" : d.prefix || "", d.header = d.header || "", d.cMeth = d.cMeth || "", d.descr = d.descr || "", d.footer = d.footer || "", d.notes = d.notes || "", d.formula = d.formula && "F" == d.cMeth ? d.formula : "L" == d.cMeth && d.linkNode ? "{".concat(d.linkNode, "}") : "", d.level = Number(d.level) || 0, d.minCap = null == d.min ? null : isNaN(d.minCap = Number(d.min)) ? null : d.minCap, d.min = d.minCap, d.trend = d.trend ? "I" : "", d.calcComps = [], d.calcOps = {}, d.sMeth = d.enableEnumList ? ["C", "M"].includes(d.sMeth) ? d.sMeth : "C" : d.sMeth || "P", d.aMeth = d.aMeth.charAt(0) ? d.aMeth.charAt(0).toUpperCase() : "F", d.style = d.style || (d.derived ? "D" : ""), d.name = "N".concat(d.name), d.formula && (d.formula = d.formula.replace(/[{[]/g, " [N").replace(/[}\]]/g, "] ").replace(/\] \./g, "].")), d.wAvgNode && (d.wAvgNode = "N".concat(d.wAvgNode)), d.lSimNode && (d.lSimNode = "N".concat(d.lSimNode)), d.linkNode && (d.linkNode = "N".concat(d.linkNode)), d.rowMap && (d.rowMap = "N".concat(d.rowMap)), d.sortKey = i, d.parent = d.level > 0 ? parent[d.level - 1] : null, parent[d.level] = d, "H" == d.style && hiddenNodes.push(d.name), d.formula || props.ops[d.cMeth] || (d.calcLevel = props.calcLevel, props.nodes[d.name] = d), d.max && (d.max = null == d.max ? null : isNaN(d.max = Number(d.max)) ? null : d.max, null != d.max && props.constraints.push(d.name.substr(1)))
                        }
                        props.levels = parent.length - 1;
                        var dataMap = treeConfig.reduce(function(map, node) {
                                return map[node.name] = node, map
                            }, {}),
                            treeData = [];
                        treeConfig.forEach(function(node) {
                            var parent = node.parent ? dataMap[node.parent.name] : null;
                            parent ? (parent.children || (parent.children = [])).push(node) : treeData.push(node)
                        });
                        for (var outstandingNodes = treeConfig.filter(function(_ref) {
                                return !_ref.calcLevel
                            }), _loop = function(_i) {
                                var d = outstandingNodes[_i];
                                if (d.formula) ! function() {
                                    var calcCompsStr = d.formula.split("["),
                                        calcComps = [],
                                        calcComp = "";
                                    for ("", j = 0; j < calcCompsStr.length; j++) calcCompsStr[j].indexOf("]") > 0 && (calcComp = calcCompsStr[j].split("]"), calcComps.push(calcComp[0]), d.calcOps[calcComp[0]] = "", calcComp.length > 1 && function() {
                                        var opsPos = void 0,
                                            maxPos = 0;
                                        jquery.each(props.ops, function(n, _ref3) {
                                            var str = _ref3.str;
                                            (opsPos = calcComp[1].indexOf(str)) > maxPos && (maxPos = opsPos)
                                        })
                                    }()), d.calcComps = calcComps.filter(function(item, pos) {
                                        return calcComps.indexOf(item) == pos
                                    })
                                }();
                                else {
                                    var ops = props.ops[d.cMeth];
                                    d.children && d.children.length > 0 && d.children.forEach(function(_ref2) {
                                        var style = _ref2.style,
                                            name = _ref2.name;
                                        style || (d.formula ? (d.formula += " ".concat(ops.str, " [").concat(name, "]"), d.calcOps[name] = d.cMeth) : (d.formula = " [".concat(name, "]"), d.calcOps[name] = ""), d.calcComps.push(name))
                                    })
                                }
                            }, _i = 0; _i < outstandingNodes.length; _i++) {
                            var j;
                            _loop(_i)
                        }
                        do {
                            props.calcLevel += 1;
                            for (var _i2 = 0; _i2 < outstandingNodes.length; _i2++) {
                                for (var dependencyMet = !0, _d = outstandingNodes[_i2], _j = 0; _j < _d.calcComps.length; _j++) props.nodes[_d.calcComps[_j]] || (dependencyMet = !1);
                                if (dependencyMet) {
                                    _d.calcLevel = props.calcLevel;
                                    var linkNode = _d.formula.replace(/\[/, "").replace(/\]/, "").trim(),
                                        linkNodeRef = props.nodes[linkNode];
                                    linkNodeRef && linkNodeRef.parent != _d && (_d.linkNode = linkNode), props.nodes[_d.name] = _d
                                }
                            }
                            outstandingNodes = outstandingNodes.filter(function(node) {
                                return !node.calcLevel
                            })
                        } while (outstandingNodes.length > 0 && props.calcLevel < 100);
                        jquery.each(hiddenNodes, function(i, v) {
                            _this2.hideNode(v)
                        }), outstandingNodes.length > 0 && (console.log("Nodes dependecies could not be resoved:"), console.log(outstandingNodes));
                        for (var _i3 = 0; _i3 < outstandingNodes.length; _i3++) {
                            var _d2 = outstandingNodes[_i3];
                            _d2.title = "ERROR: ".concat(_d2.title), _d2.descr = "Unable to resolve formula dependencies for this node and formula was removed.  Original formula: ".concat(_d2.formula, ".  Formula components that couldn't be resolved:"), _d2.calcLevel = 1, _d2.formula = "", _d2.manAct = _d2.manTgt = 0;
                            for (var _j2 = 0; _j2 < _d2.calcComps.length; _j2++)
                                for (var x = 0; x < outstandingNodes.length; x++) _d2.calcComps[_j2] == outstandingNodes[x].name && (console.log("".concat(_d2.name, ":").concat(_d2.calcComps[_j2])), _d2.descr += "".concat(_d2.name, ": ").concat(_d2.calcComps[_j2], "   |   "));
                            _d2.descr += "  This kind of error is typically due to circular formula definitions where nodes references each other. Please contact your App Designer to get the configuration resolved", props.nodes[_d2.name] = _d2
                        }
                        jquery.each(props.nodes, function(k, d) {
                            d.simName = d.linkNode || d.lSimNode || d.name, d.simName != d.name && (props.simLinkNodes[d.simName] || (props.simLinkNodes[d.simName] = []), props.simLinkNodes[d.simName].push(d.name)), d.level > props.dispLevels && _this2.rendererService.nodeCollapse(d), _this2.props.singleSeriesTable && d.manTgt && (_this2.props.singleSeriesTable = !1)
                        }), props.dispChildCount && utils_Utils.descendantNodeCount(props.derivedTreeConfig[0]), this.simulationService.isSimSyncRequired() && this.simulationService.syncSimulation(), props.treeData = treeData[0], this.enrichmentRequired = !1, this.eventService.publish("treeEnriched", null)
                    }
                }, {
                    key: "setupPeriod",
                    value: function() {
                        var props = this.props;
                        this.restoreProps(["periods", "PeriodColumn", "PeriodToColumn"]), props.periods = props.periods <= 0 ? 1 : props.periods, props.valDisp = {
                            per: props.PeriodColumn - 1,
                            total: props.periods,
                            ptd: props.periods + 1,
                            sel: props.periods + 2
                        }, props.PeriodColumn > props.periods && (props.PeriodColumn = props.periods), props.PeriodToColumn > props.periods && (props.PeriodToColumn = props.periods), props.PeriodToColumn < props.PeriodColumn && (props.PeriodToColumn = props.PeriodColumn), props.periodsMetadata = [];
                        for (var periodsLabels = !props.periodsLabels && props.metaData.periods ? props.metaData.periods : props.periodsLabels.split(","), i = 0; i < props.periods; i++) props.periodsMetadata[i] || (props.periodsMetadata[i] = {
                            key: "".concat(i + 1),
                            text: periodsLabels[i] || "".concat(i + 1)
                        });
                        props.periodsMetadata[props.periods] = {
                            key: "total",
                            text: props.valTextLtotal
                        }, props.periodsMetadata[props.periods + 1] = {
                            key: "ptd",
                            text: props.valTextLptd
                        }, props.periodsMetadata[props.periods + 2] = {
                            key: "sel",
                            text: props.valTextLsel
                        }, props.displayValueText = {
                            per: {
                                short: props.valTextSper,
                                long: props.valTextLper
                            },
                            ptd: {
                                short: props.valTextSptd,
                                long: props.valTextLptd
                            },
                            total: {
                                short: props.valTextStotal,
                                long: props.valTextLtotal
                            },
                            sel: {
                                short: props.valTextSsel,
                                long: props.valTextLsel
                            }
                        }, jquery.each(props.displayValueText, function(k, val) {
                            var sec = props["secValDisp".concat(k)],
                                secV = props.displayValueText[sec];
                            props.valueDispConfig[k] = {
                                primary: {
                                    key: k,
                                    short: val.short,
                                    long: val.long
                                },
                                secondary: {
                                    key: sec,
                                    short: secV.short,
                                    long: secV.long
                                }
                            }
                        }), props.valueDisp = props.valueDispConfig[props.primaryDisplayValue]
                    }
                }, {
                    key: "updateValueDisp",
                    value: function() {
                        this.props.valueDisp = this.props.valueDispConfig[this.props.primaryDisplayValue]
                    }
                }, {
                    key: "getMemberInfo",
                    value: function(id, label) {
                        var rowLabel = label,
                            rowId = id;
                        if ("text" === this.props.nodeMapping) {
                            var textSplit = label.split(this.props.nodeMappingSep);
                            rowId = textSplit[0], rowLabel = textSplit[1] || label
                        }
                        return {
                            id: rowId = rowId.replace(/[^a-zA-Z0-9_]/g, "__").replace(/^0+(?=\d)/, ""),
                            key: rowId,
                            label: rowLabel,
                            memberText: label
                        }
                    }
                }, {
                    key: "parseDS",
                    value: function(rows) {
                        for (var row, member, prefixedName, sourceData = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, dynDataNodes = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : [], level = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, len = rows.length, periods = this.props.periods, i = 0; i < len; i++) {
                            if (row = rows[i], (member = this.getMemberInfo(row.id, row.label)).level = level, sourceData[prefixedName = "N".concat(member.id)]) {
                                var name = parseInt(member.id);
                                for (name = (isNaN(name) ? 0 : name) + 1; sourceData["N".concat(member.id, "_").concat(name)];) name += 1;
                                member.key = member.id = "".concat(member.id, "_").concat(name), prefixedName = "N".concat(member.key)
                            }
                            sourceData[prefixedName] = {
                                act: row.series[0].slice(0, periods),
                                tgt: null == row.series[1] ? [] : row.series[1].slice(0, periods)
                            }, dynDataNodes.push(member), row.children && this.parseDS(row.children, sourceData, dynDataNodes, level + 1)
                        }
                    }
                }, {
                    key: "prepareResultSet",
                    value: function() {
                        var sourceData = {},
                            dynDataNodes = [],
                            ds = this.props.data;
                        this.props.metaData = {}, ds && ds.rows && ds.rows.length && (dynDataNodes.push({
                            id: "SUMME",
                            key: "SUMME",
                            label: "Overall Result",
                            memberText: "Overall Result",
                            level: 0
                        }), this.parseDS(ds.rows, sourceData, dynDataNodes, dynDataNodes.length)), ds && ds.periods && (this.props.metaData.periods = ds.periods.map(function(period, index) {
                            return "object" === vdtComponent_typeof(period) ? period.label || (index + 1).toString() : period
                        })), this.props.dynDataNodes = dynDataNodes, this.props.sourceData = sourceData
                    }
                }, {
                    key: "getDataSourceNodes",
                    value: function() {
                        var rowDim, props = this.props,
                            withDerivedChildren = props.derivedTreeConfig.reduce(function(nodes, config, i) {
                                return config.deriveChildren && "" == config.cMeth && nodes.push({
                                    config: config,
                                    index: i
                                }), nodes
                            }, []);
                        if (withDerivedChildren.length && (props.deriveTreeFromSource = !0, this.props.nodesExceededMaxChild = {}, props.dynDataNodes.length)) {
                            rowDim = props.dynDataNodes, jquery.each(withDerivedChildren || [], function(i, node) {
                                var tmpl = props.derivedTreeConfig[node.index];
                                tmpl.cMeth = "P" == tmpl.derivedSim ? "" : "A", tmpl.locked = 0 == tmpl.level ? "X" : tmpl.derivedSim ? "X" : ""
                            });
                            for (var j = withDerivedChildren.length - 1; j >= 0; j--) {
                                for (var _props$derivedTreeCon, node = withDerivedChildren[j], tmpl = node.config, level = -1, children = [], maxChildMap = {}, i = 0; i < rowDim.length; i++) {
                                    var d = rowDim[i],
                                        nextRow = rowDim[i + 1] || {};
                                    if (tmpl.name == d.key || tmpl.rowMap == d.key) level = d.level;
                                    else if (level >= 0)
                                        if (d.level > level) {
                                            var childLevel = d.level - level + tmpl.level;
                                            maxChildMap[childLevel] = (maxChildMap[childLevel] || 0) + 1, maxChildMap[childLevel] <= this.props.maxChild ? children.push(Object.assign({}, tmpl, {
                                                level: childLevel,
                                                name: d.key,
                                                title: d.memberText,
                                                rowMap: null,
                                                linkNode: null,
                                                lSimNode: null,
                                                locked: nextRow.level > d.level ? tmpl.derivedSim ? "X" : "" : "P" == tmpl.derivedSim ? "X" : "",
                                                cMeth: nextRow.level > d.level ? "P" == tmpl.derivedSim ? "" : "A" : "",
                                                _isDynamic: !0
                                            })) : (this.props.nodesExceededMaxChild[tmpl.name] || (this.props.nodesExceededMaxChild[tmpl.name] = {}), this.props.nodesExceededMaxChild[tmpl.name][childLevel] = maxChildMap[childLevel])
                                        } else i = rowDim.length;
                                    else level = -1
                                }
                                if (children.length)(_props$derivedTreeCon = props.derivedTreeConfig).splice.apply(_props$derivedTreeCon, [node.index + 1, 0].concat(children))
                            }
                        }
                    }
                }, {
                    key: "setTemplatedEnumNode",
                    value: function(dest, src) {
                        dest.enableEnumList = src.enableEnumList, dest.enumList = src.enumList, dest.manAct = src.manAct, dest.manTgt = src.manTgt
                    }
                }, {
                    key: "getTemplatedNodes",
                    value: function() {
                        var props = this.props;
                        props.tmpl = null;
                        for (var i = 0; i < props.derivedTreeConfig.length; i++) {
                            var d = props.derivedTreeConfig[i];
                            "T" == d.cMeth && d.tmplNode && (props.tmpl || (props.tmpl = {}), props.tmpl[d.tmplNode] || (props.tmpl[d.tmplNode] = {
                                refs: []
                            }), props.tmpl[d.tmplNode].refs.push(d.name))
                        }
                        if (props.tmpl) {
                            for (var tmpl, level = -1, _i4 = 0; _i4 < props.derivedTreeConfig.length; _i4++) {
                                var _d3 = props.derivedTreeConfig[_i4];
                                props.tmpl[_d3.name] ? ((tmpl = props.tmpl[_d3.name]).level = _d3.level, tmpl.cMeth = _d3.cMeth, tmpl.formula = _d3.formula, tmpl.children = [], tmpl.childrenMap = {}, level = _d3.level, _d3.enableEnumList && this.setTemplatedEnumNode(tmpl, _d3)) : level >= 0 && _d3.level > level ? (tmpl.children.push(_d3), tmpl.childrenMap[_d3.name] = _d3) : level = -1
                            }
                            for (var _i5 = props.derivedTreeConfig.length - 1; _i5 >= 0; _i5--) {
                                var _d4 = props.derivedTreeConfig[_i5];
                                if ("T" == _d4.cMeth && props.tmpl[_d4.tmplNode]) {
                                    var _props$derivedTreeCon2, _tmpl = props.tmpl[_d4.tmplNode],
                                        levelDelta = _d4.level - _tmpl.level,
                                        prefix = _d4.tmplPrefix ? _d4.tmplPrefix + "__" : _d4.name + "__",
                                        tPrefix = _d4.tmplTPrefix ? _d4.tmplTPrefix + " " : "";
                                    if (_d4.cMeth = _tmpl.cMeth, _d4.wAvgNode = _d4.wAvgNode ? _d4.wAvgNode === _d4.tmplNode ? _d4.name : (_tmpl.childrenMap[_d4.wAvgNode] ? prefix : "") + _d4.wAvgNode : "", _d4.lSimNode = _d4.lSimNode ? (_tmpl.childrenMap[_d4.lSimNode] ? prefix : "") + _d4.lSimNode : "", _d4.formula = _tmpl.formula, _d4.formula)
                                        for (var calcCompsStr = _tmpl.formula.split("{"), m = 0; m < calcCompsStr.length; m++)
                                            if (calcCompsStr[m].indexOf("}") > 0) {
                                                var calcComp = calcCompsStr[m].split("}")[0];
                                                _tmpl.childrenMap[calcComp] ? _d4.formula = _d4.formula.replace("{".concat(calcComp, "}"), "{".concat(prefix + calcComp, "}")) : calcComp === _d4.tmplNode && (_d4.formula = _d4.formula.replace("{".concat(calcComp, "}"), "{".concat(_d4.name, "}")))
                                            } _tmpl.enableEnumList && this.setTemplatedEnumNode(_d4, _tmpl);
                                    for (var children = [], j = 0; j < _tmpl.children.length; j++) {
                                        var c = Object.assign({}, _tmpl.children[j]);
                                        if (c.name = prefix + c.name, c.dimensionalNode && (c.dimensionalNode = prefix + c.dimensionalNode), c.level = c.level + levelDelta, c.linkNode = (_tmpl.childrenMap[c.linkNode] || c.tLinkedPrefix ? prefix : "") + (c.linkNode || ""), c.wAvgNode = c.wAvgNode === _d4.tmplNode ? _d4.name : (_tmpl.childrenMap[c.wAvgNode] ? prefix : "") + (c.wAvgNode || ""), c.lSimNode = (_tmpl.childrenMap[c.lSimNode] ? prefix : "") + (c.lSimNode || ""), c.tPrefix = tPrefix + (c.tPrefix || ""), c.rowMap = "", c.formula)
                                            for (var _calcCompsStr = c.formula.split("{"), _m = 0; _m < _calcCompsStr.length; _m++)
                                                if (_calcCompsStr[_m].indexOf("}") > 0) {
                                                    var _calcComp = _calcCompsStr[_m].split("}")[0];
                                                    _tmpl.childrenMap[_calcComp] ? c.formula = c.formula.replace("{".concat(_calcComp, "}"), "{".concat(prefix + _calcComp, "}")) : _calcComp === _d4.tmplNode && (_d4.formula = _d4.formula.replace("{".concat(_calcComp, "}"), "{".concat(_d4.name, "}")))
                                                } c._isDynamic = !0, c._isTemplate = !0, children.push(c)
                                    }(_props$derivedTreeCon2 = props.derivedTreeConfig).splice.apply(_props$derivedTreeCon2, [_i5 + 1, 0].concat(children))
                                }
                            }
                        }
                    }
                }, {
                    key: "triggerResize",
                    value: function() {
                        this.resizeTree(), this.detailPageService.resizeDetailPage()
                    }
                }, {
                    key: "resizeTree",
                    value: function() {
                        var _this3 = this;
                        this.rendererService.svg && setTimeout(function() {
                            _this3.licenseBreached ? _this3.render() : _this3.rendererService.updateValueDriverTree()
                        })
                    }
                }, {
                    key: "refreshAll",
                    value: function() {
                        this.updateRequired = !0, this.refreshRequired = !0, this.enrichmentRequired = !0
                    }
                }]) && vdtComponent_defineProperties(Constructor.prototype, protoProps), staticProps && vdtComponent_defineProperties(Constructor, staticProps), Tree
            }();
            vdtComponent_defineProperty(vdtComponent_Tree, "visualCount", 0);
            __webpack_require__(90);

            function navPanelRendererService_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function navPanelRendererService_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var navPanelRendererService_NavPanelRendererService = function() {
                function NavPanelRendererService(navRef) {
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, NavPanelRendererService), navPanelRendererService_defineProperty(this, "navRef", void 0), navPanelRendererService_defineProperty(this, "props", void 0), this.navRef = navRef, this.props = navRef.props
                }
                var Constructor, protoProps, staticProps;
                return Constructor = NavPanelRendererService, (protoProps = [{
                    key: "render",
                    value: function() {
                        this.rendervisualization(), this.renderScenarioList(), this.renderTopNodeList(), this.renderPeriods(), this.renderPrimaryDisplayValue(), this.renderScale(), this.renderAssumpList(), this.renderKpiList(), this.renderConstraintsList()
                    }
                }, {
                    key: "renderScenarioList",
                    value: function() {
                        var _this = this,
                            div = d3.select(this.props.scenariosDiv);
                        if (div.selectAll("*").remove(), !this.props.scenariosVisibility) {
                            var activeItem = this.props.activeScenario || "",
                                listEnter = div.selectAll("div").data(this.props.scenarios).enter().append("div").attr("class", function(_ref) {
                                    var name = _ref.name;
                                    return "d2VDTNavItem".concat(activeItem == name ? " d2Selected" : "")
                                }).attr("title", function(_ref2) {
                                    var name = _ref2.name,
                                        title = _ref2.title;
                                    return name ? "Set ".concat(name, ": ").concat(core.a.escapeHtml(title), " as the Active Scenario.") : ""
                                }).on("click", function(_ref3) {
                                    var name = _ref3.name;
                                    _this.props.activeScenario !== name && _this.navRef.TreeRef.apiService.setScenario(name, !1)
                                });
                            listEnter.append("div").html(function(_ref4) {
                                var name = _ref4.name,
                                    title = _ref4.title;
                                return name ? "".concat(name, ": ").concat(core.a.escapeHtml(title)) : ""
                            }).attr("class", "d2VDTNavItemTitle"), listEnter.append("div").attr("class", "d2VDTIconButton editScenarioInfo").attr("title", "Edit Scenario Title and Description").on("click", function(scenario) {
                                d3.event.stopPropagation(), _this.navRef.TreeRef.apiService.showEditScenarioInfoDialog(scenario, _this.props.container[0], d3.event)
                            }), listEnter.append("div").attr("class", "d2VDTIconButton delete").attr("title", "Delete the Scenario").on("click", function(_ref5) {
                                var name = _ref5.name;
                                d3.event.stopPropagation(), _this.props.scenarios.length < 2 ? core.a.alert("You always need to have at least one scenario. This is your last one and can therefore not be deleted. You can reset the simulations at the active simulations bar") : _this.navRef.TreeRef.apiService.deleteScenario(name)
                            })
                        }
                    }
                }, {
                    key: "renderTopNodeList",
                    value: function() {
                        var _this2 = this,
                            div = d3.select(this.props.topNodeDiv);
                        if (div.selectAll("*").remove(), !this.props.topNodeVisibility) {
                            var activeItem = this.props.activeTopNode;
                            div.selectAll("div").data(this.navRef.getList(this.props.topNodeList, !1)).enter().append("div").attr("class", function(_ref6) {
                                var name = _ref6.name;
                                return name ? "d2VDTNavItem ".concat(activeItem == name.substr(1) ? " d2Selected " : "") : "d2VDTNavTextItem"
                            }).html(function(_ref7) {
                                var name = _ref7.name,
                                    tPrefix = _ref7.tPrefix,
                                    title = _ref7.title;
                                return name ? '<div class="d2VDTNavItemTitle">'.concat(tPrefix).concat(title, "</div>") : title
                            }).attr("title", function(_ref8) {
                                var name = _ref8.name,
                                    title = _ref8.title;
                                return name ? "Set ".concat(title, " as the top node in tree.") : ""
                            }).on("click", function(_ref9) {
                                var name = _ref9.name;
                                _this2.navRef.TreeRef.apiService.setTopNode(name.substr(1))
                            })
                        }
                    }
                }, {
                    key: "renderPeriods",
                    value: function() {
                        var _this3 = this,
                            div = d3.select(this.props.periodsDiv);
                        if (div.selectAll("*").remove(), jquery(this.props.setPeriodToDiv).toggleClass("hidden", "" != this.props.periodsVisibility), !this.props.periodsVisibility) {
                            var from = this.props.PeriodColumn,
                                to = this.props.PeriodToColumn,
                                periods = this.props.periods;
                            div.selectAll("div").data(this.props.periodsMetadata.slice(0, periods)).enter().append("div").attr("class", function(_ref10) {
                                var key = _ref10.key,
                                    per = parseInt(key);
                                return "d2VDTNavItem".concat(per >= from && per <= to ? " d2Selected".concat(per == from ? " from" : "").concat(per == to ? " to" : "") : "")
                            }).html(function(_ref11) {
                                return _ref11.text
                            }).attr("title", function(_ref12) {
                                var text = _ref12.text;
                                return "Simulations Applied to Period ".concat(text, " and future periods")
                            }).on("click", function(_ref13) {
                                var key = _ref13.key;
                                _this3.props.setPeriodTo ? _this3.navRef.TreeRef.apiService.setPeriodToColumn(key) : _this3.navRef.TreeRef.apiService.setPeriodColumn(key), _this3.props.setPeriodTo = !1, jquery(_this3.props.setPeriodToDiv).toggleClass("d2Selected", _this3.props.setPeriodTo)
                            })
                        }
                    }
                }, {
                    key: "renderPrimaryDisplayValue",
                    value: function() {
                        var _this4 = this,
                            div = d3.select(this.props.primaryDisplayValueDiv);
                        if (div.selectAll("*").remove(), !this.props.valueDisplayVisibility) {
                            var activeItem = this.props.primaryDisplayValue,
                                valueDisplayList = this.props.valueDisplayList || this.props.valueDisplayListDefault;
                            div.selectAll("div").data(jquery.map(this.props.displayValueText, function(_ref14, k) {
                                return [{
                                    name: k,
                                    text: _ref14.long
                                }]
                            }).filter(function(_ref15) {
                                var name = _ref15.name;
                                return (valueDisplayList || []).includes(name)
                            })).enter().append("div").attr("class", function(_ref16) {
                                var name = _ref16.name;
                                return "d2VDTNavItem".concat(activeItem == name ? " d2Selected" : "")
                            }).html(function(_ref17) {
                                return _ref17.text
                            }).attr("title", function(_ref18) {
                                var text = _ref18.text;
                                return "Show ".concat(text, " as primary value")
                            }).on("click", function(_ref19) {
                                var name = _ref19.name;
                                _this4.navRef.TreeRef.apiService.setPrimaryDisplayValue(name)
                            })
                        }
                    }
                }, {
                    key: "renderScale",
                    value: function() {
                        var _this5 = this,
                            div = d3.select(this.props.scaleDiv);
                        if (div.selectAll("*").remove(), !this.props.valueDisplayVisibility) {
                            var activeItem = this.props.scale,
                                scaleList = this.props.scalesList || this.props.scalesListDefault,
                                scaleListObj = [];
                            scaleList.forEach(function(scale) {
                                _this5.props.scales[scale] && scaleListObj.push({
                                    name: scale,
                                    caption: _this5.props.scales[scale].caption
                                })
                            }), div.selectAll("div").data(scaleListObj).enter().append("div").attr("class", function(d) {
                                return "d2VDTNavItem".concat(activeItem == d.name ? " d2Selected" : "")
                            }).html(function(d) {
                                return d.caption
                            }).attr("title", function(d) {
                                return "Show auto-scaled nodes in ".concat(d.caption)
                            }).on("click", function(d) {
                                _this5.navRef.TreeRef.apiService.setScale(d.name)
                            })
                        }
                    }
                }, {
                    key: "renderAssumpList",
                    value: function() {
                        var _this6 = this,
                            div = d3.select(this.props.assumpDiv);
                        (div.selectAll("*").remove(), this.props.assumpVisibility) || div.selectAll("div").data(this.navRef.getList(this.props.assumpList, this.props.filterLists)).enter().append("div").attr("class", function(_ref20) {
                            return _ref20.name ? "d2VDTNavItem" : "d2VDTNavTextItem"
                        }).html(function(d) {
                            var value = d.name ? d[_this6.props.primaryDisplayValue].act : 0,
                                edit = (_this6.props.simDisp[d.simName] || {}).text || "",
                                title = d.name ? "".concat(d.tPrefix + d.title, " ").concat(edit ? '<span class="d2VDTEdit">'.concat(edit, "</span>") : "") : "",
                                valText = value ? d.enableEnumList ? core.a.formatEnumVal(value, d).join(", ") : ("A" == d.aMeth && "per" != _this6.props.primaryDisplayValue ? "Avg. " : "") + core.a.formatVal(value, d, _this6.props.scales[d.scale], null, null, _this6.props.negativeDisplay, _this6.props.zeroDisplay, _this6.props.thousandSeparator, _this6.props.decimalSeparator) : "";
                            return d.name ? '<div class="d2VDTNavItemTitle" title="'.concat(d.tPrefix).concat(d.title, '">').concat(title, '</div><div class="d2VDTNavItemValue" title="').concat(valText, '">').concat(valText, "</div>") : d.title
                        }).on("click", this.navRef.setFocus)
                    }
                }, {
                    key: "renderKpiList",
                    value: function() {
                        var _this7 = this,
                            div = d3.select(this.props.kpiDiv);
                        (div.selectAll("*").remove(), this.props.kpiVisibility) || div.selectAll("div").data(this.navRef.getList(this.props.kpiList, this.props.filterLists)).enter().append("div").attr("class", function(_ref21) {
                            return _ref21.name ? "d2VDTNavItem" : "d2VDTNavTextItem"
                        }).html(function(d) {
                            var value = d.name ? d[_this7.props.primaryDisplayValue].act : 0,
                                edit = (_this7.props.simDisp[d.simName] || {}).text || "",
                                title = d.name ? "".concat(d.tPrefix + d.title, " ").concat(edit ? '<span class="d2VDTEdit">'.concat(edit, "</span>") : "") : "",
                                valText = value ? d.enableEnumList ? core.a.formatEnumVal(value, d).join(", ") : ("A" == d.aMeth && "per" != _this7.props.primaryDisplayValue ? "Avg. " : "") + core.a.formatVal(value, d, _this7.props.scales[d.scale], null, null, _this7.props.negativeDisplay, _this7.props.zeroDisplay, _this7.props.thousandSeparator, _this7.props.decimalSeparator) : "";
                            return d.name ? '<div class="d2VDTNavItemTitle" title="'.concat(d.tPrefix).concat(d.title, '">').concat(title, '</div><div class="d2VDTNavItemValue" title="').concat(valText, '">').concat(valText, "</div>") : d.title
                        }).on("click", this.navRef.setFocus)
                    }
                }, {
                    key: "renderConstraintsList",
                    value: function() {
                        var _this8 = this,
                            div = d3.select(this.props.constraintsDiv);
                        if (div.selectAll("*").remove(), !this.props.constraintsVisibility) {
                            var field = this.props.primaryDisplayValue,
                                data = this.navRef.getList(this.props.constraintsList[0] ? this.props.constraintsList : this.props.constraints, this.props.filterLists, this.props.constraintsSort);
                            this.props.constraintsSort && (data = data.sort(function(a, b) {
                                return b[field].util - a[field].util
                            })), div.selectAll("div").data(data).enter().append("div").attr("class", function(d) {
                                return d.name ? "d2VDTNavItem".concat(d.name && (d[field].util > 100 || d[field].minUtil < 100) ? " d2VDTStatusRed" : "") : "d2VDTNavTextItem"
                            }).html(function(d) {
                                var value = d[field] ? d[field].act : 0,
                                    title = d.name ? "".concat(d.tPrefix + d.title, " (").concat(jquery.isNumeric(d.minCap) ? "Min ".concat(core.a.formatVal(d[field].minCap, d, _this8.props.scales[d.scale], null, null, _this8.props.negativeDisplay, "0", _this8.props.thousandSeparator, _this8.props.decimalSeparator)) : "").concat(jquery.isNumeric(d.max) ? "".concat(jquery.isNumeric(d.minCap) ? "/" : "", "Max ").concat(core.a.formatVal(d[field].capacity, d, _this8.props.scales[d.scale], null, null, _this8.props.negativeDisplay, "0", _this8.props.thousandSeparator, _this8.props.decimalSeparator)) : "", ")") : "",
                                    valText = core.a.formatVal(value, d, _this8.props.scales[d.scale], null, null, _this8.props.negativeDisplay, "", _this8.props.thousandSeparator, _this8.props.decimalSeparator);
                                return d.name ? '<div class="d2VDTNavItemTitle" title="'.concat(title, '">').concat(title, ' </div><div class="d2VDTNavItemValue" title="').concat(valText, '">').concat(valText, "</div>") : d.title
                            }).on("click", this.navRef.setFocus)
                        }
                    }
                }, {
                    key: "rendervisualization",
                    value: function() {
                        var _this9 = this,
                            div = d3.select(this.props.visualizationDisplayDiv),
                            visualizationViewDiv = d3.select(this.props.visualizationViewDiv);
                        if (this.props.visualizationVisibility) return div.selectAll("*").remove(), void visualizationViewDiv.selectAll("*").remove();
                        var visualization = this.props.visualization,
                            navItems = div.selectAll("div").data(this.props.visualizations);
                        navItems.enter().append("div"), navItems.classed({
                            d2VDTNavItem: !0
                        }).classed("d2Selected", function(data) {
                            return data === visualization
                        }).text(function(data) {
                            return data
                        }).on("click", function(val) {
                            _this9.navRef.TreeRef.apiService.setVisualization(val)
                        });
                        var treeStyle = this.props.tableStyle,
                            nodeStyle = this.props.nodeStyle,
                            tableStyleNavItems = visualizationViewDiv.selectAll("div").data(function() {
                                if (visualizationViewDiv.classed({
                                        d2VDTNav3Col: !0
                                    }), "Table" === visualization) return _this9.props.tableStyleTexts;
                                if ("Tree" === visualization) {
                                    var visualStyleList = _this9.props.visualStyleList || _this9.props.visualStyleListDefault;
                                    return _this9.props.visualStyleTexts.filter(function(_ref22) {
                                        var name = _ref22.name;
                                        return (visualStyleList || []).includes(name)
                                    })
                                }
                            });
                        tableStyleNavItems.exit().remove(), tableStyleNavItems.enter().append("div"), tableStyleNavItems.classed({
                            d2VDTNavItem: !0
                        }).classed("d2Selected", function(data) {
                            return "Table" === visualization ? data.name === treeStyle : "Tree" === visualization ? data.name === nodeStyle : void 0
                        }).text(function(data) {
                            return data.text
                        }).attr("title", function(data) {
                            return data.caption
                        }).on("click", function(val) {
                            "Table" === visualization && _this9.navRef.TreeRef.apiService.setTableStyle(val.name), "Tree" === visualization && _this9.navRef.TreeRef.apiService.setNodeStyle(val.name)
                        })
                    }
                }]) && navPanelRendererService_defineProperties(Constructor.prototype, protoProps), staticProps && navPanelRendererService_defineProperties(Constructor, staticProps), NavPanelRendererService
            }();

            function navPanelComponent_typeof(obj) {
                return (navPanelComponent_typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
                    return typeof obj
                } : function(obj) {
                    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
                })(obj)
            }

            function navPanelComponent_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }

            function navPanelComponent_getPrototypeOf(o) {
                return (navPanelComponent_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function(o) {
                    return o.__proto__ || Object.getPrototypeOf(o)
                })(o)
            }

            function navPanelComponent_setPrototypeOf(o, p) {
                return (navPanelComponent_setPrototypeOf = Object.setPrototypeOf || function(o, p) {
                    return o.__proto__ = p, o
                })(o, p)
            }

            function navPanelComponent_assertThisInitialized(self) {
                if (void 0 === self) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return self
            }

            function navPanelComponent_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var navPanelComponent_NavPanel = function(_VDTBase) {
                function NavPanel(config) {
                    var _this, self, call;
                    return function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, NavPanel), self = this, call = navPanelComponent_getPrototypeOf(NavPanel).call(this, config, NavPanel.visualCount++), _this = !call || "object" !== navPanelComponent_typeof(call) && "function" != typeof call ? navPanelComponent_assertThisInitialized(self) : call, navPanelComponent_defineProperty(navPanelComponent_assertThisInitialized(navPanelComponent_assertThisInitialized(_this)), "noRefreshRequired", ["setFocusNode", "setScenario", "deleteScenario", "createScenario", "showCompareScenarios", "setTopNode", "setPeriodColumn", "setPrimaryDisplayValue", "setScale"]), navPanelComponent_defineProperty(navPanelComponent_assertThisInitialized(navPanelComponent_assertThisInitialized(_this)), "props", void 0), navPanelComponent_defineProperty(navPanelComponent_assertThisInitialized(navPanelComponent_assertThisInitialized(_this)), "refreshRequired", !0), navPanelComponent_defineProperty(navPanelComponent_assertThisInitialized(navPanelComponent_assertThisInitialized(_this)), "navPanelRendererService", void 0), navPanelComponent_defineProperty(navPanelComponent_assertThisInitialized(navPanelComponent_assertThisInitialized(_this)), "TreeRef", void 0), navPanelComponent_defineProperty(navPanelComponent_assertThisInitialized(navPanelComponent_assertThisInitialized(_this)), "eventCallback", function(topic, propsChanged) {
                        _this.render(new Set(propsChanged || []))
                    }), navPanelComponent_defineProperty(navPanelComponent_assertThisInitialized(navPanelComponent_assertThisInitialized(_this)), "render", function(propsChanged) {
                        var props = _this.props,
                            refProps = _this.TreeRef.props;
                        props.scale = refProps.scale, props.scales = refProps.scales, props.scales.X = _this.props.scales[props.scale], props.zeroDisplay = refProps.zeroDisplay, props.decimalSeparator = refProps.decimalSeparator, props.thousandSeparator = refProps.thousandSeparator, props.negativeDisplay = refProps.negativeDisplay, props.displayValueText = refProps.displayValueText, props.scenarios = refProps.scenarios || [], props.activeScenario = refProps.activeScenario, props.activeTopNode = refProps.activeTopNode || (refProps.derivedTreeConfig[0] ? refProps.derivedTreeConfig[0].name.slice(1) : ""), props.PeriodColumn = refProps.PeriodColumn, props.PeriodToColumn = refProps.PeriodToColumn, props.periods = refProps.periods, props.periodsMetadata = refProps.periodsMetadata, props.primaryDisplayValue = refProps.primaryDisplayValue, props.simDisp = refProps.simDisp, props.constraints = refProps.constraints, props.visualization = refProps.visualization, props.tableStyle = refProps.tableStyle, props.nodeStyle = refProps.nodeStyle, props.disableDownload = refProps.disableDownload, _this.applyTheme(), jquery.each(props.panels, function(i, s) {
                            var val = "";
                            "collapsed" == props["".concat(s, "Visibility")] && refProps && (val = function() {
                                switch (s) {
                                    case "scenarios":
                                        return (props.scenarios.reduce(function(l, v) {
                                            return v.name == refProps.activeScenario ? v : l
                                        }) || {}).title;
                                    case "topNode":
                                        var topNode = refProps.activeTopNode || (refProps.derivedTreeConfig[0] ? refProps.derivedTreeConfig[0].name.slice(1) : "");
                                        return (refProps.nodes["N".concat(topNode)] || {}).title || topNode;
                                    case "periods":
                                        return "".concat(refProps.periodsMetadata[refProps.PeriodColumn - 1].text, " to ").concat(refProps.periodsMetadata[refProps.PeriodToColumn - 1].text);
                                    case "valueDisplay":
                                        return "".concat(refProps.displayValueText[refProps.primaryDisplayValue].long, " | ").concat(refProps.scale);
                                    case "visualization":
                                        var styleName = "Table" === refProps.visualization ? props.tableStyle : props.nodeStyle,
                                            styleText = props.visualStyleTexts.find(function(s) {
                                                return s.name === styleName
                                            }).text;
                                        return "".concat(refProps.visualization, " | ").concat(styleText)
                                }
                            }()), jquery(props["".concat(s, "TitleDiv")]).removeClass("collapsed hidden").addClass(props.showTitles ? props["".concat(s, "Visibility")] : "hidden"), jquery(props["".concat(s, "TitleText")]).html(" ".concat(props["".concat(s, "Title")]).concat(val ? "<span>".concat(val, "</span>") : "")), jquery(props["".concat(s, "Div")]).removeClass("hidden").addClass(props["".concat(s, "Visibility")] ? "hidden" : ""), jquery(props["".concat(s, "Div")]).next(".sectionFooter").removeClass("hidden").addClass(props["".concat(s, "Visibility")] ? "hidden" : "")
                        }), jquery(props.scaleDiv).removeClass("hidden").addClass(props.valueDisplayVisibility ? "hidden" : ""), jquery(props.visualStyleDiv).removeClass("hidden").addClass(props.valueDisplayVisibility ? "hidden" : ""), jquery(props.visualStyleDiv).next(".d2VDTNavFooter").removeClass("hidden").addClass(props.valueDisplayVisibility ? "hidden" : ""), jquery(props.exportsExcelDiv).removeClass("download-disabled").addClass("".concat(props.disableDownload ? "download-disabled" : "")), _this.navPanelRendererService.render()
                    }), navPanelComponent_defineProperty(navPanelComponent_assertThisInitialized(navPanelComponent_assertThisInitialized(_this)), "beforeRender", function(propsChanged) {
                        _this.refreshRequired = Array.from(propsChanged).some(function(propName) {
                            return !_this.noRefreshRequired.includes(propName)
                        }), _this.render(propsChanged)
                    }), navPanelComponent_defineProperty(navPanelComponent_assertThisInitialized(navPanelComponent_assertThisInitialized(_this)), "setFocus", function(_ref) {
                        var name = _ref.name;
                        name && _this.TreeRef.apiService.setFocusNode(name.substr(1))
                    }), navPanelComponent_defineProperty(navPanelComponent_assertThisInitialized(navPanelComponent_assertThisInitialized(_this)), "setVisibility", function(_ref2) {
                        var data = _ref2.data,
                            name = "".concat(data.name, "Visibility");
                        _this.props[name] = _this.props[name] ? "" : "collapsed", _this.firePropertiesChanged([name])
                    }), _this.props = _this.getBaseProps(), _this.propsChangedHandler(_this.beforeRender), _this.init(config), _this
                }
                var Constructor, protoProps, staticProps;
                return function(subClass, superClass) {
                    if ("function" != typeof superClass && null !== superClass) throw new TypeError("Super expression must either be null or a function");
                    subClass.prototype = Object.create(superClass && superClass.prototype, {
                        constructor: {
                            value: subClass,
                            writable: !0,
                            configurable: !0
                        }
                    }), superClass && navPanelComponent_setPrototypeOf(subClass, superClass)
                }(NavPanel, vdtBase_VDTBase), Constructor = NavPanel, (protoProps = [{
                    key: "init",
                    value: function(config) {
                        this.TreeRef = registry[this.props.valueDriverTree] || null, this.navPanelRendererService = new navPanelRendererService_NavPanelRendererService(this) || this.navPanelRendererService, this.initDomAndEventHandlers(config), this.render(), this.eventService.subscribe(this.TreeRef.id, "propsChanged", this.eventCallback)
                    }
                }, {
                    key: "applyTheme",
                    value: function() {
                        var props = this.props,
                            theme = props.theme;
                        if (!props.container.hasClass(theme)) {
                            var prevTheme = "dark" == theme ? "light" : "dark";
                            props.container.removeClass(prevTheme).addClass(theme)
                        }
                    }
                }, {
                    key: "updateProps",
                    value: function(properties) {
                        this.firePropertiesChanged(properties)
                    }
                }, {
                    key: "getList",
                    value: function(list, filter, removeText) {
                        var _this2 = this;
                        if (list = list.map(function(v) {
                                var d = _this2.TreeRef.props.nodes["N".concat(v)];
                                return d || {
                                    title: v
                                }
                            }), filter || removeText) {
                            list = list.reduce(function(l, d) {
                                return d.name && !_this2.isVisible(d) || l.push(d), l
                            }, []);
                            var i = 1;
                            return list.reduce(function(l, d) {
                                return (d.name || !removeText && list[i] && list[i].name) && l.push(d), i += 1, l
                            }, [])
                        }
                        return list
                    }
                }, {
                    key: "initDomAndEventHandlers",
                    value: function(config) {
                        var props = this.props;
                        props.container = jquery(document.createElement("div")), props.container.attr("id", this.id).addClass("d2VDT d2VDTNavBg"), props.navDiv = document.createElement("DIV"), jquery(props.navDiv).addClass("d2VDTNavCtr").appendTo(props.container), jquery(this.parentContainer).append(props.container), this.createDefaultPanels()
                    }
                }, {
                    key: "createDefaultPanels",
                    value: function() {
                        var _this3 = this,
                            props = this.props;
                        jquery.each(this.props.panels, function(i, s) {
                            switch (props["".concat(s, "Section")] = _this3.createDiv(_this3.props.navDiv, "d2VDTSection ".concat(s)), props["".concat(s, "TitleDiv")] = _this3.createDiv(props["".concat(s, "Section")], "sectionHeader", null, null, _this3.setVisibility, {
                                name: s
                            }), _this3.createDiv(props["".concat(s, "TitleDiv")], "d2NavPanelIcon ".concat(s)), props["".concat(s, "TitleText")] = _this3.createDiv(props["".concat(s, "TitleDiv")], "d2VDTNavTitleText"), _this3.createDiv(props["".concat(s, "TitleDiv")], "navToggle", null, null, null), s) {
                                case "scenarios":
                                    props.scenariosDiv = _this3.createDiv(props["".concat(s, "Section")], "col-1 ".concat(s)), props.scenariosFooter = _this3.createDiv(props["".concat(s, "Section")], "sectionFooter"), _this3.createDiv(props.scenariosTitleDiv, "d2VDTIconButton newScenario", "Create a new scenario as a copy of the current one and make it the active scenario", null, function(e) {
                                        e.stopPropagation(), _this3.TreeRef.apiService.createScenario()
                                    }), props.compareScenarioDiv = _this3.createDiv(props.scenariosTitleDiv, "d2VDTIconButton compareScenario", "Compare scenarios in collection", null, function(e) {
                                        e.stopPropagation();
                                        var assumpList = _this3.getList(props.assumpList, props.filterLists).map(function(_ref3) {
                                                var name = _ref3.name,
                                                    title = _ref3.title;
                                                return name ? name.substr(1) : title
                                            }),
                                            kpiList = _this3.getList(props.kpiList, props.filterLists).map(function(_ref4) {
                                                var name = _ref4.name,
                                                    title = _ref4.title;
                                                return name ? name.substr(1) : title
                                            });
                                        _this3.TreeRef.apiService.showCompareScenarios({
                                            topNode: props.activeTopNode,
                                            assumpTitle: props.assumpTitle,
                                            assumpList: assumpList,
                                            kpiTitle: props.kpiTitle,
                                            kpiList: kpiList
                                        }), _this3.fireEvent("onCompareClick")
                                    }), props.exportsExcelDiv = _this3.createDiv(props.scenariosTitleDiv, "d2VDTIconButton export-excel", "Download scenario data as a Microsoft Excel-compatible XML file", null, function(e) {
                                        e.stopPropagation(), !_this3.props.disableDownload && _this3.TreeRef.exportSeriesToExcel()
                                    });
                                    break;
                                case "topNode":
                                    props.topNodeDiv = _this3.createDiv(props["".concat(s, "Section")], "col-multi");
                                    break;
                                case "periods":
                                    props.periodsDiv = _this3.createDiv(props["".concat(s, "Section")], "col-multi");
                                    break;
                                case "valueDisplay":
                                    props.valueDisplayDiv = _this3.createDiv(props["".concat(s, "Section")], "col-multi"), props.primaryDisplayValueDiv = _this3.createDiv(props.valueDisplayDiv, "col-multi periodsAgg"), props.valueDisplayFooter = _this3.createDiv(props["".concat(s, "Section")], "sectionFooter"), props.scaleDiv = _this3.createDiv(props.valueDisplayFooter, "col-multi");
                                    break;
                                case "visualization":
                                    props.visualizationDiv = _this3.createDiv(props["".concat(s, "Section")], "col-multi"), _this3.createDiv(props.visualizationDiv, "sectionLabel", null, "Display"), props.visualizationDisplayDiv = _this3.createDiv(props.visualizationDiv, "col-multi displayMode"), _this3.createDiv(props.visualizationDiv, "sectionLabel", null, "View Mode"), props.visualizationViewDiv = _this3.createDiv(props.visualizationDiv, "col-multi");
                                    break;
                                default:
                                    props["".concat(s, "Div")] = _this3.createDiv(props["".concat(s, "Section")], "col-1 nodeValues"), props["".concat(s, "Footer")] = _this3.createDiv(props["".concat(s, "Section")], "sectionFooter")
                            }
                        }), props.editInputsDiv = this.createDiv(props.assumpTitleDiv, "d2VDTIconButton editInputs", "Edit key inputs in a tabular format", null, function(e) {
                            e.stopPropagation();
                            var assumpList = _this3.getList(props.assumpList, props.filterLists).map(function(_ref5) {
                                var name = _ref5.name,
                                    title = _ref5.title;
                                return name ? name.substr(1) : title
                            });
                            _this3.TreeRef.apiService.showEditInputs(assumpList), _this3.fireEvent("onShowEditInputsClick")
                        }), props.setPeriodToDiv = this.createDiv(props.periodsTitleDiv, "d2VDTIconButton setPeriodTo", "Click this and period to set end period for simulation", null, function(e) {
                            e.stopPropagation(), _this3.props.setPeriodTo = !_this3.props.setPeriodTo, jquery(props.setPeriodToDiv).toggleClass("d2Selected", _this3.props.setPeriodTo)
                        }), core.a.attachScroll(this.props.container)
                    }
                }, {
                    key: "createDiv",
                    value: function(addToEl, cssClass, title, html, onClick, onClickParam) {
                        var el = document.createElement("DIV");
                        return cssClass && jquery(el).addClass(cssClass), title && jquery(el).attr("title", title), addToEl && jquery(el).appendTo(addToEl), onClick && jquery(el).click(onClickParam || {}, onClick), html && jquery(el).html(html), el
                    }
                }, {
                    key: "isVisible",
                    value: function(d) {
                        var topNode = this.TreeRef.props.activeTopNode ? "N".concat(this.TreeRef.props.activeTopNode) : "";
                        return !topNode || d.name == topNode || !d || this.getPath(d).includes(topNode)
                    }
                }, {
                    key: "getPath",
                    value: function(d) {
                        var path = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [];
                        return d && d.parent ? (path.push(d.parent.name), this.getPath(d.parent, path)) : path
                    }
                }]) && navPanelComponent_defineProperties(Constructor.prototype, protoProps), staticProps && navPanelComponent_defineProperties(Constructor, staticProps), NavPanel
            }();
            navPanelComponent_defineProperty(navPanelComponent_NavPanel, "visualCount", 0);
            __webpack_require__(118), __webpack_require__(119), __webpack_require__(120);

            function composeVisual_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }
            var ComposeVisual = function ComposeVisual() {
                ! function(instance, Constructor) {
                    if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                }(this, ComposeVisual)
            };
            composeVisual_defineProperty(ComposeVisual, "composeEvent", new eventService_EventService("ComposeVisual")), composeVisual_defineProperty(ComposeVisual, "createVisual", function(config) {
                var instance;
                switch (config.type) {
                    case "tree":
                        instance = new vdtComponent_Tree(config);
                        break;
                    case "navpanel":
                        instance = new navPanelComponent_NavPanel(config)
                }
                return registry[instance.id] = instance, ComposeVisual.composeEvent.publish("visualCreated", instance), registry[instance.id]
            });

            function vdtDefaults_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }
            var vdtDefaults_VdtDefaults = function() {
                function VdtDefaults() {
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, VdtDefaults)
                }
                var Constructor, protoProps, staticProps;
                return Constructor = VdtDefaults, staticProps = [{
                    key: "getTreeProps",
                    value: function() {
                        return TreeDefault.getConfigurableProps()
                    }
                }, {
                    key: "getNavPanelProps",
                    value: function() {
                        return NavPanelDefault.getConfigurableProps()
                    }
                }], (protoProps = null) && vdtDefaults_defineProperties(Constructor.prototype, protoProps), staticProps && vdtDefaults_defineProperties(Constructor, staticProps), VdtDefaults
            }();

            function _objectSpread(target) {
                for (var i = 1; i < arguments.length; i++) {
                    var source = null != arguments[i] ? arguments[i] : {},
                        ownKeys = Object.keys(source);
                    "function" == typeof Object.getOwnPropertySymbols && (ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym) {
                        return Object.getOwnPropertyDescriptor(source, sym).enumerable
                    }))), ownKeys.forEach(function(key) {
                        treeUtils_defineProperty(target, key, source[key])
                    })
                }
                return target
            }

            function treeUtils_defineProperty(obj, key, value) {
                return key in obj ? Object.defineProperty(obj, key, {
                    value: value,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : obj[key] = value, obj
            }

            function treeUtils_defineProperties(target, props) {
                for (var i = 0; i < props.length; i++) {
                    var descriptor = props[i];
                    descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
                }
            }
            var TreeUtils = function() {
                function TreeUtils() {
                    ! function(instance, Constructor) {
                        if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
                    }(this, TreeUtils)
                }
                var Constructor, protoProps, staticProps;
                return Constructor = TreeUtils, staticProps = [{
                    key: "getDefaultNode",
                    value: function() {
                        return {
                            aMeth: "S",
                            cMeth: "",
                            dec: 0,
                            derived: "",
                            deriveChildren: !1,
                            derivedSim: "",
                            descr: "",
                            detailPageType: "DEFAULT",
                            footer: "",
                            formula: "",
                            header: "",
                            hideStatus: "",
                            lSimNode: "",
                            level: 0,
                            linkNode: "",
                            locked: "",
                            manAct: "",
                            manTgt: "",
                            max: null,
                            min: null,
                            name: "TOP",
                            noDetail: "",
                            notes: "",
                            prefix: "",
                            sMeth: "",
                            scale: "X",
                            style: "",
                            suffix: "",
                            tPrefix: "",
                            title: "Node Title",
                            tmplNode: "",
                            tmplPrefix: "",
                            tmplTPrefix: "",
                            trend: "X",
                            rowMap: "",
                            wAvgNode: ""
                        }
                    }
                }, {
                    key: "addNewNode",
                    value: function(parentNode, treeMap, options) {
                        var node = TreeUtils.getDefaultNode();
                        if (parentNode) {
                            Object.keys(node).map(function(prop) {
                                node[prop] = parentNode[prop]
                            }), node.title = "Copy of ".concat(node.title), node.level += 1, node.parent = parentNode.name, node.__expanded = !1;
                            var name = parseInt(node.name);
                            for (name = (isNaN(name) ? 0 : name) + 1; treeMap[name];) name += 1;
                            node.name = name + "", parentNode.children || (parentNode.children = []), parentNode.__expanded = !0, parentNode.children.push(node)
                        }
                        return options && Object.keys(options).map(function(key) {
                            ("name" !== key || "name" === key && !treeMap[options[key]]) && (node[key] = options[key])
                        }), treeMap[node.name] = node, node
                    }
                }, {
                    key: "deleteNode",
                    value: function(nodeToDelete, treeMap) {
                        if (nodeToDelete) {
                            var node, delNodes = TreeUtils.getFlatDataFromTree(nodeToDelete, void 0, !0),
                                msgList = [];
                            if (Object.keys(treeMap).map(function(name) {
                                    if (node = treeMap[name], !delNodes.includes(name)) {
                                        var msg = name + ": " + node.title + " is referencing one of the nodes to be deleted ";
                                        delNodes.includes(node.wAvgNode) && msgList.push(msg + "as weighted average."), delNodes.includes(node.lSimNode) && msgList.push(msg + "as a linked simulation."), delNodes.includes(node.linkNode) && msgList.push(msg + "as a linked node."), node.formula && delNodes.map(function(name) {
                                            node.formula.indexOf("{" + name + "}") >= 0 && msgList.push(msg + "in the formula. The node is " + name)
                                        })
                                    }
                                }), 0 === msgList.length) {
                                for (var parentNode = treeMap[nodeToDelete.parent], children = parentNode.children, len = children.length, i = 0; i < len; i++)
                                    if (children[i].name === nodeToDelete.name) {
                                        children.splice(i, 1);
                                        break
                                    } delNodes.map(function(name) {
                                    delete treeMap[name]
                                }), 0 === parentNode.children.length && (parentNode.__expanded = !1, delete parentNode.children)
                            }
                            return msgList.length ? msgList : null
                        }
                    }
                }, {
                    key: "getTreeFromFlatData",
                    value: function(treeConfig) {
                        var expandedLevels = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                            len = treeConfig && Array.isArray(treeConfig) ? treeConfig.length : 0;
                        if (!len) return null;
                        var root = _objectSpread({}, treeConfig[0]);
                        root.level = Number(root.level);
                        var node, treeMap = treeUtils_defineProperty({}, root.name, root),
                            i = 0,
                            queue = [],
                            level = 0,
                            prevNode = root;
                        for (root.__expanded = !0, i = 1; i < len; i++)(node = _objectSpread({}, treeConfig[i])).level = Number(node.level), level = node.level > prevNode.level ? queue.push(prevNode) - 1 : node.level < prevNode.level ? (queue.length = node.level) - 1 : level, (queue[level].children = queue[level].children || []).push(node), treeMap[node.name] = node, node.__expanded = node.level <= expandedLevels, node.parent = queue[level].name, prevNode = node;
                        return queue = null, {
                            treeHier: root,
                            treeMap: treeMap
                        }
                    }
                }, {
                    key: "getFlatDataFromTree",
                    value: function(subTree) {
                        var flatArr = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [],
                            onlyName = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
                            keysToKeep = arguments.length > 3 ? arguments[3] : void 0;
                        if (!subTree) return [];
                        if (!subTree._isDynamic) {
                            if (onlyName) flatArr.push(subTree.name);
                            else {
                                var node = {};
                                (keysToKeep = keysToKeep || Object.keys(TreeUtils.getDefaultNode())).map(function(key) {
                                    node[key] = subTree[key]
                                }), flatArr.push(node)
                            }(subTree.children || []).map(function(child) {
                                return TreeUtils.getFlatDataFromTree(child, flatArr, onlyName, keysToKeep)
                            })
                        }
                        return flatArr
                    }
                }, {
                    key: "addSubTreeBelow",
                    value: function(parentNode, childIndex, subTreeRoot, treeMap) {
                        if (!parentNode || null == subTreeRoot.parent || parentNode.name === subTreeRoot.name) return !1;
                        for (var pNode = parentNode; 0 !== pNode.level && pNode.level >= subTreeRoot.level;) {
                            if (pNode.name == subTreeRoot.name) return !1;
                            pNode = treeMap[pNode.parent]
                        }
                        for (var level = parentNode.level, children = treeMap[subTreeRoot.parent].children, len = children.length, i = 0; i < len; i++)
                            if (children[i].name === subTreeRoot.name) {
                                children.splice(i, 1);
                                break
                            } return function updateSubtreeLevel(node, level) {
                            node.level = level, (node.children || []).map(function(childNode) {
                                return updateSubtreeLevel(childNode, level + 1)
                            })
                        }(subTreeRoot, level + 1), subTreeRoot.parent = parentNode.name, parentNode.__expanded = !0, parentNode.children || (parentNode.children = []), parentNode.children.splice(childIndex, 0, subTreeRoot), !0
                    }
                }], (protoProps = null) && treeUtils_defineProperties(Constructor.prototype, protoProps), staticProps && treeUtils_defineProperties(Constructor, staticProps), TreeUtils
            }();
            __webpack_require__.d(__webpack_exports__, "registry", function() {
                return registry
            }), __webpack_require__.d(__webpack_exports__, "ComposeVisual", function() {
                return ComposeVisual
            }), __webpack_require__.d(__webpack_exports__, "version", function() {
                return "1.0.3"
            }), __webpack_require__.d(__webpack_exports__, "Utils", function() {
                return utils_Utils
            }), __webpack_require__.d(__webpack_exports__, "VdtDefaults", function() {
                return vdtDefaults_VdtDefaults
            }), __webpack_require__.d(__webpack_exports__, "TreeUtils", function() {
                return TreeUtils
            })
        }])
    }, "object" == typeof exports && "object" == typeof module ? module.exports = factory() : "function" == typeof define && define.amd ? define([], factory) : "object" == typeof exports ? exports.Vdt = factory() : root.Vdt = factory()
}();